!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WIND=e():t.WIND=e()}(this,(function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}([function(t,e,i){t.exports=i(65)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"h",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"g",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"e",(function(){return h})),i.d(e,"f",(function(){return u})),i.d(e,"d",(function(){return c}));var r={PURE_COLOR:1,GRADIENT_COLOR:2};Object.freeze(r);var n={CONTROL:1,ROAMING:2,SECTION:4,MEASURE:8};n.ALL=n.CONTROL|n.ROAMING|n.SECTION|n.MEASURE,Object.freeze(n);var o={UNKNOWN:0,DATALOAD_GEOMETRY_CHANGED:1,DATALOAD_MODEL_PARAMETER_FINISHED:2,SINGLE_PICKED:20,DISPLAYTREE_CREATED:21,DISPLAYTREE_UPDATED:22,ROAMINGSTATE_CHANGED:25,SECTIONSTATE_CHANGED:50,MEASURESTATE_CHANGED:90,PUSHPINNODE_MOUSEIN:100,PUSHPINNODE_MOUSEOUT:101,PUSHPINNODE_MOUSEPICK:102,WEBGLCONTEXT_LOST:200};Object.freeze(o);var a={PROJECT_NAME:1,STOREY_NAME:2,TYPE_NAME:3,DOMAIN_NAME:4,CATEGORY_NAME:5,COMPONENT_NAME:6,COMPONENT_UNIQUEID:7,COMPONENT_ORIGINID:8,COMPONENT_NAME_ORIGINID:9};Object.freeze(a);var s={UNCHECKED:1,PARTIALLYCHECKED:2,CHECKED:3};Object.freeze(s);var h={PICK:1,ROTATE:2,PAN:3};Object.freeze(h);var u={VIEW:0,DOT:1,DISTANCE:2,ANGLE:4,LENGTH:5};Object.freeze(u);var c={BottomPart:1,TopPart:2,FrontPart:3,BackPart:4,LeftPart:5,RightPart:6};Object.freeze(c)},function(t,e){function i(t,e,i,r,n,o,a){try{var s=t[o](a),h=s.value}catch(t){return void i(t)}s.done?e(h):Promise.resolve(h).then(r,n)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,h,"next",t)}function h(t){i(a,n,o,s,h,"throw",t)}s(void 0)}))}}},,function(t,e,i){var r=i(78),n=i(79),o=i(80);t.exports=function(t,e){return r(t)||n(t,e)||o()}},,,,,function(t,e,i){"use strict";var r=i(53),n=i(82),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function h(t){return"[object Function]"===o.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:n,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:h,isStream:function(t){return s(t)&&h(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function t(){var e={};function i(i,r){"object"==typeof e[r]&&"object"==typeof i?e[r]=t(e[r],i):e[r]=i}for(var r=0,n=arguments.length;r<n;r++)u(arguments[r],i);return e},extend:function(t,e,i){return u(e,(function(e,n){t[n]=i&&"function"==typeof e?r(e,i):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},,,function(t,e,i){t.exports=i(81)},function(t,e,r){"use strict";r.r(e);var n=r(4),o=r.n(n),a=r(0),s=r.n(a),h=r(2),u=r.n(h),c=r(12),l=r.n(c),g={SHPERE_TESSELLATION:12,CYLINDER_TESSELLATION:8,CONE_TESSELLATION:8,EPSILON:1e-6};g.RANDOM=Math.random,g.PI=3.141592653589793,g.PI_2=1.5707963267948966,g.PI_4=.7853981633974483,g.PI_6=.5235987755982988,g.PI_12=.2617993877991494,g._2_PI=6.283185307179586,g.METER_PER_MILLIMETER=1e3,g.MILLIMETER_PER_METER=.001,g.CENTIMETER_PER_MILLIMETER=10,g.FOOT_PER_MILLIMETER=304.8,g.INCH_PER_MILLIMETER=25.4,g.YARD_PER_MILLIMETER=914.4,g.MICROMETER_PER_MILLIMETER=.001,g.MIL_PER_MILLIMETER=.0254,g.FOOT_PER_METER=.3048,g.METER_PER_FOOT=3.2808398950131,g.MILLIMETER_PER_FOOT=.0032808398950131,g.KILOMETER_PER_METER=1e3,g.MILE_PER_METER=1609.344,g.SECOND_PER_MILLISECOND=1e3,g.MILLISECOND_PER_SECOND=.001,g.INSIDE=1,g.INTERSECT=2,g.OUTSIDE=3,g.MAX_POLYTOPE_INTERSECTIUON_NUMBER=6,g.SHAPE_TESSELLATION_LEVEL=12,g.between=function(t,e,i){return Math.min(Math.max(t,e),i)},g.radian_to_degree=function(t){return 180*t/g.PI},g.degree_to_radian=function(t){return t*g.PI/180},g.is_powerof_two=function(t){return 0==(t&t-1)&&0!==t},g.next_highest_powerof_two=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1};var _=g,d=function(t){this._func=t,this._pool=[]};d.prototype={alloc:function(){return 0===this._pool.length?this._func.call(this):this._pool.pop()},free:function(t){this._pool.push(t)},collect:function(){this._pool=[]}};var A=d,p={};function I(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function f(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function C(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function m(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function v(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return i*i+r*r+n*n+o*o}function y(t){var e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function E(t){var e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}p.new=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},p.MemoryPool=new A(p.new),p.alloc=p.MemoryPool.alloc,p.free=p.MemoryPool.free,p.new_d=function(){var t=new Float64Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},p.MemoryPool_d=new A(p.new_d),p.alloc_d=p.MemoryPool_d.alloc,p.free_d=p.MemoryPool_d.free,p.clone=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},p.clone_d=function(t){var e=new Float64Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},p.create=function(t,e,i,r){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n},p.create_d=function(t,e,i,r){var n=new Float64Array(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n},p.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},p.set=function(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t},p.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},p.subtract=I,p.sub=I,p.multiply=f,p.mul=f,p.divide=C,p.div=C,p.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},p.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},p.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},p.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},p.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},p.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},p.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t},p.distance=m,p.dist=m,p.squaredDistance=v,p.sqrDist=v,p.length=y,p.len=y,p.squaredLength=E,p.sqrLen=E,p.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},p.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},p.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=i*i+r*r+n*n+o*o;a>0&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=o*a);return t},p.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},p.lerp=function(t,e,i,r){var n=e[0],o=e[1],a=e[2],s=e[3];return t[0]=n+r*(i[0]-n),t[1]=o+r*(i[1]-o),t[2]=a+r*(i[2]-a),t[3]=s+r*(i[3]-s),t},p.random=function(t,e){return e=e||1,t[0]=glMatrix.RANDOM(),t[1]=glMatrix.RANDOM(),t[2]=glMatrix.RANDOM(),t[3]=glMatrix.RANDOM(),p.normalize(t,t),p.scale(t,t,e),t},p.transformMat4=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t},p.transformQuat=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],h=i[2],u=i[3],c=u*r+s*o-h*n,l=u*n+h*r-a*o,g=u*o+a*n-s*r,_=-a*r-s*n-h*o;return t[0]=c*u+_*-a+l*-h-g*-s,t[1]=l*u+_*-s+g*-a-c*-h,t[2]=g*u+_*-h+c*-s-l*-a,t[3]=e[3],t},p.str=function(t){return"Vec4."+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},p.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},p.equals=function(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=e[0],s=e[1],h=e[2],u=e[3];return Math.abs(i-a)<=_.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-s)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-h)<=_.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-u)<=_.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))};var w=p,M={isStringType:function(t){return"string"==typeof t},isNumberType:function(t){return"number"==typeof t},rangeNumber:function(t,e,i){return t<e?e:t>i?i:t},isBooleanType:function(t){return"boolean"==typeof t},isArrayType:function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},isArrayValid:function(t){for(var e=t.length,i=0;i<e;i++)if(!t[i])return!1;return!0},unicodeToUtf8:function(t,e){var i=0;if(!t)return i;for(var r=0;r<t.length;r++){var n=t.charCodeAt(r);0<=n&&n<=127?(i+=1,e.push(n)):128<=n&&n<=2047?(i+=2,e.push(192|31&n>>6),e.push(128|63&n)):(2048<=n&&n<=55295||57344<=n&&n<=65535)&&(i+=3,e.push(224|15&n>>12),e.push(128|63&n>>6),e.push(128|63&n))}return i},utf8ToUnicode:function(t){for(var e="",i=t.length,r=0;r<i;){var n=t[r].toString(2),o=n.match(/^1+?(?=0)/);if(o&&8===n.length){for(var a=o[0].length,s=t[r].toString(2).slice(7-a),h=1;h<a;h++)s+=t[h+r].toString(2).slice(2);e+=String.fromCharCode(parseInt(s,2)),r+=a}}return e},compareArray:function(t,e){if(!t||!e)return!1;var i=t.length;if(i!==e.length)return!1;for(var r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0},compareSet:function(t,e){if(!t||!e)return!1;var i=t.size;if(i!==e.size)return!1;for(var r=t.values(),n=e.values();i--;)if(r.next().value!==n.next().value)return!1;return!0},combineBuffers:function(t){var e=0,i=t.map((function(t){return e+=t.byteLength,t.byteLength})),r=new Uint8Array(e);return i.reduce((function(e,i,n){return r.set(new Uint8Array(t[n]),e),e+i}),0),r.buffer},getSuffixName:function(t){return t.substring(t.lastIndexOf(".")+1,t.length)},checkImage:function(t){var e=t;if(!_.is_powerof_two(t.width)||!_.is_powerof_two(t.height)){var i=document.createElement("canvas");i.width=_.next_highest_powerof_two(t.width),i.height=_.next_highest_powerof_two(t.height);var r=i.getContext("2d");r.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),e=r.getImageData(0,0,i.width,i.height)}return e},normalizeColor:function(t){for(var e=w.create(1,1,1,1),i=t.length,r=0;r<i;r++)e[r]=t[r]/255;return e},unnormalizeColor:function(t){for(var e=w.create(255,255,255,255),i=t.length,r=0;r<i;r++)e[r]=255*t[r];return e}},T=0;M.getInstanceID=function(){return T++},M.resetInstanceID=function(){T=0},Object.freeze(M);var P,S,R,O,L,N,b,D,x,B,G,F,V,k,U,H,j,Y=M,z=function(t){this._serverIp=t.serverIp,this._appKey=t.appKey,this._appSecret=t.appSecret,this._needToken=void 0===t.needToken||t.needToken,this._postfix=t.postfix,this._token=void 0};z.retryCount=3,z.prototype={getToken:(j=u()(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this._token){t.next=6;break}return t.next=3,l.a.post("".concat(this._serverIp,"/api/v1/token"),{appKey:this._appKey,appSecret:this._appSecret});case 3:e=t.sent,0===(i=e.data).code?this._token=i.data.token:(this._token=void 0,console.log("REQUEST ERROR: ",i.message));case 6:return t.abrupt("return",this._token);case 7:case"end":return t.stop()}}),t,this)}))),function(){return j.apply(this,arguments)}),getJsonRequest:(H=u()(s.a.mark((function t(e){var i,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=void 0,!this._needToken){t.next=13;break}return t.next=4,this.getToken();case 4:if(t.t0=t.sent,t.t1=void 0,t.t0!==t.t1){t.next=8;break}return t.abrupt("return",void 0);case 8:return t.next=10,l.a.get(e,{headers:{"x-access-token":this._token}});case 10:i=t.sent,t.next=16;break;case 13:return t.next=15,l.a.get(e);case 15:i=t.sent;case 16:if(56!==(r=i.data).code){t.next=24;break}return this._token=void 0,t.next=21,this.getJsonRequest(e);case 21:return t.abrupt("return",t.sent);case 24:if(0!==r.code){t.next=28;break}return t.abrupt("return",r.data);case 28:return console.log("REQUEST ERROR: ",r.message),t.abrupt("return",void 0);case 30:case"end":return t.stop()}}),t,this)}))),function(t){return H.apply(this,arguments)}),getAllModelParameter:(U=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",e=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models"):"".concat(this._serverIp,"/api/v1/models"),t.next=4,this.getJsonRequest(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)}),getAllDrawingParameter:(k=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",e=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/drawings"):"".concat(this._serverIp,"/api/v1/drawings"),t.next=4,this.getJsonRequest(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)}),getModelParameter:(V=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="",i=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e):"".concat(this._serverIp,"/api/v1/models/").concat(e),t.next=4,this.getJsonRequest(i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return V.apply(this,arguments)}),getDrawingParameter:(F=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="",i=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/drawings/").concat(e):"".concat(this._serverIp,"/api/v1/drawings/").concat(e),t.next=4,this.getJsonRequest(i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)}),getAllStoreyParameter:(G=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="",r=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/storeys?version=").concat(i):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/storeys?version=").concat(i),t.next=4,this.getJsonRequest(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return G.apply(this,arguments)}),getAllRelationParameter:(B=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",n=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/relations?version=").concat(r,"&property=").concat(i):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/relations?version=").concat(r,"&property=").concat(i),t.next=4,this.getJsonRequest(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return B.apply(this,arguments)}),getAllComponentParameter:(x=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",n=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/components?version=").concat(r,"&property=").concat(i):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/components?version=").concat(r,"&property=").concat(i),t.next=4,this.getJsonRequest(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return x.apply(this,arguments)}),getAllPrimitiveParameter:(D=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",n=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/drawings/").concat(e,"/primitives?version=").concat(r,"&property=").concat(i):"".concat(this._serverIp,"/api/v1/drawings/").concat(e,"/primitives?version=").concat(r,"&property=").concat(i),t.next=4,this.getJsonRequest(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return D.apply(this,arguments)}),getAllLayerParameter:(b=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="",r=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/drawings/").concat(e,"/layers?version=").concat(i):"".concat(this._serverIp,"/api/v1/drawings/").concat(e,"/layers?version=").concat(i),t.next=4,this.getJsonRequest(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return b.apply(this,arguments)}),getParameterGroupNames:(N=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="",r=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/propertiesGroups?version=").concat(i):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/propertiesGroups?version=").concat(i),t.next=4,this.getJsonRequest(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return N.apply(this,arguments)}),getEntityParameter:(L=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",n=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/entity/").concat(e,"?modelId=").concat(i,"&version=").concat(r):"".concat(this._serverIp,"/api/v1/entity/").concat(e,"?modelId=").concat(i,"&version=").concat(r),t.next=4,this.getJsonRequest(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return L.apply(this,arguments)}),getModelTypeCount:(O=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",n=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/count?type=").concat(i,"&version=").concat(r):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/count?type=").concat(i,"&version=").concat(r),t.next=4,this.getJsonRequest(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return O.apply(this,arguments)}),componentSearch:function(){},relationSearch:function(){},loadDrawingGeometry:(R=u()(s.a.mark((function t(e,i,r){var n,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=void 0,o="",o=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/drawings/").concat(e,"/versions/").concat(i,"/drawing_geometry"):"".concat(this._serverIp,"/api/v1/drawings/").concat(e,"/versions/").concat(i,"/drawing_geometry"),!this._needToken){t.next=15;break}return t.next=6,this.getToken();case 6:if(t.t0=t.sent,t.t1=void 0,t.t0!==t.t1){t.next=10;break}return t.abrupt("return",void 0);case 10:return t.next=12,l.a.get(o,{responseType:"arraybuffer",headers:{"x-access-token":this._token},onDownloadProgress:function(t){var e=t.srcElement.getResponseHeader("x-actual-content-length");e=parseInt(e),r(t.loaded,e)}});case 12:n=t.sent,t.next=18;break;case 15:return t.next=17,l.a.get(o,{responseType:"arraybuffer",onDownloadProgress:function(t){var e=t.srcElement.getResponseHeader("x-actual-content-length");e=parseInt(e),r(t.loaded,e)}});case 17:n=t.sent;case 18:if(!(a=n.data)){t.next=23;break}return t.abrupt("return",a);case 23:return console.log("REQUEST ERROR!"),t.abrupt("return",void 0);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return R.apply(this,arguments)}),loadModelGeometry:(S=u()(s.a.mark((function t(e,i,r){var n,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=void 0,o="",o=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e,"/versions/").concat(i,"/model_geometry"):"".concat(this._serverIp,"/api/v1/models/").concat(e,"/versions/").concat(i,"/model_geometry"),!this._needToken){t.next=15;break}return t.next=6,this.getToken();case 6:if(t.t0=t.sent,t.t1=void 0,t.t0!==t.t1){t.next=10;break}return t.abrupt("return",void 0);case 10:return t.next=12,l.a.get(o,{responseType:"arraybuffer",headers:{"x-access-token":this._token},onDownloadProgress:function(t){var e=t.srcElement.getResponseHeader("x-actual-content-length");e=parseInt(e),r(t.loaded,e)}});case 12:n=t.sent,t.next=18;break;case 15:return t.next=17,l.a.get(o,{responseType:"arraybuffer",onDownloadProgress:function(t){var e=t.srcElement.getResponseHeader("x-actual-content-length");e=parseInt(e),r(t.loaded,e)}});case 17:n=t.sent;case 18:if(!(a=n.data)){t.next=23;break}return t.abrupt("return",a);case 23:return console.log("REQUEST ERROR!"),t.abrupt("return",void 0);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return S.apply(this,arguments)}),deleteModelData:(P=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="",i=this._postfix?"".concat(this._serverIp,"/api/v1/").concat(this._postfix,"/models/").concat(e):"".concat(this._serverIp,"/api/v1/models/").concat(e),!this._needToken){t.next=13;break}return t.next=5,this.getToken();case 5:if(t.t0=t.sent,t.t1=void 0,t.t0!==t.t1){t.next=9;break}return t.abrupt("return",void 0);case 9:return t.next=11,l.a.delete(i,{headers:{"x-access-token":this._token}});case 11:t.next=15;break;case 13:return t.next=15,l.a.delete(i);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return P.apply(this,arguments)})};var W=z,X={};X.new=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t},X.MemoryPool=new A(X.new),X.new_d=function(){var t=new Float64Array(3);return t[0]=0,t[1]=0,t[2]=0,t},X.MemoryPool_d=new A(X.new_d),X.clone=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},X.clone_d=function(t){var e=new Float64Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},X.create=function(t,e,i){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=i,r},X.create_d=function(t,e,i){var r=new Float64Array(3);return r[0]=t,r[1]=e,r[2]=i,r},X.POSITIVE_INFINITY=X.create(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),X.NEGATIVE_INFINITY=X.create(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),X.POSITIVE_INFINITY_D=X.create_d(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),X.NEGATIVE_INFINITY_D=X.create_d(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),X.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},X.set=function(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t},X.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},X.addValue=function(t,e,i,r,n){return t[0]=e[0]+i,t[1]=e[1]+r,t[2]=e[2]+n,t},X.subtract=X.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},X.multiply=X.mul=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},X.divide=X.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},X.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},X.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},X.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},X.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},X.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},X.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},X.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t},X.distance=X.dist=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)},X.squaredDistance=X.sqrDist=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n},X.length=X.len=function(t){var e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)},X.squaredLength=X.sqrLen=function(t){var e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r},X.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;if(o>_.EPSILON){var a=1/(o=Math.sqrt(o));return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,o}return t[0]=0,t[1]=0,t[2]=0,0},X.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},X.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},X.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},X.cross=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],h=i[2];return t[0]=n*h-o*s,t[1]=o*a-r*h,t[2]=r*s-n*a,t},X.lerp=function(t,e,i,r){var n=e[0],o=e[1],a=e[2];return t[0]=n+r*(i[0]-n),t[1]=o+r*(i[1]-o),t[2]=a+r*(i[2]-a),t},X.hermite=function(t,e,i,r,n,o){var a=o*o,s=a*(2*o-3)+1,h=a*(o-2)+o,u=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+i[0]*h+r[0]*u+n[0]*c,t[1]=e[1]*s+i[1]*h+r[1]*u+n[1]*c,t[2]=e[2]*s+i[2]*h+r[2]*u+n[2]*c,t},X.bezier=function(t,e,i,r,n,o){var a=1-o,s=a*a,h=o*o,u=s*a,c=3*o*s,l=3*h*a,g=h*o;return t[0]=e[0]*u+i[0]*c+r[0]*l+n[0]*g,t[1]=e[1]*u+i[1]*c+r[1]*l+n[1]*g,t[2]=e[2]*u+i[2]*c+r[2]*l+n[2]*g,t},X.random=function(t,e){e=e||1;var i=2*_.RANDOM()*Math.PI,r=2*_.RANDOM()-1,n=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=r*e,t},X.transformMat4=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[3]*r+i[7]*n+i[11]*o+i[15];return a=a||1,t[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/a,t[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/a,t[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/a,t},X.transformMat3=function(t,e,i){var r=e[0],n=e[1],o=e[2];return t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8],t},X.transformQuat=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],h=i[2],u=i[3],c=u*r+s*o-h*n,l=u*n+h*r-a*o,g=u*o+a*n-s*r,_=-a*r-s*n-h*o;return t[0]=c*u+_*-a+l*-h-g*-s,t[1]=l*u+_*-s+g*-a-c*-h,t[2]=g*u+_*-h+c*-s-l*-a,t},X.rotateX=function(t,e,i,r){var n=[],o=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},X.rotateY=function(t,e,i,r){var n=[],o=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},X.rotateZ=function(t,e,i,r){var n=[],o=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},X.forEach=function(t,e,i,r,n,o){var a,s;e||(e=3),i||(i=0),s=r?Math.min(r*e+i,t.length):t.length;var h=X.create();for(a=i;a<s;a+=e)h[0]=t[a],h[1]=t[a+1],h[2]=t[a+2],n(h,h,o),t[a]=h[0],t[a+1]=h[1],t[a+2]=h[2];return t},X.angle=function(t,e){var i=X.dot(t,e);return i>1?0:Math.acos(i)},X.signedAngle=function(t,e){var i=X.dot(t,e);if(Math.abs(i)>1)return 0;if(Math.abs(i)<=_.EPSILON||1-Math.abs(i)<=_.EPSILON)return Math.acos(i);var r=X.MemoryPool.alloc();X.cross(r,t,e);var n=X.MemoryPool.alloc();X.set(n,0,0,1);var o=X.dot(r,n);return Math.abs(o)<=_.EPSILON&&(X.set(n,0,1,0),o=X.dot(r,n)),Math.abs(o)<=_.EPSILON&&(X.set(n,1,0,0),o=X.dot(r,n)),X.MemoryPool.free(r),X.MemoryPool.free(n),Math.acos(i)*(o<0?-1:1)},X.str=function(t){return"Vec3("+t[0]+", "+t[1]+", "+t[2]+")"},X.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},X.equals=function(t,e){var i=t[0],r=t[1],n=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(i-o)<=_.EPSILON&&Math.abs(r-a)<=_.EPSILON&&Math.abs(n-s)<=_.EPSILON};var J=X,Z={OBJECT:512,NODE:513,GROUP:514,TRANSFORM:516,GEODE:517,MODEL:518,ENTITY:519,COMPONENT:520,RELATION:521,AXISGRID:522,DRAWING:523,PRIMITIVE:524,LAYER:525,SWITCH:544,REFERENCE:545,SCENE:546,SHELL:547,BILLBOARD:548,GEOMETRY:4353,IMAGE:4357,VERTEXALIGN:4358,VERTEXBUFFER:4359,COMBINEVERTEXBUFFER:4360,SEPARATEVERTEXBUFFER:4361,PRIMITIVESOLID:4384,MATERIAL:4609,COLORMATERIAL:4610,TEXTUREMATERIAL:4611,GLBUFFER:8193,GLARRAYBUFFER:8194,GLFRAMEBUFFER:8195,GLRENDERBUFFER:8196,GLTEXTURE:8197,GLSHADER:8198,GLPROGRAM:8199,GLVERTEXARRAY:8200,GLSTATE:8224,GLCLEAR:8225,GLCULLFACE:8226,GLDEPTH:8227,GLLINEWIDTH:8228,GLPIXELSTORE:8229,GLSCISSOR:8230,GLVIEWPORT:8231,GLPROGRAMMING:8232,GLBLENDFUNC:8233,GLFRONTFACE:8234,GLDRAWCALL:8256,GLDRAWARRAYS:8257,GLDRAWELEMENTS:8258,GLDRAWARRAYSINSTANCED:8259,GLDRAWELEMENTSINSTANCED:8260,GLVERTEXATTRIB:8288,GLVERTEXATTRIBPOINTER:8289,GLVERTEXATTRIBVALUE:8290,GLSHADING:8448,GLMATERIAL:8449,GLFUNCTION:8450,GLLIGHTING:8451};Object.freeze(Z);var K=Z,Q=function(){this._name="",this._id=-1},$=0;Q.getInstanceID=function(){return $+=1},Q.prototype={reset:function(){this._name=""},setName:function(t){this._name=t},getName:function(){return this._name},setID:function(t){this._id=t},getID:function(){return-1===this._id&&(this._id=Q.getInstanceID()),this._id}},Q.wind=Q.prototype.wind=K.OBJECT;var tt=Q,et={new:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};et.MemoryPool=new A(et.new),et.alloc=et.MemoryPool.alloc,et.free=et.MemoryPool.free,et.new_d=function(){var t=new Float64Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.MemoryPool_d=new A(et.new_d),et.alloc_d=et.MemoryPool_d.alloc,et.free_d=et.MemoryPool_d.free,et.clone=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},et.clone_d=function(t){var e=new Float64Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},et.create=function(t,e,i,r,n,o,a,s,h,u,c,l,g,_,d,A){var p=new Float32Array(16);return p[0]=t,p[1]=e,p[2]=i,p[3]=r,p[4]=n,p[5]=o,p[6]=a,p[7]=s,p[8]=h,p[9]=u,p[10]=c,p[11]=l,p[12]=g,p[13]=_,p[14]=d,p[15]=A,p},et.create_d=function(t,e,i,r,n,o,a,s,h,u,c,l,g,_,d,A){var p=new Float64Array(16);return p[0]=t,p[1]=e,p[2]=i,p[3]=r,p[4]=n,p[5]=o,p[6]=a,p[7]=s,p[8]=h,p[9]=u,p[10]=c,p[11]=l,p[12]=g,p[13]=_,p[14]=d,p[15]=A,p},et.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},et.set=function(t,e,i,r,n,o,a,s,h,u,c,l,g,_,d,A,p){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=s,t[7]=h,t[8]=u,t[9]=c,t[10]=l,t[11]=g,t[12]=_,t[13]=d,t[14]=A,t[15]=p,t},et.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.transpose=function(t,e){return t===e?(t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11]):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},et.invert=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],h=e[6],u=e[7],c=e[8],l=e[9],g=e[10],_=e[11],d=e[12],A=e[13],p=e[14],I=e[15],f=i*s-r*a,C=i*h-n*a,m=i*u-o*a,v=r*h-n*s,y=r*u-o*s,E=n*u-o*h,w=c*A-l*d,M=c*p-g*d,T=c*I-_*d,P=l*p-g*A,S=l*I-_*A,R=g*I-_*p,O=f*R-C*S+m*P+v*T-y*M+E*w;return O?(O=1/O,t[0]=(s*R-h*S+u*P)*O,t[1]=(n*S-r*R-o*P)*O,t[2]=(A*E-p*y+I*v)*O,t[3]=(g*y-l*E-_*v)*O,t[4]=(h*T-a*R-u*M)*O,t[5]=(i*R-n*T+o*M)*O,t[6]=(p*m-d*E-I*C)*O,t[7]=(c*E-g*m+_*C)*O,t[8]=(a*S-s*T+u*w)*O,t[9]=(r*T-i*S-o*w)*O,t[10]=(d*y-A*m+I*f)*O,t[11]=(l*m-c*y-_*f)*O,t[12]=(s*M-a*P-h*w)*O,t[13]=(i*P-r*M+n*w)*O,t[14]=(A*C-d*v-p*f)*O,t[15]=(c*v-l*C+g*f)*O,t):null},et.adjoint=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],h=e[6],u=e[7],c=e[8],l=e[9],g=e[10],_=e[11],d=e[12],A=e[13],p=e[14],I=e[15];return t[0]=s*(g*I-_*p)-l*(h*I-u*p)+A*(h*_-u*g),t[1]=-(r*(g*I-_*p)-l*(n*I-o*p)+A*(n*_-o*g)),t[2]=r*(h*I-u*p)-s*(n*I-o*p)+A*(n*u-o*h),t[3]=-(r*(h*_-u*g)-s*(n*_-o*g)+l*(n*u-o*h)),t[4]=-(a*(g*I-_*p)-c*(h*I-u*p)+d*(h*_-u*g)),t[5]=i*(g*I-_*p)-c*(n*I-o*p)+d*(n*_-o*g),t[6]=-(i*(h*I-u*p)-a*(n*I-o*p)+d*(n*u-o*h)),t[7]=i*(h*_-u*g)-a*(n*_-o*g)+c*(n*u-o*h),t[8]=a*(l*I-_*A)-c*(s*I-u*A)+d*(s*_-u*l),t[9]=-(i*(l*I-_*A)-c*(r*I-o*A)+d*(r*_-o*l)),t[10]=i*(s*I-u*A)-a*(r*I-o*A)+d*(r*u-o*s),t[11]=-(i*(s*_-u*l)-a*(r*_-o*l)+c*(r*u-o*s)),t[12]=-(a*(l*p-g*A)-c*(s*p-h*A)+d*(s*g-h*l)),t[13]=i*(l*p-g*A)-c*(r*p-n*A)+d*(r*g-n*l),t[14]=-(i*(s*p-h*A)-a*(r*p-n*A)+d*(r*h-n*s)),t[15]=i*(s*g-h*l)-a*(r*g-n*l)+c*(r*h-n*s),t},et.determinant=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],a=t[5],s=t[6],h=t[7],u=t[8],c=t[9],l=t[10],g=t[11],_=t[12],d=t[13],A=t[14],p=t[15];return(e*a-i*o)*(l*p-g*A)-(e*s-r*o)*(c*p-g*d)+(e*h-n*o)*(c*A-l*d)+(i*s-r*a)*(u*p-g*_)-(i*h-n*a)*(u*A-l*_)+(r*h-n*s)*(u*d-c*_)},et.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},et.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t},et.sub=et.subtract,et.multiply=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],h=e[5],u=e[6],c=e[7],l=e[8],g=e[9],_=e[10],d=e[11],A=e[12],p=e[13],I=e[14],f=e[15],C=i[0],m=i[1],v=i[2],y=i[3];return t[0]=C*r+m*s+v*l+y*A,t[1]=C*n+m*h+v*g+y*p,t[2]=C*o+m*u+v*_+y*I,t[3]=C*a+m*c+v*d+y*f,C=i[4],m=i[5],v=i[6],y=i[7],t[4]=C*r+m*s+v*l+y*A,t[5]=C*n+m*h+v*g+y*p,t[6]=C*o+m*u+v*_+y*I,t[7]=C*a+m*c+v*d+y*f,C=i[8],m=i[9],v=i[10],y=i[11],t[8]=C*r+m*s+v*l+y*A,t[9]=C*n+m*h+v*g+y*p,t[10]=C*o+m*u+v*_+y*I,t[11]=C*a+m*c+v*d+y*f,C=i[12],m=i[13],v=i[14],y=i[15],t[12]=C*r+m*s+v*l+y*A,t[13]=C*n+m*h+v*g+y*p,t[14]=C*o+m*u+v*_+y*I,t[15]=C*a+m*c+v*d+y*f,t},et.mul=et.multiply,et.translate=function(t,e,i){var r=i[0],n=i[1],o=i[2];return e===t?(t[12]=e[0]*r+e[4]*n+e[8]*o+e[12],t[13]=e[1]*r+e[5]*n+e[9]*o+e[13],t[14]=e[2]*r+e[6]*n+e[10]*o+e[14],t[15]=e[3]*r+e[7]*n+e[11]*o+e[15]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[0]*r+e[4]*n+e[8]*o+e[12],t[13]=e[1]*r+e[5]*n+e[9]*o+e[13],t[14]=e[2]*r+e[6]*n+e[10]*o+e[14],t[15]=e[3]*r+e[7]*n+e[11]*o+e[15]),t},et.scalar=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},et.scalarAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t},et.scale=function(t,e,i){var r=i[0],n=i[1],o=i[2];return et.scaleValue(t,e,r,n,o)},et.scaleValue=function(t,e,i,r,n){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},et.rotate=function(t,e,i,r){var n,o,a,s,h,u,c,l,g,d,A,p,I,f,C,m,v,y,E,w,M,T,P,S,R=r[0],O=r[1],L=r[2],N=Math.sqrt(R*R+O*O+L*L);return Math.abs(N)<_.EPSILON?null:(R*=N=1/N,O*=N,L*=N,n=Math.sin(i),a=1-(o=Math.cos(i)),s=e[0],h=e[1],u=e[2],c=e[3],l=e[4],g=e[5],d=e[6],A=e[7],p=e[8],I=e[9],f=e[10],C=e[11],m=R*R*a+o,v=O*R*a+L*n,y=L*R*a-O*n,E=R*O*a-L*n,w=O*O*a+o,M=L*O*a+R*n,T=R*L*a+O*n,P=O*L*a-R*n,S=L*L*a+o,t[0]=s*m+l*v+p*y,t[1]=h*m+g*v+I*y,t[2]=u*m+d*v+f*y,t[3]=c*m+A*v+C*y,t[4]=s*E+l*w+p*M,t[5]=h*E+g*w+I*M,t[6]=u*E+d*w+f*M,t[7]=c*E+A*w+C*M,t[8]=s*T+l*P+p*S,t[9]=h*T+g*P+I*S,t[10]=u*T+d*P+f*S,t[11]=c*T+A*P+C*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},et.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],h=e[7],u=e[8],c=e[9],l=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+u*r,t[5]=a*n+c*r,t[6]=s*n+l*r,t[7]=h*n+g*r,t[8]=u*n-o*r,t[9]=c*n-a*r,t[10]=l*n-s*r,t[11]=g*n-h*r,t},et.rotateY=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],h=e[3],u=e[8],c=e[9],l=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-u*r,t[1]=a*n-c*r,t[2]=s*n-l*r,t[3]=h*n-g*r,t[8]=o*r+u*n,t[9]=a*r+c*n,t[10]=s*r+l*n,t[11]=h*r+g*n,t},et.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],h=e[3],u=e[4],c=e[5],l=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+u*r,t[1]=a*n+c*r,t[2]=s*n+l*r,t[3]=h*n+g*r,t[4]=u*n-o*r,t[5]=c*n-a*r,t[6]=l*n-s*r,t[7]=g*n-h*r,t},et.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},et.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.fromRotation=function(t,e,i){var r,n,o,a=i[0],s=i[1],h=i[2],u=Math.sqrt(a*a+s*s+h*h);return Math.abs(u)<_.EPSILON?null:(a*=u=1/u,s*=u,h*=u,r=Math.sin(e),o=1-(n=Math.cos(e)),t[0]=a*a*o+n,t[1]=s*a*o+h*r,t[2]=h*a*o-s*r,t[3]=0,t[4]=a*s*o-h*r,t[5]=s*s*o+n,t[6]=h*s*o+a*r,t[7]=0,t[8]=a*h*o+s*r,t[9]=s*h*o-a*r,t[10]=h*h*o+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},et.fromXRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.fromYRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.fromZRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.fromRotationTranslation=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=r+r,h=n+n,u=o+o,c=r*s,l=r*h,g=r*u,_=n*h,d=n*u,A=o*u,p=a*s,I=a*h,f=a*u;return t[0]=1-(_+A),t[1]=l+f,t[2]=g-I,t[3]=0,t[4]=l-f,t[5]=1-(c+A),t[6]=d+p,t[7]=0,t[8]=g+I,t[9]=d-p,t[10]=1-(c+_),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},et.fromRotationTranslationScale=function(t,e,i,r){var n=e[0],o=e[1],a=e[2],s=e[3],h=n+n,u=o+o,c=a+a,l=n*h,g=n*u,_=n*c,d=o*u,A=o*c,p=a*c,I=s*h,f=s*u,C=s*c,m=r[0],v=r[1],y=r[2];return t[0]=(1-(d+p))*m,t[1]=(g+C)*m,t[2]=(_-f)*m,t[3]=0,t[4]=(g-C)*v,t[5]=(1-(l+p))*v,t[6]=(A+I)*v,t[7]=0,t[8]=(_+f)*y,t[9]=(A-I)*y,t[10]=(1-(l+d))*y,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},et.fromRotationTranslationScaleOrigin=function(t,e,i,r,n){var o=e[0],a=e[1],s=e[2],h=e[3],u=o+o,c=a+a,l=s+s,g=o*u,_=o*c,d=o*l,A=a*c,p=a*l,I=s*l,f=h*u,C=h*c,m=h*l,v=r[0],y=r[1],E=r[2],w=n[0],M=n[1],T=n[2];return t[0]=(1-(A+I))*v,t[1]=(_+m)*v,t[2]=(d-C)*v,t[3]=0,t[4]=(_-m)*y,t[5]=(1-(g+I))*y,t[6]=(p+f)*y,t[7]=0,t[8]=(d+C)*E,t[9]=(p-f)*E,t[10]=(1-(g+A))*E,t[11]=0,t[12]=i[0]+w-(t[0]*w+t[4]*M+t[8]*T),t[13]=i[1]+M-(t[1]*w+t[5]*M+t[9]*T),t[14]=i[2]+T-(t[2]*w+t[6]*M+t[10]*T),t[15]=1,t},et.fromQuat=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=i+i,s=r+r,h=n+n,u=i*a,c=r*a,l=r*s,g=n*a,_=n*s,d=n*h,A=o*a,p=o*s,I=o*h;return t[0]=1-l-d,t[1]=c+I,t[2]=g-p,t[3]=0,t[4]=c-I,t[5]=1-u-d,t[6]=_+A,t[7]=0,t[8]=g+p,t[9]=_-A,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},et.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},et.getRotation=function(t,e){var i=e[0]+e[5]+e[10],r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},et.getScale=function(t,e){t[0]=e[0],t[1]=e[4],t[2]=e[8];var i=J.len(t);t[0]=e[1],t[1]=e[5],t[2]=e[9];var r=J.len(t);t[0]=e[2],t[1]=e[6],t[2]=e[10];var n=J.len(t);return J.set(t,i,r,n),t},et.getSqrScale=function(t,e){var i=J.MemoryPool.alloc();return i[0]=e[0],i[1]=e[4],i[2]=e[8],t[0]=J.sqrLen(i),i[0]=e[1],i[1]=e[5],i[2]=e[9],t[1]=J.sqrLen(i),i[0]=e[2],i[1]=e[6],i[2]=e[10],t[2]=J.sqrLen(i),J.MemoryPool.free(i),t},et.setTranslation=function(t,e){t[12]=e[0],t[13]=e[1],t[14]=e[2]},et.setRotation=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=i+i,s=r+r,h=n+n,u=i*a,c=r*a,l=r*s,g=n*a,_=n*s,d=n*h,A=o*a,p=o*s,I=o*h;t[0]=1-l-d,t[1]=c+I,t[2]=g-p,t[4]=c-I,t[5]=1-u-d,t[6]=_+A,t[8]=g+p,t[9]=_-A,t[10]=1-u-l},et.fromFrustum=function(t,e,i,r,n,o,a){var s=1/(i-e),h=1/(n-r),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(i+e)*s,t[9]=(n+r)*h,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t},et.fromPerspective=function(t,e,i,r,n){var o=1/Math.tan(.5*e),a=1/(r-n);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*a,t[15]=0,t},et.fromOrthogonal=function(t,e,i,r,n,o,a){var s=1/(e-i),h=1/(r-n),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*h,t[14]=(a+o)*u,t[15]=1,t},et.fromLookAt=function(t,e,i,r){var n=e[0],o=e[1],a=e[2],s=r[0],h=r[1],u=r[2],c=i[0],l=i[1],g=i[2];if(Math.abs(n-c)<_.EPSILON&&Math.abs(o-l)<_.EPSILON&&Math.abs(a-g)<_.EPSILON)return et.identity(t);var d=n-c,A=o-l,p=a-g,I=1/Math.sqrt(d*d+A*A+p*p),f=h*(p*=I)-u*(A*=I),C=u*(d*=I)-s*p,m=s*A-h*d,v=A*(m*=I=1/Math.sqrt(f*f+C*C+m*m))-p*(C*=I),y=p*(f*=I)-d*m,E=d*C-A*f;return v*=I=1/Math.sqrt(v*v+y*y+E*E),y*=I,E*=I,t[0]=f,t[1]=v,t[2]=d,t[3]=0,t[4]=C,t[5]=y,t[6]=A,t[7]=0,t[8]=m,t[9]=E,t[10]=p,t[11]=0,t[12]=-(f*n+C*o+m*a),t[13]=-(v*n+y*o+E*a),t[14]=-(d*n+A*o+p*a),t[15]=1,t},et.isFrustum=function(t,e){return 0===e[3]&&0===e[7]&&-1===e[11]&&0===e[15]},et.getFrustum=function(t,e){return 0===e[3]&&0===e[7]&&-1===e[11]&&0===e[15]&&(t.near=e[14]/(e[10]-1),t.far=e[14]/(1+e[10]),t.left=t.near*(e[8]-1)/e[0],t.right=t.near*(1+e[8])/e[0],t.top=t.near*(1+e[9])/e[5],t.bottom=t.near*(e[9]-1)/e[5],!0)},et.getPerspective=function(t,e){var i={};if(et.getFrustum(i,e)){var r=Math.atan(i.top/i.near),n=Math.atan(i.bottom/i.near);return t.fovy=r-n,t.aspect=(i.right-i.left)/(i.top-i.bottom),t.near=i.near,t.far=i.far,!0}return!1},et.getOrthogonal=function(t,e){return 0===e[3]&&0===e[7]&&0===e[11]&&1===e[15]&&(t.near=(e[14]+1)/e[10],t.far=(e[14]-1)/e[10],t.left=-(1+e[12])/e[0],t.right=(1-e[12])/e[0],t.top=(1-e[13])/e[5],t.bottom=-(1+e[13])/e[5],!0)},et.getNormalMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=0,t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,et.invert(t,t),et.transpose(t,t),t},et.str=function(t){return"Mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},et.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},et.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},et.equals=function(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],h=t[6],u=t[7],c=t[8],l=t[9],g=t[10],d=t[11],A=t[12],p=t[13],I=t[14],f=t[15],C=e[0],m=e[1],v=e[2],y=e[3],E=e[4],w=e[5],M=e[6],T=e[7],P=e[8],S=e[9],R=e[10],O=e[11],L=e[12],N=e[13],b=e[14],D=e[15];return Math.abs(i-C)<=_.EPSILON*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(r-m)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-v)<=_.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-y)<=_.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-E)<=_.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-w)<=_.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(h-M)<=_.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(u-T)<=_.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-P)<=_.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(l-S)<=_.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(g-R)<=_.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(d-O)<=_.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(A-L)<=_.EPSILON*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(p-N)<=_.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(I-b)<=_.EPSILON*Math.max(1,Math.abs(I),Math.abs(b))&&Math.abs(f-D)<=_.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))};var it=et,rt={};Object.assign(rt,w),rt.distanceToVertex=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]},rt.relationToBoundingSphere=function(t,e){if(!e.valid())return _.OUTSIDE;var i=e.getCenter(),r=e.getRadius(),n=rt.distanceToVertex(t,i);return n<-r?_.OUTSIDE:n<=r?_.INTERSECT:_.INSIDE},rt.relationToBoundingBox=function(t,e){if(!e.valid())return _.OUTSIDE;var i=(t[0]>=0?1:0)|(t[1]>=0?2:0)|(t[2]>=0?4:0),r=7&~i,n=J.MemoryPool.alloc(),o=_.OUTSIDE;return o=rt.distanceToVertex(t,e.getCorner(r,n))>0?_.INSIDE:rt.distanceToVertex(t,e.getCorner(i,n))<0?_.OUTSIDE:_.INTERSECT,J.MemoryPool.free(n),o},rt.relationToVertices=function(t,e){for(var i=0,r=e.length,n=0;n<r;n++){var o=rt.distanceToVertex(t,e[n]);if(o<0){if(1===i)return _.INTERSECT;i=-1}else{if(!(o>0))return _.INTERSECT;if(-1===i)return _.INTERSECT;i=1}}return i>0?_.INSIDE:_.OUTSIDE},rt.transformMat4=function(t,e,i){i&&it.invert(e,e);var r=t[0],n=t[1],o=t[2],a=t[3];return t[0]=e[0]*r+e[1]*n+e[2]*o+e[3]*a,t[1]=e[4]*r+e[5]*n+e[6]*o+e[7]*a,t[2]=e[8]*r+e[9]*n+e[10]*o+e[11]*a,t[3]=e[12]*r+e[13]*n+e[14]*o+e[15]*a,rt.normalize(t,t),t},rt.normalize=function(t,e){var i=1/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i,t},rt.intersectLine=function(t,e,i,r){var n=J.MemoryPool.alloc();J.sub(n,i,e);var o=J.dot(r,n);if(Math.abs(o)<_.EPSILON)return J.MemoryPool.free(n),!1;var a=-(r[3]+J.dot(r,e))/o;return J.add(t,e,J.scale(n,n,a)),J.MemoryPool.free(n),!0};var nt=rt,ot=function(t,e){this._min=J.new(),this._max=J.new(),t?J.copy(this._min,t):J.copy(this._min,J.POSITIVE_INFINITY),e?J.copy(this._max,e):J.copy(this._max,J.NEGATIVE_INFINITY)};ot.new=function(){return new ot},ot.MemoryPool=new A(ot.new),ot.prototype={reset:function(){J.copy(this._min,J.POSITIVE_INFINITY),J.copy(this._max,J.NEGATIVE_INFINITY)},copy:function(t){this._min[0]=t._min[0],this._min[1]=t._min[1],this._min[2]=t._min[2],this._max[0]=t._max[0],this._max[1]=t._max[1],this._max[2]=t._max[2]},valid:function(){return this._max[0]>=this._min[0]&&this._max[1]>=this._min[1]&&this._max[2]>=this._min[2]},getCenter:function(t){return this.valid()?(t[0]=.5*(this._min[0]+this._max[0]),t[1]=.5*(this._min[1]+this._max[1]),t[2]=.5*(this._min[2]+this._max[2])):(t[0]=0,t[1]=0,t[2]=0),t},getRadius:function(){if(this.valid()){var t=this._max[0]-this._min[0],e=this._max[1]-this._min[1],i=this._max[2]-this._min[2];return.5*Math.sqrt(t*t+e*e+i*i)}return 0},getMin:function(){return this._min},getMax:function(){return this._max},set:function(t,e){J.copy(this._min,t),J.copy(this._max,e)},setMin:function(t){J.copy(this._min,t)},setMinValue:function(t,e,i){J.set(this._min,t,e,i)},setMax:function(t){J.copy(this._max,t)},setMaxValue:function(t,e,i){J.set(this._max,t,e,i)},getXMax:function(){return this._max[0]},getYMax:function(){return this._max[1]},getZMax:function(){return this._max[2]},getXMin:function(){return this._min[0]},getYMin:function(){return this._min[1]},getZMin:function(){return this._min[2]},getCorner:function(t,e){return e[0]=1&t?this._max[0]:this._min[0],e[1]=2&t?this._max[1]:this._min[1],e[2]=4&t?this._max[2]:this._min[2],e},expandByVec3:function(t){this._min[0]=Math.min(this._min[0],t[0]),this._min[1]=Math.min(this._min[1],t[1]),this._min[2]=Math.min(this._min[2],t[2]),this._max[0]=Math.max(this._max[0],t[0]),this._max[1]=Math.max(this._max[1],t[1]),this._max[2]=Math.max(this._max[2],t[2])},expandByBoundingBox:function(t){t.valid()&&(t._min[0]<this._min[0]&&(this._min[0]=t._min[0]),t._max[0]>this._max[0]&&(this._max[0]=t._max[0]),t._min[1]<this._min[1]&&(this._min[1]=t._min[1]),t._max[1]>this._max[1]&&(this._max[1]=t._max[1]),t._min[2]<this._min[2]&&(this._min[2]=t._min[2]),t._max[2]>this._max[2]&&(this._max[2]=t._max[2]))},expandByBoundingSphere:function(t){if(t.valid()){var e=t.getCenter(),i=t.getRadius();this._min[0]=Math.min(this._min[0],e[0]-i),this._min[1]=Math.min(this._min[1],e[1]-i),this._min[2]=Math.min(this._min[2],e[2]-i),this._max[0]=Math.max(this._max[0],e[0]+i),this._max[1]=Math.max(this._max[1],e[1]+i),this._max[2]=Math.max(this._max[2],e[2]+i)}},transformMat4:function(t){var e=J.MemoryPool.alloc(),i=J.MemoryPool.alloc();it.getTranslation(e,t),J.copy(i,e);for(var r=0;r<3;++r)for(var n=4*r,o=this._min[r],a=this._max[r],s=0;s<3;++s){var h=t[n+s],u=h*a,c=h*o;u<c?(e[s]+=u,i[s]+=c):(e[s]+=c,i[s]+=u)}J.copy(this._min,e),J.copy(this._max,i),J.MemoryPool.free(e),J.MemoryPool.free(i)},containsVertexXY:function(t){return t[0]>=this._min[0]&&t[0]<=this._max[0]&&t[1]>=this._min[1]&&t[1]<=this._max[1]},containsVertex:function(t){return t[0]>=this._min[0]&&t[0]<=this._max[0]&&t[1]>=this._min[1]&&t[1]<=this._max[1]&&t[2]>=this._min[2]&&t[2]<=this._max[2]},containsBoundingBox:function(t){return this.containsVertex(t.getMin())&&this.containsVertex(t.getMax())},containsBoundingBoxXY:function(t){return this.containsVertexXY(t.getMin())&&this.containsVertexXY(t.getMax())},intersectLineSegmentXY:function(t,e){var i=J.clone(t),r=J.clone(e),n=J.new();if(i[0]<=r[0]){if(i[0]>this._max[0])return!1;if(r[0]<this._min[0])return!1;if(i[0]<this._min[0]){var o=(this._min[0]-i[0])/(r[0]-i[0]);o-_.EPSILON>0&&(J.sub(n,r,i),J.scaleAndAdd(i,i,n,o))}if(r[0]>this._max[0]){var a=(this._max[0]-i[0])/(r[0]-i[0]);a+_.EPSILON<1&&(J.sub(n,r,i),J.scaleAndAdd(r,i,n,a))}}else{if(r[0]>this._max[0])return!1;if(i[0]<this._min[0])return!1;if(r[0]<this._min[0]){var s=(this._min[0]-r[0])/(i[0]-r[0]);s-_.EPSILON>0&&(J.sub(n,i,r),J.scaleAndAdd(r,r,n,s))}if(i[0]>this._max[0]){var h=(this._max[0]-r[0])/(i[0]-r[0]);h+_.EPSILON<1&&(J.sub(n,i,r),J.scaleAndAdd(i,r,n,h))}}if(i[1]<=r[1]){if(i[1]>this._max[1])return!1;if(r[1]<this._min[1])return!1;if(i[1]<this._min[1]){var u=(this._min[1]-i[1])/(r[1]-i[1]);u-_.EPSILON>0&&(J.sub(n,r,i),J.scaleAndAdd(i,i,n,u))}if(r[1]>this._max[1]){var c=(this._max[1]-i[1])/(r[1]-i[1]);c+_.EPSILON<1&&(J.sub(n,r,i),J.scaleAndAdd(r,i,n,c))}}else{if(r[1]>this._max[1])return!1;if(i[1]<this._min[1])return!1;if(r[1]<this._min[1]){var l=(this._min[1]-r[1])/(i[1]-r[1]);l-_.EPSILON>0&&(J.sub(n,i,r),J.scaleAndAdd(r,r,n,l))}if(i[1]>this._max[1]){var g=(this._max[1]-r[1])/(i[1]-r[1]);g+_.EPSILON<1&&(J.sub(n,i,r),J.scaleAndAdd(i,r,n,g))}}return!0},intersectLineSegment:function(t,e){var i=J.clone(t),r=J.clone(e),n=J.new();if(i[0]<=r[0]){if(i[0]>this._max[0])return!1;if(r[0]<this._min[0])return!1;if(i[0]<this._min[0]){var o=(this._min[0]-i[0])/(r[0]-i[0]);o-_.EPSILON>0&&(J.sub(n,r,i),J.scaleAndAdd(i,i,n,o))}if(r[0]>this._max[0]){var a=(this._max[0]-i[0])/(r[0]-i[0]);a+_.EPSILON<1&&(J.sub(n,r,i),J.scaleAndAdd(r,i,n,a))}}else{if(r[0]>this._max[0])return!1;if(i[0]<this._min[0])return!1;if(r[0]<this._min[0]){var s=(this._min[0]-r[0])/(i[0]-r[0]);s-_.EPSILON>0&&(J.sub(n,i,r),J.scaleAndAdd(r,r,n,s))}if(i[0]>this._max[0]){var h=(this._max[0]-r[0])/(i[0]-r[0]);h+_.EPSILON<1&&(J.sub(n,i,r),J.scaleAndAdd(i,r,n,h))}}if(i[1]<=r[1]){if(i[1]>this._max[1])return!1;if(r[1]<this._min[1])return!1;if(i[1]<this._min[1]){var u=(this._min[1]-i[1])/(r[1]-i[1]);u-_.EPSILON>0&&(J.sub(n,r,i),J.scaleAndAdd(i,i,n,u))}if(r[1]>this._max[1]){var c=(this._max[1]-i[1])/(r[1]-i[1]);c+_.EPSILON<1&&(J.sub(n,r,i),J.scaleAndAdd(r,i,n,c))}}else{if(r[1]>this._max[1])return!1;if(i[1]<this._min[1])return!1;if(r[1]<this._min[1]){var l=(this._min[1]-r[1])/(i[1]-r[1]);l-_.EPSILON>0&&(J.sub(n,i,r),J.scaleAndAdd(r,r,n,l))}if(i[1]>this._max[1]){var g=(this._max[1]-r[1])/(i[1]-r[1]);g+_.EPSILON<1&&(J.sub(n,i,r),J.scaleAndAdd(i,r,n,g))}}if(i[2]<=r[2]){if(i[2]>this._max[2])return!1;if(r[2]<this._min[2])return!1;if(i[2]<this._min[2]){var d=(this._min[2]-i[2])/(r[2]-i[2]);d-_.EPSILON>0&&(J.sub(n,r,i),J.scaleAndAdd(i,i,n,d))}if(r[2]>this._max[2]){var A=(this._max[2]-i[2])/(r[2]-i[2]);A+_.EPSILON<1&&(J.sub(n,r,i),J.scaleAndAdd(r,i,n,A))}}else{if(r[2]>this._max[2])return!1;if(i[2]<this._min[2])return!1}return!0},intersectBoundingBox:function(t){return Math.max(this._min[0],t._min[0])<=Math.min(this._max[0],t._max[0])&&Math.max(this._min[1],t._min[1])<=Math.min(this._max[1],t._max[1])&&Math.max(this._min[2],t._min[2])<=Math.min(this._max[2],t._max[2])},intersectBoundingBoxXY:function(t){return Math.max(this._min[0],t._min[0])<=Math.min(this._max[0],t._max[0])&&Math.max(this._min[1],t._min[1])<=Math.min(this._max[1],t._max[1])},intersectPlanes:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];if(nt.relationToBoundingBox(r,this)===_.OUTSIDE)return!1}return!0},intersectPlanesXY:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];if(nt.relationToBoundingBoxXY(r,this)===_.OUTSIDE)return!1}return!0}};var at=ot,st=function(){this._center=J.new(),this._radius=0};st.new=function(){return new st},st.MemoryPool=new A(st.new),st.prototype={reset:function(){J.set(this._center,0,0,0),this._radius=0},valid:function(){return this._radius>0},getCenter:function(){return this._center},getRadius:function(){return this._radius},set:function(t,e){this._center=t,this._radius=e},containsVec3:function(t){return!!this.valid()&&J.sqrDist(this._center,t)<=this._radius*this._radius},intersectsBoundingSphere:function(t){if(this.valid()&&t.valid()){var e=this.getRadius()+t.getRadius();return J.sqrDist(t.getCenter(),this.getCenter())<=e*e}return!1},expandByVec3:function(t){if(this.valid()){var e=J.MemoryPool.alloc();J.sub(e,t,this._center);var i=J.length(e);if(i>this._radius){var r=.5*(i-this._radius);this._center[0]+=e[0]*(r/i),this._center[1]+=e[1]*(r/i),this._center[2]+=e[2]*(r/i),this._radius+=r}J.MemoryPool.free(e)}else this._center[0]=t[0],this._center[1]=t[1],this._center[2]=t[2],this._radius=0},expandByBoundingBox:function(t){if(t.valid())if(this.valid()){var e=at.MemoryPool.alloc();e.setMax(t.getMax()),e.setMin(t.getMin());for(var i=J.MemoryPool.alloc(),r=0;r<8;r++)J.sub(i,t.getCorner(r,i),this._center),J.normalize(i,i),J.scaleAndAdd(i,this._center,i,-this._radius),e.expandByVec3(i);J.MemoryPool.free(i),e.getCenter(this._center),this._radius=e.getRadius(),at.MemoryPool.free(e)}else t.getCenter(this._center),this._radius=t.getRadius()},expandByBoundingSphere:function(t){if(t.valid())if(this.valid()){var e=J.distance(this._center,t._center);if(e+t._radius<=this._radius)return;if(e+this.getRadius()<=t.getRadius())return J.copy(this._center,t._center),void(this._radius=t._radius);var i=.5*(this.getRadius()+e+t.getRadius()),r=(i-this.getRadius())/e;this._center[0]+=(t._center[0]-this._center[0])*r,this._center[1]+=(t._center[1]-this._center[1])*r,this._center[2]+=(t._center[2]-this._center[2])*r,this._radius=i}else J.copy(this._center,t._center),this._radius=t._radius},expandRadiusByBoundingSphere:function(t){if(t.valid())if(this._valid()){var e=J.distance(this._center,t._center)+t._radius;e>this._radius&&(this._radius=e)}else J.copy(this._center,t._center),this._radius=t._radius},transformMat4:function(t){if(this.valid()){var e=J.MemoryPool.alloc();it.getScale(e,t);var i=Math.max(Math.max(e[0],e[1]),e[2]);this._radius=this._radius*i,J.transformMat4(this._center,this._center,t),J.MemoryPool.free(e)}}};var ht=st,ut=function(){tt.call(this),this._material=null,this._mask=1,this._parent=null,this._boundingBox=null,this._boundingSphere=null};(ut.prototype=Object.create(tt.prototype)).constructor=ut,Object.assign(ut.prototype,{setMask:function(t){this._mask=t},getMask:function(){return this._mask},setMaterial:function(t){this._material=t},setBoundingBox:function(t){this._boundingBox=t},getBoundingBox:function(){return null===this._boundingBox&&(this._boundingBox=new at,this.computeBoundingBox(this._boundingBox)),this._boundingBox},setBoundingSphere:function(t){this._boundingSphere=t},getBoundingSphere:function(){return null===this._boundingSphere&&(this._boundingSphere=new ht,bs.expandByBoundingBox(this.getBoundingBox())),this._boundingSphere},setParent:function(t){this._parent=t},getParent:function(){return this._parent},traverseParent:function(t){this._parent&&t.validNode(this._parent)&&t.apply(this._parent)},computeBoundingBox:function(t){}}),ut.wind=ut.prototype.wind=K.NODE;var ct=ut,lt=function(){ct.call(this),this._children=[]};(lt.prototype=Object.create(ct.prototype)).constructor=lt,Object.assign(lt.prototype,{hasChild:function(t){for(var e=this._children.length,i=0;i<e;i++)if(this._children[i]===t)return!0;return!1},addChild:function(t){t&&(this._children.push(t),t.setParent(this))},getChildren:function(){return this._children},getChildrenLength:function(){return this._children.length},getChild:function(t){return this._children[t]},clearChildren:function(){this._children.length=0},removeChild:function(t){var e=this._children.indexOf(t);if(-1!==e)return this._children.splice(e,1),e},traverseChildren:function(t){for(var e=this._children.length,i=0;i<e;i++){var r=this._children[i];t.validNode(r)&&t.apply(r)}}}),lt.wind=lt.prototype.wind=K.GROUP;var gt=lt,_t=function(){gt.call(this)};(_t.prototype=Object.create(gt.prototype)).constructor=_t,Object.assign(_t.prototype,{}),_t.wind=_t.prototype.wind=K.GEODE;var dt=_t,At=function t(){gt.call(this),this._matrix=it.new(),this._mode=t.RELATIVE};At.RELATIVE=0,At.ABSOLUTE=1,(At.prototype=Object.create(gt.prototype)).constructor=At,Object.assign(At.prototype,{setMode:function(t){this._mode=t},getMode:function(){return this._mode},setMatrix:function(t){it.copy(this._matrix,t)},getMatrix:function(){return this._matrix},acceptBoundsVisitor:function(t){var e=it.new(),i=t.getMatrixStack(),r=i.length;r&&it.copy(e,i[r-1]),this.computeLocalToWorldMatrix(e),t.pushMatrix(e),t.traverse(this),t.popMatrix()},computeLocalToWorldMatrix:function(t){this._mode===At.RELATIVE?it.mul(t,t,this._matrix):it.copy(t,this._matrix)},computeWorldToLocalMatrix:function(t){var e=it.new();it.invert(e,this._matrix),this._mode===At.RELATIVE?it.mul(t,e,t):it.copy(t,e)}}),At.wind=At.prototype.wind=K.TRANSFORM;var pt=At,It={VIEW_VERSION:5,DATA_VERSION:5,CHARSIZE:1,UCHARSIZE:1,SHORTSIZE:2,USHORTSIZE:2,INTSIZE:4,UINTSIZE:4,FLOATSIZE:4,DOUBLESIZE:8,FLOAT2SIZE:8,FLOAT3SIZE:12,POINTSIZE:3,NORMALSIZE:3,TEXTURESIZE:2,BIG_ENDIAN_FLAG:16909060,LITTLE_ENDIAN_FLAG:67305985,VERIFY_FLAG:428347430};Object.freeze(It);var ft=It,Ct={NONE:0,POINT:1,NORMAL:2,TEXTURE:4};Object.freeze(Ct);var mt={UNKNOWN:0,ARRAY_TRIANGLES:1,INDEX_TRIANGLES:2,ARRAY_LINES:3,INDEX_LINES:4,ARRAY_LINE_STRIP:5,INDEX_LINE_STRIP:6,ARRAY_LINE_LOOP:7,INDEX_LINE_LOOP:8,ARRAY_TRIANGLE_STRIP:9,INDEX_TRIANGLE_STRIP:10,ARRAY_TRIANGLE_FAN:11,INDEX_TRIANGLE_FAN:12,ARRAY_POINTS:13,INDEX_POINTS:14};Object.freeze(mt);var vt={UNKNOWN:-1,STATIC:0,DYNAMIC:1,STREAM:2};Object.freeze(vt);var yt=function(){ct.call(this),this._vertexBuffer=null,this._indexes=null,this._solidVertexAligns=[],this._egdeVertexAlign=null,this._usageType=vt.STATIC};(yt.prototype=Object.create(ct.prototype)).constructor=yt,Object.assign(yt.prototype,{traverse:function(t){for(var e=this._solidVertexAligns.length,i=0;i<e;i++){var r=this._solidVertexAligns[i];this.traverseAlignment(r,t)}},computeBoundingBox:function(t){t.reset();var e=this._vertexBuffer;if(e){for(var i=J.MemoryPool.alloc(),r=t.getMin(),n=t.getMax(),o=0;o<e._size;o++){e.getPoint(o,i);var a=i[0];a<r[0]&&(r[0]=a),a>n[0]&&(n[0]=a);var s=i[1];s<r[1]&&(r[1]=s),s>n[1]&&(n[1]=s);var h=i[2];h<r[2]&&(r[2]=h),h>n[2]&&(n[2]=h)}J.MemoryPool.free(i)}return t},traverseAlignment:function(t,e){var i=t._start,r=t._start+t._count,n=this._vertexBuffer,o=J.MemoryPool.alloc(),a=J.MemoryPool.alloc(),s=J.MemoryPool.alloc();switch(t._type){case mt.ARRAY_TRIANGLES:for(var h=i;h<r&&(n.getPoint(h,o),n.getPoint(h+1,a),n.getPoint(h+2,s),!e.operateTriangle(o,a,s));h+=3);break;case mt.INDEX_TRIANGLES:for(var u=i;u<r&&(n.getPoint(this._indexes[u],o),n.getPoint(this._indexes[u+1],a),n.getPoint(this._indexes[u+2],s),!e.operateTriangle(o,a,s));u+=3);break;case mt.ARRAY_LINES:for(var c=i;c<r&&(n.getPoint(c,o),n.getPoint(c+1,a),!e.operateLine(o,a));c+=2);break;case mt.INDEX_LINES:for(var l=i;l<r&&(n.getPoint(this._indexes[l],o),n.getPoint(this._indexes[l+1],a),!e.operateLine(o,a));l+=2);break;case mt.ARRAY_POINTS:for(var g=i;g<r&&(n.getPoint(g,o),!e.operatePoint(o));g++);break;case mt.INDEX_POINTS:for(var _=i;_<r&&(n.getPoint(this._indexes[_],o),!e.operatePoint(o));_++);}J.MemoryPool.free(o),J.MemoryPool.free(a),J.MemoryPool.free(s)}}),yt.wind=yt.prototype.wind=K.GEOMETRY;var Et=yt,wt=function(){gt.call(this),this._switches=[]};(wt.prototype=Object.create(gt.prototype)).constructor=wt,Object.assign(wt.prototype,{addChild:function(t){gt.prototype.addChild.call(this,t),t&&this._switches.push(!1)},clearChildren:function(){gt.prototype.clearChildren.call(this),this._switches.length=0},removeChild:function(t){var e=gt.prototype.removeChild.call(this,t);void 0!==e&&this._switches.splice(e,1)},traverseChildren:function(t){for(var e=this._children.length,i=0;i<e;i++)this._switches[i]&&t.validNode(this._children[i])&&t.apply(this._children[i])},setSwitchValue:function(t,e){t<this._switches.length&&(this._switches[t]=e)},setAllSwitchesOn:function(){for(var t=this._switches.length,e=0;e<t;e++)this._switches[e]=!0},setAllSwitchesOff:function(){for(var t=this._switches.length,e=0;e<t;e++)this._switches[e]=!1},setSingleSwitchOn:function(t){for(var e=this._switches.length,i=0;i<e;i++)this._switches[i]=!1;this.setSwitchValue(t,!0)},setSingleSwitchOff:function(t){for(var e=this._switches.length,i=0;i<e;i++)this._switches[i]=!0;this.setSwitchValue(t,!1)}}),wt.wind=wt.prototype.wind=K.SWITCH;var Mt=wt,Tt={MATERIAL0:0,MATERIAL1:1,MATERIAL2:2,MATERIAL3:3,MATERIAL4:4,MATERIAL5:5,MATERIAL6:6,MATERIAL7:7,MATERIAL8:8,MATERIAL9:9,MATERIAL10:10};Object.freeze(Tt);var Pt=Tt,St=function t(){tt.call(this),this._mode=t.ON,this._type=Pt.MATERIAL0,this._pureColor=null,this._entityImage=null,this._textureImage=null,this._genericColor=null,this._multiplyColor=null,this._discardAlpha=null};St.OFF=0,St.ON=1,St.OVERRIDE=2,St.PROTECTED=4,(St.prototype=Object.create(tt.prototype)).constructor=St,Object.assign(St.prototype,{}),St.wind=St.prototype.wind=K.MATERIAL;var Rt=St,Ot=function(){Et.call(this),this._usageType=vt.STREAM};(Ot.prototype=Object.create(Et.prototype)).constructor=Ot,Object.assign(Ot.prototype,{init:function(){},update:function(){},data:function(){return{}}});var Lt=Ot,Nt=function(){Lt.call(this)};(Nt.prototype=Object.create(Lt.prototype)).constructor=Nt,Object.assign(Nt.prototype,{});var bt=Nt,Dt=function(){this._traverseMask=-1,this._nodeMaskOverride=0,this._matrixStack=[],this._materialStack=[]};(Dt.prototype={reset:function(){this._matrixStack.length=0},setNodeMaskOverride:function(t){this._nodeMaskOverride=t},getNodeMaskOverride:function(){return this._nodeMaskOverride},setTraverseMask:function(t){this._traverseMask=t},getTraverseMask:function(){return this._traverseMask},validNode:function(t){var e=t.getMask();return 0!=(this._traverseMask&(e|this._nodeMaskOverride))},pushMatrix:function(t){this._matrixStack.push(t)},popMatrix:function(){this._matrixStack.pop()},getMatrixStack:function(){return this._matrixStack},getCurrentMatrix:function(){return this._matrixStack[this._matrixStack.length-1]},pushMaterial:function(t){if(t)if(0===this._materialStack.length)this._materialStack.push(t);else{var e=this.getCurrentMaterial();e._mode&Rt.OVERRIDE&&!(t._mode&Rt.PROTECTED)?this._materialStack.push(e):this._materialStack.push(t)}},popMaterial:function(t){t&&this._materialStack.pop()},getMaterialStack:function(){return this._materialStack},getCurrentMaterial:function(){return this._materialStack[this._materialStack.length-1]},traverse:function(t){t.traverseChildren(this)},apply:function(t){this[t.wind](t)},applyGeometry:function(t){}})[pt.wind]=function(t){var e=this.getCurrentMatrix(),i=null;i=e?it.clone(e):it.new(),t.computeLocalToWorldMatrix(i),this.pushMatrix(i),this.pushMaterial(t._material),this.traverse(t),this.popMaterial(t._material),this.popMatrix()},Dt.prototype[dt.wind]=function(t){this[gt.wind](t)},Dt.prototype[gt.wind]=function(t){this.pushMaterial(t._material),this.traverse(t),this.popMaterial(t._material)},Dt.prototype[Et.wind]=function(t){this.pushMaterial(t._material),this.applyGeometry(t),this.popMaterial(t._material)};var xt=Dt,Bt={MODEL_ID:1,MODEL_VERSION:2,MODEL_NAME:10,MODEL_TYPE:12,MODEL_INFO:13,STOREY_NAME:20,TYPE_NAME:30,DOMAIN_NAME:33,CATEGORY_NAME:34,DOMAIN_TYPE:35,CATEGORY_TYPE:36,ENTITY_NAME:40,ENTITY_UNIQUEID:41,ENTITY_ORIGINID:42,ENTITY_NAME_ORIGINID:43};Object.freeze(Bt);var Gt=Bt,Ft={Unknown:0,Other:1,Architecture:2,Structure:3,WSD:4,HVAC:5,Electricity:6,FireProtection:7,CurtainWall:8,SteelStructure:9,Fabrication:10};Ft.getDomainName=function(t){return function(t){switch(t){case Ft.Other:return"";case Ft.Architecture:return"";case Ft.Structure:return"";case Ft.WSD:return"";case Ft.HVAC:return"";case Ft.Electricity:return"";case Ft.FireProtection:return"";case Ft.CurtainWall:return"";case Ft.SteelStructure:return"";case Ft.Fabrication:return"";default:return void console.log("unsupport domain type:"+t)}}(t)},Object.freeze(Ft);var Vt=Ft,kt={Unknown:0,ModelGroup:1,Assembly:2,AxisGrid:50,Rooms:51,Wall:100,Column:101,Beam:102,Door:103,Window:104,Roof:105,Cutter:106,Fascia:107,EdgeSlab:108,RoofSoffit:109,StairsRailing:110,Floor:111,Stair:112,SpecialityEquipment:113,Mass:114,Parking:115,Topography:116,Site:117,Ramp:118,Ceiling:119,Furniture:120,FurnitureSystem:121,GenericModel:122,Casework:123,CurtainWallMullion:124,CurtainWallPanel:125,CurtaSystem:126,Planting:127,Entourage:128,ShaftOpening:129,Roads:130,Chimney:131,BuildingPad:132,Cornices:133,RailingTopRail:134,Parts:135,StructuralFoundation:200,StructuralColumn:201,StructuralTrus:202,StructuralFraming:203,StructuralFramingSystem:204,StructConnection:205,Rebar:206,Plate:207,Fastener:208,StructuralWall:209,StructuralStiffener:210,StructuralFloor:211,Pipe:300,FlexPipeCurve:301,PipeFitting:302,PipeAccessory:303,Duct:304,FlexDuctCurve:305,DuctFitting:306,DuctAccessory:307,DuctTerminal:308,CableTray:309,CableTrayFitting:310,Conduit:311,ConduitFitting:312,Wire:313,PlumbingFixture:314,Sprinkler:315,SecurityDevice:316,NurseCallDevice:317,DataDevice:318,MechanicalEquipment:319,FireAlarmDevice:320,LightingDevice:321,LightingFixture:322,ElectricalEquipment:323,ElectricalFixture:324,TelephoneDevice:325,CommunicationDevice:326,HVACDevice:327,WSDDevice:328,FireProtectionDevice:329,AirCondition:330,AirTerminalBox:331,Boiler:332,Burner:333,Chiller:334,Coil:335,Compressor:336,Condenser:337,CooledBeam:338,CoolingTower:339,Damper:340,DuctSilencer:341,Engine:342,Evaporator:343,EvaporativeCooler:344,Fan:345,Filter:346,Flowmeter:347,HeatExchanger:348,Humidifier:349,Pump:350,SpaceHeater:351,Tank:352,TubeBundle:353,UnitaryEquipment:354,Valve:355,VibrationIsolator:356,ElectricGenerator:357,ElectricMotor:358,JunctionBox:359,Outlet:360,SwitchingDevice:361,ProtectiveDevice:362,Transformer:363,PipeInsulation:364,DuctInsulation:365,FabricationParts:366,FabricationPipework:367,FabricationContainment:368,FabricationHangers:369,FabricationDuctwork:370};kt.getCategoryName=function(t){return function(t){switch(t){case kt.ModelGroup:return"";case kt.Assembly:return"";case kt.AxisGrid:return"";case kt.Rooms:return"";case kt.Wall:return"";case kt.Column:return"";case kt.Beam:return"";case kt.Door:return"";case kt.Window:return"";case kt.Roof:return"";case kt.Cutter:return"";case kt.Fascia:return"";case kt.EdgeSlab:return"";case kt.RoofSoffit:return"";case kt.StairsRailing:return"";case kt.RailingTopRail:return"";case kt.Floor:return"";case kt.Stair:return"";case kt.SpecialityEquipment:return"";case kt.Mass:return"";case kt.Parking:return"";case kt.Topography:return"";case kt.BuildingPad:return"";case kt.Site:return"";case kt.Ramp:return"";case kt.Ceiling:return"";case kt.Furniture:return"";case kt.FurnitureSystem:return"";case kt.GenericModel:return"";case kt.Casework:return"";case kt.CurtainWallMullion:return"";case kt.CurtainWallPanel:return"";case kt.CurtaSystem:return"";case kt.Planting:return"";case kt.Entourage:return"";case kt.ShaftOpening:return"";case kt.Roads:return"";case kt.Chimney:return"";case kt.Cornices:return"";case kt.Parts:return"";case kt.StructuralFoundation:return"";case kt.StructuralColumn:return"";case kt.StructuralTrus:return"";case kt.StructuralFraming:return"";case kt.StructuralFramingSystem:return"";case kt.StructConnection:return"";case kt.Rebar:return"";case kt.Plate:return"";case kt.Fastener:return"";case kt.StructuralWall:return"";case kt.StructuralStiffener:return"";case kt.StructuralFloor:return"";case kt.Pipe:return"";case kt.FlexPipeCurve:return"";case kt.PipeFitting:return"";case kt.PipeAccessory:return"";case kt.Duct:return"";case kt.FlexDuctCurve:return"";case kt.DuctFitting:return"";case kt.DuctAccessory:return"";case kt.DuctTerminal:return"";case kt.CableTray:return"";case kt.CableTrayFitting:return"";case kt.Conduit:return"";case kt.ConduitFitting:return"";case kt.Wire:return"";case kt.PlumbingFixture:return"";case kt.Sprinkler:return"";case kt.SecurityDevice:return"";case kt.NurseCallDevice:return"";case kt.DataDevice:return"";case kt.MechanicalEquipment:return"";case kt.FireAlarmDevice:return"";case kt.LightingDevice:return"";case kt.LightingFixture:return"";case kt.ElectricalEquipment:return"";case kt.ElectricalFixture:return"";case kt.TelephoneDevice:return"";case kt.CommunicationDevice:return"";case kt.HVACDevice:return"";case kt.WSDDevice:return"";case kt.FireProtectionDevice:return"";case kt.AirCondition:return"";case kt.AirTerminalBox:return"";case kt.Boiler:return"";case kt.Burner:return"";case kt.Chiller:return"";case kt.Coil:return"";case kt.Compressor:return"";case kt.Condenser:return"";case kt.CooledBeam:return"";case kt.CoolingTower:return"";case kt.Damper:return"";case kt.DuctSilencer:return"";case kt.Engine:return"";case kt.Evaporator:return"";case kt.EvaporativeCooler:return"";case kt.Fan:return"";case kt.Filter:return"";case kt.Flowmeter:return"";case kt.HeatExchanger:return"";case kt.Humidifier:return"";case kt.Pump:return"";case kt.SpaceHeater:return"";case kt.Tank:return"";case kt.TubeBundle:return"";case kt.UnitaryEquipment:return"";case kt.Valve:return"";case kt.VibrationIsolator:return"";case kt.ElectricGenerator:return"";case kt.ElectricMotor:return"";case kt.Cateogry_JunctionBox:return"";case kt.Outlet:return"";case kt.SwitchingDevice:return"";case kt.ProtectiveDevice:return"";case kt.Transformer:return"";case kt.PipeInsulation:return"";case kt.DuctInsulation:return"";case kt.FabricationParts:return"";case kt.FabricationPipework:return"";case kt.FabricationContainment:return"";case kt.FabricationHangers:return"";case kt.FabricationDuctwork:return"";default:return void console.log("unsupport category type:"+t)}}(t)},Object.freeze(kt);var Ut=kt,Ht=function(){gt.call(this),this._parameters=null};(Ht.prototype=Object.create(gt.prototype)).constructor=Ht,Object.assign(Ht.prototype,{getOutmostRelation:function(){var t=null,e=this._parent;if(e)for(;e.wind===K.RELATION;)t=e,e=e._parent;return t},getName:function(){return this._parameters?this._parameters.name:null},getUniqueId:function(){return this._parameters?this._parameters.uuid:null},getCategory:function(){return this._parameters?this._parameters.category:null},getDomain:function(){return this._parameters?this._parameters.domain:null},getTypeName:function(){return this._parameters?this._parameters.type:null},getParameters:function(){return this._parameters},getParameter:function(t){if(!this._parameters)return"";switch(t){case Gt.DOMAIN_NAME:return Vt.getDomainName(this._parameters.domain);case Gt.DOMAIN_TYPE:return this._parameters.domain;case Gt.CATEGORY_NAME:return Ut.getCategoryName(this._parameters.category);case Gt.CATEGORY_TYPE:return this._parameters.category;case Gt.TYPE_NAME:return this._parameters.type;case Gt.ENTITY_ORIGINID:return this._parameters.entityId;case Gt.ENTITY_UNIQUEID:return this._parameters.uuid;case Gt.ENTITY_NAME:return this._parameters.name;case Gt.ENTITY_NAME_ORIGINID:return this._parameters.name.concat("[",this._parameters.entityId,"]");case Gt.STOREY_NAME:return this._parameters.floor;case Gt.MODEL_NAME:return this._parameters.model;case Gt.MODEL_ID:return this._parameters.modelId;case Gt.MODEL_VERSION:return this._parameters.version;default:return""}}}),Ht.wind=Ht.prototype.wind=K.ENTITY;var jt=Ht,Yt=function(){jt.call(this)};(Yt.prototype=Object.create(jt.prototype)).constructor=Yt,Object.assign(Yt.prototype,{}),Yt.wind=Yt.prototype.wind=K.AXISGRID;var zt=Yt,Wt=function(){jt.call(this),this._textureMaterial=null,this._storey=null};(Wt.prototype=Object.create(jt.prototype)).constructor=Wt,Object.assign(Wt.prototype,{getElevation:function(){return this._storey?this._storey.getElevation():0},getHeight:function(){return this._storey?this._storey.getHeight():0},getParameters:function(){var t={};return t.uniqueid=this.getParameter(Gt.ENTITY_UNIQUEID),t.modelId=this.getParameter(Gt.MODEL_ID),t.version=this.getParameter(Gt.MODEL_VERSION),t.name=this.getParameter(Gt.ENTITY_NAME),t.originid=this.getParameter(Gt.ENTITY_ORIGINID),t.domain=this.getParameter(Gt.DOMAIN_NAME),t.category=this.getParameter(Gt.CATEGORY_NAME),t.type=this.getParameter(Gt.TYPE_NAME),t.storey=this.getParameter(Gt.STOREY_NAME),t.project=this.getParameter(Gt.MODEL_NAME),t},getParameter:function(t){if(!this._parameters)return"";switch(t){case Gt.DOMAIN_NAME:return Vt.getDomainName(this._parameters.domain);case Gt.DOMAIN_TYPE:return this._parameters.domain;case Gt.CATEGORY_NAME:return Ut.getCategoryName(this._parameters.category);case Gt.CATEGORY_TYPE:return this._parameters.category;case Gt.TYPE_NAME:return this._parameters.type;case Gt.ENTITY_ORIGINID:return this._parameters.entityId;case Gt.ENTITY_UNIQUEID:return this._parameters.uuid;case Gt.ENTITY_NAME:return this._parameters.name;case Gt.ENTITY_NAME_ORIGINID:return this._parameters.name.concat("[",this._parameters.entityId,"]");case Gt.STOREY_NAME:return this._parameters.floor;case Gt.MODEL_NAME:return this._parameters.model;case Gt.MODEL_ID:return this._parameters.modelId;case Gt.MODEL_VERSION:return this._parameters.version;default:return""}}}),Wt.wind=Wt.prototype.wind=K.COMPONENT;var Xt=Wt,Jt=function(){jt.call(this)};(Jt.prototype=Object.create(jt.prototype)).constructor=Jt,Object.assign(Jt.prototype,{getRelComponents:function(t){for(var e=this._children.length,i=0;i<e;i++){var r=this._children[i];if(r.wind===K.RELATION)r.getRelComponents(t);else{if(r.wind!==K.COMPONENT)return;t.push(r)}}}}),Jt.wind=Jt.prototype.wind=K.RELATION;var qt=Jt,Zt=function(){this._geometry=null,this._transform=null,this._material=null,this._tmaterial=null,this._reference=null,this._octreeNode=null,this._boundingBox=null,this._boundingSphere=null};Zt.prototype={setGeometry:function(t){this._geometry=t},getGeometry:function(){return this._geometry},setTransform:function(t){this._transform=t},getTransform:function(){return this._transform},setMaterial:function(t){this._material=t},getMaterial:function(){return this._material},setReference:function(t){this._reference=t},getReference:function(){return this._reference},getBoundingBox:function(){return null===this._boundingBox&&(this._boundingBox=new at,this._boundingBox.copy(this._geometry.getBoundingBox()),this._transform&&this._boundingBox.transformMat4(this._transform)),this._boundingBox},getBoundingSphere:function(){if(null===this._boundingSphere){this._boundingSphere=new ht;var t=this.getBoundingBox();this._boundingSphere.expandByBoundingBox(t)}return this._boundingSphere},getRadius:function(){return this.getBoundingSphere().getRadius()},reset:function(){this._geometry=null,this._transform=null,this._boundingBox=null,this._boundingSphere=null}};var Kt=Zt,Qt=function(){jt.call(this),this._translation=null};(Qt.prototype=Object.create(jt.prototype)).constructor=Qt,Object.assign(Qt.prototype,{getTranslation:function(){return this._translation}}),Qt.wind=Qt.prototype.wind=K.DRAWING;var $t=function(){jt.call(this)};($t.prototype=Object.create(jt.prototype)).constructor=$t,Object.assign($t.prototype,{}),$t.wind=$t.prototype.wind=K.PRIMITIVE;var te=function(){jt.call(this)};(te.prototype=Object.create(jt.prototype)).constructor=te,Object.assign(te.prototype,{getRelPrimitives:function(t){for(var e=this._children.length,i=0;i<e;i++){var r=this._children[i];t.push(r)}}}),te.wind=te.prototype.wind=K.LAYER;var ee=function(){xt.call(this),this._currentDataItem=null,this._currentReference=null,this._coverColorMaterial=null,this._coverTextureMaterial=null,this._boundingBoxStack=[]};(ee.prototype=Object.create(xt.prototype)).constructor=ee,Object.assign(ee.prototype,{reset:function(){xt.prototype.reset.call(this),this._currentDataItem=null,this._currentReference=null,this._boundingBoxStack.length=0},handle:function(t,e){if(t){var i=t._root;if(i){this.reset(),this._currentDataItem=t;var r=new at;i.setBoundingBox(r),this.pushBoundingBox(r),i.wind===K.MODEL?this.pushMatrix(this.computeModelTransform(e)):i.wind===K.DRAWING&&this.pushMatrix(this.computeDrawingTransform(e)),this.traverse(i),this.popMatrix(),this.popBoundingBox()}}},computeDrawingTransform:function(t){var e=it.new(),i=this._currentDataItem._root.getTranslation();if(i)if(t._used){var r=J.MemoryPool_d.alloc();J.sub(r,i,t),it.fromTranslation(e,r),J.MemoryPool_d.free(r)}else J.copy(t,i),t._used=!0;else t._used||(t._used=!0);return e},computeModelTransform:function(t){var e=it.new(),i=this._currentDataItem._root.getTranslation();if(i)if(t._used){var r=J.MemoryPool_d.alloc();J.sub(r,i,t),it.fromTranslation(e,r),J.MemoryPool_d.free(r)}else J.copy(t,i),t._used=!0;else t._used||(t._used=!0);var n=this._currentDataItem._root.getRotation();if(n){var o=it.MemoryPool.alloc();it.fromQuat(o,n),it.multiply(e,e,o),it.MemoryPool.free(o)}return e},applyGeometry:function(t){var e=new Kt;if(e._geometry=t,e._transform=this.getCurrentMatrix(),this._coverColorMaterial?e._material=this._coverColorMaterial:e._material=this.getCurrentMaterial(),this._coverTextureMaterial)e._tmaterial=this._coverTextureMaterial;else{var i=this.getCurrentMaterial();i&&i._type!==Pt.MATERIAL1&&(e._tmaterial=i)}e._reference=this._currentReference,this.getCurrentBoundingBox().expandByBoundingBox(e.getBoundingBox()),this._currentReference.wind===K.COMPONENT?this._currentDataItem._componentOperables.push(e):this._currentReference.wind===K.AXISGRID?this._currentDataItem._axisgridOperables.push(e):this._currentReference.wind===K.PRIMITIVE&&this._currentDataItem._primitiveOperables.push(e)},pushBoundingBox:function(t){this._boundingBoxStack.push(t)},popBoundingBox:function(){this._boundingBoxStack.pop()},getBoundingBoxStack:function(){return this._boundingBoxStack},getCurrentBoundingBox:function(){return this._boundingBoxStack[this._boundingBoxStack.length-1]}}),ee.prototype[$t.wind]=function(t){var e=new at;t.setBoundingBox(e),this.pushBoundingBox(e),this._currentReference=t,this._coverColorMaterial=t._material,this.traverse(t),this._coverColorMaterial=null,this._currentReference=null,this.popBoundingBox(),this.getCurrentBoundingBox().expandByBoundingBox(e)},ee.prototype[qt.wind]=function(t){var e=new at;t.setBoundingBox(e),this.pushBoundingBox(e),this.traverse(t),this.popBoundingBox(),this.getCurrentBoundingBox().expandByBoundingBox(e)},ee.prototype[Xt.wind]=function(t){var e=new at;t.setBoundingBox(e),this.pushBoundingBox(e),this._currentReference=t,this._coverColorMaterial=t._material,this._coverTextureMaterial=t._textureMaterial,this.traverse(t),this._coverColorMaterial=null,this._coverTextureMaterial=null,this._currentReference=null,this.popBoundingBox(),this.getCurrentBoundingBox().expandByBoundingBox(e)},ee.prototype[zt.wind]=function(t){this._currentReference=t,this.pushMaterial(t._material),this.traverse(t),this.popMaterial(t._material),this._currentReference=null};var ie=ee,re={UNKNOWN:-1,MODEL:0,DRAWING:1,FAMILY:2};Object.freeze(re);var ne=function(t){this._id=t,this._version=0,this._name="",this._root=null,this._groups=[],this._geodes=[],this._transforms=[],this._geometries=[],this._materials=[],this._images=[],this._paramLoaded=!1};Object.assign(ne.prototype,{type:function(){return re.UNKNOWN},isParamLoaded:function(t){return void 0!==t&&(this._paramLoaded=t),this._paramLoaded},modelId:function(){return this._id},version:function(){return this._version},getModelKey:function(){return this._version?this._id+this._version:this._id},setModelRoot:function(t){this._root=t},getModelRoot:function(){return this._root},setVersion:function(t){this._version=t},setName:function(t){this._name=t},getName:function(){return this._name}});var oe=ne,ae=function(){tt.call(this),this._format=0,this._image=null,this._size=0,this._data=null};ae.UNKNOWN=0,ae.PNG=1,ae.JPG=2,ae.TGA=3,ae.TIFF=4,ae.BMP=5,(ae.prototype=Object.create(tt.prototype)).constructor=ae,Object.assign(Node.prototype,{}),ae.wind=ae.prototype.wind=K.IMAGE;var se=ae,he=function(){jt.call(this),this._detaillevel=4,this._translation=null,this._rotation=null};(he.prototype=Object.create(jt.prototype)).constructor=he,Object.assign(he.prototype,{getDetailLevel:function(){return this._detaillevel},getTranslation:function(){return this._translation},getRotation:function(){return this._rotation}}),he.wind=he.prototype.wind=K.MODEL;var ue=he,ce={POINT:0,NORMAL:1,TEXTURE:2,TRANSFORM_COL1:3,TRANSFORM_COL2:4,TRANSFORM_COL3:5,TRANSFORM_COL4:6,COLOR:7,STATE:8,fromString:function(t){return"Point"===t?ce.POINT:"Normal"===t?ce.NORMAL:"Texture"===t?ce.TEXTURE:void 0}};Object.freeze(ce);var le=ce,ge={DISABLE:0,ENABLE:1,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BLEND:3042,CULL_FACE:2884,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,CW:2304,CCW:2305,COLOR_BUFFER_BIT:16384,DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,STREAM_DRAW:35040,VERTEX_SHADER:35633,FRAGMENT_SHADER:35632,DELETE_STATUS:35712,COMPILE_STATUS:35713,SHADER_TYPE:35663,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635};ge.HALF_FLOAT_OES=ge.HALF_FLOAT=36193,ge.TEXTURE_MAG_FILTER=10240,ge.TEXTURE_MIN_FILTER=10241,ge.TEXTURE_WRAP_S=10242,ge.TEXTURE_WRAP_T=10243,ge.LINEAR=9729,ge.NEAREST=9728,ge.NEAREST_MIPMAP_NEAREST=9984,ge.LINEAR_MIPMAP_NEAREST=9985,ge.NEAREST_MIPMAP_LINEAR=9986,ge.LINEAR_MIPMAP_LINEAR=9987,ge.CLAMP_TO_EDGE=33071,ge.REPEAT=10497,ge.MIRRORED_REPEAT=33648,ge.TEXTURE_MAX_ANISOTROPY_EXT=34046,ge.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047,ge.UNPACK_FLIP_Y_WEBGL=37440,ge.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,ge.BROWSER_DEFAULT_WEBGL=37444,ge.NONE=0,ge.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,ge.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,ge.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,ge.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,ge.COMPRESSED_RGB_ATC_WEBGL=35986,ge.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987,ge.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798,ge.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,ge.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841,ge.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,ge.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843,ge.COMPRESSED_RGB_ETC1_WEBGL=36196,ge.FRAMEBUFFER=36160,ge.COLOR_ATTACHMENT0=36064,ge.DEPTH_ATTACHMENT=36096,ge.STENCIL_ATTACHMENT=36128,ge.DEPTH_STENCIL_ATTACHMENT=33306,ge.RENDERBUFFER=36161,ge.FRAMEBUFFER_COMPLETE=36053,ge.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,ge.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,ge.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,ge.FRAMEBUFFER_UNSUPPORTED=36061,ge.RENDERBUFFER=36161,ge.RGBA4=32854,ge.RGB565=36194,ge.RGB5_A1=32855,ge.DEPTH_COMPONENT16=33189,ge.STENCIL_INDEX8=36168,ge.DEPTH_STENCIL=34041,ge.getArrayType=function(t){return t instanceof Int8Array?ge.BYTE:t instanceof Uint8Array?ge.UNSIGNED_BYTE:t instanceof Int16Array?ge.SHORT:t instanceof Uint16Array?ge.UNSIGNED_SHORT:t instanceof Int32Array?ge.INT:t instanceof Uint32Array?ge.UNSIGNED_INT:(Float32Array,ge.FLOAT)},ge.getTypeSize=function(t){switch(t){case ge.BYTE:case ge.UNSIGNED_BYTE:return ft.CHARSIZE;case ge.SHORT:return ft.SHORTSIZE;case ge.UNSIGNED_SHORT:return ft.USHORTSIZE;case ge.INT:return ft.INTSIZE;case ge.UNSIGNED_INT:return ft.UINTSIZE;case ge.FLOAT:return ft.FLOATSIZE;default:return 0}},Object.freeze(ge);var _e=ge,de=function(){this._type=0,this._start=0,this._count=0,this._changed=!1};de.wind=de.prototype.wind=K.VERTEXALIGN;var Ae=function(){this._componentSize=0,this._componentType=_e.FLOAT,this._attributeType=le.UNKNOWN,this._normalized=!1,this._bufferData=null,this._divisorNumber=null,this._changed=!1},pe=function(){this._size=0,this._datas=[]};pe.wind=(pe.prototype={getPoint:function(t,e){}}).wind=K.VERTEXBUFFER;var Ie=function(){pe.call(this),this._data=null,this._vertexByteStride=0,this._vertexAccess=null,this._littleEndian=!1};(Ie.prototype=Object.create(pe.prototype)).constructor=Ie,Object.assign(Ie.prototype,{getPoint:function(t,e){var i=t*this._vertexByteStride;e[0]=this._vertexAccess.getFloat32(i,this._littleEndian),e[1]=this._vertexAccess.getFloat32(i+ft.FLOATSIZE,this._littleEndian),e[2]=this._vertexAccess.getFloat32(i+ft.FLOAT2SIZE,this._littleEndian)}}),Ie.wind=Ie.prototype.wind=K.COMBINEVERTEXBUFFER;var fe=function(){pe.call(this)};(fe.prototype=Object.create(pe.prototype)).constructor=fe,Object.assign(fe.prototype,{getPoint:function(t,e){var i=this._datas[0];t*=3,e[0]=i._bufferData[t],e[1]=i._bufferData[t+1],e[2]=i._bufferData[t+2]}}),fe.wind=fe.prototype.wind=K.SEPARATEVERTEXBUFFER;var Ce=function(){pe.call(this)};(Ce.prototype=Object.create(pe.prototype)).constructor=Ce,Object.assign(Ce.prototype,{});var me=function(){this._buffer=null,this._lastOffset=0,this._currentOffset=0,this._littleEndian=!0};me.prototype={clearStream:function(){this._buffer=null,this._lastOffset=0,this._currentOffset=0,this._littleEndian=!0},setArrayBuffer:function(t){this._buffer=new DataView(t),this._lastOffset=0,this._currentOffset=0,this._littleEndian=!0},readEndianFlag:function(){this._lastOffset=this._currentOffset,this._currentOffset+=ft.UINTSIZE;var t=this._buffer.getUint32(this._lastOffset,!1);this._littleEndian=t!==ft.BIG_ENDIAN_FLAG},readVerifyFlag:function(){return this.readUInt()===ft.VERIFY_FLAG},readBool:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.CHARSIZE,1===this._buffer.getInt8(this._lastOffset)},readChar:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.CHARSIZE,this._buffer.getInt8(this._lastOffset)},readUChar:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.UCHARSIZE,this._buffer.getUint8(this._lastOffset)},readShort:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.SHORTSIZE,this._buffer.getInt16(this._lastOffset,this._littleEndian)},readUShort:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.USHORTSIZE,this._buffer.getUint16(this._lastOffset,this._littleEndian)},readInt:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.INTSIZE,this._buffer.getInt32(this._lastOffset,this._littleEndian)},readUInt:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.UINTSIZE,this._buffer.getUint32(this._lastOffset,this._littleEndian)},readFloat:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.FLOATSIZE,this._buffer.getFloat32(this._lastOffset,this._littleEndian)},readDouble:function(){return this._lastOffset=this._currentOffset,this._currentOffset+=ft.DOUBLESIZE,this._buffer.getFloat64(this._lastOffset,this._littleEndian)},readString:function(){var t=this.readUInt();return this.readUnicodeString(t)},readVerifyString:function(){var t=this.readVerifyUInt();return void 0===t?void 0:this.readUnicodeString(t)},readUnicodeString:function(t){var e="";if(0===t)return e;this._lastOffset=this._currentOffset,this._currentOffset+=t;for(var i=0;i<t;){var r=this._buffer.getUint8(i+this._lastOffset).toString(2),n=r.match(/^1+?(?=0)/);if(n&&8===r.length){for(var o=n[0].length,a=this._buffer.getUint8(i+this._lastOffset).toString(2).slice(7-o),s=1;s<o;s++)a+=this._buffer.getUint8(s+i+this._lastOffset).toString(2).slice(2);e+=String.fromCharCode(parseInt(a,2)),i+=o}else e+=String.fromCharCode(this._buffer.getUint8(i+this._lastOffset)),i++}return e},readVerifyUInt:function(){var t=this.readUInt();return this.readVerifyFlag()?t:void 0},readVerifyVecString:function(t){var e=this.readVerifyUInt();if(void 0===e)return!1;for(var i=0;i<e;i++){var r=this.readVerifyString();if(void 0===r)return!1;t.push(r)}return!0},readCharArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.CHARSIZE;for(var e=new Int8Array(t),i=0;i<t;i++)e[i]=this._buffer.getInt8(i*ft.CHARSIZE+this._lastOffset);return e},readUCharArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.UCHARSIZE;for(var e=new Uint8Array(t),i=0;i<t;i++)e[i]=this._buffer.getUint8(i*ft.UCHARSIZE+this._lastOffset);return e},readShortArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.SHORTSIZE;for(var e=new Int16Array(t),i=0;i<t;i++)e[i]=this._buffer.getInt16(i*ft.SHORTSIZE+this._lastOffset,this._littleEndian);return e},readUShortArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.USHORTSIZE;for(var e=new Uint16Array(t),i=0;i<t;i++)e[i]=this._buffer.getUint16(i*ft.USHORTSIZE+this._lastOffset,this._littleEndian);return e},readIntArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.INTSIZE;for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=this._buffer.getInt32(i*ft.INTSIZE+this._lastOffset,this._littleEndian);return e},readUIntArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.UINTSIZE;for(var e=new Uint32Array(t),i=0;i<t;i++)e[i]=this._buffer.getUint32(i*ft.UINTSIZE+this._lastOffset,this._littleEndian);return e},readFloatArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.FLOATSIZE;for(var e=new Float32Array(t),i=0;i<t;i++)e[i]=this._buffer.getFloat32(i*ft.FLOATSIZE+this._lastOffset,this._littleEndian);return e},readDoubleArray:function(t){this._lastOffset=this._currentOffset,this._currentOffset+=t*ft.DOUBLESIZE;for(var e=new Float64Array(t),i=0;i<t;i++)e[i]=this._buffer.getFloat64(i*ft.DOUBLESIZE+this._lastOffset,this._littleEndian);return e}};var ve,ye,Ee,we=me,Me=function(t){we.call(this),this._version=1,this._dataitem=t};(Me.prototype=Object.create(we.prototype)).constructor=Me,Object.assign(Me.prototype,{readDataStream:(Ee=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setArrayBuffer(e),this.readEndianFlag(),this.readVersion(),i=this.readNodeObject(),t.next=6,this.loadImages();case 6:return this.clearStream(),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return Ee.apply(this,arguments)}),clearStream:function(){we.prototype.clearStream.call(this),this._version=1},loadImages:(ye=u()(s.a.mark((function t(){var e,i,r,n,o,a=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],i=this._dataitem._images.length,r=0;r<i;r++)(n=this._dataitem._images[r])&&(o=this.loadImage(n))&&e.push(o);return t.next=5,Promise.all(e).then((function(){for(var t=0;t<i;t++){var e=a._dataitem._images[t];if(e){var r=e._image;e._image=Y.checkImage(r),e._data=null}}}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return ye.apply(this,arguments)}),loadImage:(ve=u()(s.a.mark((function t(e){var i,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null,r=e._data,(n=e._format)===se.PNG?i=new Blob([r.buffer],{type:"image/png"}):n===se.JPG?i=new Blob([r.buffer],{type:"image/jpeg"}):n===se.TGA?i=new Blob([r.buffer],{type:"image/x-targa"}):n===se.TIFF?i=new Blob([r.buffer],{type:"image/tiff"}):n===se.BMP?i=new Blob([r.buffer],{type:"image/bmp"}):console.log("wrong image type!"),!i){t.next=6;break}return t.abrupt("return",new Promise((function(t,r){var n=new Image;n.onload=function(){window.URL.revokeObjectURL(n.src),t("oooooooooooo")},n.onerror=function(){r("error")},n.src=window.URL.createObjectURL(i),e._image=n})));case 6:case"end":return t.stop()}}),t)}))),function(t){return ve.apply(this,arguments)}),readVersion:function(){this._version=this.readUShort()},readNodeObject:function(){var t=this.readUShort();return t===K.MODEL?this.readModelObject():t===K.COMPONENT?this.readComponentObject():t===K.AXISGRID?this.readAxisgridObject():t===K.RELATION?this.readRelationObject():t===K.DRAWING?this.readDrawingObject():t===K.PRIMITIVE?this.readComponentObject():t===K.LAYER?this.readComponentObject():t===K.GEODE?this.readGeodeObject():t===K.TRANSFORM?this.readTransformObject():t===K.GROUP?this.readGroupObject():t===K.GEOMETRY?this.readGeometryObject():null},readModelObject:function(){var t=new ue;return this.readModel(t),t},readDrawingObject:function(){var t=new Qt;return this.readDrawing(t),t},readGroupObject:function(){var t=this.readInt(),e=this._dataitem._groups[t];return e||((e=new gt).setID(t),this._dataitem._groups[t]=e,this.readGroup(e)),e},readGeodeObject:function(){var t=this.readInt(),e=this._dataitem._geodes[t];return e||((e=new dt).setID(t),this._dataitem._geodes[t]=e,this.readGeode(e)),e},readTransformObject:function(){var t=this.readInt(),e=this._dataitem._transforms[t];return e||((e=new pt).setID(t),this._dataitem._transforms[t]=e,this.readTransform(e)),e},readGeometryObject:function(){var t=this.readInt(),e=this._dataitem._geometries[t];return e||((e=new Et).setID(t),this._dataitem._geometries[t]=e,this.readGeometry(e)),e},readComponentObject:function(){var t=new Xt,e=this.readInt();return t.setID(e),this._dataitem._components[e]=t,this.readComponent(t),t},readAxisgridObject:function(){var t=new zt,e=this.readInt();return t.setID(e),this._dataitem._axisgrids[e]=t,this.readAxisgrid(t),t},readRelationObject:function(){var t=new qt,e=this.readInt();return t.setID(e),this._dataitem._relations[e]=t,this.readRelation(t),t},readPrimitiveObject:function(){var t=new $t,e=this.readInt();return t.setID(e),this._dataitem._components[e]=t,this.readComponent(t),t},readLayerObject:function(){var t=new te,e=this.readInt();return t.setID(e),this._dataitem._relations[e]=t,this.readRelation(t),t},readMaterialObject:function(){var t=this.readInt(),e=this._dataitem._materials[t];if(!e){var i=this.readUShort();e=new Rt,i===K.COLORMATERIAL?this.readColorMaterial(e):i===K.TEXTUREMATERIAL&&this.readTextureMaterial(e),e._mode=Rt.OVERRIDE,e.setID(t),this._dataitem._materials[t]=e}return e},readImageObject:function(){var t=this.readInt(),e=this._dataitem._images[t];return e||(e=new se,this.readUShort(),this.readImage(e),e.setID(t),this._dataitem._images[t]=e),e},readImage:function(t){t._format=this.readUChar(),t._size=this.readUInt(),t._data=this.readUCharArray(t._size)},readMaterial:function(t){t._pureColor=this.readFloatArray(4)},readColorMaterial:function(t){t._type=Pt.MATERIAL1,this.readMaterial(t)},readTextureMaterial:function(t){this.readMaterial(t),this.readBool()?(t._type=Pt.MATERIAL10,t._entityImage=this.readImageObject(),t._genericColor=this.readFloatArray(4),t._multiplyColor=this.readFloatArray(4)):(t._type=Pt.MATERIAL9,t._genericColor=this.readFloatArray(4),t._multiplyColor=this.readFloatArray(4))},readComponent:function(t){this.readEntity(t),this._version>4&&this.readBool()&&(t._textureMaterial=this.readMaterialObject())},readRelation:function(t){this.readEntity(t)},readAxisgrid:function(t){this.readEntity(t)},readNode:function(t){this.readBool()&&(t._material=this.readMaterialObject())},readEntity:function(t){this.readGroup(t)},readModel:function(t){this.readGroup(t),t._detaillevel=this.readInt(),t._translation=this.readDoubleArray(3),t._rotation=this.readFloatArray(4)},readDrawing:function(t){this.readGroup(t),t._translation=this.readDoubleArray(3)},readGeode:function(t){this.readGroup(t)},readGroup:function(t){this.readNode(t);for(var e=this.readUInt(),i=0;i<e;i++)t.addChild(this.readNodeObject())},readTransform:function(t){this.readGroup(t),t._matrix=this.readFloatArray(16)},readGeometry:function(t){this.readNode(t);var e=new Ie;t._vertexBuffer=e;var i=this.readUInt(),r=i&Ct.POINT,n=i&Ct.NORMAL,o=i&Ct.TEXTURE;e._vertexType=i;var a=this.readUInt();e._size=a;var s=0,h=0;if(r){var u=new Ae;u._componentSize=3,u._componentType=_e.FLOAT,u._attributeType=le.POINT,u._normalized=!1,e._datas.push(u),s+=3*a*ft.FLOATSIZE,h+=3*ft.FLOATSIZE}if(n){var c=new Ae;c._componentSize=4,c._componentType=_e.BYTE,c._attributeType=le.NORMAL,c._normalized=!0,e._datas.push(c),s+=4*a*ft.CHARSIZE,h+=4*ft.CHARSIZE}if(o){var l=new Ae;l._componentSize=2,l._componentType=_e.FLOAT,l._attributeType=le.TEXTURE,l._normalized=!1,e._datas.push(l),s+=2*a*ft.FLOATSIZE,h+=2*ft.FLOATSIZE}e._vertexByteStride=h,e._data=this.readCharArray(s).buffer,e._vertexAccess=new DataView(e._data),e._littleEndian=this._littleEndian;var g=this.readUInt();t._indexes=a<255?this.readUCharArray(g):a<65535?this.readUShortArray(g):this.readUIntArray(g);for(var _=this.readUInt(),d=0;d<_;d++){var A=new de;this.readAlignment(A),t._solidVertexAligns.push(A)}if(this.readBool()){var p=new de;this.readAlignment(p),t._egdeVertexAlign=p}},readAlignment:function(t){t._type=this.readUChar(),t._start=this.readUInt(),t._count=this.readUInt()}});var Te=Me,Pe=function(t){Te.call(this,t)};(Pe.prototype=Object.create(Te.prototype)).constructor=Pe,Object.assign(Pe.prototype,{clearStream:function(){Te.prototype.clearStream.call(this)},readNodeObject:function(){var t=this.readUShort();return t===K.MODEL?this.readModelObject():t===K.COMPONENT?this.readComponentObject():t===K.AXISGRID?this.readAxisgridObject():t===K.RELATION?this.readRelationObject():t===K.GEODE?this.readGeodeObject():t===K.TRANSFORM?this.readTransformObject():t===K.GROUP?this.readGroupObject():t===K.GEOMETRY?this.readGeometryObject():null},readModelObject:function(){var t=new ue;return this.readModel(t),t},readComponentObject:function(){var t=new Xt,e=this.readInt();return t.setID(e),this._dataitem._components[e]=t,this.readComponent(t),t},readAxisgridObject:function(){var t=new zt,e=this.readInt();return t.setID(e),this._dataitem._axisgrids[e]=t,this.readAxisgrid(t),t},readRelationObject:function(){var t=new qt,e=this.readInt();return t.setID(e),this._dataitem._relations[e]=t,this.readRelation(t),t},readComponent:function(t){this.readEntity(t),this._version>4&&this.readBool()&&(t._textureMaterial=this.readMaterialObject())},readRelation:function(t){this.readEntity(t)},readAxisgrid:function(t){this.readEntity(t)},readModel:function(t){this.readGroup(t),t._detaillevel=this.readInt(),t._translation=this.readDoubleArray(3),t._rotation=this.readFloatArray(4)}});var Se=Pe,Re=r(1),Oe=function(t){oe.call(this,t),this._layers=[],this._primitives=[],this._primitiveOperables=[]};(Oe.prototype=Object.create(oe.prototype)).constructor=Oe,Object.assign(Oe.prototype,{type:function(){return re.DRAWING},updatePrimitiveParameters:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];this._primitives[r.id]._parameters=r}},updateLayerParameters:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];this._layers[r.id]._parameters=r}}});var Le=Oe,Ne=function(){jt.call(this)};(Ne.prototype=Object.create(jt.prototype)).constructor=Ne,Object.assign(Ne.prototype,{getElevation:function(){return this._parameters?this._parameters.elevation:null},getHeight:function(){return this._parameters?this._parameters.height:null}});var be=Ne,De=function(t){oe.call(this,t),this._relations=[],this._components=[],this._axisgrids=[],this._componentOperables=[],this._axisgridOperables=[],this._storeyMap=new Map,this._relationMap=new Map,this._componentMap=new Map,this._axisgridMap=new Map};(De.prototype=Object.create(oe.prototype)).constructor=De,Object.assign(De.prototype,{type:function(){return re.MODEL},getEntityByUniqueId:function(t){var e=this.getComponentByUniqueId(t);return e||((e=this.getRelationByUniqueId(t))||void 0)},getAllComponent:function(){return this._componentMap},getComponentByUniqueId:function(t){return this._componentMap.get(t)},getAllRelation:function(){return this._relationMap},getRelationByUniqueId:function(t){return this._relationMap.get(t)},getAllAxisgrid:function(){return this._axisgridMap},getAxisgridByUniqueId:function(t){return this._axisgridMap.get(t)},updateStoreyParameters:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i],n=new be;n._parameters=r,this._storeyMap.set(r.name,n)}},updateComponentParameters:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i],n=this._components[r.id];n._parameters=r;var o=this._storeyMap.get(r.floor);n._storey=o,this._componentMap.set(r.uuid,n)}},updateRelationParameters:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i],n=this._relations[r.id];n._parameters=r,this._relationMap.set(r.uuid,n)}}});var xe=De,Be=function(t){Te.call(this,t)};(Be.prototype=Object.create(Te.prototype)).constructor=Be,Object.assign(Be.prototype,{clearStream:function(){Te.prototype.clearStream.call(this),this._version=1},readNodeObject:function(){var t=this.readUShort();return t===K.DRAWING?this.readDrawingObject():t===K.PRIMITIVE?this.readPrimitiveObject():t===K.LAYER?this.readLayerObject():t===K.GEODE?this.readGeodeObject():t===K.TRANSFORM?this.readTransformObject():t===K.GROUP?this.readGroupObject():t===K.GEOMETRY?this.readGeometryObject():null},readDrawingObject:function(){var t=new Qt;return this.readDrawing(t),t},readPrimitiveObject:function(){var t=new $t,e=this.readInt();return t.setID(e),this._dataitem._primitives[e]=t,this.readPrimitive(t),t},readLayerObject:function(){var t=new te,e=this.readInt();return t.setID(e),this._dataitem._layers[e]=t,this.readLayer(t),t},readDrawing:function(t){this.readGroup(t),t._translation=this.readDoubleArray(3)},readPrimitive:function(t){this.readEntity(t)},readLayer:function(t){this.readEntity(t)}});var Ge,Fe,Ve,ke,Ue=Be,He=function(t){this._network=new W(t),this._dataItems=new Map,this._pendingDataItems=[],this._relativeTranslate=J.new_d(),this._viewCores=new Set,this._callbacks=new Map,this._dataVisitor=new ie,this._loadedPercent=0,this._totalPercent=95};Object.assign(He.prototype,{getNetwork:function(){return this._network},getPendingDataItems:function(){return this._pendingDataItems},createDataItem:function(t){if(this._dataItems.has(t))return console.log(""),null;var e=new xe(t);return this._dataItems.set(t,e),this._pendingDataItems.push(e),e},createDrawingItem:function(t){if(this._dataItems.has(t))return console.log(""),null;var e=new Le(t);return this._dataItems.set(t,e),this._pendingDataItems.push(e),e},getDataItems:function(){return this._dataItems},removeDataItem:function(t){var e=this._dataItems.get(t);return!!e&&(this._pendingDataItems.push(e),this._dataItems.delete(t),!0)},clearDataItems:function(){var t=this;this._dataItems.forEach((function(e){t._pendingDataItems.push(e)})),this._dataItems.clear()},downloadStateUpdate:function(t,e){var i=100;void 0!==t&&(i=this._loadedPercent+this._totalPercent*t/e),this._callbacks.forEach((function(t){t(Re.b.DATALOAD_GEOMETRY_CHANGED,i)}))},loadModelGeometry:function(){var t=u()(s.a.mark((function t(e){var i,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e._id,r=e._version,t.next=4,this._network.loadModelGeometry(i,r,this.downloadStateUpdate.bind(this));case 4:return n=t.sent,t.next=7,this.loadModelBuffer(e,n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),loadDrawingGeometry:function(){var t=u()(s.a.mark((function t(e){var i,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e._id,r=e._version,t.next=4,this._network.loadDrawingGeometry(i,r,this.downloadStateUpdate.bind(this));case 4:return n=t.sent,t.next=7,this.loadDrawingBuffer(e,n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),loadModelBuffer:(ke=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=6;break}return r=new Se(e),t.next=4,r.readDataStream(i);case 4:e._root=t.sent,this._dataVisitor.handle(e,this._relativeTranslate);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return ke.apply(this,arguments)}),loadDrawingBuffer:(Ve=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=6;break}return r=new Ue(e),t.next=4,r.readDataStream(i);case 4:e._root=t.sent,this._dataVisitor.handle(e,this._relativeTranslate);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return Ve.apply(this,arguments)}),isParameterLoaded:function(){var t=!1,e=!0,i=!1,r=void 0;try{for(var n,a=this._dataItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2),h=(s[0],s[1]);t=t&&h.isParamLoaded()}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}return t},updateDrawingParameters:(Fe=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c,l,g,_,d,A,p,I;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=20;break}i=this._pendingDataItems.length,r=0;case 3:if(!(r<i)){t.next=18;break}if(!(n=this._pendingDataItems[r])){t.next=15;break}return t.next=8,this._network.getAllPrimitiveParameter(n._id,!1,n._version);case 8:return a=t.sent,Y.isArrayType(a)&&n.updatePrimitiveParameters(a),t.next=12,this._network.getAllLayerParameter(n._id,n._version);case 12:h=t.sent,Y.isArrayType(h)&&n.updateLayerParameters(h),n.isParamLoaded(!0);case 15:r++,t.next=3;break;case 18:t.next=54;break;case 20:u=!0,c=!1,l=void 0,t.prev=23,g=this._dataItems[Symbol.iterator]();case 25:if(u=(_=g.next()).done){t.next=40;break}if((d=o()(_.value,2))[0],(A=d[1]).isParamLoaded()){t.next=37;break}return t.next=30,this._network.getAllPrimitiveParameter(A._id,!1,A._version);case 30:return p=t.sent,Y.isArrayType(p)&&A.updatePrimitiveParameters(p),t.next=34,this._network.getAllLayerParameter(A._id,A._version);case 34:I=t.sent,Y.isArrayType(I)&&A.updateLayerParameters(I),A.isParamLoaded(!0);case 37:u=!0,t.next=25;break;case 40:t.next=46;break;case 42:t.prev=42,t.t0=t.catch(23),c=!0,l=t.t0;case 46:t.prev=46,t.prev=47,u||null==g.return||g.return();case 49:if(t.prev=49,!c){t.next=52;break}throw l;case 52:return t.finish(49);case 53:return t.finish(46);case 54:this._callbacks.forEach((function(t){t(Re.b.DATALOAD_MODEL_PARAMETER_FINISHED,!0)}));case 55:case"end":return t.stop()}}),t,this,[[23,42,46,54],[47,,49,53]])}))),function(t){return Fe.apply(this,arguments)}),updateModelParameters:(Ge=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c,l,g,_,d,A,p,I,f,C;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=24;break}i=this._pendingDataItems.length,r=0;case 3:if(!(r<i)){t.next=22;break}if(!(n=this._pendingDataItems[r])){t.next=19;break}return t.next=8,this._network.getAllStoreyParameter(n._id,n._version);case 8:return a=t.sent,Y.isArrayType(a)&&n.updateStoreyParameters(a),t.next=12,this._network.getAllComponentParameter(n._id,!1,n._version);case 12:return h=t.sent,Y.isArrayType(h)&&n.updateComponentParameters(h),t.next=16,this._network.getAllRelationParameter(n._id,!1,n._version);case 16:u=t.sent,Y.isArrayType(u)&&n.updateRelationParameters(u),n.isParamLoaded(!0);case 19:r++,t.next=3;break;case 22:t.next=62;break;case 24:c=!0,l=!1,g=void 0,t.prev=27,_=this._dataItems[Symbol.iterator]();case 29:if(c=(d=_.next()).done){t.next=48;break}if((A=o()(d.value,2))[0],(p=A[1]).isParamLoaded()){t.next=45;break}return t.next=34,this._network.getAllStoreyParameter(p._id,p._version);case 34:return I=t.sent,Y.isArrayType(I)&&p.updateStoreyParameters(I),t.next=38,this._network.getAllComponentParameter(p._id,!1,p._version);case 38:return f=t.sent,Y.isArrayType(f)&&p.updateComponentParameters(f),t.next=42,this._network.getAllRelationParameter(p._id,!1,p._version);case 42:C=t.sent,Y.isArrayType(C)&&p.updateRelationParameters(C),p.isParamLoaded(!0);case 45:c=!0,t.next=29;break;case 48:t.next=54;break;case 50:t.prev=50,t.t0=t.catch(27),l=!0,g=t.t0;case 54:t.prev=54,t.prev=55,c||null==_.return||_.return();case 57:if(t.prev=57,!l){t.next=60;break}throw g;case 60:return t.finish(57);case 61:return t.finish(54);case 62:this._callbacks.forEach((function(t){t(Re.b.DATALOAD_MODEL_PARAMETER_FINISHED,!0)}));case 63:case"end":return t.stop()}}),t,this,[[27,50,54,62],[55,,57,61]])}))),function(t){return Ge.apply(this,arguments)}),attachViewCore:function(t){this._viewCores.add(t)},detachViewCore:function(t){this._viewCores.delete(t)},openViewCores:function(){this._viewCores.forEach((function(t){t.openUpdate()})),this.downloadStateUpdate()},closeViewCores:function(){this._viewCores.forEach((function(t){t.closeUpdate()}))},paramViewCores:function(){this._viewCores.forEach((function(t){t.paramUpdate()}))},clearViewCores:function(){this._viewCores.clear()},addCallback:function(t,e){return void 0===this._callbacks.get(t)&&(this._callbacks.set(t,e),!0)},removeCallback:function(t){return this._callbacks.delete(t)},clearCallback:function(){this._callbacks.clear()},getCallbacks:function(){return this._callbacks},getModelParameter:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._network.getModelParameter(e);case 2:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return",i);case 7:return console.log("modelId:"+e+" "),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getDrawingParameter:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._network.getDrawingParameter(e);case 2:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return",i);case 7:return console.log("Drawing Id:"+e+" "),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()});var je,Ye,ze,We,Xe,Je,qe,Ze,Ke,Qe,$e,ti=He,ei=function(t){this._transfer=t};ei.prototype={openDrawingData:($e=u()(s.a.mark((function t(e,i,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._transfer._loadedPercent=0,this._transfer._totalPercent=95,t.next=4,this.loadDrawingData(e,i);case 4:if(!t.sent){t.next=11;break}if(!r){t.next=8;break}return t.next=8,this._transfer.updateDrawingParameters(!0);case 8:return this._transfer.openViewCores(),this._transfer._pendingDataItems.length=0,t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return $e.apply(this,arguments)}),openModelData:(Qe=u()(s.a.mark((function t(e,i,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._transfer._loadedPercent=0,this._transfer._totalPercent=95,t.next=4,this.loadModelData(e,i);case 4:if(!t.sent){t.next=11;break}if(!r){t.next=8;break}return t.next=8,this._transfer.updateModelParameters(!0);case 8:return this._transfer.openViewCores(),this._transfer._pendingDataItems.length=0,t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return Qe.apply(this,arguments)}),openModelParameter:(Ke=u()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transfer.updateModelParameters(!1);case 2:this._transfer.paramViewCores();case 3:case"end":return t.stop()}}),t,this)}))),function(){return Ke.apply(this,arguments)}),openDrawingParameter:(Ze=u()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transfer.updateDrawingParameters(!1);case 2:case"end":return t.stop()}}),t,this)}))),function(){return Ze.apply(this,arguments)}),isParameterLoaded:function(){return this._transfer.isParameterLoaded()},openModelDatas:(qe=u()(s.a.mark((function t(e,i){var r,n,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Y.isArrayType(e)){t.next=2;break}return t.abrupt("return",!1);case 2:if(0!==(r=e.length)){t.next=5;break}return t.abrupt("return",!1);case 5:this._transfer._loadedPercent=0,this._transfer._totalPercent=95/r,n=0,o=0;case 9:if(!(o<r)){t.next=26;break}if(a=e[o],!Y.isStringType(a)){t.next=18;break}return t.next=14,this.loadModelData(a);case 14:if(!t.sent){t.next=16;break}n++;case 16:t.next=22;break;case 18:return t.next=20,this.loadModelData(a.modelId,a.version);case 20:if(!t.sent){t.next=22;break}n++;case 22:this._transfer._loadedPercent+=this._transfer._totalPercent;case 23:o++,t.next=9;break;case 26:if(!i){t.next=29;break}return t.next=29,this._transfer.updateModelParameters(!0);case 29:return this._transfer.openViewCores(),this._transfer._pendingDataItems.length=0,t.abrupt("return",n===r);case 32:case"end":return t.stop()}}),t,this)}))),function(t,e){return qe.apply(this,arguments)}),openModelFile:(Je=u()(s.a.mark((function t(e){var i,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FileReader).onload=function(t){r.loadModelFile(e.name,t.target.result)},i.readAsArrayBuffer(e);case 3:case"end":return t.stop()}}),t)}))),function(t){return Je.apply(this,arguments)}),openDrawingFile:(Xe=u()(s.a.mark((function t(e){var i,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FileReader).onload=function(t){r.loadDrawingFile(e.name,t.target.result)},i.readAsArrayBuffer(e);case 3:case"end":return t.stop()}}),t)}))),function(t){return Xe.apply(this,arguments)}),closeDrawingData:function(t){return!!this.unloadDrawingData(t)&&(this._transfer.closeViewCores(),this._transfer._pendingDataItems.length=0,!0)},closeModelData:function(t){return!!this.unloadModelData(t)&&(this._transfer.closeViewCores(),this._transfer._pendingDataItems.length=0,!0)},closeModelDatas:function(t){if(!Y.isArrayType(t))return!1;var e=t.length;if(0===e)return!1;for(var i=0,r=0;r<e;r++){var n=t[r];this.unloadModelData(n.modelId)&&i++}return this._transfer.closeViewCores(),this._transfer._pendingDataItems.length=0,i===e},closeAllModelDatas:function(){this._transfer.clearDataItems(),this._transfer.closeViewCores(),this._transfer._pendingDataItems.length=0},loadModelData:(We=u()(s.a.mark((function t(e,i){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this._transfer.getModelParameter(e);case 4:if(r=t.sent,void 0!==i){t.next=9;break}if(!((i=r.version)<0)){t.next=9;break}return t.abrupt("return",!1);case 9:if(n=this._transfer.createDataItem(e)){t.next=12;break}return t.abrupt("return",!1);case 12:return n.setVersion(i),n.setName(r.name),t.next=16,this._transfer.loadModelGeometry(n);case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e){return We.apply(this,arguments)}),loadDrawingData:(ze=u()(s.a.mark((function t(e,i){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this._transfer.getDrawingParameter(e);case 4:if(r=t.sent,void 0!==i){t.next=9;break}if(!((i=r.version)<0)){t.next=9;break}return t.abrupt("return",!1);case 9:if(n=this._transfer.createDrawingItem(e)){t.next=12;break}return t.abrupt("return",!1);case 12:return n.setVersion(i),n.setName(r.name),t.next=16,this._transfer.loadDrawingGeometry(n);case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e){return ze.apply(this,arguments)}),loadModelFile:(Ye=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._transfer.createDataItem(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,this._transfer.loadModelBuffer(r,i);case 5:this._transfer.openViewCores();case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return Ye.apply(this,arguments)}),loadDrawingFile:(je=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._transfer.createDrawingItem(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,this._transfer.loadDrawingBuffer(r,i);case 5:this._transfer.openViewCores();case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return je.apply(this,arguments)}),unloadModelData:function(t){return void 0!==t&&this._transfer.removeDataItem(t)},unloadDrawingData:function(t){return void 0!==t&&this._transfer.removeDataItem(t)}};var ii,ri,ni,oi,ai,si,hi,ui,ci,li,gi,_i=ei,di=function(t){this._network=t.getNetwork(),this._dataItems=t.getDataItems()};di.prototype={getEntityPreParameterL:function(t){if(void 0!==t){var e=!0,i=!1,r=void 0;try{for(var n,a=this._dataItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2),h=(s[0],s[1].getEntityByUniqueId(t));if(h)return h.getParameters()}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}}},getAllComponentPreParameterL:function(){var t=[],e=!0,i=!1,r=void 0;try{for(var n,a=function(){var e=o()(n.value,2),i=(e[0],e[1]),r={};r.modelId=i.modelId(),r.version=i.version(),r.parameter=[],i._componentMap.forEach((function(t,e){r.parameter.push(e)})),t.push(r)},s=this._dataItems[Symbol.iterator]();!(e=(n=s.next()).done);e=!0)a()}catch(t){i=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw r}}return t},isEntityExistL:function(t){if(void 0===t)return!1;var e=!0,i=!1,r=void 0;try{for(var n,a=this._dataItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2);s[0];if(s[1].getEntityByUniqueId(t))return!0}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}return!1},getRelationRelParameterL:(gi=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c,l,g,_,d,A,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:i=!0,r=!1,n=void 0,t.prev=5,a=this._dataItems[Symbol.iterator]();case 7:if(i=(h=a.next()).done){t.next=30;break}if((u=o()(h.value,2))[0],c=u[1],!(l=c.getRelationByUniqueId(e))){t.next=27;break}g=[],_=[],l.getRelComponents(_),d=_.length,A=0;case 16:if(!(A<d)){t.next=26;break}return p=_[A].getUniqueId(),t.t0=g,t.next=21,this._network.getEntityParameter(p,c.modelId(),c.version());case 21:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 23:A++,t.next=16;break;case 26:return t.abrupt("return",g);case 27:i=!0,t.next=7;break;case 30:t.next=36;break;case 32:t.prev=32,t.t2=t.catch(5),r=!0,n=t.t2;case 36:t.prev=36,t.prev=37,i||null==a.return||a.return();case 39:if(t.prev=39,!r){t.next=42;break}throw n;case 42:return t.finish(39);case 43:return t.finish(36);case 44:return t.abrupt("return",void 0);case 45:case"end":return t.stop()}}),t,this,[[5,32,36,44],[37,,39,43]])}))),function(t){return gi.apply(this,arguments)}),getAllModelParameterS:(li=u()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._network.getAllModelParameter();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return li.apply(this,arguments)}),getAllDrawingParameterS:(ci=u()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._network.getAllDrawingParameter();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return ci.apply(this,arguments)}),getEntityParameterS:(ui=u()(s.a.mark((function t(e,i,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this._network.getEntityParameter(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return ui.apply(this,arguments)}),getEntityParameterL:(hi=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:i=!0,r=!1,n=void 0,t.prev=5,a=this._dataItems[Symbol.iterator]();case 7:if(i=(h=a.next()).done){t.next=17;break}if((u=o()(h.value,2))[0],!(c=u[1]).getEntityByUniqueId(e)){t.next=14;break}return t.next=13,this._network.getEntityParameter(e,c.modelId(),c.version());case 13:return t.abrupt("return",t.sent);case 14:i=!0,t.next=7;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(5),r=!0,n=t.t0;case 23:t.prev=23,t.prev=24,i||null==a.return||a.return();case 26:if(t.prev=26,!r){t.next=29;break}throw n;case 29:return t.finish(26);case 30:return t.finish(23);case 31:case"end":return t.stop()}}),t,this,[[5,19,23,31],[24,,26,30]])}))),function(t){return hi.apply(this,arguments)}),getAllComponentParameterS:(si=u()(s.a.mark((function t(e,i,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this._network.getAllComponentParameter(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return si.apply(this,arguments)}),getAllComponentParameterL:(ai=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c,l,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this._dataItems.length){t.next=3;break}return t.abrupt("return",void 0);case 3:i=[],r=!0,n=!1,a=void 0,t.prev=7,h=this._dataItems[Symbol.iterator]();case 9:if(r=(u=h.next()).done){t.next=21;break}return(c=o()(u.value,2))[0],l=c[1],(g={}).modelId=l.modelId(),g.version=l.version(),t.next=16,this._network.getAllComponentParameter(l.modelId(),e,l.version());case 16:g.parameter=t.sent,i.push(g);case 18:r=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(7),n=!0,a=t.t0;case 27:t.prev=27,t.prev=28,r||null==h.return||h.return();case 30:if(t.prev=30,!n){t.next=33;break}throw a;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",i);case 36:case"end":return t.stop()}}),t,this,[[7,23,27,35],[28,,30,34]])}))),function(t){return ai.apply(this,arguments)}),getAllRelationParameterS:(oi=u()(s.a.mark((function t(e,i,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this._network.getAllRelationParameter(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return oi.apply(this,arguments)}),getAllRelationParameterL:(ni=u()(s.a.mark((function t(e){var i,r,n,a,h,u,c,l,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this._dataItems.length){t.next=3;break}return t.abrupt("return",void 0);case 3:i=[],r=!0,n=!1,a=void 0,t.prev=7,h=this._dataItems[Symbol.iterator]();case 9:if(r=(u=h.next()).done){t.next=21;break}return(c=o()(u.value,2))[0],l=c[1],(g={}).modelId=l.modelId(),g.version=l.version(),t.next=16,this._network.getAllRelationParameter(l.modelId(),e,l.version());case 16:g.parameter=t.sent,i.push(g);case 18:r=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(7),n=!0,a=t.t0;case 27:t.prev=27,t.prev=28,r||null==h.return||h.return();case 30:if(t.prev=30,!n){t.next=33;break}throw a;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",i);case 36:case"end":return t.stop()}}),t,this,[[7,23,27,35],[28,,30,34]])}))),function(t){return ni.apply(this,arguments)}),getAllStoreyParameterS:(ri=u()(s.a.mark((function t(e,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this._network.getAllStoreyParameter(e,i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return ri.apply(this,arguments)}),getAllStoreyParameterL:(ii=u()(s.a.mark((function t(){var e,i,r,n,a,h,u,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this._dataItems.length){t.next=3;break}return t.abrupt("return",void 0);case 3:e=[],i=!0,r=!1,n=void 0,t.prev=7,a=this._dataItems[Symbol.iterator]();case 9:if(i=(h=a.next()).done){t.next=21;break}return(u=o()(h.value,2))[0],c=u[1],(l={}).modelId=c.modelId(),l.version=c.version(),t.next=16,this._network.getAllStoreyParameter(c.modelId(),c.version());case 16:l.parameter=t.sent,e.push(l);case 18:i=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(7),r=!0,n=t.t0;case 27:t.prev=27,t.prev=28,i||null==a.return||a.return();case 30:if(t.prev=30,!r){t.next=33;break}throw n;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",e);case 36:case"end":return t.stop()}}),t,this,[[7,23,27,35],[28,,30,34]])}))),function(){return ii.apply(this,arguments)})};var Ai=di,pi=function(t){this._transfer=new ti(t),this._loader=new _i(this._transfer),this._querier=new Ai(this._transfer)};pi.prototype={getTransfer:function(){return this._transfer},attachViewCore:function(t){this._transfer.attachViewCore(t)},detachViewCore:function(t){this._transfer.detachViewCore(t)},getDataLoader:function(){return this._loader},getDataQuerier:function(){return this._querier},addCallback:function(t,e){return this._transfer.addCallback(t,e)},removeCallback:function(t){return this._transfer.removeCallback(t)},clearCallback:function(){this._transfer.clearCallback()},test:function(t){this._transfer.getNetwork().deleteModelData(t)}};var Ii=pi,fi={DataManager:{},DataID:0,ViewManager:{},ViewID:0},Ci=function(t){this._dataID=t};Ci.prototype={openModelFile:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=4;break}return t.next=4,i.getDataLoader().openModelFile(e);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),openDrawingFile:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=4;break}return t.next=4,i.getDataLoader().openDrawingFile(e);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),openModelData:function(){var t=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,n.getDataLoader().openModelData(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}(),openModelDatas:function(){var t=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,r.getDataLoader().openModelDatas(e,i);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),openModelParameter:function(){var t=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=fi.DataManager[this._dataID])){t.next=4;break}return t.next=4,e.getDataLoader().openModelParameter();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),openDrawingParameter:function(){var t=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=fi.DataManager[this._dataID])){t.next=4;break}return t.next=4,e.getDataLoader().openDrawingParameter();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),isModelParameterLoaded:function(){var t=fi.DataManager[this._dataID];return!!t&&t.getDataLoader().isParameterLoaded()},closeModelData:function(t){var e=fi.DataManager[this._dataID];return!!e&&e.getDataLoader().closeModelData(t)},closeModelDatas:function(t){var e=fi.DataManager[this._dataID];if(e)return e.getDataLoader().closeModelDatas(t)},closeAllModelDatas:function(){var t=fi.DataManager[this._dataID];t&&t.getDataLoader().closeAllModelDatas()},openDrawingData:function(){var t=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,n.getDataLoader().openDrawingData(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}(),closeDrawingData:function(t){var e=fi.DataManager[this._dataID];return!!e&&e.getDataLoader().closeDrawingData(t)}};var mi=Ci,vi=function(t){this._dataID=t};vi.prototype={getEntityModelParameterL:function(t){var e=fi.DataManager[this._dataID];if(e)return e.getDataQuerier().getEntityPreParameterL(t)},getAllComponentUniqueId:function(){var t=fi.DataManager[this._dataID];if(t)return t.getDataQuerier().getAllComponentPreParameterL()},getAllModelParameterS:function(){var t=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,e.getDataQuerier().getAllModelParameterS();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getAllDrawingParameterS:function(){var t=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,e.getDataQuerier().getAllDrawingParameterS();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),isEntityExistL:function(t){var e=fi.DataManager[this._dataID];if(e)return e.getDataQuerier().isEntityExistL(t)},getRelationRelParameterL:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,i.getDataQuerier().getRelationRelParameterL(e);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getEntityParameterS:function(){var t=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,n.getDataQuerier().getEntityParameterS(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}(),getEntityParameterL:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,i.getDataQuerier().getEntityParameterL(e);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getAllComponentParameterS:function(){var t=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,n.getDataQuerier().getAllComponentParameterS(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}(),getAllComponentParameterL:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,i.getDataQuerier().getAllComponentParameterL(e);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getAllRelationParameterS:function(){var t=u()(s.a.mark((function t(e,i,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,n.getDataQuerier().getAllRelationParameterS(e,i,r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}(),getAllRelationParameterL:function(){var t=u()(s.a.mark((function t(e){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,i.getDataQuerier().getAllRelationParameterL(e);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getAllStoreyParameterS:function(){var t=u()(s.a.mark((function t(e,i){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,r.getDataQuerier().getAllStoreyParameterS(e,i);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),getAllStoreyParameterL:function(){var t=u()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=fi.DataManager[this._dataID])){t.next=5;break}return t.next=4,e.getDataQuerier().getAllStoreyParameterL();case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()};var yi=vi,Ei=function(t){fi.DataID++,fi.DataManager[fi.DataID]=new Ii(t),this._dataID=fi.DataID,this._loader=new mi(this._dataID),this._querier=new yi(this._dataID)};Ei.prototype={getWINDDataLoader:function(){return this._loader},getWINDDataQuerier:function(){return this._querier},addWINDDataCallback:function(t,e){var i=fi.DataManager[this._dataID];return!!i&&i.addCallback(t,e)},removeWINDDataCallback:function(t){var e=fi.DataManager[this._dataID];return!!e&&e.removeCallback(t)},clearWINDDataCallback:function(){var t=fi.DataManager[this._dataID];t&&t.clearCallback()}};var wi=Ei,Mi={UNKNOWN:-1,ENGINE:0,NAVIGATE:1,MINIMAP:2,PERSON_PANEL:3,PUSHPIN:4,SECTION:5,MEASURE:6,ROAMING:7,CONTROL:8,SHADOW:9};Object.freeze(Mi);var Ti=Mi,Pi={};Pi.new=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t},Pi.MemoryPool=new A(Pi.new),Pi.alloc=Pi.MemoryPool.alloc,Pi.free=Pi.MemoryPool.free,Pi.new_d=function(){var t=new Float64Array(2);return t[0]=0,t[1]=0,t},Pi.MemoryPool_d=new A(Pi.new_d),Pi.alloc_d=Pi.MemoryPool_d.alloc,Pi.free_d=Pi.MemoryPool_d.free,Pi.clone=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e},Pi.clone_d=function(t){var e=new Float64Array(2);return e[0]=t[0],e[1]=t[1],e},Pi.create=function(t,e){var i=new Float32Array(2);return i[0]=t,i[1]=e,i},Pi.create_d=function(t,e){var i=new Float64Array(2);return i[0]=t,i[1]=e,i},Pi.POSITIVE_INFINITY=Pi.create(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),Pi.NEGATIVE_INFINITY=Pi.create(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),Pi.POSITIVE_INFINITY_D=Pi.create_d(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),Pi.NEGATIVE_INFINITY_D=Pi.create_d(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),Pi.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},Pi.set=function(t,e,i){return t[0]=e,t[1]=i,t},Pi.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},Pi.subtract=Pi.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},Pi.multiply=Pi.mul=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},Pi.divide=Pi.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},Pi.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},Pi.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},Pi.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},Pi.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},Pi.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},Pi.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},Pi.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t},Pi.distance=Pi.dist=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)},Pi.squaredDistance=Pi.sqrDist=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r},Pi.length=Pi.len=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},Pi.squaredLength=Pi.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},Pi.normalize=function(t,e){var i=e[0],r=e[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},Pi.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},Pi.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},Pi.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},Pi.lerp=function(t,e,i,r){var n=e[0],o=e[1];return t[0]=n+r*(i[0]-n),t[1]=o+r*(i[1]-o),t},Pi.hermite=function(t,e,i,r,n,o){var a=o*o,s=a*(2*o-3)+1,h=a*(o-2)+o,u=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+i[0]*h+r[0]*u+n[0]*c,t[1]=e[1]*s+i[1]*h+r[1]*u+n[1]*c,t},Pi.bezier=function(t,e,i,r,n,o){var a=1-o,s=a*a,h=o*o,u=s*a,c=3*o*s,l=3*h*a,g=h*o;return t[0]=e[0]*u+i[0]*c+r[0]*l+n[0]*g,t[1]=e[1]*u+i[1]*c+r[1]*l+n[1]*g,t},Pi.random=function(t,e){e=e||1;var i=2*_.RANDOM()*Math.PI,r=2*_.RANDOM()-1,n=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t},Pi.str=function(t){return"Vec2("+t[0]+", "+t[1]+")"},Pi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Pi.equals=function(t,e){var i=t[0],r=t[1],n=e[0],o=e[1];return Math.abs(i-n)<=_.EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var Si=Pi,Ri=function t(){this._primitiveMask=t.ALL_PRIMITIVES,this._usageMask=t.SELECTION,this._categoryFilter=null,this._outcomeMask=t.FAST_OUTCOME,this._intersections=null,this._intersectFlag=!1,this._drawable=null,this._vertices=null,this._transform=null,this._normalTransform=it.new(),this._primitiveIndex=0};Ri.POINT_PRIMITIVES=1,Ri.LINE_PRIMITIVES=2,Ri.TRIANGLE_PRIMITIVES=4,Ri.ALL_PRIMITIVES=7,Ri.SELECTION=1,Ri.COLLISION=2,Ri.BEST_OUTCOME=1,Ri.FAST_OUTCOME=2,Object.assign(Ri.prototype,{setPrimivtiveMask:function(t){this._primitiveMask=t},setUsageMask:function(t){this._usageMask=t},setCategoryFilter:function(t){this._categoryFilter=t},setOutcomeMask:function(t){this._outcomeMask=t},setIntersections:function(t){this._intersections=t},reset:function(){this._primitiveMask=Ri.ALL_PRIMITIVES,this._usageMask=Ri.SELECTION,this._categoryFilter=null,this._outcomeMask=Ri.FAST_OUTCOME,this._intersections=null,this._intersectFlag=!1,this._drawable=null,this._vertices=null,this._transform=null,it.identity(this._normalTransform),this._primitiveIndex=0},initialize:function(){this.reset()},intersect:function(t){},reachedLimit:function(){return!(this._outcomeMask!==Ri.FAST_OUTCOME||!this._intersectFlag)},operatePoint:function(t){if(this.reachedLimit())return!0;if(0==(this._primitiveMask&Ri.POINT_PRIMITIVES))return!1;var e=this.intersectPoint(t);return e&&(this._intersectFlag=!0,e._primitiveIndex=this._primitiveIndex,e._drawable=this._drawable,this._intersections.push(e)),this._primitiveIndex++,!1},operateLine:function(t,e){if(this.reachedLimit())return!0;if(0==(this._primitiveMask&Ri.LINE_PRIMITIVES))return!1;var i=this.intersectLine(t,e);return i&&(this._intersectFlag=!0,i._primitiveIndex=this._primitiveIndex,i._drawable=this._drawable,this._intersections.push(i)),this._primitiveIndex++,!1},operateTriangle:function(t,e,i){if(this.reachedLimit())return!0;if(0==(this._primitiveMask&Ri.TRIANGLE_PRIMITIVES))return!1;var r=this.intersectTriangle(t,e,i);return r&&(this._intersectFlag=!0,r._primitiveIndex=this._primitiveIndex,r._drawable=this._drawable,this._intersections.push(r)),this._primitiveIndex++,!1},intersectPoint:function(){},intersectLine:function(){},intersectTriangle:function(){}});var Oi=Ri,Li=function(){this._initial=new Float32Array(2),this._current=new Float32Array(2),this._last=new Float32Array(2),this._delta=new Float32Array(2),this.reset()};Li.prototype={reset:function(){for(var t=this._current.length,e=0;e<t;e++)this._current[e]=this._last[e]=0},sync:function(){for(var t=this._current.length,e=0;e<t;e++)this._last[e]=this._current[e]},setInitial:function(){for(var t=this._current.length,e=0;e<t;e++)this._current[e]=this._initial[e]=this._last[e]=arguments[e]},getInitial:function(){return this._initial},setCurrent:function(){for(var t=this._current.length,e=0;e<t;e++)this._current[e]=arguments[e]},getCurrent:function(){return this._current},getLast:function(){return this._last},getDelta:function(){for(var t=this._current.length,e=0;e<t;e++)this._delta[e]=this._current[e]-this._last[e];return this._delta}};var Ni=Li,bi={UNKNOWN:-1,ENTITY_SUBJECT:0,ENTITY_TRANSPARENT:1,ENTITY_WIREFRAME:2,CHARACTER_MODEL:3,CUBE_SECTION_SUBJECT:4,CUBE_SECTION_WIREFRAME:5,CUBE_NAVIGATE:6,MEASURE_SUBJECT:7,MULTIPICK_RECT:8,CURSOR_SWITCH:9,BACKGROUND:10,PUSHPIN_SUBJECT:11,SHADOW_MAP:12,DRAW_TESTING:13,AXISGRID:14,PERSON_PANEL:15,MINIMAP_MODULE:16,PRIMITIVE_SUBJECT:17};Object.freeze(bi);var Di=bi,xi=function(t){this._adaptor=t,this._moduler=t._moduler,this._pickEvent=new Ni,this._leftClick=!1,this._middleClick=!1,this._rightClick=!1,this._position=Si.new()};xi.MOUSE_LEFTPUSH=257,xi.MOUSE_RIGHTPUSH=258,xi.MOUSE_MIDDLEPUSH=259,xi.MOUSE_MOVE=260,xi.MOUSE_LEFTRELEASE=263,xi.MOUSE_RIGHTRELEASE=264,xi.MOUSE_MIDDLERELEASE=265,xi.MOUSE_LEFTDRAG=269,xi.MOUSE_MIDDLEDRAG=270,xi.MOUSE_RIGHTDRAG=271,xi.MOUSE_WHEELSCROLL=288,xi.MOUSE_OUTSIDE=304,xi.MOUSE_CONTEXTMENU=305,xi.TOUCH_CLICK=513,xi.TOUCH_MOVE_BEGIN=514,xi.TOUCH_MOVE=515,xi.TOUCH_MOVE_END=516,xi.TOUCH_PAN_BEGIN=517,xi.TOUCH_PAN=518,xi.TOUCH_PAN_END=519,xi.TOUCH_ZOOM=520,xi.KEYBORAD_PUSH=1024,xi.KEYBORAD_RELEASE=1025,xi.WEBGLCONTEXT_LOST=768,xi.WEBGLCONTEXT_RESTORED=769,Object.assign(xi.prototype,{getModuler:function(){return this._moduler},sync:function(){},resize:function(){},update:function(){},invalid:function(){return!1},create:function(){},destroy:function(){},type:function(){return Ti.UNKNOWN},pickPush:function(t){return!1},pickDrag:function(t){return!1},pickRelease:function(t){return!1},rotatePush:function(t){return!1},rotateDrag:function(t){return!1},rotateRelease:function(t){return!1},panPush:function(t){return!1},panDrag:function(t){return!1},panRelease:function(t){return!1},zoomWheel:function(t){return!1},mouseMove:function(t){return!1},glcontextLost:function(t){return!1},glcontextRestored:function(t){return!1},getPositionRelativeToCanvas:function(t,e){var i=t.offsetX,r=t.offsetY;r=t.target.clientHeight-r;var n=window.devicePixelRatio||1;return this._position[0]=Math.floor(i*n),this._position[1]=Math.floor(r*n),e&&(this._position[0]=this._moduler.getCamera().getNormalizedX(this._position[0]),this._position[1]=this._moduler.getCamera().getNormalizedY(this._position[1])),this._position},singleIntersect:function(t,e,i){var r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();this._moduler.getCamera().computeScreenToWorldNearFarPoint(t,e,r,n);var o=this._moduler.getModunit(Di.ENTITY_SUBJECT);if(this._adaptor.getOperation(Ti.SECTION)){var a=[];this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT).linesegmentIntersect(a,r,n,Oi.SELECTION);var s=a.length;if(2===s){var h=a[0].getPoint();h&&o.linesegmentIntersect(i,h,n,Oi.SELECTION)}else 1===s?o.linesegmentIntersect(i,r,n,Oi.SELECTION):0===s&&o.linesegmentIntersect(i,r,n,Oi.SELECTION)}else o.linesegmentIntersect(i,r,n,Oi.SELECTION);return J.MemoryPool.free(r),J.MemoryPool.free(n),0!==i.length}}),xi.prototype[xi.MOUSE_LEFTPUSH]=function(t){return this._leftClick=!0,this.pickPush(t)},xi.prototype[xi.MOUSE_LEFTDRAG]=function(t){return this._leftClick=!1,this.pickDrag(t)},xi.prototype[xi.MOUSE_LEFTRELEASE]=function(t){return this.pickRelease(t)},xi.prototype[xi.MOUSE_MIDDLEPUSH]=function(t){return this._middleClick=!0,this.panPush(t)},xi.prototype[xi.MOUSE_MIDDLEDRAG]=function(t){return this._middleClick=!1,this.panDrag(t)},xi.prototype[xi.MOUSE_MIDDLERELEASE]=function(t){return this.panRelease(t)},xi.prototype[xi.MOUSE_RIGHTPUSH]=function(t){return this._rightClick=!0,this.rotatePush(t)},xi.prototype[xi.MOUSE_RIGHTDRAG]=function(t){return this._rightClick=!1,this.rotateDrag(t)},xi.prototype[xi.MOUSE_RIGHTRELEASE]=function(t){return this.rotateRelease(t)},xi.prototype[xi.MOUSE_MOVE]=function(t){return this.mouseMove(t)},xi.prototype[xi.MOUSE_WHEELSCROLL]=function(t){return this.zoomWheel(t)},xi.prototype[xi.MOUSE_OUTSIDE]=function(t){return this.invalid(t)},xi.prototype[xi.MOUSE_CONTEXTMENU]=function(t){return!1},xi.prototype[xi.KEYBORAD_PUSH]=function(t){return!1},xi.prototype[xi.KEYBORAD_RELEASE]=function(t){return!1},xi.prototype[xi.TOUCH_CLICK]=function(t){return!1},xi.prototype[xi.TOUCH_MOVE_BEGIN]=function(t){return!1},xi.prototype[xi.TOUCH_MOVE]=function(t,e){return!1},xi.prototype[xi.TOUCH_MOVE_END]=function(t){return!1},xi.prototype[xi.TOUCH_PAN_BEGIN]=function(t){return!1},xi.prototype[xi.TOUCH_PAN]=function(t,e){return!1},xi.prototype[xi.TOUCH_PAN_END]=function(t){return!1},xi.prototype[xi.TOUCH_ZOOM]=function(t,e){return!1},xi.prototype[xi.WEBGLCONTEXT_LOST]=function(t){return this.glcontextLost(t)},xi.prototype[xi.WEBGLCONTEXT_RESTORED]=function(t){return this.glcontextRestored(t)};var Bi=xi,Gi={Unknown:-1,Scissor:1,Clear:2,Viewport:3,Depth:4,BlendFunc:5,CullFace:6,PixelStore:7,LineWidth:8,FrontFace:9};Object.freeze(Gi);var Fi=Gi,Vi=function(){};Object.assign(Vi.prototype,{type:function(){return Fi.Unknown},apply:function(){}}),Vi.wind=Vi.prototype.wind=K.GLSTATE;var ki=Vi,Ui=function(t,e,i,r){ki.call(this),this._x=void 0!==t?t:0,this._y=void 0!==e?e:0,this._width=void 0!==i?i:0,this._height=void 0!==r?r:0};(Ui.prototype=Object.create(ki.prototype)).constructor=Ui,Object.assign(Ui.prototype,{type:function(){return Fi.Viewport},resize:function(t,e,i,r){this._x=t,this._y=e,this._width=i,this._height=r},getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},apply:function(t){t.gl().viewport(this._x,this._y,this._width,this._height)}}),Ui.wind=Ui.prototype.wind=K.GLVIEWPORT;var Hi=Ui,ji=function(t,e,i,r){ki.call(this),this._func=_e.DISABLE,this._near=0,this._far=1,this._mask=!0,void 0!==t&&(this._func=t),void 0!==e&&(this._near=e),void 0!==i&&(this._far=i),void 0!==r&&(this._mask=r)};(ji.prototype=Object.create(ki.prototype)).constructor=ji,Object.assign(ji.prototype,{type:function(){return Fi.Depth},setRange:function(t,e){this._near=t,this._far=e},setFunc:function(t){this._func=t},setMask:function(t){this._mask=t},apply:function(t){var e=t.gl();this._func===_e.DISABLE?e.disable(_e.DEPTH_TEST):(e.enable(_e.DEPTH_TEST),e.depthFunc(this._func),e.depthMask(this._mask),e.depthRange(this._near,this._far))}}),ji.wind=ji.prototype.wind=K.GLDEPTH;var Yi=ji,zi={UNKNOWN:-1,FRONT:0,BACK:1,TOP:2,BOTTOM:3,LEFT:4,RIGHT:5};Object.freeze(zi);var Wi={UNKNOWN:-1,ORBIT:0,PERSON:1,PLANE:2};Object.freeze(Wi);var Xi={UNKNOWN:-1,NONE:1,ROTATE:2,PAN:4,PICK:8,ZOOM:16};Object.freeze(Xi);Object.freeze({RED:"RED",GREEN:"GREEN",BLUE:"BLUE",BLACK:"BLACK",WHITE:"WHITE",YELLOW:"YELLOW",ORANGE:"ORANGE",SKYBLUE:"SKYBLUE",GRAY:"GRAY",SILVER:"SILVER",DARKORANGE:"DARKORANGE",GOLD:"GOLD",CYAN:"CYAN",PURPLE:"PURPLE",PINK:"PINK",BROWN:"BROWN",CHOCOLATE:"CHOCOLATE",DARKRED:"DARKRED",DARKGREEN:"DARKGREEN",INDIANRED:"INDIANRED",HOTPINK:"HOTPINK"});var Ji={RED:[1,0,0,1],GREEN:[0,1,0,1],BLUE:[0,0,1,1],BLACK:[0,0,0,1],WHITE:[1,1,1,1],YELLOW:[1,1,0,1],ORANGE:[1,.5,0,1],SKYBLUE:[.53,.8,1,1],GRAY:[.5,.5,.5,1],SILVER:[.75,.75,.75,1],DARKORANGE:[1,.55,0,1],GOLD:[1,.84,0,1],CYAN:[0,1,1,1],PURPLE:[.5,0,.5,1],PINK:[1,.75,.8,1],BROWN:[.65,.16,.16,1],CHOCOLATE:[.82,.4,.12,1],DARKRED:[.55,0,0,1],DARKGREEN:[0,.55,0,1],INDIANRED:[.93,.39,.39,1],HOTPINK:[1,.41,.71,1]};Object.freeze(Ji);var qi=function(t){Bi.call(this,t)};(qi.prototype=Object.create(Bi.prototype)).constructor=qi,Object.assign(qi.prototype,{type:function(){return Ti.NAVIGATE}});var Zi=qi,Ki={UNKNOWN:0,IMAGE:1,GEOMETRY:2};Object.freeze(Ki);var Qi=Ki,$i=function(t){tt.call(this),this._refpath=t,this._type=Qi.UNKNOWN,this._data=null,this._destruct=!0,this._refcount=0};($i.prototype=Object.create(tt.prototype)).constructor=$i,Object.assign($i.prototype,{check:function(){return!!this._data&&(this._type===Qi.IMAGE?(this._data=Y.checkImage(this._data),!0):void 0)}});var tr=$i,er=r(62),ir=r.n(er),rr=function(){this._resources=new Map,this._promises=[],this._numberFont={},this.initNumberFont()};rr.prototype={initNumberFont:function(){var t=this,e=new Map;e.set("0",[0,1,0,.75,.25,1,.25,.75]),e.set("1",[0,.75,0,.5,.25,.75,.25,.5]),e.set("2",[0,.5,0,.25,.25,.5,.25,.25]),e.set("3",[0,.25,0,0,.25,.25,.25,0]),e.set("4",[.25,1,.25,.75,.5,1,.5,.75]),e.set("5",[.25,.75,.25,.5,.5,.75,.5,.5]),e.set("6",[.25,.5,.25,.25,.5,.5,.5,.25]),e.set("7",[.25,.25,.25,0,.5,.25,.5,0]),e.set("8",[.5,1,.5,.75,.75,1,.75,.75]),e.set("9",[.5,.75,.5,.5,.75,.75,.75,.5]),e.set(".",[.5,.5,.5,.25,.75,.5,.75,.25]),e.set("",[.5,.25,.5,0,.75,.25,.75,0]),this._numberFont._uvs=e;var i=new Image;i.onload=function(){t._numberFont._image=Y.checkImage(i)},i.src=ir.a,this._numberFont._image=i},getNumberFont:function(){return this._numberFont},getNumberImage:function(){return this._numberFont._image},getNumberUVs:function(t){var e=[];if(Y.isStringType(t))for(var i=this._numberFont._uvs,r=t.length,n=0;n<r;n++){var o=i.get(t[n]);e=e.concat(o)}return e},loadImage:function(t,e){var i=new Promise((function(i,r){e.onload=function(){i("load")},e.onerror=function(){r("error")},e.src=t}));this._promises.push(i)},newImage:function(t){var e=this._resources.get(t);return void 0===e?((e=new tr)._refpath=t,e._data=new Image,e._type=Qi.IMAGE,e._refcount=1,e._destruct=!0,this._resources.set(t,e),this.loadImage(t,e._data)):e._refcount++,e},deleteImage:function(t){var e=this._resources.get(t);void 0!==e&&(e._refcount--,e._destruct&&0===e._refcount&&(e._data.src="",this._resources.delete(t)))},loadGeometry:function(t,e){var i=this,r=new Promise((function(r,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onreadystatechange=function(){4===o.readyState&&(200===o.status?(i.parseGeometry(o.response,e),r("load")):n("error"))},o.send(null)}));this._promises.push(r)},parseGeometry:function(t,e){var i=new we;i.setArrayBuffer(t);var r=i.readUInt();e._vertexes=i.readFloatArray(r),r=i.readUInt(),e._normals=i.readFloatArray(r),r=i.readUInt(),e._texutures=i.readFloatArray(r)},newGeometry:function(t){var e=this._resources.get(t);return void 0===e?((e=new tr)._refpath=t,e._data={},e._type=Qi.GEOMETRY,e._refcount=1,e._destruct=!1,this._resources.set(t,e),this.loadGeometry(t,e._data)):e._refcount++,e},deleteGeoemtry:function(t){var e=this._resources.get(t);void 0!==e&&(e._refcount--,e._destruct&&0===e._refcount&&(e._data=null,this._resources.delete(t)))},loadImageResources:function(t,e){for(var i=this,r=t.length,n=0;n<r;n++)this.newImage(t[n]);Promise.all(this._promises).then((function(){for(var n=[],o=0;o<r;o++){var a=i._resources.get(t[o]);a._data=Y.checkImage(a._data),n.push(a)}e(n),i._promises.length=0}),(function(){}))},loadCharacterResource:function(t,e,i){var r=this;this.newGeometry(t),this.newImage(e),Promise.all(this._promises).then((function(){var n=r._resources.get(t),o=r._resources.get(e);o._data=Y.checkImage(o._data),i(n,o),r._promises.length=0}),(function(){}))},loadImageResource:function(t,e){var i=this;this.newImage(t),Promise.all(this._promises).then((function(){var r=i._resources.get(t);r&&(r._data=Y.checkImage(r._data)),e(r),i._promises.length=0}),(function(){}))},unloadImageResources:function(t){for(var e=t.length,i=0;i<e;i++)this.deleteImage(t[i])},unloadImageResource:function(t){this.deleteImage(t)},unloadCharacterResource:function(t,e){this.deleteGeoemtry(t),this.deleteImage(e)}};var nr=new rr,or=function(){this._drawable=void 0,this._primitiveIndex=void 0};Object.assign(or.prototype,{getDrawable:function(){return this._drawable}});var ar=function(){or.call(this),this._ratio=0,this._point=J.new(),this._normal=J.create(1,0,0),this._localPoint=J.new()};(ar.prototype=Object.create(or.prototype)).constructor=ar,Object.assign(ar.prototype,{getRatio:function(){return this._ratio},getPoint:function(){return this._point},getNormal:function(){return this._normal},getLocalPoint:function(){return this._localPoint}});var sr=function(){or.call(this),this._points=[],this._pointNumber=0};(sr.prototype=Object.create(or.prototype)).constructor=sr,Object.assign(sr.prototype,{});var hr=function(){Oi.call(this),this._orginStart=J.new(),this._orginEnd=J.new(),this._orginThreshold=20,this._start=J.new(),this._end=J.new(),this._threshold=0,this._direction=J.new(),this._length=0,this._inverseLength=0};hr.new=function(){return new hr},hr.MemoryPool=new A(hr.new);var ur=function(t,e){return t.getRatio()-e.getRatio()};(hr.prototype=Object.create(Oi.prototype)).constructor=hr,Object.assign(hr.prototype,{sort:function(){return this._intersections.sort(ur),this._intersections},reset:function(){Oi.prototype.reset.call(this),J.set(this._orginStart,0,0,0),J.set(this._orginEnd,0,0,0),this._orginThreshold=20,J.set(this._start,0,0,0),J.set(this._end,0,0,0),this._threshold=0,J.set(this._direction,0,0,0),this._length=0,this._inverseLength=0},initialize:function(t,e){J.copy(this._orginStart,t),J.copy(this._orginEnd,e),J.copy(this._start,t),J.copy(this._end,e)},intersect:function(t){this._drawable=t;var e=t.getGeometry();if(e._vertexBuffer&&0!==e._solidVertexAligns.length){var i=t.getTransform();if(this._transform!==i){this._transform=i,it.getNormalMat4(this._normalTransform,i);var r=it.MemoryPool.alloc();if(it.invert(r,i),this._orginThreshold>0){var n=this._start;it.getScale(n,r);var o=n[0],a=n[1],s=n[2];this._threshold=this._orginThreshold*(o>a?o>s?o:s:a>s?a:s)}J.transformMat4(this._start,this._orginStart,r),J.transformMat4(this._end,this._orginEnd,r),J.sub(this._direction,this._end,this._start),this._length=J.length(this._direction),this._inverseLength=this._length<=_.EPSILON?0:1/this._length,J.scale(this._direction,this._direction,this._inverseLength),it.MemoryPool.free(r)}e.traverse(this)}},intersectPoint:function(t){var e=J.MemoryPool.alloc();J.sub(e,t,this._start);var i=J.MemoryPool.alloc();J.sub(i,this._end,this._start);var r=J.dot(e,i)*this._inverseLength*this._inverseLength,n=void 0;return(r<0?J.sqrLen(e):r>1?J.sqrDist(t,this._end):J.sqrLen(J.scaleAndAdd(e,e,i,-r)))>this._threshold*this._threshold||(n=new ar,J.scaleAndAdd(n._localPoint,this._start,i,r),J.transformMat4(n._point,n._localPoint,this._transform),n._ratio=r),J.MemoryPool.free(e),J.MemoryPool.free(i),n},intersectLine:function(t,e){var i=J.MemoryPool.alloc();J.sub(i,e,t);var r=J.MemoryPool.alloc();J.sub(r,this._end,this._start);var n=J.MemoryPool.alloc();J.sub(n,t,this._start);var o,a,s=J.dot(i,i),h=J.dot(i,r),u=J.dot(r,r),c=J.dot(i,n),l=J.dot(r,n),g=s*u-h*h,d=g,A=g;g<_.EPSILON?(o=0,d=1,a=l,A=u):(a=s*l-h*c,(o=h*l-u*c)<0?(o=0,a=l,A=u):o>d&&(o=d,a=l+h,A=u)),a<0?(a=0,-c<0?o=0:-c>s?o=d:(o=-c,d=s)):a>A&&(a=A,-c+h<0?o=0:-c+h>s?o=d:(o=-c+h,d=s));var p=Math.abs(o)<_.EPSILON?0:o/d,I=Math.abs(a)<_.EPSILON?0:a/A,f=J.MemoryPool.alloc(),C=J.MemoryPool.alloc();J.scaleAndAdd(f,t,i,p),J.scaleAndAdd(C,this._start,r,I);var m=J.sqrDist(f,C);J.MemoryPool.free(f),J.MemoryPool.free(C);var v=void 0;return m>this._threshold*this._threshold||(v=new ar,J.copy(v._localPoint,C),J.transformMat4(v._point,v._localPoint,this._transform),v._ratio=I),J.MemoryPool.free(i),J.MemoryPool.free(r),J.MemoryPool.free(n),v},intersectTriangle:function(t,e,i){var r=J.MemoryPool.alloc();J.sub(r,i,t);var n=J.MemoryPool.alloc();J.sub(n,e,t);var o=J.MemoryPool.alloc();J.cross(o,this._direction,r);var a=void 0,s=J.dot(o,n);if(Math.abs(s)>_.EPSILON){var h=1/s,u=J.MemoryPool.alloc();J.sub(u,this._start,t);var c=J.dot(o,u)*h;if(c<0||c>1);else{var l=J.MemoryPool.alloc();J.cross(l,u,n);var g=J.dot(l,this._direction)*h;if(g<0||c+g>1);else{var d=J.dot(l,r)*h;if(d<_.EPSILON||d>this._length);else{a=new ar;var A=1-c-g,p=c,I=g,f=d*this._inverseLength,C=t[0]*A+e[0]*p+i[0]*I,m=t[1]*A+e[1]*p+i[1]*I,v=t[2]*A+e[2]*p+i[2]*I;J.set(a._localPoint,C,m,v),J.transformMat4(a._point,a._localPoint,this._transform),J.cross(a._normal,n,r),J.normalize(a._normal,a._normal),J.transformMat4(a._normal,a._normal,this._normalTransform),a._ratio=f}}J.MemoryPool.free(l)}J.MemoryPool.free(u)}return J.MemoryPool.free(n),J.MemoryPool.free(r),J.MemoryPool.free(o),a},intersectBoundingBox:function(t){return t.intersectLineSegment(this._orginStart,this._orginEnd)},intersectBoundingBoxXY:function(t){return t.intersectLineSegmentXY(this._orginStart,this._orginEnd)}});var cr=hr,lr=function(){Oi.call(this),this._originPlanes=[],this._currentPlanes=[],this._planeMask=0,this._candidates=[],this._boundaryLines=[]};lr.new=function(){return new lr},lr.MemoryPool=new A(lr.new),(lr.prototype=Object.create(Oi.prototype)).constructor=lr,Object.assign(lr.prototype,{reset:function(){Oi.prototype.reset.call(this),this._originPlanes.length=0,this._currentPlanes.length=0,this._planeMask=0,this._candidates.length=0,this._boundaryLines.length=0},initialize:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i],n=nt.new();this._originPlanes.push(nt.copy(n,r));var o=nt.new();this._currentPlanes.push(nt.copy(o,r)),this._planeMask<<=1,this._planeMask|=1}},intersect:function(t){this._intersectFlag=!1,this._drawable=t;var e=t.getGeometry();if(e._vertexBuffer&&0!==e._solidVertexAligns.length){var i=t.getTransform();if(this._transform!==i){this._transform=i;for(var r=this._originPlanes.length,n=0;n<r;n++){var o=this._originPlanes[n],a=this._currentPlanes[n]=this._currentPlanes[n]||nt.new();nt.copy(a,o),nt.transformMat4(a,i)}this._boundaryLines.length=0}e.traverse(this)}},intersectPoint:function(t){for(var e=this._currentPlanes.length,i=0;i<e;++i)if(nt.distanceToVertex(this._currentPlanes[i],t)<0)return;var r=J.new();J.copy(r,t),r._planeMask=this._planeMask,r._intersectPtMask=!1;var n=new sr;return n._points.push(r),n._pointNumber++,n},intersectLine:function(t,e){var i,r,n=1,o=0;this._candidates.length=0;for(var a=!0,s=!0,h=this._currentPlanes.length,u=0;u<h;++u,n<<=1){var c=this._currentPlanes[u],l=(i=nt.distanceToVertex(c,t))<0,g=(r=nt.distanceToVertex(c,e))<0;if(l&&g)return;if(l||g){l&&(a=!1),g&&(s=!1);var d=J.new();i<_.EPSILON?J.copy(d,t):r<_.EPSILON?J.copy(d,e):l&&!g?(J.sub(d,t,e),J.scaleAndAdd(d,t,d,i/(r-i))):!l&&g&&(J.sub(d,e,t),J.scaleAndAdd(d,t,d,i/(i-r))),d._planeMask=n,d._intersectPtMask=!0,this._candidates.push(d)}else o|=n}if(this._planeMask===o){var A=J.new();J.copy(A,t),A._planeMask=this._planeMask,A._intersectPtMask=!1,this._candidates.push(A);var p=J.new();J.copy(p,e),p._planeMask=this._planeMask,p._intersectPtMask=!1,this._candidates.push(p)}else{if(this.checkCandidates(o)>0){if(a){var I=J.new();J.copy(I,t),I._planeMask=this._planeMask,I._intersectPtMask=!1,this._candidates.push(I)}if(s){var f=J.new();J.copy(f,e),f._planeMask=this._planeMask,f._intersectPtMask=!1,this._candidates.push(f)}}}return this.createIntersection()},intersectTriangle:function(t,e,i){var r,n,o,a=!0,s=!0,h=!0;this._candidates.length=0;for(var u=1,c=0,l=this._currentPlanes.length,g=0;g<l;++g,u<<=1){var d=this._currentPlanes[g],A=(r=nt.distanceToVertex(d,t))<0,p=(n=nt.distanceToVertex(d,e))<0,I=(o=nt.distanceToVertex(d,i))<0;if(A&&p&&I)return;if(A||p||I){if(A&&(a=!1),p&&(s=!1),I&&(h=!1),A&&!p){var f=J.new();J.sub(f,e,t),J.scaleAndAdd(f,e,f,n/(n-r)),f._planeMask=u,this._candidates.push(f)}else if(!A&&p){var C=J.new();J.sub(C,e,t),J.scaleAndAdd(C,t,C,r/(r-n)),C._planeMask=u,this._candidates.push(C)}if(p&&!I){var m=J.new();J.sub(m,e,i),J.scaleAndAdd(m,i,m,o/(o-n)),m._planeMask=u,this._candidates.push(m)}else if(!p&&I){var v=J.new();J.sub(v,i,e),J.scaleAndAdd(v,e,v,n/(n-o)),v._planeMask=u,this._candidates.push(v)}if(I&&!A){var y=J.new();J.sub(y,i,t),J.scaleAndAdd(y,t,y,r/(r-o)),y._planeMask=u,this._candidates.push(y)}else if(!I&&A){var E=J.new();J.sub(E,t,i),J.scaleAndAdd(E,i,E,o/(o-r)),E._planeMask=u,this._candidates.push(E)}}else c|=u}if(this._planeMask===c){var w=J.new();J.copy(w,t),w._planeMask=this._planeMask,w._intersectPtMask=!1,this._candidates.push(w),w=J.new(),J.copy(w,e),w._planeMask=this._planeMask,w._intersectPtMask=!1,this._candidates.push(w),w=J.new(),J.copy(w,i),w._planeMask=this._planeMask,w._intersectPtMask=!1,this._candidates.push(w)}else{if(0===this._candidates.length&&l<3)return;if(this.checkCandidates(c)>0){if(a){var M=J.new();J.copy(M,t),M._planeMask=this._planeMask,M._intersectPtMask=!1,this._candidates.push(M)}if(s){var T=J.new();J.copy(T,e),T._planeMask=this._planeMask,T._intersectPtMask=!1,this._candidates.push(T)}if(h){var P=J.new();J.copy(P,i),P._planeMask=this._planeMask,P._intersectPtMask=!1,this._candidates.push(P)}}else{this._candidates.length=0,this.getPolytopeLines();var S=J.MemoryPool.alloc();J.sub(S,e,t);var R=J.MemoryPool.alloc();J.sub(R,i,t);for(var O=J.MemoryPool.alloc(),L=J.MemoryPool.alloc(),N=J.MemoryPool.alloc(),b=this._boundaryLines.length,D=0;D<b;D++){var x=this._boundaryLines[D];J.cross(O,x._lineDirection,R);var B=J.dot(S,O);if(!(Math.abs(B)<_.EPSILON)){var G=1/B;J.sub(L,x._linePoint,t);var F=G*J.dot(L,O);if(!(F<0||F>1)){J.cross(N,L,S);var V=G*J.dot(x._lineDirection,N);if(!(V<0||F+V>1)){var k=G*J.dot(R,N),U=J.new();J.scaleAndAdd(U,x._linePoint,x._lineDirection,k),U._planeMask=x._planeMask,U._intersectPtMask=!0,this._candidates.push(U)}}}}J.MemoryPool.free(O),J.MemoryPool.free(L),J.MemoryPool.free(N),J.MemoryPool.free(S),J.MemoryPool.free(R),this.checkCandidates(c)}}return this.createIntersection()},checkCandidates:function(t){for(var e=1,i=this._candidates.length,r=i,n=this._currentPlanes.length,o=0;o<n&&r>0;o++,e<<=1)if(!(e&t))for(var a=this._currentPlanes[o],s=0;s<i;s++){var h=this._candidates[s];if(0!==h._planeMask&&(!(e&h._planeMask)&&nt.distanceToVertex(a,h)<_.EPSILON&&(h._planeMask=0,0===--r)))return 0}return r},getPolytopeLines:function(){if(0===this._boundaryLines.length)for(var t=1,e=this._currentPlanes.length,i=0;i<e;++i,t<<=1){var r=this._currentPlanes[i],n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc();J.set(n,r[0],r[1],r[2]),J.scale(o,n,-r[3]);for(var a=t<<1,s=i+1;s<e;++s,a<<=1){var h=this._currentPlanes[s],u=J.MemoryPool.alloc();J.set(u,h[0],h[1],h[2]);var c=J.dot(n,u);if(Math.abs(c)>1-_.EPSILON)J.MemoryPool.free(u);else{var l=J.MemoryPool.alloc(),g=J.new();J.cross(g,n,u),J.cross(l,g,n);var d=-nt.distanceToVertex(h,o);if(d/=J.dot(l,u),!Number.isNaN(d)){var A=J.new();J.scaleAndAdd(A,o,l,d);var p={};p._linePoint=A,p._planeMask=t|a,p._lineDirection=g,this._boundaryLines.push(p)}J.MemoryPool.free(l),J.MemoryPool.free(u)}}J.MemoryPool.free(o),J.MemoryPool.free(n)}},createIntersection:function(){for(var t=new sr,e=this._candidates.length,i=0;i<e;i++){var r=this._candidates[i];if(0!==r._planeMask&&(J.transformMat4(r,r,this._transform),t._points.push(r),t._pointNumber++,t._pointNumber===_.MAX_POLYTOPE_INTERSECTIUON_NUMBER))break}if(0!==t._pointNumber)return t},intersectBoundingBox:function(t){return t.intersectPlanes(this._originPlanes)},intersectBoundingBoxXY:function(t){return t.intersectPlanes(this._originPlanes)}});var gr=lr,_r=function(t){this._moduler=t,this._renderer=t._renderer,this._camera=null,this._glstateset=null,this._glshadings=null,this._drawables=[],this._drawIndex=0,this._isvalid=!0};Object.assign(_r.prototype,{isvalid:function(t){return void 0!==t&&(this._isvalid=t),this._isvalid},reset:function(){this._drawables.length=0},addDrawable:function(t){this._drawables.push(t)},getDrawables:function(){return this._drawables},getGLContext:function(){return this._moduler.getGLContext()},setGLStateset:function(t){this._glstateset=t},getGLStateset:function(){return this._glstateset?this._glstateset:this._moduler.getGLStateset()},setCamera:function(t){this._camera=t},getCamera:function(){return null===this._camera?this._moduler.getCamera():this._camera},drawRefresh:function(){this._drawIndex=0},drawFinished:function(){return!this._moduler._isFixedframeOpened||!this._isvalid||this._drawables.length===this._drawIndex},draw:function(){},destroy:function(){this._glshadings&&this._glshadings.release()},linesegmentIntersect:function(t,e,i,r,n,o){var a=new cr;a.reset(),a.setIntersections(t),a.initialize(e,i),a.setUsageMask(r),a.setOutcomeMask(n),a.setCategoryFilter(o);for(var s=this._drawables.length,h=0;h<s;h++){var u=this._drawables[h];a.intersect(u)}a.sort()},polytopeIntersect:function(t,e,i,r,n){var o=new gr;o.reset(),o.setIntersections(t),o.initialize(e),o.setUsageMask(i),o.setOutcomeMask(r),o.setCategoryFilter(n);for(var a=this._drawables.length,s=0;s<a;s++){var h=this._drawables[s];o.intersect(h)}}});var dr=_r,Ar=function(){this._transform=null,this._glgeometry=null,this._glmaterial=null,this._currentGLMaterial=null,this._currentGLLighting=null,this._currentGLFunction=null};Ar.prototype={getGeometry:function(){return null},getTransform:function(){return this._transform},getBoundingBox:function(){return null},getBoundingSphere:function(){return null},getRadius:function(){return 0},getProgramType:function(){var t=this._currentGLMaterial.type();return t+=this._currentGLLighting.type(),t+=this._currentGLFunction.type()}};var pr=function(){Ar.call(this),this._operable=null,this._swapMaterial=null,this._renderEntity=null};(pr.prototype=Object.create(Ar.prototype)).constructor=pr,Object.assign(pr.prototype,{getGeometry:function(){return this._operable._geometry},getBoundingBox:function(){return this._operable.getBoundingBox()},getBoundingSphere:function(){return this._operable.getBoundingSphere()},getRadius:function(){return this._operable.getRadius()},getRenderEntity:function(){return this._renderEntity},isShown:function(){return this._renderEntity.isShown()}});var Ir=function(){Ar.call(this),this._geometry=null,this._material=null,this._reference=null,this._boundingBox=null,this._boundingSphere=null};(Ir.prototype=Object.create(Ar.prototype)).constructor=Ir,Object.assign(Ir.prototype,{getGeometry:function(){return this._geometry},getBoundingBox:function(){return null===this._boundingBox&&(this._boundingBox=new at,this._boundingBox.copy(this._geometry.getBoundingBox()),this._transform&&this._boundingBox.transformMat4(this._transform)),this._boundingBox},getBoundingSphere:function(){if(null===this._boundingSphere){this._boundingSphere=new BoundingSphere;var t=this.getBoundingBox();this._boundingSphere.expandByBoundingBox(t)}return this._boundingSphere},getRadius:function(){return this.getBoundingSphere().getRadius()}});var fr=function(){this._glArrayBuffer=void 0,this._glVertexAttrib=void 0,this._glVertexAttribCount=0};Object.assign(fr.prototype,{setGLArrayBuffer:function(t){this._glArrayBuffer=t},getGLArrayBuffer:function(){return this._glArrayBuffer},addGLVertexAttrib:function(t){if(0===this._glVertexAttribCount)this._glVertexAttrib=t;else if(1===this._glVertexAttribCount){var e=[];e.push(this._glVertexAttrib),e.push(t),this._glVertexAttrib=e}else this._glVertexAttrib.push(t);this._glVertexAttribCount++},apply:function(t){if(this._glArrayBuffer&&this._glArrayBuffer.apply(t),1===this._glVertexAttribCount)this._glVertexAttrib.apply(t);else for(var e=0;e<this._glVertexAttribCount;e++)this._glVertexAttrib[e].apply(t)},release:function(){this._glArrayBuffer.release()}});var Cr=fr,mr=function(t){this._glcontext=t,this._id=null};Object.assign(mr.prototype,{id:function(){return this._id},apply:function(){},cancel:function(){},release:function(){}}),mr.wind=mr.prototype.wind=K.GLBUFFER;var vr=mr,yr=function(t,e,i){vr.call(this,t),this._id=this._glcontext.gl().createBuffer(),this._target=e,this._usage=_e.STATIC_DRAW,this._data=null,i&&this.setData(i)};(yr.prototype=Object.create(vr.prototype)).constructor=yr,Object.assign(yr.prototype,{setData:function(t){this._data=t,this._glcontext.gl().bindBuffer(this._target,this._id),this._glcontext.gl().bufferData(this._target,t,this._usage)},getData:function(){return this._data},apply:function(){this._glcontext.gl().bindBuffer(this._target,this._id)},cancel:function(){this._glcontext.gl().bindBuffer(this._target,null)},release:function(){this._id&&(this._glcontext.gl().deleteBuffer(this._id),this._id=null)}}),yr.wind=yr.prototype.wind=K.GLARRAYBUFFER;var Er=yr,wr=function(t){this._index=t};Object.assign(wr.prototype,{setIndex:function(t){this._index=t},apply:function(){}}),wr.wind=wr.prototype.wind=K.GLVERTEXATTRIB;var Mr=function(t,e,i,r,n,o,a){wr.call(this,t),this._size=void 0!==e?e:3,this._type=void 0!==i?i:_e.BYTE,this._normalized=void 0!==r&&r,this._stride=void 0!==n?n:0,this._offset=void 0!==o?o:0,this._divisor=a||void 0};(Mr.prototype=Object.create(wr.prototype)).constructor=Mr,Object.assign(Mr.prototype,{apply:function(t){t.gl().vertexAttribPointer(this._index,this._size,this._type,this._normalized,this._stride,this._offset),this._divisor&&t.glInstancedArrays().vertexAttribDivisorANGLE(this._index,this._divisor),t.gl().enableVertexAttribArray(this._index)}}),Mr.wind=Mr.prototype.wind=K.GLVERTEXATTRIBPOINTER;var Tr=function(t,e,i,r,n){wr.call(this,t),this._count=0,this._v0=0,e&&(this._v0=e,this._count++),this._v1=0,i&&(this._v1=i,this._count++),this._v2=0,r&&(this._v2=r,this._count++),this._v3=0,n&&(this._v3=n,this._count++)};(Tr.prototype=Object.create(wr.prototype)).constructor=Tr,Object.assign(Tr.prototype,{apply:function(t){1===this._count?t.vertexAttrib1f(this._index,this._v0):1===this._count?t.vertexAttrib2f(this._index,this._v0,this._v1):1===this._count?t.vertexAttrib3f(this._index,this._v0,this._v1,this._v2):1===this._count&&t.vertexAttrib4f(this._index,this._v0,this._v1,this._v2,this._v3),t.disableVertexAttribArray(this._index)}}),Tr.wind=Tr.prototype.wind=K.GLVERTEXATTRIBVALUE;var Pr=function(t){this._mode=0,t&&(this._mode=t)};Object.assign(Pr.prototype,{getMode:function(){return this._mode},apply:function(){}}),Pr.wind=Pr.prototype.wind=K.GLDRAWCALL;var Sr=function(t,e,i){Pr.call(this,t),this._first=0,e&&(this._first=e),this._count=0,i&&(this._count=i)};(Sr.prototype=Object.create(Pr.prototype)).constructor=Sr,Object.assign(Sr.prototype,{getFirst:function(){return this._first},getCount:function(){return this._count},update:function(t,e,i){this._mode=t,this._first=e,this._count=i},apply:function(t){t.gl().drawArrays(this._mode,this._first,this._count)}}),Sr.wind=Sr.prototype.wind=K.GLDRAWARRAYS;var Rr=function(t,e,i,r){Pr.call(this,t),this._count=0,e&&(this._count=e),this._type=_e.UNSIGNED_SHORT,i&&(this._type=i),this._offset=0,r&&(this._offset=r)};(Rr.prototype=Object.create(Pr.prototype)).constructor=Rr,Object.assign(Rr.prototype,{update:function(t,e,i,r){this._mode=t,this._count=e,this._type=i,this._offset=r},apply:function(t){t.gl().drawElements(this._mode,this._count,this._type,this._offset)}}),Rr.wind=Rr.prototype.wind=K.GLDRAWELEMENTS;var Or=function(t,e,i,r){Sr.call(this,t,e,i),this._instanceCount=0,r&&(this._instanceCount=r)};(Or.prototype=Object.create(Sr.prototype)).constructor=Or,Object.assign(Or.prototype,{apply:function(t){t.glInstancedArrays().drawArraysInstancedANGLE(this._mode,this._first,this._count,this._instanceCount)}}),Or.wind=Or.prototype.wind=K.GLDRAWARRAYSINSTANCED;var Lr=function(t,e,i,r,n){Rr.call(this,t,e,i,r),this._instanceCount=0,n&&(this._instanceCount=n)};(Lr.prototype=Object.create(Rr.prototype)).constructor=Lr,Object.assign(Lr.prototype,{apply:function(t){t.glInstancedArrays().drawElementsInstancedANGLE(this._mode,this._count,this._type,this._offset,this._instanceCount)}}),Lr.wind=Lr.prototype.wind=K.GLDRAWELEMENTSINSTANCED;var Nr=function(t){vr.call(this,t),this._id=this._glcontext.glVertexArrayObject().createVertexArrayOES()};(Nr.prototype=Object.create(vr.prototype)).constructor=Nr,Object.assign(Nr.prototype,{apply:function(){this._glcontext.glVertexArrayObject().bindVertexArrayOES(this._id)},cancel:function(){this._glcontext.glVertexArrayObject().bindVertexArrayOES(null)},release:function(){this._id&&(this._glcontext.glVertexArrayObject().deleteVertexArrayOES(this._id),this._id=null)}}),Nr.wind=Nr.prototype.wind=K.GLVERTEXARRAY;var br=Nr,Dr=function(){};Object.assign(Dr.prototype,{release:function(){}});var xr=Dr,Br=function(t,e){xr.call(this),this._glcontext=e,this._geometry=t,this._glVertexBuffer=null,this._glVertexBufferCount=0,this._glIndexBuffer=null,this._glSolidDrawCall=null,this._glSolidDrawCallCount=0,this._glEdgeDrawCall=null,this._isVAOSupport=!!e.glVertexArrayObject(),this._glVertexArray=null,this.create()};Br.create=function(t,e){switch(t._usageType){case vt.STATIC:return new Gr(t,e);case vt.STREAM:return new Fr(t,e);case vt.DYNAMIC:return new Vr(t,e);default:return null}},(Br.prototype=Object.create(xr.prototype)).constructor=Br,Object.assign(Br.prototype,{create:function(){},update:function(){},release:function(){if(1===this._glVertexBufferCount)this._glVertexBuffer.release(this._glcontext);else for(var t=0;t<this._glVertexBufferCount;t++)this._glVertexBuffer[t].release(this._glcontext);this._glIndexBuffer&&this._glIndexBuffer.release(this._glcontext),this._glVertexArray&&this._glVertexArray.release()},drawSolid:function(){},drawEdge:function(){},createGLVertexBuffer:function(){var t=this._geometry._vertexBuffer;if(t.wind===K.COMBINEVERTEXBUFFER){var e=new Cr;e.setGLArrayBuffer(new Er(this._glcontext,_e.ARRAY_BUFFER,t._data));for(var i=t._vertexByteStride,r=0,n=t._datas.length,o=0;o<n;o++){var a=t._datas[o];a&&(e.addGLVertexAttrib(new Mr(a._attributeType,a._componentSize,a._componentType,a._normalized,i,r)),r+=a._componentSize*_e.getTypeSize(a._componentType))}this.addGLVertexBuffer(e)}else if(t.wind===K.SEPARATEVERTEXBUFFER)for(var s=t._datas.length,h=0;h<s;h++){var u=t._datas[h];if(u){var c=new Cr;c.setGLArrayBuffer(new Er(this._glcontext,_e.ARRAY_BUFFER,u._bufferData)),c.addGLVertexAttrib(new Mr(u._attributeType,u._componentSize,u._componentType,u._normalized,0,0,u._divisorNumber)),this.addGLVertexBuffer(c)}}},createGLIndexBuffer:function(){var t=this._geometry._indexes;t&&(this._glIndexBuffer=new Er(this._glcontext,_e.ELEMENT_ARRAY_BUFFER,t))},createGLSolidDrawCall:function(){for(var t=this._geometry,e=t._instanceCount,i=t._solidVertexAligns,r=i.length,n=0;n<r;n++){var o=i[n],a=this.createGLDrawCall(o,e);a&&this.addGLSolidDrawCall(a)}},createGLEdgeDrawCall:function(){var t=this._geometry;t._egdeVertexAlign&&(this._glEdgeDrawCall=this.createGLDrawCall(t._egdeVertexAlign))},createGLVertexArray:function(){if(this._glVertexArray=new br(this._glcontext),this._glVertexArray.apply(),1===this._glVertexBufferCount)this._glVertexBuffer.apply(this._glcontext);else for(var t=0;t<this._glVertexBufferCount;t++)this._glVertexBuffer[t].apply(this._glcontext);this._glIndexBuffer&&this._glIndexBuffer.apply(this._glcontext),this._glVertexArray.cancel()},updateGLVertexBuffer:function(){var t=this._geometry._vertexBuffer;if(t.wind===K.COMBINEVERTEXBUFFER);else if(t.wind===K.SEPARATEVERTEXBUFFER)for(var e=t._datas.length,i=0;i<e;i++){var r=t._datas[i];if(r._changed){var n=this.getGLVertexBuffer(i);n&&n.getGLArrayBuffer().setData(r._bufferData),r._changed=!1}}},updateGLIndexBuffer:function(){var t=this._geometry._indexes;t?this._glIndexBuffer?this._glIndexBuffer.getData()===this._geometry._indexes||this._glIndexBuffer.setData(t):this._glIndexBuffer=new Er(this._glcontext,_e.ELEMENT_ARRAY_BUFFER,t):this._glIndexBuffer=null},updateGLSolidDrawCall:function(){for(var t=this._geometry._solidVertexAligns,e=t.length,i=0;i<e;i++){var r=t[i];if(r._changed){var n=this.getGLSolidDrawCall(i);this.updateGLDrawCall(n,r),r._changed=!1}}},updateGLEdgeDrawCall:function(){},addGLVertexBuffer:function(t){if(0===this._glVertexBufferCount)this._glVertexBuffer=t;else if(1===this._glVertexBufferCount){var e=[];e.push(this._glVertexBuffer),e.push(t),this._glVertexBuffer=e}else this._glVertexBuffer.push(t);this._glVertexBufferCount++},getGLVertexBuffer:function(t){return 0===this._glVertexBufferCount?null:1===this._glVertexBufferCount?0===t?this._glVertexBuffer:null:this._glVertexBuffer[t]},updateGLDrawCall:function(t,e){if(e._type===mt.ARRAY_TRIANGLES)t.update(_e.TRIANGLES,e._start,e._count);else if(e._type===mt.INDEX_TRIANGLES){var i=_e.getArrayType(this._geometry._indexes),r=this._geometry._indexes.BYTES_PER_ELEMENT;t.update(_e.TRIANGLES,e._count,i,e._start*r)}else if(e._type===mt.ARRAY_LINES)t.update(_e.LINES,e._start,e._count);else if(e._type===mt.INDEX_LINES){var n=_e.getArrayType(this._geometry._indexes),o=this._geometry._indexes.BYTES_PER_ELEMENT;t.update(_e.LINES,e._count,n,e._start*o)}else if(e._type===mt.ARRAY_LINE_LOOP)t.update(_e.LINE_LOOP,e._start,e._count);else if(e._type===mt.INDEX_LINE_LOOP){var a=_e.getArrayType(this._geometry._indexes),s=this._geometry._indexes.BYTES_PER_ELEMENT;t.update(_e.LINE_LOOP,e._count,a,e._start*s)}},createGLDrawCall:function(t,e){if(t._type===mt.ARRAY_TRIANGLES)return e?new Or(_e.TRIANGLES,t._start,t._count,e):new Sr(_e.TRIANGLES,t._start,t._count);if(t._type===mt.INDEX_TRIANGLES){var i=_e.getArrayType(this._geometry._indexes),r=this._geometry._indexes.BYTES_PER_ELEMENT;return e?new Lr(_e.TRIANGLES,t._count,i,t._start*r,e):new Rr(_e.TRIANGLES,t._count,i,t._start*r)}if(t._type===mt.ARRAY_LINES)return new Sr(_e.LINES,t._start,t._count);if(t._type===mt.INDEX_LINES){var n=_e.getArrayType(this._geometry._indexes),o=this._geometry._indexes.BYTES_PER_ELEMENT;return new Rr(_e.LINES,t._count,n,t._start*o)}if(t._type===mt.ARRAY_LINE_LOOP)return new Sr(_e.LINE_LOOP,t._start,t._count);if(t._type===mt.INDEX_LINE_LOOP){var a=_e.getArrayType(this._geometry._indexes),s=this._geometry._indexes.BYTES_PER_ELEMENT;return new Rr(_e.LINE_LOOP,t._count,a,t._start*s)}},addGLSolidDrawCall:function(t){if(0===this._glSolidDrawCallCount)this._glSolidDrawCall=t;else if(1===this._glSolidDrawCallCount){var e=[];e.push(this._glSolidDrawCall),e.push(t),this._glSolidDrawCall=e}else this._glSolidDrawCall.push(t);this._glSolidDrawCallCount++},getGLSolidDrawCall:function(t){return 0===this._glSolidDrawCallCount?null:1===this._glSolidDrawCallCount?0===t?this._glSolidDrawCall:null:this._glSolidDrawCall[t]},drawSolidWithGLVAO:function(){if(this._glVertexArray.apply(),1===this._glSolidDrawCallCount)this._glSolidDrawCall.apply(this._glcontext);else for(var t=0;t<this._glSolidDrawCallCount;t++)this._glSolidDrawCall[t].apply(this._glcontext);this._glVertexArray.cancel()},drawEdgeWithGLVAO:function(){this._glEdgeDrawCall&&(this._glVertexArray.apply(),this._glEdgeDrawCall.apply(this._glcontext),this._glVertexArray.cancel())},drawSolidWithoutGLVAO:function(){if(1===this._glVertexBufferCount)this._glVertexBuffer.apply(this._glcontext);else for(var t=0;t<this._glVertexBufferCount;t++)this._glVertexBuffer[t].apply(this._glcontext);if(this._glIndexBuffer&&this._glIndexBuffer.apply(this._glcontext),1===this._glSolidDrawCallCount)this._glSolidDrawCall.apply(this._glcontext);else for(var e=0;e<this._glSolidDrawCallCount;e++)this._glSolidDrawCall[e].apply(this._glcontext)},drawEdgeWithoutGLVAO:function(){if(this._glEdgeDrawCall){if(1===this._glVertexBufferCount)this._glVertexBuffer.apply(this._glcontext);else for(var t=0;t<this._glVertexBufferCount;t++)this._glVertexBuffer[t].apply(this._glcontext);this._glIndexBuffer&&this._glIndexBuffer.apply(this._glcontext),this._glEdgeDrawCall.apply(this._glcontext)}}});var Gr=function(t,e){Br.call(this,t,e)};Gr.prototype=Object.create(Br.prototype),Gr.prototype.constructor=Gr,Object.assign(Gr.prototype,{create:function(){this.createGLVertexBuffer(),this.createGLIndexBuffer(),this.createGLSolidDrawCall(),this.createGLEdgeDrawCall(),this._isVAOSupport&&this.createGLVertexArray()},drawSolid:function(){this._isVAOSupport?this.drawSolidWithGLVAO():this.drawSolidWithoutGLVAO()},drawEdge:function(){this._isVAOSupport?this.drawEdgeWithGLVAO():this.drawEdgeWithoutGLVAO()}});var Fr=function(t,e){Br.call(this,t,e)};Fr.prototype=Object.create(Br.prototype),Fr.prototype.constructor=Fr,Object.assign(Fr.prototype,{create:function(){this.createGLVertexBuffer(),this.createGLIndexBuffer(),this.createGLSolidDrawCall(),this.createGLEdgeDrawCall(),this._isVAOSupport&&this.createGLVertexArray()},update:function(){this.updateGLVertexBuffer()},drawSolid:function(){this._isVAOSupport?this.drawSolidWithGLVAO():this.drawSolidWithoutGLVAO()},drawEdge:function(){this._isVAOSupport?this.drawEdgeWithGLVAO():this.drawEdgeWithoutGLVAO()}});var Vr=function(t,e){Br.call(this,t,e)};Vr.prototype=Object.create(Br.prototype),Vr.prototype.constructor=Vr,Object.assign(Vr.prototype,{create:function(){this.createGLVertexBuffer(),this.createGLIndexBuffer(),this.createGLSolidDrawCall(),this.createGLEdgeDrawCall()},update:function(){this.updateGLVertexBuffer(),this.updateGLIndexBuffer(),this.updateGLSolidDrawCall()},drawSolid:function(){this.drawSolidWithoutGLVAO()},drawEdge:function(){this.drawEdgeWithoutGLVAO()}});var kr={UNKNOWN:-1,MATERIAL0:"MATERIAL0",MATERIAL1:"MATERIAL1",MATERIAL2:"MATERIAL2",MATERIAL3:"MATERIAL3",MATERIAL4:"MATERIAL4",MATERIAL5:"MATERIAL5",MATERIAL6:"MATERIAL6",MATERIAL7:"MATERIAL7",MATERIAL8:"MATERIAL8",LIGHTING0:"LIGHTING0",LIGHTING1:"LIGHTING1",LIGHTING2:"LIGHTING2",FUNCTION0:"FUNCTION0",FUNCTION1:"FUNCTION1",FUNCTION2:"FUNCTION2",FUNCTION3:"FUNCTION3",FUNCTION4:"FUNCTION4",RTTOffScreen:"RTT",FXAAOffscreen:"FXAA"};Object.freeze(kr);var Ur=kr,Hr=function(){xr.call(this)};(Hr.prototype=Object.create(xr.prototype)).constructor=Hr,Object.assign(Hr.prototype,{type:function(){return Ur.UNKNOWN},apply:function(t,e){}}),Hr.wind=Hr.prototype.wind=K.GLSHADING;var jr=Hr,Yr=function(t){this._name=t,this._data=void 0,this._glfunc="",this._type=void 0,this._ismatrix=!1,this._transpose=!1};(Yr.prototype={getName:function(){return this._name},getData:function(){return this._data},apply:function(t,e){var i=e.getUniformLocation(this._name);if(void 0!==i){var r=t.gl(),n=r[this._glfunc];this._ismatrix?n.call(r,i,this._transpose,this._data):n.call(r,i,this._data)}},setData:function(t){this._data[0]=t},setData1:function(t){this._data[0]=t[0]},setData2:function(t){this._data[0]=t[0],this._data[1]=t[1]},setData3:function(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]},setData4:function(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2],this._data[3]=t[3]},setData9:function(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2],this._data[3]=t[3],this._data[4]=t[4],this._data[5]=t[5],this._data[6]=t[6],this._data[7]=t[7],this._data[8]=t[8]},setData16:function(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2],this._data[3]=t[3],this._data[4]=t[4],this._data[5]=t[5],this._data[6]=t[6],this._data[7]=t[7],this._data[8]=t[8],this._data[9]=t[9],this._data[10]=t[10],this._data[11]=t[11],this._data[12]=t[12],this._data[13]=t[13],this._data[14]=t[14],this._data[15]=t[15]}}).setFloat=Yr.prototype.setInt=Yr.prototype.setData,Yr.prototype.setVec1=Yr.prototype.setVec1i=Yr.prototype.setData1,Yr.prototype.setVec2=Yr.prototype.setVec2i=Yr.prototype.setData2,Yr.prototype.setVec3=Yr.prototype.setVec3i=Yr.prototype.setData3,Yr.prototype.setVec4=Yr.prototype.setVec4i=Yr.prototype.setData4,Yr.prototype.setMatrix2=Yr.prototype.setData4,Yr.prototype.setMatrix3=Yr.prototype.setData9,Yr.prototype.setMatrix4=Yr.prototype.setData16;var zr=function(){return new Float32Array(1)},Wr=function(){return new Float32Array(2)},Xr=function(){return new Float32Array(3)},Jr=function(){return new Float32Array(4)},qr=function(){return new Int32Array(1)},Zr=function(){return new Int32Array(2)},Kr=function(){return new Int32Array(3)},Qr=function(){return new Int32Array(4)},$r=function(){var t=new Float32Array(4);return t[0]=t[3]=1,t},tn=function(){var t=new Float32Array(9);return t[0]=t[4]=t[8]=1,t},en=function(){var t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t},rn=function(t,e,i,r,n){var o=new Yr(t);return o._data=e(),o._glfunc=i,o._type=r,o._ismatrix=!!n,o};Yr.createFloat=function(t){return rn(t,zr,"uniform1fv","vec1")},Yr.createInt=function(t){return rn(t,qr,"uniform1iv","vec1i")},Yr.createFloat2=function(t){return rn(t,Wr,"uniform2fv","vec2")},Yr.createInt2=function(t){return rn(t,Zr,"uniform2iv","vec2i")},Yr.createFloat3=function(t){return rn(t,Xr,"uniform3fv","vec3")},Yr.createInt3=function(t){return rn(t,Kr,"uniform3iv","vec3i")},Yr.createFloat4=function(t){return rn(t,Jr,"uniform4fv","vec4")},Yr.createInt4=function(t){return rn(t,Qr,"uniform4iv","vec4i")},Yr.createMatrix2=function(t){return rn(t,$r,"uniformMatrix2fv","mat2",!0)},Yr.createMatrix3=function(t){return rn(t,tn,"uniformMatrix3fv","mat3",!0)},Yr.createMatrix4=function(t){return rn(t,en,"uniformMatrix4fv","mat4",!0)};var nn=Yr,on=function(t,e,i,r,n){vr.call(this,t),this._id=this._glcontext.gl().createTexture(),this._target=_e.TEXTURE_2D,e&&(this._target=e),this._internalFormat=i,this._compressedFlag=this.compressedCheck(i),this._format=r,this._type=n,this._image=null,this._width=0,this._height=0,this._level=0,this._mipmapFlag=!1};(on.prototype=Object.create(vr.prototype)).constructor=on,Object.assign(on.prototype,{resize:function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.image())},getHeight:function(){return this._height},getWidth:function(){return this._width},setImage:function(t,e){this._image=t,this._mipmapFlag=!!e,this.image()},getImage:function(){return this._image},getTarget:function(){return this._target},getInternalFormat:function(){return this._internalFormat},getFormat:function(){return this._format},getType:function(){return this._type},setParameter:function(t,e){this._glcontext.gl().bindTexture(this._target,this._id),this._glcontext.gl().texParameteri(this._target,t,e)},compressedCheck:function(t){switch(t||this._internalFormat){case _e.COMPRESSED_RGB_S3TC_DXT1_EXT:case _e.COMPRESSED_RGBA_S3TC_DXT1_EXT:case _e.COMPRESSED_RGBA_S3TC_DXT3_EXT:case _e.COMPRESSED_RGBA_S3TC_DXT5_EXT:case _e.COMPRESSED_RGB_ATC_WEBGL:case _e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:case _e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:case _e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG:case _e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG:case _e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:case _e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:case _e.COMPRESSED_RGB_ETC1_WEBGL:return!0;default:return!1}},image:function(){this._glcontext.gl().bindTexture(this._target,this._id),this._glcontext.gl().pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,!0),this._compressedFlag?this._glcontext.gl().compressedTexImage2D(this._target,this._level,this._internalFormat,this._width,this._height,0,this._image):(this._image?this._glcontext.gl().texImage2D(this._target,this._level,this._internalFormat,this._format,this._type,this._image):this._glcontext.gl().texImage2D(this._target,this._level,this._internalFormat,this._width,this._height,0,this._format,this._type,null),this._mipmapFlag&&this._glcontext.gl().generateMipmap(this._target))},apply:function(){this._glcontext.gl().bindTexture(this._target,this._id)},cancel:function(){this._glcontext.gl().bindTexture(this._target,null)},release:function(){this._id&&(this._glcontext.gl().deleteTexture(this._id),this._id=null)}}),on.wind=on.prototype.wind=K.GLTEXTURE;var an=on,sn=function(){jr.call(this),this._isTransparent=!1};(sn.prototype=Object.create(jr.prototype)).constructor=sn,Object.assign(sn.prototype,{isTransparent:function(){return this._isTransparent},isRealModeOpened:function(t){}});var hn=function(){sn.call(this)};(hn.prototype=Object.create(sn.prototype)).constructor=hn,Object.assign(hn.prototype,{type:function(){return Ur.MATERIAL0}});var un=function(t){sn.call(this),this._pureColor=nn.createFloat4("PureColor"),t&&this.setColor(t)};(un.prototype=Object.create(sn.prototype)).constructor=un,Object.assign(un.prototype,{type:function(){return Ur.MATERIAL1},setColor:function(t){this._pureColor.setData4(t),this.checkTransparent()},getColor:function(){return this._pureColor.getData()},setAlpha:function(t){var e=this._pureColor.getData();this._pureColor.setData4([e[0],e[1],e[2],t]),this.checkTransparent()},getAlpha:function(){return this._pureColor.getData()[3]},checkTransparent:function(){this._isTransparent=Math.abs(1-this._pureColor.getData()[3])>_.EPSILON},apply:function(t,e){this._pureColor.apply(t,e)}});var cn=function(t){sn.call(this),this._texture=new an(t,_e.TEXTURE_2D,_e.RGBA,_e.RGBA,_e.UNSIGNED_BYTE),this._texture.setParameter(_e.TEXTURE_MAG_FILTER,_e.LINEAR),this._texture.setParameter(_e.TEXTURE_MIN_FILTER,_e.NEAREST_MIPMAP_LINEAR),this._texture.setParameter(_e.TEXTURE_WRAP_S,_e.REPEAT),this._texture.setParameter(_e.TEXTURE_WRAP_T,_e.REPEAT),this._image=null,this._sampler=nn.createInt("MainTexture"),this._sampler.setData(0)};(cn.prototype=Object.create(sn.prototype)).constructor=cn,Object.assign(cn.prototype,{setImage:function(t){this._image!==t&&(this._image=t,this._texture.setImage(t,!0),_.is_powerof_two(t.width)&&_.is_powerof_two(t.height)||console.log("image is not power of two"))},setTexture:function(t){this._texture=t},getTexture:function(){return this._texture},apply:function(t,e){var i=t.gl();this._texture?(i.activeTexture(i.TEXTURE0),this._texture.apply(),this._sampler.setData(0),this._sampler.apply(t,e)):console.log("GLTextureMaterial has no texture!")},release:function(){this._texture&&(this._texture.release(),this._texture=null)}});var ln=function(t){cn.call(this,t),this._genericColor=nn.createFloat4("GenericColor"),this._genericColor.setData4([.7,.7,.7,1]),this._multiplyColor=nn.createFloat4("MultiplyColor"),this._multiplyColor.setData4([1,1,1,1])};(ln.prototype=Object.create(cn.prototype)).constructor=ln,Object.assign(ln.prototype,{type:function(){return Ur.MATERIAL2},setColor:function(t,e){this._genericColor.setData4(t),this._multiplyColor.setData4(e),this.checkTransparent()},checkTransparent:function(){var t=this._genericColor.getData()[3]*this._multiplyColor.getData()[3];this._isTransparent=Math.abs(1-t)>_.EPSILON},apply:function(t,e){cn.prototype.apply.call(this,t,e),this._genericColor.apply(t,e),this._multiplyColor.apply(t,e)}});var gn=function(t){cn.call(this,t)};(gn.prototype=Object.create(cn.prototype)).constructor=gn,Object.assign(gn.prototype,{type:function(){return Ur.MATERIAL3}});var _n=function(t,e){cn.call(this,t),this._discardAlpha=nn.createFloat("DiscardAlpha"),Y.isNumberType(e)&&this._discardAlpha.setData(e)};(_n.prototype=Object.create(cn.prototype)).constructor=_n,Object.assign(_n.prototype,{type:function(){return Ur.MATERIAL4},setDiscardAlpha:function(t){this._discardAlpha.setData(t)},apply:function(t,e){cn.prototype.apply.call(this,t,e),this._discardAlpha.apply(t,e)}});var dn=function(t,e){sn.call(this),this._topColor=nn.createFloat4("TopColor"),t&&this._topColor.setData4(t),this._bottomColor=nn.createFloat4("BottomColor"),e&&this._bottomColor.setData4(e)};(dn.prototype=Object.create(sn.prototype)).constructor=dn,Object.assign(dn.prototype,{type:function(){return Ur.MATERIAL5},setTopColor:function(t){this._topColor.setData4(t)},getTopColor:function(){return this._topColor.getData()},setBottomColor:function(t){this._bottomColor.setData4(t)},getBottomColor:function(){return this._bottomColor.getData()},apply:function(t,e){this._topColor.apply(t,e),this._bottomColor.apply(t,e)}});var An=function(t){un.call(this,t),this._realModeOpened=!1,this._pureColor1=nn.createFloat4("PureColor")};(An.prototype=Object.create(un.prototype)).constructor=An,Object.assign(An.prototype,{isRealModeOpened:function(t){this._realModeOpened=t,this.checkTransparent()},type:function(){return Ur.MATERIAL1},setPureColor:function(t){this._pureColor1.setData4(t),this.checkTransparent()},getPureColor:function(){return this._pureColor1.getData()},checkTransparent:function(){this._realModeOpened?this._pureColor&&(this._isTransparent=Math.abs(1-this._pureColor.getData()[3])>_.EPSILON):this._pureColor1&&(this._isTransparent=Math.abs(1-this._pureColor1.getData()[3])>_.EPSILON)},apply:function(t,e){this._realModeOpened?this._pureColor.apply(t,e):this._pureColor1.apply(t,e)}});var pn=function(t){ln.call(this,t),this._realModeOpened=!1,this._pureColor1=nn.createFloat4("PureColor")};(pn.prototype=Object.create(ln.prototype)).constructor=pn,Object.assign(pn.prototype,{isRealModeOpened:function(t){this._realModeOpened!==t&&(this._realModeOpened=t,this.checkTransparent())},type:function(){return this._realModeOpened?Ur.MATERIAL2:Ur.MATERIAL1},setPureColor:function(t){this._pureColor1.setData4(t),this.checkTransparent()},getPureColor:function(){return this._pureColor1.getData()},checkTransparent:function(){if(this._realModeOpened){if(this._genericColor&&this._multiplyColor){var t=this._genericColor.getData()[3]*this._multiplyColor.getData()[3];this._isTransparent=Math.abs(1-t)>_.EPSILON}}else this._pureColor1&&(this._isTransparent=Math.abs(1-this._pureColor1.getData()[3])>_.EPSILON)},apply:function(t,e){this._realModeOpened?ln.prototype.apply.call(this,t,e):this._pureColor1.apply(t,e)}});var In=function(t,e){cn.call(this,t),this._texture.setParameter(_e.TEXTURE_MAG_FILTER,_e.NEAREST),this._texture.setParameter(_e.TEXTURE_MIN_FILTER,_e.NEAREST),this._texture.setParameter(_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),this._texture.setParameter(_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),this._discardAlpha=nn.createFloat("DiscardAlpha"),Y.isNumberType(e)&&this._discardAlpha.setData(e)};(In.prototype=Object.create(cn.prototype)).constructor=In,Object.assign(In.prototype,{type:function(){return Ur.MATERIAL6},setImage:function(t,e){this._image!==t&&(this._image=t,this._texture.setImage(t,e))},setDiscardAlpha:function(t){this._discardAlpha.setData(t)},apply:function(t,e){cn.prototype.apply.call(this,t,e),this._discardAlpha.apply(t,e)}});var fn=function(){sn.call(this)};(fn.prototype=Object.assign(sn.prototype)).constructor=fn,Object.assign(fn.prototype,{type:function(){return Ur.MATERIAL7}});var Cn=function(t){cn.call(this,t),this._multiplyColor=nn.createFloat4("MultiplyColor"),this._multiplyColor.setData4([1,1,1,1])};(Cn.prototype=Object.create(cn.prototype)).constructor=Cn,Object.assign(Cn.prototype,{type:function(){return Ur.MATERIAL8},setColor:function(t){this._multiplyColor.setData4(t),this.checkTransparent()},checkTransparent:function(){var t=this._multiplyColor.getData()[3];this._isTransparent=Math.abs(1-t)>_.EPSILON},apply:function(t,e){cn.prototype.apply.call(this,t,e),this._multiplyColor.apply(t,e)}});var mn=function(){pt.call(this),this._reference=null};(mn.prototype=Object.create(pt.prototype)).constructor=mn,Object.assign(mn.prototype,{setReference:function(t){this._reference=t},getReference:function(){return this._reference}}),mn.wind=mn.prototype.wind=K.SHELL;var vn=function(){mn.call(this)};(vn.prototype=Object.create(mn.prototype)).constructor=vn,Object.assign(vn.prototype,{update:function(){}});var yn=function(){mn.call(this)};(yn.prototype=Object.create(mn.prototype)).constructor=yn,Object.assign(yn.prototype,{update:function(){}});var En=function(t,e){yn.call(this),this._radius=.5,t&&(this._radius=t),this._center=J.new(),e&&J.copy(this._center,e),this.update()};(En.prototype=Object.create(yn.prototype)).constructor=En,Object.assign(En.prototype,{getCenter:function(){return this._center},getRadius:function(){return this._radius},setValue:function(t,e){J.copy(this._center,t),this._radius=e,this.update()},setCenter:function(t){J.copy(this._center,t),this.update()},setRadius:function(t){this._radius=t,this.update()},update:function(){it.fromTranslation(this._matrix,this._center),it.scaleValue(this._matrix,this._matrix,this._radius,this._radius,this._radius)}});var wn=function(t,e,i){yn.call(this),this._radius=.5,t&&(this._radius=t),this._start=J.create(0,0,0),e&&J.copy(this._start,e),this._end=J.create(0,0,1),i&&J.copy(this._end,i),this.update()};(wn.prototype=Object.create(yn.prototype)).constructor=wn,Object.assign(wn.prototype,{getStart:function(){return this._start},getEnd:function(){return this._end},getRadius:function(){return this._radius},setValue:function(t,e,i){J.copy(this._start,t),J.copy(this._end,e),this._radius=i,this.update()},setStart:function(t){J.copy(this._start,t),this.update()},setEnd:function(t){J.copy(this._end,t),this.update()},setRadius:function(t){this._radius=t,this.update()},update:function(){var t=J.MemoryPool.alloc(),e=J.MemoryPool.alloc();J.sub(t,this._end,this._start);var i=J.normalize(e,t);if(it.identity(this._matrix),0===i?(J.set(t,0,0,1),J.set(e,0,0,1)):it.scaleValue(this._matrix,this._matrix,this._radius,this._radius,i),Math.abs(Math.abs(e[2])-1)<_.EPSILON);else{var r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();J.set(r,0,0,1),J.cross(n,r,e);var o=J.angle(r,e),a=it.MemoryPool.alloc();it.fromRotation(a,o,n),it.multiply(this._matrix,a,this._matrix),it.MemoryPool.free(a),J.MemoryPool.free(r),J.MemoryPool.free(n)}it.setTranslation(this._matrix,this._start),J.MemoryPool.free(t),J.MemoryPool.free(e)}});var Mn=function(t,e,i){yn.call(this),this._radius=.5,t&&(this._radius=t),this._start=J.create(0,0,0),e&&J.copy(this._start,e),this._end=J.create(0,0,1),i&&J.copy(this._end,i),this.update()};(Mn.prototype=Object.create(yn.prototype)).constructor=Mn,Object.assign(Mn.prototype,{getStart:function(){return this._start},getEnd:function(){return this._end},getRadius:function(){return this._radius},setValue:function(t,e,i){J.copy(this._start,t),J.copy(this._end,e),this._radius=i,this.update()},setStart:function(t){J.copy(this._start,t),this.update()},setEnd:function(t){J.copy(this._end,t),this.update()},setRadius:function(t){this._radius=t,this.update()},update:function(){var t=J.MemoryPool.alloc(),e=J.MemoryPool.alloc();J.sub(t,this._end,this._start);var i=J.normalize(e,t);if(it.identity(this._matrix),0===i?(J.set(t,0,0,1),J.set(e,0,0,1)):it.scaleValue(this._matrix,this._matrix,this._radius,this._radius,i),Math.abs(Math.abs(e[2])-1)<_.EPSILON);else{var r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();J.set(r,0,0,1),J.cross(n,r,e);var o=J.angle(r,e),a=it.MemoryPool.alloc();it.fromRotation(a,o,n),it.multiply(this._matrix,a,this._matrix),it.MemoryPool.free(a),J.MemoryPool.free(r),J.MemoryPool.free(n)}it.setTranslation(this._matrix,this._start),J.MemoryPool.free(t),J.MemoryPool.free(e)}});var Tn=function t(){pt.call(this),this._position=J.new(),this._scale=J.create(1,1,1),this._mode=t.ROTATE_NO,this._autoScaleToScreen=!1};Tn.ROTATE_NO=0,Tn.ROTATE_TO_SCREEN=1,Tn.ROTATE_TO_CAMERA=2,(Tn.prototype=Object.create(pt.prototype)).constructor=Tn,Object.assign(Tn.prototype,{setPosition:function(t){J.copy(this._position,t)},setScale:function(t){J.copy(this._scale,t)},isAutoScaleToScreen:function(t){return void 0!==t&&(this._autoScaleToScreen=t),this._autoScaleToScreen},setMode:function(t){this._mode=t},update:function(t){if(this._mode===Tn.ROTATE_TO_SCREEN){var e=J.MemoryPool.alloc(),i=J.MemoryPool.alloc();J.sub(e,t.getCenter(),t.getEye()),J.set(i,0,0,0),it.fromLookAt(this._matrix,i,e,t.getUp()),it.invert(this._matrix,this._matrix),J.MemoryPool.free(e),J.MemoryPool.free(i)}else if(this._mode===Tn.ROTATE_TO_CAMERA){var r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();J.sub(r,this._position,t.getEye()),J.set(n,0,0,0),it.fromLookAt(this._matrix,n,r,t.getUp()),it.invert(this._matrix,this._matrix),J.MemoryPool.free(r),J.MemoryPool.free(n)}else it.identity(this._matrix);var o=this._scale[0],a=this._scale[1],s=this._scale[2];if(this._autoScaleToScreen){var h=t.computePixelLength(this._position);h&&(o=h*this._scale[0],a=h*this._scale[1],s=h*this._scale[2])}this._matrix[0]*=o,this._matrix[1]*=o,this._matrix[2]*=o,this._matrix[4]*=a,this._matrix[5]*=a,this._matrix[6]*=a,this._matrix[8]*=s,this._matrix[9]*=s,this._matrix[10]*=s,it.setTranslation(this._matrix,this._position)}}),Tn.wind=Tn.prototype.wind=K.BILLBOARD;var Pn=Tn,Sn=function(t){xt.call(this),this._modunit=t,this._currentSceneUnit=null,this._currentReference=null,this._glcontext=null};(Sn.prototype=Object.create(xt.prototype)).constructor=Sn,Object.assign(Sn.prototype,{handle:function(){var t=this._modunit;if(t){t._drawables.length=0,this._currentSceneUnit=t,this._glcontext=t.getGLContext();var e=t._sceneRoot,i=it.new();it.mul(i,i,e._matrix),this.pushMatrix(i),this.traverse(e),this.popMatrix()}},applyGeometry:function(t){var e=this._currentSceneUnit,i=new Ir;i._transform=this.getCurrentMatrix(),i._reference=this._currentReference,i._geometry=t;var r=t.getID(),n=e._glreleasables[r];n?n.update():(n=Br.create(t,this._glcontext),e._glreleasables[r]=n),i._glgeometry=n;var o=this.getCurrentMaterial();if(i._material=o,o){r=o.getID();var a=e._glreleasables[r];a?o._type===Pt.MATERIAL1?a.setColor(o._pureColor):o._type===Pt.MATERIAL2?(a.setImage(o._textureImage),a.setColor(o._genericColor,o._multiplyColor)):o._type===Pt.MATERIAL3?a.setImage(o._textureImage):o._type===Pt.MATERIAL4?(a.setDiscardAlpha(o._discardAlpha),a.setImage(o._textureImage)):o._type===Pt.MATERIAL6?(a.setDiscardAlpha(o._discardAlpha),a.setImage(o._textureImage,!1)):o._type===Pt.MATERIAL8?(a.setImage(o._textureImage),a.setColor(o._multiplyColor)):console.log("undefined material type"):(o._type===Pt.MATERIAL1?a=new un(o._pureColor):o._type===Pt.MATERIAL2?((a=new ln(this._glcontext)).setImage(o._textureImage,this._glcontext),a.setColor(o._genericColor,o._multiplyColor)):o._type===Pt.MATERIAL3?(a=new gn(this._glcontext)).setImage(o._textureImage,this._glcontext):o._type===Pt.MATERIAL4?(a=new _n(this._glcontext,o._discardAlpha)).setImage(o._textureImage,this._glcontext):o._type===Pt.MATERIAL6?(a=new In(this._glcontext,o._discardAlpha)).setImage(o._textureImage,!1):o._type===Pt.MATERIAL8?((a=new Cn(this._glcontext)).setImage(o._textureImage,this._glcontext),a.setColor(o._multiplyColor)):console.log("undefined material type"),e._glreleasables[r]=a),i._glmaterial=a}e._drawables.push(i)}}),xt.prototype[Mt.wind]=function(t){this[gt.wind](t)},xt.prototype[Pn.wind]=function(t){t.update(this._modunit.getCamera()),this[pt.wind](t)},xt.prototype[mn.wind]=function(t){this._currentReference=t,this[pt.wind](t),this._currentReference=null};var Rn=Sn,On={};On.VERTEX1=["attribute vec4 Point;","uniform mat4 worldViewProjectionMatrix;","void main(){","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX2=["attribute vec4 Point;","attribute vec2 Texture;","uniform mat4 worldViewProjectionMatrix;","varying vec2 passTexture;","void main(){","   passTexture = Texture;","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX3=["attribute vec4 Point;","attribute vec4 Normal;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform vec4 PureColor;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","varying vec4 passColor;","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   passColor = vec4(PureColor.rgb * (AmbientRatio + DirectionLightRatio * DiffuseRatio), PureColor.a);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX4=["attribute vec4 Point;","attribute vec4 Normal;","attribute vec2 Texture;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","varying vec4 passColor;","varying vec2 passTexture;","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   float value = AmbientRatio + DirectionLightRatio * DiffuseRatio;","   passColor = vec4(value, value, value, 1);","   passTexture = Texture;","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX5=["attribute vec4 Point;","attribute vec4 Normal;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform mat4 worldMatrix;","uniform vec4 PureColor;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","uniform vec4 frontClipPlane;","uniform vec4 backClipPlane;","uniform vec4 topClipPlane;","uniform vec4 bottomClipPlane;","uniform vec4 leftClipPlane;","uniform vec4 rightClipPlane;","uniform int useFrontClipPlane;","uniform int useBackClipPlane;","uniform int useTopClipPlane;","uniform int useBottomClipPlane;","uniform int useLeftClipPlane;","uniform int useRightClipPlane;","varying vec4 passColor;","varying float clipDistance[6];","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   passColor = vec4(PureColor.rgb * (AmbientRatio + DirectionLightRatio * DiffuseRatio), PureColor.a);","\tvec4 pos = worldMatrix * Point;","\tclipDistance[0] = dot(pos, frontClipPlane) * float(useFrontClipPlane);","\tclipDistance[1] = dot(pos, backClipPlane) * float(useBackClipPlane);","\tclipDistance[2] = dot(pos, topClipPlane) * float(useTopClipPlane);","\tclipDistance[3] = dot(pos, bottomClipPlane) * float(useBottomClipPlane);","\tclipDistance[4] = dot(pos, leftClipPlane) * float(useLeftClipPlane);","\tclipDistance[5] = dot(pos, rightClipPlane) * float(useRightClipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX6=["attribute vec4 Point;","attribute vec4 Normal;","attribute vec2 Texture;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform mat4 worldMatrix;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","uniform vec4 frontClipPlane;","uniform vec4 backClipPlane;","uniform vec4 topClipPlane;","uniform vec4 bottomClipPlane;","uniform vec4 leftClipPlane;","uniform vec4 rightClipPlane;","uniform int useFrontClipPlane;","uniform int useBackClipPlane;","uniform int useTopClipPlane;","uniform int useBottomClipPlane;","uniform int useLeftClipPlane;","uniform int useRightClipPlane;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance[6];","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   float value = AmbientRatio + DirectionLightRatio * DiffuseRatio;","   passColor = vec4(value, value, value, 1);","   passTexture = Texture;","\tvec4 pos = worldMatrix * Point;","\tclipDistance[0] = dot(pos, frontClipPlane) * float(useFrontClipPlane);","\tclipDistance[1] = dot(pos, backClipPlane) * float(useBackClipPlane);","\tclipDistance[2] = dot(pos, topClipPlane) * float(useTopClipPlane);","\tclipDistance[3] = dot(pos, bottomClipPlane) * float(useBottomClipPlane);","\tclipDistance[4] = dot(pos, leftClipPlane) * float(useLeftClipPlane);","\tclipDistance[5] = dot(pos, rightClipPlane) * float(useRightClipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.VERTEX7=["attribute vec4 Point;","uniform mat4 worldViewProjectionMatrix;","varying vec4 passPoint;","void main(){","   gl_Position = worldViewProjectionMatrix * Point;","   passPoint = gl_Position;","}"].join("\n"),On.VERTEX8=["attribute vec4 Point;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 worldMatrix;","uniform vec4 frontClipPlane;","uniform vec4 backClipPlane;","uniform vec4 topClipPlane;","uniform vec4 bottomClipPlane;","uniform vec4 leftClipPlane;","uniform vec4 rightClipPlane;","uniform int useFrontClipPlane;","uniform int useBackClipPlane;","uniform int useTopClipPlane;","uniform int useBottomClipPlane;","uniform int useLeftClipPlane;","uniform int useRightClipPlane;","varying vec4 passColor;","varying float clipDistance[6];","void main(){","\tvec4 pos = worldMatrix * Point;","\tclipDistance[0] = dot(pos, frontClipPlane) * float(useFrontClipPlane);","\tclipDistance[1] = dot(pos, backClipPlane) * float(useBackClipPlane);","\tclipDistance[2] = dot(pos, topClipPlane) * float(useTopClipPlane);","\tclipDistance[3] = dot(pos, bottomClipPlane) * float(useBottomClipPlane);","\tclipDistance[4] = dot(pos, leftClipPlane) * float(useLeftClipPlane);","\tclipDistance[5] = dot(pos, rightClipPlane) * float(useRightClipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.ShadowMap=On.VERTEX1,On.ColorShadow=["const vec3 fillLightDirection = vec3( 0.0, 0.0, 1.0 );","const float specularPower = 64.0;","const float specularIntensity = 0.5;","attribute vec4 Point;","attribute vec3 Normal;","uniform mat4 worldMatrix;","uniform mat4 viewMatrix;","uniform mat3 NormalMatrix;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 shadowMatrix;","uniform vec3 mainLightDirection;","varying float mainLightDiffuse;","varying float mainLightSpecular;","varying float fillLightDiffuse;","varying vec3 shadowCoord;","void main() ","{ ","   mat4 matWV = viewMatrix * worldMatrix;","\tvec3 norWV = (matWV * vec4(Normal.xyz, 0.0)).xyz;","   norWV = normalize(norWV);","\tvec3 posWV = (matWV * Point).xyz;","   vec3 mainLtDirInView = ( viewMatrix * vec4( mainLightDirection, 0.0) ).xyz;","   mainLtDirInView = normalize(mainLtDirInView);","\tfillLightDiffuse = abs(dot(norWV, -fillLightDirection));","\tmainLightDiffuse = abs(dot(norWV, -mainLtDirInView));","\tvec3 toEye = normalize(-posWV);","\tvec3 ref = reflect(mainLtDirInView, norWV);","\tmainLightSpecular = pow(max(dot(ref, toEye), 0.0), specularPower) * specularIntensity;","\tvec4 posLightProj =  shadowMatrix * worldMatrix * Point;","\tshadowCoord = posLightProj.xyz / posLightProj.w * 0.5 + vec3(0.5, 0.5, 0.5);","\tgl_Position = worldViewProjectionMatrix * Point;","} "].join("\n"),On.TexturedShadow=["const vec3 fillLightDirection = vec3( 0.0, 0.0, 1.0 );","const float specularPower = 64.0;","const float specularIntensity = 0.5;","attribute vec4 Point;","attribute vec3 Normal;","attribute vec2 Texture;","uniform mat4 worldMatrix;","uniform mat4 viewMatrix;","uniform mat3 NormalMatrix;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 shadowMatrix;","uniform vec3 mainLightDirection;","varying vec2 passTexture;","varying float mainLightDiffuse;","varying float mainLightSpecular;","varying float fillLightDiffuse;","varying vec3 shadowCoord;","void main() ","{ ","   mat4 matWV = viewMatrix * worldMatrix;","\tvec3 norWV = (matWV * vec4(Normal.xyz, 0.0)).xyz;","   norWV = normalize(norWV);","\tvec3 posWV = (matWV * Point).xyz;","   vec3 mainLtDirInView = ( viewMatrix * vec4( mainLightDirection, 0.0) ).xyz;","   mainLtDirInView = normalize(mainLtDirInView);","\tfillLightDiffuse = abs(dot(norWV, -fillLightDirection));","\tmainLightDiffuse = abs(dot(norWV, -mainLtDirInView));","\tvec3 toEye = normalize(-posWV);","\tvec3 ref = reflect(mainLtDirInView, norWV);","\tmainLightSpecular = pow(max(dot(ref, toEye), 0.0), specularPower) * specularIntensity;","\tvec4 posLightProj =  shadowMatrix * worldMatrix * Point;","\tshadowCoord = posLightProj.xyz / posLightProj.w * 0.5 + vec3(0.5, 0.5, 0.5);","   passTexture = Texture;","\tgl_Position = worldViewProjectionMatrix * Point;","} "].join("\n"),On.Color_NoLT_PlaneClip=["attribute vec4 Point;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 worldMatrix;","uniform vec4 clipPlane;","varying vec4 passColor;","varying float clipDistance;","void main(){","\tvec4 pos = worldMatrix * Point;","\tclipDistance = dot(pos, clipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.Color_PlaneClip=["attribute vec4 Point;","attribute vec4 Normal;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform mat4 worldMatrix;","uniform vec4 PureColor;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","uniform vec4 clipPlane;","varying vec4 passColor;","varying float clipDistance;","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   passColor = vec4(PureColor.rgb * (AmbientRatio + DirectionLightRatio * DiffuseRatio), PureColor.a);","\tvec4 pos = worldMatrix * Point;","\tclipDistance = dot(pos, clipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.Texture_PlaneClip=["attribute vec4 Point;","attribute vec4 Normal;","attribute vec2 Texture;","uniform mat4 worldViewProjectionMatrix;","uniform mat4 NormalMatrix;","uniform mat4 worldMatrix;","uniform vec4 LightDirection;","uniform float AmbientRatio;","uniform float DiffuseRatio;","uniform vec4 clipPlane;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance;","void main(){","   vec4 N = normalize(NormalMatrix * Normal);","   float LdotN = dot(N, LightDirection);","   float DirectionLightRatio = abs(LdotN);","   float value = AmbientRatio + DirectionLightRatio * DiffuseRatio;","   passColor = vec4(value, value, value, 1);","   passTexture = Texture;","\tvec4 pos = worldMatrix * Point;","\tclipDistance = dot(pos, clipPlane);","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.MATERIAL0LIGHTING0FUNCTION0=On.VERTEX1,On.MATERIAL1LIGHTING0FUNCTION0=On.VERTEX1,On.MATERIAL1LIGHTING1FUNCTION0=On.VERTEX3,On.MATERIAL1LIGHTING1FUNCTION1=On.VERTEX5,On.MATERIAL5LIGHTING0FUNCTION0=On.VERTEX7,On.MATERIAL2LIGHTING0FUNCTION0=On.VERTEX2,On.MATERIAL2LIGHTING1FUNCTION0=On.VERTEX4,On.MATERIAL2LIGHTING1FUNCTION1=On.VERTEX6,On.MATERIAL4LIGHTING0FUNCTION0=On.VERTEX2,On.MATERIAL3LIGHTING0FUNCTION0=On.VERTEX2,On.MATERIAL3LIGHTING1FUNCTION0=On.VERTEX4,On.MATERIAL1LIGHTING0FUNCTION1=On.VERTEX8,On.MATERIAL6LIGHTING0FUNCTION0=On.VERTEX2,On.MATERIAL7LIGHTING0FUNCTION0=On.ShadowMap,On.MATERIAL1LIGHTING2FUNCTION0=On.ColorShadow,On.MATERIAL1LIGHTING2FUNCTION1=On.VERTEX5,On.MATERIAL2LIGHTING2FUNCTION0=On.TexturedShadow,On.MATERIAL2LIGHTING2FUNCTION1=On.VERTEX6,On.MATERIAL8LIGHTING0FUNCTION0=On.VERTEX2,On.MATERIAL1LIGHTING1FUNCTION2=On.Color_PlaneClip,On.MATERIAL1LIGHTING2FUNCTION2=On.Color_PlaneClip,On.MATERIAL2LIGHTING1FUNCTION2=On.Texture_PlaneClip,On.MATERIAL2LIGHTING2FUNCTION2=On.Texture_PlaneClip,On.MATERIAL1LIGHTING0FUNCTION2=On.Color_NoLT_PlaneClip,On.MATERIAL1LIGHTING1FUNCTION3=On.Color_PlaneClip,On.MATERIAL1LIGHTING2FUNCTION3=On.Color_PlaneClip,On.MATERIAL2LIGHTING1FUNCTION3=On.Texture_PlaneClip,On.MATERIAL2LIGHTING2FUNCTION3=On.Texture_PlaneClip,On.MATERIAL1LIGHTING0FUNCTION3=On.VERTEX8,On.MATERIAL1LIGHTING1FUNCTION4=On.VERTEX3,On.MATERIAL1LIGHTING2FUNCTION4=On.VERTEX3,On.MATERIAL2LIGHTING1FUNCTION4=On.VERTEX4,On.MATERIAL2LIGHTING2FUNCTION4=On.VERTEX4,On.MATERIAL1LIGHTING0FUNCTION4=On.VERTEX1,On.MODEL_VERTEX2_TEST=["attribute vec4 Point;","attribute vec4 matCol1;","attribute vec4 matCol2;","attribute vec4 matCol3;","attribute vec4 matCol4;","uniform mat4 worldViewProjectionMatrix;","void main(){","   gl_Position = worldViewProjectionMatrix * Point;","}"].join("\n"),On.DEFAULT=["attribute vec4 Point;","void main(){","   gl_Position = Point;","}"].join("\n"),On.TEXTURE_VERTEX=["attribute vec4 Point;","attribute vec2 Texture;","varying vec2 passTexture;","void main(){","   passTexture = Texture;","   gl_Position = Point;","}"].join("\n");var Ln=On,Nn={};Nn.FRAGMENT0=["precision mediump float;","void main()","{","   gl_FragColor = vec4(0.7, 0.7, 0.7, 1.0);","}"].join("\n"),Nn.FRAGMENT1=["precision mediump float;","uniform vec4 PureColor;","void main()","{","   gl_FragColor = PureColor;","}"].join("\n"),Nn.FRAGMENT2=["precision mediump float;","uniform sampler2D MainTexture;","varying vec2 passTexture;","void main()","{","   gl_FragColor = texture2D(MainTexture, passTexture);","}"].join("\n"),Nn.FRAGMENT3=["precision mediump float;","varying vec4 passColor;","void main()","{","   gl_FragColor = passColor;","}"].join("\n"),Nn.FRAGMENT4=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","varying vec4 passColor;","varying vec2 passTexture;","void main()","{","   vec4 tc = texture2D(MainTexture, passTexture);","   gl_FragColor = vec4(tc.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), tc.a);","   gl_FragColor *= MultiplyColor * passColor;","}"].join("\n"),Nn.FRAGMENT5=["precision mediump float;","varying vec4 passColor;","varying float clipDistance[6];","void main()","{","\tif( clipDistance[0] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[1] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[2] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[3] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[4] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[5] < 0.0) ","\t\tdiscard; ","   gl_FragColor = passColor;","}"].join("\n"),Nn.FRAGMENT6=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance[6];","void main()","{","\tif( clipDistance[0] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[1] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[2] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[3] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[4] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[5] < 0.0) ","\t\tdiscard; ","   vec4 tc = texture2D(MainTexture, passTexture);","   gl_FragColor = vec4(tc.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), tc.a);","   gl_FragColor *= MultiplyColor * passColor;","}"].join("\n"),Nn.FRAGMENT7=["precision mediump float;","varying vec4 passPoint;","uniform vec4 TopColor;","uniform vec4 BottomColor;","void main()","{","   float f = (passPoint.y + 1.0) * 0.5;","   gl_FragColor = mix(BottomColor, TopColor, f);","}"].join("\n"),Nn.FRAGMENT8=["precision mediump float;","uniform sampler2D MainTexture;","uniform float DiscardAlpha;","varying vec2 passTexture;","void main()","{","   gl_FragColor = texture2D(MainTexture, passTexture);","   if(gl_FragColor.a < DiscardAlpha) discard;","}"].join("\n"),Nn.FRAGMENT9=["precision mediump float;","uniform sampler2D MainTexture;","varying vec2 passTexture;","void main()","{","   gl_FragColor = texture2D(MainTexture, passTexture);","}"].join("\n"),Nn.FRAGMENT10=["precision mediump float;","uniform sampler2D MainTexture;","varying vec4 passColor;","varying vec2 passTexture;","void main()","{","   gl_FragColor = texture2D(MainTexture, passTexture) * passColor;","}"].join("\n"),Nn.FRAGMENT11=["precision mediump float;","uniform vec4 PureColor;","varying float clipDistance[6];","void main()","{","\tif( clipDistance[0] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[1] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[2] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[3] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[4] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[5] < 0.0) ","\t\tdiscard; ","   gl_FragColor = PureColor;","}"].join("\n"),Nn.ShadowMap=["precision mediump float;","//vec4floatdepthcolorBuffer","//three.js packing.glsl.js","const float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)","const float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)","const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );","const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );","const float ShiftRight8 = 1. / 256.;","vec4 packFloatToVec4( const in float v ) {","    vec4 r = vec4( fract( v * PackFactors ), v );","    r.yzw -= r.xyz * ShiftRight8; // tidy overflow","    return r * PackUpscale;","}","float unpackVec4ToFloat( const in vec4 v ) {","\treturn dot( v, UnpackFactors );","}","void main(){","    gl_FragColor = packFloatToVec4(gl_FragCoord.z);","}"].join("\n"),Nn.ColorShadow=["precision mediump float;","const float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)","const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );","const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );","float unpackVec4ToFloat( const in vec4 v ) {","\treturn dot( v, UnpackFactors );","}","float computeShadow(const in sampler2D smp, const in vec3 coord){","    vec4 packedDepth = texture2D(smp, coord.xy);","    float shadowDepth = unpackVec4ToFloat(packedDepth);","    return shadowDepth >= coord.z ? 1.0 : 0.0;","}","uniform sampler2D shadowSampler;","uniform float ambientIntensity;","uniform vec4 PureColor;","uniform float pixelDistance;","uniform float mainLightIntensity;","uniform float fillLightIntensity;","uniform float shadowMapWidth;","uniform float shadowMapHeight;","varying float mainLightDiffuse;","varying float mainLightSpecular;","varying float fillLightDiffuse;","varying vec3 shadowCoord;","void main()","{ ","\tfloat shadowValue = 0.0;","\tif(mainLightDiffuse < 0.0001 )","\t{","\t\tshadowValue = 0.0;","\t}else{","\t    float bias = 0.0005 * tan(acos( abs(mainLightDiffuse) ));","\t    bias = clamp(bias, 0.00001, 0.01);","\t    float du = 1.0/shadowMapWidth;","\t    float dv = 1.0/shadowMapHeight;","       float u = shadowCoord.x;","       float v = shadowCoord.y;","       float z = shadowCoord.z - bias;","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v - dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v - dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v - dv, z) );","\t    shadowValue /= 9.0;","\t}","\tfloat difV = shadowValue * mainLightDiffuse * mainLightIntensity + (1.0 - shadowValue) * fillLightDiffuse * fillLightIntensity;","\tvec3 speColor = vec3(mainLightSpecular * mainLightIntensity);","\tgl_FragColor = vec4(PureColor.rgb * (ambientIntensity + difV) + speColor, PureColor.a);","}"].join("\n"),Nn.TexturedShadow=["precision mediump float;","const float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)","const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );","const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );","float unpackVec4ToFloat( const in vec4 v ) {","\treturn dot( v, UnpackFactors );","}","float computeShadow(const in sampler2D smp, const in vec3 coord){","    vec4 packedDepth = texture2D(smp, coord.xy);","    float shadowDepth = unpackVec4ToFloat(packedDepth);","    return shadowDepth >= coord.z ? 1.0 : 0.0;","}","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","uniform sampler2D shadowSampler;","uniform float ambientIntensity;","uniform vec4 PureColor;","uniform float pixelDistance;","uniform float mainLightIntensity;","uniform float fillLightIntensity;","uniform float shadowMapWidth;","uniform float shadowMapHeight;","varying vec2 passTexture;","varying float mainLightDiffuse;","varying float mainLightSpecular;","varying float fillLightDiffuse;","varying vec3 shadowCoord;","void main()","{ ","\tfloat shadowValue = 0.0;","\tif(mainLightDiffuse < 0.0001 )","\t{","\t\tshadowValue = 0.0;","\t}else{","\t    float bias = 0.0005 * tan(acos( abs(mainLightDiffuse) ));","\t    bias = clamp(bias, 0.00001, 0.01);","\t    float du = 1.0/shadowMapWidth;","\t    float dv = 1.0/shadowMapHeight;","       float u = shadowCoord.x;","       float v = shadowCoord.y;","       float z = shadowCoord.z - bias;","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v - 0., z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v - dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + 0., v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u + du, v - dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v + dv, z) );","\t    shadowValue +=  computeShadow( shadowSampler, vec3(u - du, v - dv, z) );","\t    shadowValue /= 9.0;","\t}","\tfloat difV = shadowValue * mainLightDiffuse * mainLightIntensity + (1.0 - shadowValue) * fillLightDiffuse * fillLightIntensity;","\tvec3 speColor = vec3(mainLightSpecular * mainLightIntensity);","   vec4 color = texture2D(MainTexture, passTexture);","   color = vec4(color.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), color.a);","   color *= MultiplyColor;","\tgl_FragColor = vec4(color.rgb * (ambientIntensity + difV) + speColor, color.a);","}"].join("\n"),Nn.TextureMutiplyColor=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 MultiplyColor;","varying vec2 passTexture;","void main()","{","   gl_FragColor = texture2D(MainTexture, passTexture) * MultiplyColor;","}"].join("\n"),Nn.Color_NoLT_PlaneClip=["precision mediump float;","uniform vec4 PureColor;","varying float clipDistance;","void main()","{","\tif( clipDistance < 0.0) ","\t\tdiscard; ","   gl_FragColor = PureColor;","}"].join("\n"),Nn.Color_PlaneClip=["precision mediump float;","varying vec4 passColor;","varying float clipDistance;","void main()","{","\tif( clipDistance < 0.0) ","\t\tdiscard; ","   gl_FragColor = passColor;","}"].join("\n"),Nn.Texture_PlaneClip=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance;","void main()","{","\tif( clipDistance < 0.0) ","\t\tdiscard; ","   vec4 tc = texture2D(MainTexture, passTexture);","   gl_FragColor = vec4(tc.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), tc.a);","   gl_FragColor *= MultiplyColor * passColor;","}"].join("\n"),Nn.Color_Tinting=["precision mediump float;","uniform vec4 regionColor;","varying vec4 passColor;","varying float clipDistance;","void main()","{","\tif( clipDistance < 0.0) ","\t\tgl_FragColor = regionColor;","   else","       gl_FragColor = passColor;","}"].join("\n"),Nn.Texture_Tinting=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","uniform vec4 regionColor;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance;","void main()","{","\tif( clipDistance < 0.0) ","\t\tgl_FragColor = regionColor;","   else","   {","       vec4 tc = texture2D(MainTexture, passTexture);","       gl_FragColor = vec4(tc.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), tc.a);","       gl_FragColor *= MultiplyColor * passColor;","   }","}"].join("\n"),Nn.Color_Transparent=["precision mediump float;","uniform float alpha;","varying vec4 passColor;","varying float clipDistance;","void main()","{","   gl_FragColor = passColor;","   gl_FragColor.a *= alpha;","}"].join("\n"),Nn.Texture_Transparent=["precision mediump float;","uniform sampler2D MainTexture;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","uniform float alpha;","varying vec4 passColor;","varying vec2 passTexture;","varying float clipDistance;","void main()","{","   vec4 tc = texture2D(MainTexture, passTexture);","   gl_FragColor = vec4(tc.rgb * GenericColor.a + GenericColor.rgb * (1.0 - GenericColor.a), tc.a);","   gl_FragColor *= MultiplyColor * passColor;","   gl_FragColor.a *= alpha;","}"].join("\n"),Nn.Color_NoLT_Transparent=["precision mediump float;","uniform vec4 PureColor;","uniform float alpha;","varying float clipDistance;","void main()","{","   gl_FragColor = PureColor;","   gl_FragColor.a *= alpha;","}"].join("\n"),Nn.MATERIAL0LIGHTING0FUNCTION0=Nn.FRAGMENT0,Nn.MATERIAL1LIGHTING0FUNCTION0=Nn.FRAGMENT1,Nn.MATERIAL1LIGHTING1FUNCTION0=Nn.FRAGMENT3,Nn.MATERIAL1LIGHTING1FUNCTION1=Nn.FRAGMENT5,Nn.MATERIAL5LIGHTING0FUNCTION0=Nn.FRAGMENT7,Nn.MATERIAL2LIGHTING0FUNCTION0=Nn.FRAGMENT2,Nn.MATERIAL2LIGHTING1FUNCTION0=Nn.FRAGMENT4,Nn.MATERIAL2LIGHTING1FUNCTION1=Nn.FRAGMENT6,Nn.MATERIAL4LIGHTING0FUNCTION0=Nn.FRAGMENT8,Nn.MATERIAL3LIGHTING0FUNCTION0=Nn.FRAGMENT9,Nn.MATERIAL3LIGHTING1FUNCTION0=Nn.FRAGMENT10,Nn.MATERIAL1LIGHTING0FUNCTION1=Nn.FRAGMENT11,Nn.MATERIAL6LIGHTING0FUNCTION0=Nn.FRAGMENT8,Nn.MATERIAL7LIGHTING0FUNCTION0=Nn.ShadowMap,Nn.MATERIAL1LIGHTING2FUNCTION0=Nn.ColorShadow,Nn.MATERIAL1LIGHTING2FUNCTION1=Nn.FRAGMENT5,Nn.MATERIAL2LIGHTING2FUNCTION0=Nn.TexturedShadow,Nn.MATERIAL2LIGHTING2FUNCTION1=Nn.FRAGMENT6,Nn.MATERIAL8LIGHTING0FUNCTION0=Nn.TextureMutiplyColor,Nn.MATERIAL1LIGHTING1FUNCTION2=Nn.Color_PlaneClip,Nn.MATERIAL1LIGHTING2FUNCTION2=Nn.Color_PlaneClip,Nn.MATERIAL2LIGHTING1FUNCTION2=Nn.Texture_PlaneClip,Nn.MATERIAL2LIGHTING2FUNCTION2=Nn.Texture_PlaneClip,Nn.MATERIAL1LIGHTING0FUNCTION2=Nn.Color_NoLT_PlaneClip,Nn.MATERIAL1LIGHTING1FUNCTION3=Nn.Color_Tinting,Nn.MATERIAL1LIGHTING2FUNCTION3=Nn.Color_Tinting,Nn.MATERIAL2LIGHTING1FUNCTION3=Nn.Texture_Tinting,Nn.MATERIAL2LIGHTING2FUNCTION3=Nn.Texture_Tinting,Nn.MATERIAL1LIGHTING0FUNCTION3=Nn.FRAGMENT1,Nn.MATERIAL1LIGHTING1FUNCTION4=Nn.Color_Transparent,Nn.MATERIAL1LIGHTING2FUNCTION4=Nn.Color_Transparent,Nn.MATERIAL2LIGHTING1FUNCTION4=Nn.Texture_Transparent,Nn.MATERIAL2LIGHTING2FUNCTION4=Nn.Texture_Transparent,Nn.MATERIAL1LIGHTING0FUNCTION4=Nn.Color_NoLT_Transparent,Nn.TEXTURE3_LAMBERT_SECTION_FRAGMENT=["precision mediump float;","uniform vec4 GenericColor;","uniform vec4 MultiplyColor;","varying vec4 passColor;","varying float clipDistance[6];","void main()","{","\tif( clipDistance[0] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[1] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[2] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[3] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[4] < 0.0) ","\t\tdiscard; ","\tif( clipDistance[5] < 0.0) ","\t\tdiscard; ","   gl_FragColor = GenericColor;","   gl_FragColor *= MultiplyColor * passColor;","}"].join("\n");var bn=Nn,Dn=function(t,e,i){vr.call(this,t),this._id=this._glcontext.gl().createShader(e),this._type=e,this._source=null,i&&this.setSource(i)};(Dn.prototype=Object.create(vr.prototype)).constructor=Dn,Object.assign(Dn.prototype,{setSource:function(t){this._source=t;var e=this._glcontext.gl();e.shaderSource(this._id,this._source),e.compileShader(this._id),e.getShaderParameter(this._id,_e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(this._id))},getSource:function(){return this._source},getType:function(){return this._type},release:function(){this._id&&(this._glcontext.gl().deleteShader(this._id),this._id=null)}}),Dn.wind=Dn.prototype.wind=K.GLSHADER;var xn=Dn,Bn=function(t,e,i){vr.call(this,t),this._id=this._glcontext.gl().createProgram(),this._uniformCaches=new Map,this._attributeCaches=[],this._vshader=null,this._fshader=null,e&&this.setVertexSource(e),i&&this.setFragmentSource(i)};(Bn.prototype=Object.create(vr.prototype)).constructor=Bn,Object.assign(Bn.prototype,{getUniformLocation:function(t){return this._uniformCaches.get(t)},isUniformValid:function(t){return!!this._uniformCaches.get(t)},cacheUniforms:function(t){var e=t.match(/uniform\s+\w+\s+\w+((\s)?\[(.*?)\])?/g);if(null!==e)for(var i=0,r=e.length;i<r;i++){var n=e[i].match(/uniform\s+\w+\s+(\w+)(\s?\[.*?\])?/)[1],o=this._glcontext.gl().getUniformLocation(this._id,n);null!==o&&this._uniformCaches.set(n,o)}},cacheAttributes:function(t){this._attributeCaches.length=0;var e=t.match(/attribute\s+\w+\s+\w+/g);if(null!==e)for(var i=0,r=e.length;i<r;i++){var n=e[i].match(/attribute\s+\w+\s+(\w+)/)[1],o=le.fromString(n);this._glcontext.gl().bindAttribLocation(this._id,o,n),this._attributeCaches[o]=n}},setVertexSource:function(t){null===this._vshader?this._vshader=new xn(this._glcontext,_e.VERTEX_SHADER,t):this._vshader.setSource(t),this.cacheAttributes(t),this.link()},setFragmentSource:function(t){null===this._fshader?this._fshader=new xn(this._glcontext,_e.FRAGMENT_SHADER,t):this._fshader.setSource(t),this.link()},getVertexSource:function(){return this._vshader.getSource()},getFragmentSource:function(){return this._fshader.getSource()},link:function(){if(null===this._vshader||null===this._fshader)return!1;var t=this._glcontext.gl();return t.attachShader(this._id,this._vshader.id()),t.attachShader(this._id,this._fshader.id()),t.linkProgram(this._id),this._glcontext.gl().getProgramParameter(this._id,t.LINK_STATUS)?(this._uniformCaches.clear(),this.cacheUniforms(this._vshader.getSource()),this.cacheUniforms(this._fshader.getSource()),!0):(console.log(t.getProgramInfoLog(this._id)),!1)},apply:function(){this._glcontext.gl().useProgram(this._id)},release:function(){this._id&&(this._vshader.release(),this._fshader.release(),this._glcontext.gl().deleteProgram(this._id),this._id=null)}}),Bn.wind=Bn.prototype.wind=K.GLPROGRAM;var Gn=Bn,Fn=function(){jr.call(this)};(Fn.prototype=Object.create(jr.prototype)).constructor=Fn,Object.assign(Fn.prototype,{});var Vn=function(){Fn.call(this)};(Vn.prototype=Object.create(Fn.prototype)).constructor=Vn,Object.assign(Vn.prototype,{type:function(){return Ur.LIGHTING0}});var kn=function(t,e,i){Fn.call(this),this._direction=nn.createFloat4("LightDirection"),t&&this.setDirection(t),this._ambientRatio=nn.createFloat("AmbientRatio"),e&&this.setAmbientRatio(e),this._diffuseRatio=nn.createFloat("DiffuseRatio"),i&&this.setDiffuseRatio(i)};(kn.prototype=Object.create(Fn.prototype)).constructor=kn,Object.assign(kn.prototype,{type:function(){return Ur.LIGHTING1},setDirection:function(t){this._direction.setData4(t)},setAmbientRatio:function(t){this._ambientRatio.setData(t)},setDiffuseRatio:function(t){this._diffuseRatio.setData(t)},apply:function(t,e){this._direction.apply(t,e),this._ambientRatio.apply(t,e),this._diffuseRatio.apply(t,e)}});var Un=function(t,e,i,r,n,o){Fn.call(this),this._mainLightDirection=nn.createFloat3("mainLightDirection"),t&&this.setMainLightDirection(t),this._mainLightIntensity=nn.createFloat("mainLightIntensity"),e&&this.setMainLightIntensity(e),this._fillLightIntensity=nn.createFloat("fillLightIntensity"),i&&this.setFillLightIntensity(i),this._ambientIntensity=nn.createFloat("ambientIntensity"),r&&this.setAmbientIntensity(r),this._shadowSampler=nn.createInt("shadowSampler"),this._shadowMapWidth=nn.createFloat("shadowMapWidth"),this._shadowMapHeight=nn.createFloat("shadowMapHeight"),n&&this.setShadowMap(n),this._shadowMatrix=nn.createMatrix4("shadowMatrix"),o&&this.setShadowMatrix(o)};(Un.prototype=Object.create(Fn.prototype)).constructor=Un,Object.assign(Un.prototype,{type:function(){return Ur.LIGHTING2},setMainLightDirection:function(t){this._mainLightDirection.setData4(t)},setMainLightIntensity:function(t){this._mainLightIntensity.setData(t)},setFillLightIntensity:function(t){this._fillLightIntensity.setData(t)},setAmbientIntensity:function(t){this._ambientIntensity.setData(t)},setShadowMap:function(t){this._shadowMap=t,this._shadowMapWidth.setData(t.getWidth()),this._shadowMapHeight.setData(t.getHeight())},setShadowMatrix:function(t){this._shadowMatrix.setData16(t)},apply:function(t,e){kn.prototype.apply.call(this,t,e);var i=t.gl();this._mainLightDirection.apply(t,e),this._mainLightIntensity.apply(t,e),this._fillLightIntensity.apply(t,e),this._ambientIntensity.apply(t,e),i.activeTexture(i.TEXTURE1),this._shadowMap.apply(),this._shadowMapWidth.apply(t,e),this._shadowMapHeight.apply(t,e),this._shadowSampler.setData(1),this._shadowSampler.apply(t,e),this._shadowMatrix.apply(t,e)}});var Hn=function(t,e,i,r){ki.call(this),this._srcFactor=_e.DISABLE,this._dstFactor=_e.DISABLE,this._srcAlpha=_e.DISABLE,this._dstAlpha=_e.DISABLE,this._constantColor=void 0,this._separate=!1,void 0!==t&&this.setSourceFactor(t),void 0!==e&&this.setDestinationFactor(e),void 0!==i&&this.setSourceAlpha(t),void 0!==r&&this.setDestinationAlpha(r)};(Hn.prototype=Object.create(ki.prototype)).constructor=Hn,Object.assign(Hn.prototype,{type:function(){return Fi.BlendFunc},setSource:function(t){this.setSourceFactor(t),this.setSourceAlpha(t)},setDestination:function(t){this.setDestinationFactor(t),this.setDestinationAlpha(t)},setSourceFactor:function(t){this._srcFactor=t},getSourceFactor:function(){return this._srcFactor},setSourceAlpha:function(t){this._srcAlpha=t,this.checkSeparate()},getSourceAlpha:function(){return this._srcAlpha},setDestinationFactor:function(t){this._dstFactor=t},getDestinationFactor:function(){return this._dstFactor},setDestinationAlpha:function(t){this._dstAlpha=t,this.checkSeparate()},getDestinationAlpha:function(){return this._dstAlpha},getSeparate:function(){return this._separate},setConstantColor:function(t){this._constantColor=t},checkSeparate:function(){},apply:function(t){var e=t.gl();this._srcFactor===_e.DISABLE||this._dstFactor===_e.DISABLE?e.disable(_e.BLEND):(e.enable(_e.BLEND),e.blendFunc(this._srcFactor,this._dstFactor),this._constantColor&&e.blendColor(this._constantColor[0],this._constantColor[1],this._constantColor[2],this._constantColor[3]))}}),Hn.wind=Hn.prototype.wind=K.GLBLENDFUNC;var jn=Hn,Yn=function(){jr.call(this)};(Yn.prototype=Object.create(jr.prototype)).constructor=Yn,Object.assign(Yn.prototype,{isTransparent:function(){return!1}});var zn=function(){Yn.call(this)};(zn.prototype=Object.create(Yn.prototype)).constructor=zn,Object.assign(zn.prototype,{type:function(){return Ur.FUNCTION0}});var Wn=function(){Yn.call(this),this._frontClipPlane=nn.createFloat4("frontClipPlane"),this._frontClipPlane.setData4([0,1,0,.5]),this._backClipPlane=nn.createFloat4("backClipPlane"),this._backClipPlane.setData4([0,-1,0,.5]),this._topClipPlane=nn.createFloat4("topClipPlane"),this._topClipPlane.setData4([0,0,-1,.5]),this._bottomClipPlane=nn.createFloat4("bottomClipPlane"),this._bottomClipPlane.setData4([0,0,1,.5]),this._leftClipPlane=nn.createFloat4("leftClipPlane"),this._leftClipPlane.setData4([1,0,0,.5]),this._rightClipPlane=nn.createFloat4("rightClipPlane"),this._rightClipPlane.setData4([-1,0,0,.5]),this._useFrontClipPlane=nn.createInt("useFrontClipPlane"),this._useFrontClipPlane.setData(1),this._useBackClipPlane=nn.createInt("useBackClipPlane"),this._useBackClipPlane.setData(1),this._useTopClipPlane=nn.createInt("useTopClipPlane"),this._useTopClipPlane.setData(1),this._useBottomClipPlane=nn.createInt("useBottomClipPlane"),this._useBottomClipPlane.setData(1),this._useLeftClipPlane=nn.createInt("useLeftClipPlane"),this._useLeftClipPlane.setData(1),this._useRightClipPlane=nn.createInt("useRightClipPlane"),this._useRightClipPlane.setData(1)};(Wn.prototype=Object.create(Yn.prototype)).constructor=Wn,Object.assign(Wn.prototype,{type:function(){return Ur.FUNCTION1},getClipPlanes:function(t){t.push(nt.copy(nt.new(),this._frontClipPlane.getData())),t.push(nt.copy(nt.new(),this._backClipPlane.getData())),t.push(nt.copy(nt.new(),this._topClipPlane.getData())),t.push(nt.copy(nt.new(),this._bottomClipPlane.getData())),t.push(nt.copy(nt.new(),this._leftClipPlane.getData())),t.push(nt.copy(nt.new(),this._rightClipPlane.getData()))},getClipPlane:function(t){switch(t){case zi.FRONT:return this._frontClipPlane.getData();case zi.BACK:return this._backClipPlane.getData();case zi.TOP:return this._topClipPlane.getData();case zi.BOTTOM:return this._bottomClipPlane.getData();case zi.LEFT:return this._leftClipPlane.getData();case zi.RIGHT:return this._rightClipPlane.getData()}},getOppositeClipPlane:function(t){switch(t){case zi.FRONT:return this._backClipPlane.getData();case zi.BACK:return this._frontClipPlane.getData();case zi.TOP:return this._bottomClipPlane.getData();case zi.BOTTOM:return this._topClipPlane.getData();case zi.LEFT:return this._rightClipPlane.getData();case zi.RIGHT:return this._leftClipPlane.getData()}},resetClipPlane:function(){w.set(this._frontClipPlane.getData(),0,1,0,.5),w.set(this._backClipPlane.getData(),0,-1,0,.5),w.set(this._topClipPlane.getData(),0,0,-1,.5),w.set(this._bottomClipPlane.getData(),0,0,1,.5),w.set(this._leftClipPlane.getData(),1,0,0,.5),w.set(this._rightClipPlane.getData(),-1,0,0,.5)},transformClipPlane:function(t){var e=it.MemoryPool.alloc();it.invert(e,t),nt.transformMat4(this._frontClipPlane.getData(),e),nt.transformMat4(this._backClipPlane.getData(),e),nt.transformMat4(this._topClipPlane.getData(),e),nt.transformMat4(this._bottomClipPlane.getData(),e),nt.transformMat4(this._leftClipPlane.getData(),e),nt.transformMat4(this._rightClipPlane.getData(),e),it.MemoryPool.free(e)},apply:function(t,e){this._frontClipPlane.apply(t,e),this._backClipPlane.apply(t,e),this._topClipPlane.apply(t,e),this._bottomClipPlane.apply(t,e),this._leftClipPlane.apply(t,e),this._rightClipPlane.apply(t,e),this._useFrontClipPlane.apply(t,e),this._useBackClipPlane.apply(t,e),this._useTopClipPlane.apply(t,e),this._useBottomClipPlane.apply(t,e),this._useLeftClipPlane.apply(t,e),this._useRightClipPlane.apply(t,e)}});var Xn=function(){Yn.call(this),this._clipPlane=nn.createFloat4("clipPlane"),this._clipPlane.setData4([0,0,1,0])};(Xn.prototype=Object.create(Yn.prototype)).constructor=Xn,Object.assign(Xn.prototype,{type:function(){return Ur.FUNCTION2},getClipPlane:function(){return this._clipPlane.getData()},setClipPlane:function(t){w.copy(this._clipPlane.getData(),t)},apply:function(t,e){this._clipPlane.apply(t,e)}});var Jn=function(){Yn.call(this),this._clipPlane=nn.createFloat4("clipPlane"),this._clipPlane.setData4([0,0,1,0]),this._regionColor=nn.createFloat4("regionColor"),this._regionColor.setData4([1,1,1,1])};(Jn.prototype=Object.create(Yn.prototype)).constructor=Jn,Object.assign(Jn.prototype,{type:function(){return Ur.FUNCTION3},getClipPlane:function(){return this._clipPlane.getData()},setClipPlane:function(t){w.copy(this._clipPlane.getData(),t)},getRegionColor:function(){return this._regionColor.getData()},setRegionColor:function(t){w.copy(this._regionColor.getData(),t)},apply:function(t,e){this._clipPlane.apply(t,e),this._regionColor.apply(t,e)}});var qn=function(){Yn.call(this),this._alpha=nn.createFloat("alpha")};(qn.prototype=Object.create(Yn.prototype)).constructor=qn,qn.blendState=new jn(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA),Object.assign(qn.prototype,{type:function(){return Ur.FUNCTION4},isTransparent:function(){return this._alpha.getData()[0]<.95},setAlpha:function(t){this._alpha.setData(t)},apply:function(t,e){this._alpha.apply(t,e),this.isTransparent()&&qn.blendState.apply(t,e)}});var Zn={UNKNOWN:0,CURVE2D_LINE:20,CURVE2D_ARC:21,CURVE2D_RECT:22,CURVE2D_CIRCLE:23,PROFILE_CIRCLE:60,PROFILE_ELLIPSE:61,PROFILE_RECTANGLE:62,CURVE_LINE:100,CURVE_ARC:101,CURVE_POLYLOOP:102,CURVE_CYLINDRICALHELIX:103,CURVE_ELLIPSE:104,CURVE_HERMITESPLINE:105,CURVE_NURBSPLINE:106,FACE_PLANAR:150,FACE_CYLINDRICAL:151,FACE_CONICAL:152,FACE_REVOLVED:153,FACE_HERMITE:154,FACE_RULED:155,SOLID_EXTRUDEDAREA:200,SOLID_SCANNINGAREA:201,SOLID_REVLOVEDAREA:202,SOLID_CUBE:250,SOLID_CONE:251,SOLID_CYLINDER:252,SOLID_PYRAMID:253,SOLID_SHPERE:254};Object.freeze(Zn);var Kn=Zn,Qn=function(t,e){bt.call(this),this._center=J.new(),t&&J.copy(this._center,t),this._radius=.5,e&&(this._radius=e),this.init()};(Qn.prototype=Object.create(bt.prototype)).constructor=bt,Object.assign(Qn.prototype,{getCenter:function(){return this._center},getRadius:function(){return this._radius},init:function(){var t=_.SHPERE_TESSELLATION;this._vertexBuffer=new fe;var e=t*t*3;this._vertexBuffer._size=e;var i=new Ae;i._componentSize=3,i._componentType=_e.FLOAT,i._attributeType=le.POINT;var r=new Float32Array(e);i._bufferData=r,this._vertexBuffer._datas.push(i);var n=new Ae;n._componentSize=3,n._componentType=_e.FLOAT,n._attributeType=le.NORMAL;var o=new Float32Array(e);n._bufferData=o,this._vertexBuffer._datas.push(n),this.update();for(var a=[],s=0;s<t-1;s++)for(var h=0;h<t-1;h++){var u=s*t+(h+1),c=s*t+h,l=(s+1)*t+h,g=(s+1)*t+(h+1);0!==s&&a.push(u,c,g),s!==t-2&&a.push(c,l,g)}var d=a.length;this._indexes=null,this._indexes=e<255?new Uint8Array(d):e<65535?new Uint16Array(d):new Uint32Array(d);for(var A=0;A<d;A++)this._indexes[A]=a[A];var p=new de;p._type=mt.INDEX_TRIANGLES,p._start=0,p._count=d,this._solidVertexAligns.push(p)},setValue:function(t,e){J.copy(this._center,t),this._radius=e,this.update()},setCenter:function(t){J.copy(this._center,t),this.update()},setRadius:function(t){this._radius=t,this.update()},update:function(){for(var t,e,i,r,n,o,a,s,h,u,c=this._vertexBuffer._datas[0]._bufferData,l=this._vertexBuffer._datas[1]._bufferData,g=_.SHPERE_TESSELLATION,d=0,A=_.PI/(g-1),p=_._2_PI/(g-1),I=0;I<g;I++){n=I*A,o=Math.sin(n),a=Math.cos(n);for(var f=0;f<g;f++)r=f*p,t=-Math.cos(r)*o,e=a,i=Math.sin(r)*o,h=3*d+1,u=3*d+2,l[s=3*d]=t,l[h]=e,l[u]=i,t=t*this._radius+this._center[0],e=e*this._radius+this._center[1],i=i*this._radius+this._center[2],c[s]=t,c[h]=e,c[u]=i,d++}}});var $n=Qn,to=function(t,e,i){bt.call(this),this._radius=.5,t&&(this._radius=t),this._start=J.create(0,0,0),e&&J.copy(this._start,e),this._end=J.create(0,0,1),i&&J.copy(this._end,i),this.init()};(to.prototype=Object.create(bt.prototype)).constructor=bt,Object.assign(to.prototype,{getStart:function(){return this._start},getEnd:function(){return this._end},getRadius:function(){return this._radius},setValue:function(t,e,i){this._radius=t,J.copy(this._start,e),J.copy(this._end,i),this.update()},setStart:function(t){J.copy(this._start,t),this.update()},setEnd:function(t){J.copy(this._end,t),this.update()},setRadius:function(t){this._radius=t,this.update()},init:function(){var t=_.CYLINDER_TESSELLATION,e=4*t,i=3*e;this._vertexBuffer=new fe,this._vertexBuffer._size=e;var r=new Ae;r._componentSize=3,r._componentType=_e.FLOAT,r._attributeType=le.POINT,r._bufferData=new Float32Array(i),this._vertexBuffer._datas.push(r);var n=new Ae;n._componentSize=3,n._componentType=_e.FLOAT,n._attributeType=le.NORMAL,n._bufferData=new Float32Array(i),this._vertexBuffer._datas.push(n),this.update();for(var o=[],a=0;a<t;a++)a<t-1?(o.push(a),o.push(a+1),o.push(t+1+a),o.push(a),o.push(t+1+a),o.push(t+a)):(o.push(a),o.push(0),o.push(t),o.push(a),o.push(t),o.push(t+a));for(var s=2*t,h=3*t,u=s;u<h;u++)u>s&&u<h-1&&(o.push(u+1),o.push(u),o.push(s));h=4*t;for(var c=s=3*t;c<h;c++)c>s&&c<h-1&&(o.push(s),o.push(c),o.push(c+1));var l=o.length;this._indexes=e<255?new Uint8Array(o):e<65535?new Uint16Array(o):new Uint32Array(o);var g=new de;g._type=mt.INDEX_TRIANGLES,g._start=0,g._count=l,this._solidVertexAligns.push(g)},update:function(){for(var t=this._vertexBuffer._datas[0]._bufferData,e=this._vertexBuffer._datas[1]._bufferData,i=_.CYLINDER_TESSELLATION,r=new Float32Array(3*i),n=_._2_PI/i,o=0;o<i;o++)r[3*o]=Math.cos(n*o),r[3*o+1]=Math.sin(n*o),r[3*o+2]=0;var a=J.MemoryPool.alloc(),s=J.MemoryPool.alloc(),h=J.MemoryPool.alloc();J.sub(a,this._end,this._start),0===J.normalize(s,a)&&(J.set(a,0,0,1),J.set(s,0,0,1));var u=it.MemoryPool.alloc();if(Math.abs(Math.abs(s[2])-1)<_.EPSILON)it.identity(u);else{var c=J.MemoryPool.alloc(),l=J.MemoryPool.alloc();J.set(c,0,0,1),J.cross(l,c,s);var g=J.angle(c,s);it.fromRotation(u,g,l),J.MemoryPool.free(c),J.MemoryPool.free(l)}it.setTranslation(u,this._start);for(var d=3*i,A=0;A<i;A++){var p=[r[3*A],r[3*A+1],r[3*A+2]];J.scale(p,p,this._radius),J.transformMat4(p,p,u),t[3*A]=p[0],t[3*A+1]=p[1],t[3*A+2]=p[2],J.sub(h,p,this._start),J.normalize(h,h),e[3*A]=h[0],e[3*A+1]=h[1],e[3*A+2]=h[2],J.add(p,p,a),t[3*A+d]=p[0],t[3*A+d+1]=p[1],t[3*A+d+2]=p[2],e[3*A+d]=h[0],e[3*A+d+1]=h[1],e[3*A+d+2]=h[2]}it.MemoryPool.free(u);for(var I=2*d,f=0;f<i;f++)t[3*f+I]=t[3*f],t[3*f+I+1]=t[3*f+1],t[3*f+I+2]=t[3*f+2],e[3*f+I]=-s[0],e[3*f+I+1]=-s[1],e[3*f+I+2]=-s[2];I=3*i;for(var C=0;C<i;C++)t[3*C+I]=t[3*C+d],t[3*C+I+1]=t[3*C+d+1],t[3*C+I+2]=t[3*C+d+2],e[3*C+I]=s[0],e[3*C+I+1]=s[1],e[3*C+I+2]=s[2];J.MemoryPool.free(a),J.MemoryPool.free(s),J.MemoryPool.free(h)}});var eo=to,io=function(t,e,i){bt.call(this),this._radius=.5,t&&(this._radius=t),this._center=J.create(0,0,0),e&&J.copy(this._center,e),this._arrow=J.create(0,0,1),i&&J.copy(this._arrow,i),this.init()};(io.prototype=Object.create(bt.prototype)).constructor=bt,Object.assign(io.prototype,{getCenter:function(){return this._center},getArrow:function(){return this._arrow},getRadius:function(){return this._radius},setValue:function(t,e,i){this._radius=t,J.copy(this._center,e),J.copy(this._arrow,i),this.update()},setCenter:function(t){J.copy(this._center,t),this.update()},setArrow:function(t){J.copy(this._arrow,t),this.update()},setRadius:function(t){this._radius=t,this.update()},init:function(){var t=_.CYLINDER_TESSELLATION,e=3*t,i=3*e;this._vertexBuffer=new fe,this._vertexBuffer._size=e;var r=new Ae;r._componentSize=3,r._componentType=_e.FLOAT,r._attributeType=le.POINT,r._bufferData=new Float32Array(i),this._vertexBuffer._datas.push(r);var n=new Ae;n._componentSize=3,n._componentType=_e.FLOAT,n._attributeType=le.NORMAL,n._bufferData=new Float32Array(i),this._vertexBuffer._datas.push(n),this.update();for(var o=[],a=0;a<t;a++)a<t-1?(o.push(a),o.push(a+1),o.push(t+1+a),o.push(a),o.push(t+1+a),o.push(t+a)):(o.push(a),o.push(0),o.push(t),o.push(a),o.push(t),o.push(t+a));for(var s=2*t,h=3*t,u=s;u<h;u++)u>s&&u<h-1&&(o.push(u+1),o.push(u),o.push(0));var c=o.length;this._indexes=e<255?new Uint8Array(o):e<65535?new Uint16Array(o):new Uint32Array(o);var l=new de;l._type=mt.INDEX_TRIANGLES,l._start=0,l._count=c,this._solidVertexAligns.push(l)},update:function(){var t=J.MemoryPool.alloc(),e=J.MemoryPool.alloc(),i=J.MemoryPool.alloc();J.sub(t,this._arrow,this._center),0===J.normalize(e,t)&&(J.set(t,0,0,1),J.set(e,0,0,1));var r=it.MemoryPool.alloc();if(Math.abs(Math.abs(e[2])-1)<_.EPSILON)it.identity(r);else{var n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc();J.set(n,0,0,1),J.cross(o,n,e);var a=J.angle(n,e);it.fromRotation(r,a,o),J.MemoryPool.free(n),J.MemoryPool.free(o)}it.setTranslation(r,this._center);for(var s=this._vertexBuffer._datas[0]._bufferData,h=this._vertexBuffer._datas[1]._bufferData,u=_.CYLINDER_TESSELLATION,c=new Float32Array(3*u),l=_._2_PI/u,g=0;g<u;g++)c[3*g]=Math.cos(l*g),c[3*g+1]=Math.sin(l*g),c[3*g+2]=0;for(var d=3*u,A=0;A<u;A++){var p=[c[3*A],c[3*A+1],c[3*A+2]];J.scale(p,p,this._radius),J.transformMat4(p,p,r),s[3*A]=p[0],s[3*A+1]=p[1],s[3*A+2]=p[2],J.sub(i,p,this._center),J.normalize(i,i),h[3*A]=i[0],h[3*A+1]=i[1],h[3*A+2]=i[2],J.add(p,p,t),s[3*A+d]=this._arrow[0],s[3*A+d+1]=this._arrow[1],s[3*A+d+2]=this._arrow[2],h[3*A+d]=i[0],h[3*A+d+1]=i[1],h[3*A+d+2]=i[2]}it.MemoryPool.free(r);for(var I=2*d,f=0;f<u;f++)s[3*f+I]=c[3*f],s[3*f+I+1]=c[3*f+1],s[3*f+I+2]=c[3*f+2],h[3*f+I]=-e[0],h[3*f+I+1]=-e[1],h[3*f+I+2]=-e[2];J.MemoryPool.free(t),J.MemoryPool.free(e),J.MemoryPool.free(i)}});var ro=io,no={RED:"RED",GREEN:"GREEN",BLUE:"BLUE",BLACK:4,WHITE:5,YELLOW:6,ORANGE:7,SKYBLUE:8,GRAY:9,SILVER:10,DARKORANGE:11,GOLD:12,CYAN:13,PURPLE:14,PINK:15,BROWN:16,CHOCOLATE:17,DARKRED:18,DARKGREEN:19,INDIANRED:20,HOTPINK:21};Object.freeze(no);Object.freeze(no);var oo=no,ao=function(t){this._modunit=t,this._glPrograms=new Map,this._pureColors=new Map,this._primitiveSolids=new Map,this._glNoneMaterial=null,this._glNoneLighting=null,this._glNoneFunction=null};Object.assign(ao.prototype,{release:function(){this._glPrograms.forEach((function(t){t.release()})),this._pureColors.clear(),this._primitiveSolids.clear()},getGLProgram:function(t){var e=this._glPrograms.get(t);if(!e){var i=Ln[t],r=bn[t];void 0!==i&&void 0!==r||console.log("shader source is missing:",t),e=new Gn(this._glcontext,i,r),this._glPrograms.set(t,e)}return e},getPureColor:function(t){var e=this._pureColors.get(t);if(!e){var i=this.createPureColor(t);i?((e=new Rt).setID(this._modunit.getID()),e._type=Pt.MATERIAL1,e._pureColor=i,this._pureColors.set(t,e)):console.log("pure color is missing:",t)}return e},getPrimitiveSolid:function(t){var e=this._primitiveSolids.get(t);return e||((e=this.createPrimitiveSolid(t))?(e.setID(this._modunit.getID()),this._primitiveSolids.set(t,e)):console.log("primitive solid is missing:",t)),e},createPureColor:function(t){switch(t){case oo.WHITE:return[1,1,1,1];case oo.RED:return[1,0,0,1];case oo.PINK:return[1,.75,.8,1];case oo.HOTPINK:return[1,.41,.71,1];case oo.BROWN:return[.65,.16,.16,1];case oo.CHOCOLATE:return[.82,.4,.12,1];case oo.DARKRED:return[.55,0,0,1];case oo.INDIANRED:return[.93,.39,.39,1];case oo.PURPLE:return[.5,0,.5,1];case oo.BLUE:return[0,0,1,1];case oo.SKYBLUE:return[.53,.8,1,1];case oo.GREEN:return[0,1,0,1];case oo.CYAN:return[0,1,1,1];case oo.DARKGREEN:return[0,.55,0,1];case oo.YELLOW:return[1,1,0,1];case oo.GOLD:return[1,.84,0,1];case oo.ORANGE:return[1,.5,0,1];case oo.DARKORANGE:return[1,.55,0,1];case oo.SILVER:return[.75,.75,.75,1];case oo.GRAY:return[.5,.5,.5,1];case oo.BLACK:return[0,0,0,1];default:return}},createPrimitiveSolid:function(t){switch(t){case Kn.SOLID_SHPERE:return new $n;case Kn.SOLID_CYLINDER:return new eo;case Kn.SOLID_CONE:return new ro;default:return}},getGLNoneMaterial:function(){return this._glNoneMaterial||(this._glNoneMaterial=new hn),this._glNoneMaterial},getGLNoneLighting:function(){return this._glNoneLighting||(this._glNoneLighting=new Vn),this._glNoneLighting},getGLNoneFunction:function(){return this._glNoneFunction||(this._glNoneFunction=new zn),this._glNoneFunction},clear:function(){this._glPrograms.forEach((function(t){t&&t.release()})),this._glPrograms.clear(),this._glPureColors.forEach((function(t){t&&t.release()})),this._glPureColors.clear(),this._glNoneMaterial&&(this._glNoneMaterial.release(),this._glNoneMaterial=null),this._glNoneLighting&&(this._glNoneLighting.release(),this._glNoneLighting=null),this._glNoneFunction&&(this._glNoneFunction.release(),this._glNoneFunction=null)}});var so=ao,ho=function(t){dr.call(this,t),this._sceneRoot=null,this._dynamicStruct=!1,this._dynamicGeometry=!1,this._sceneVisitor=new Rn(this),this._sceneFactory=new so(this),this._glreleasables=[],this._glreleasableID=-1,this._type=1};(ho.prototype=Object.create(dr.prototype)).constructor=ho,Object.assign(ho.prototype,{getID:function(){return++this._glreleasableID},traverse:function(){this._sceneVisitor.handle(this)},release:function(){for(var t=this._glreleasables.length,e=0;e<t;e++){var i=this._glreleasables[e];i&&i.release()}this._sceneFactory.release()},draw:function(){this._isvalid&&(this._dynamicStruct&&this.traverse(),1===this._type&&this.draw1())},updateGLShadings:function(t){t._currentGLMaterial=t._glmaterial?t._glmaterial:this._glshadings.getGLMaterial(),t._currentGLLighting=this._glshadings.getGLLighting(),t._currentGLFunction=this._glshadings.getGLFunction()},draw1:function(){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset);for(var e=this._drawIndex;e<t;e++){var i=this._drawables[e];i._currentGLMaterial=i._glmaterial?i._glmaterial:this._glshadings.getGLMaterial(),i._currentGLLighting=this._glshadings.getGLLighting(),i._currentGLFunction=this._glshadings.getGLFunction();var r=this._moduler._factory.getGLProgram(i.getProgramType());this._renderer.applyGLProgram(r),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(i._transform),this._renderer.applyGLShadings(i._currentGLMaterial,i._currentGLLighting,i._currentGLFunction),i._glgeometry.drawSolid(),this._drawIndex++}}}});var uo=ho,co=function(){this._glstates=[],this._glstates[Fi.Viewport]=null,this._glstates[Fi.Depth]=null,this._glstates[Fi.BlendFunc]=null,this._glstates[Fi.CullFace]=null,this._glstates[Fi.PixelStore]=null,this._glstates[Fi.Clear]=null,this._glstates[Fi.LineWidth]=null,this._glstates[Fi.FrontFace]=null,this._glstates[Fi.Scissor]=null};Object.assign(co.prototype,{reset:function(){for(var t=this._glstates.length,e=0;e<t;e++)this._glstates[e]=null},fillGLStates:function(t){for(var e=t._glstates,i=e.length,r=0;r<i;r++)this._glstates[r]||(this._glstates[r]=e[r])},setGLState:function(t){this._glstates[t.type()]=t},getGLState:function(t){return this._glstates[t]},getGLStates:function(){return this._glstates}});var lo=co,go=function(){this._glmaterial=null,this._gllighting=null,this._glfunction=null};Object.assign(go.prototype,{reset:function(){this._glmaterial=null,this._gllighting=null,this._glfunction=null},setGLShadings:function(t){this._glmaterial=t._glmaterial,this._gllighting=t._gllighting,this._glfunction=t._glfunction},setGLMaterial:function(t){this._glmaterial=t},getGLMaterial:function(){return this._glmaterial},setGLLighting:function(t){this._gllighting=t},getGLLighting:function(){return this._gllighting},setGLFunction:function(t){this._glfunction=t},getGLFunction:function(){return this._glfunction},release:function(){this._glmaterial&&this._glmaterial.release(),this._gllighting&&this._gllighting.release(),this._glfunction&&this._glfunction.release()}});var _o=go,Ao=function(){this._planes=[nt.new(),nt.new(),nt.new(),nt.new(),nt.new(),nt.new()],this._masks=[],this._mask=0,this._masks.push(this._mask)};Ao.prototype={getPlanes:function(){return this._planes},setPlanes:function(t){this._planes=t,this.resetMask()},getCurrentMask:function(){return this._masks[this._masks.length-1]},setResultMask:function(t){this._mask=t},getResultMask:function(){return this._mask},pushCurrentMask:function(){this._masks.push(this._mask)},popCurrentMask:function(){return this._masks.pop()},empty:function(){return 0===this._planes.length},reset:function(){if(this._planes)for(var t=this._planes.length,e=0;e<t;e++)nt.set(this._planes[e],0,0,0,1);this.resetMask()},resetMask:function(t){this._mask=0;for(var e=void 0!==t?t:this._planes.length,i=0;i<e;i++)this._mask=this._mask<<1|1;this._masks.length=0,this._masks.push(this._mask)},updateByVPMatrix:function(t,e,i){var r=it.MemoryPool.alloc();it.mul(r,t,e);var n=!!i,o=this._planes[0];o[0]=r[3]+r[0],o[1]=r[7]+r[4],o[2]=r[11]+r[8],o[3]=r[15]+r[12];var a=this._planes[1];a[0]=r[3]-r[0],a[1]=r[7]-r[4],a[2]=r[11]-r[8],a[3]=r[15]-r[12];var s=this._planes[2];s[0]=r[3]+r[1],s[1]=r[7]+r[5],s[2]=r[11]+r[9],s[3]=r[15]+r[13];var h=this._planes[3];if(h[0]=r[3]-r[1],h[1]=r[7]-r[5],h[2]=r[11]-r[9],h[3]=r[15]-r[13],n){var u=this._planes[4];u[0]=r[3]+r[2],u[1]=r[7]+r[6],u[2]=r[11]+r[10],u[3]=r[15]+r[14];var c=this._planes[5];c[0]=r[3]-r[2],c[1]=r[7]-r[6],c[2]=r[11]-r[10],c[3]=r[15]-r[14]}for(var l=n?6:4,g=0;g<l;g++)nt.normalize(this._planes[g],this._planes[g]);return it.MemoryPool.free(r),this._planes},createByUnitCube:function(){w.set(this._planes[0],1,0,0,1),w.set(this._planes[1],-1,0,0,1),w.set(this._planes[2],0,1,0,1),w.set(this._planes[3],0,-1,0,1),w.set(this._planes[4],0,0,1,1),w.set(this._planes[5],0,0,-1,1),this.resetMask()},createByBoundingBox:function(t){w.set(this._planes[0],1,0,0,-t.getMin()[0]),w.set(this._planes[1],-1,0,0,t.getMax()[0]),w.set(this._planes[2],0,1,0,-t.getMin()[1]),w.set(this._planes[3],0,-1,0,t.getMax()[1]),w.set(this._planes[4],0,0,1,-t.getMin()[2]),w.set(this._planes[5],0,0,-1,t.getMax()[2]),this.resetMask()},containsVertex:function(t){var e=this._masks[this._masks.length-1];if(!e)return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i&&nt.distanceToVertex(this._planes[n],t)<0)return!1;i<<=1}return!0},containsVertices:function(t){var e=this._masks[this._masks.length-1];if(!e)return!0;for(var i=t.length,r=0;r<i;r++){for(var n=t[r],o=!1,a=1,s=this._planes.length,h=0;h<s;h++){if(e&a&&nt.distanceToVertex(this._planes[h],n)<0){o=!0;break}a<<=1}if(!o)return!0}return!1},containsAllVertices:function(t){var e=this._masks[this._masks.length-1];if(!e)return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i){var o=nt.relationToVertices(this._planes[n],t);if(_.OUTSIDE===o)return!1;if(_.INTERSECT===o)return!1}i<<=1}return!0},containsBoundingSphere:function(t){var e=this._masks[this._masks.length-1];if(!e||!t.valid())return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i){var o=nt.relationToBoundingSphere(this._planes[n],t);if(_.OUTSIDE===o)return!1}i<<=1}return!0},containsAllBoudingSphere:function(t){var e=this._masks[this._masks.length-1];if(!e||!t.valid())return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i){var o=nt.relationToBoundingSphere(this._planes[n],t);if(_.OUTSIDE===o)return!1;if(_.INTERSECT===o)return!1}i<<=1}return!0},containsBoundingBox:function(t){var e=this._masks[this._masks.length-1];if(!e||!t.valid())return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i){var o=nt.relationToBoundingBox(this._planes[n],t);if(_.OUTSIDE===o)return!1}i<<=1}return!0},containsAllBoudingBox:function(t){var e=this._masks[this._masks.length-1];if(!e||!t.valid())return!0;for(var i=1,r=this._planes.length,n=0;n<r;n++){if(e&i){var o=nt.relationToBoundingBox(this._planes[n],t);if(_.OUTSIDE===o)return!1;if(_.INTERSECT===o)return!1}i<<=1}return!0}};var po=Ao,Io=function t(){this._frustum=new po,this._cullmask=t.VIEW_FRUSTUM_SIDES_CULLING};Io.NO_CULLING=0,Io.VIEW_FRUSTUM_LEFT_CULLING=1,Io.VIEW_FRUSTUM_RIGHT_CULLING=2,Io.VIEW_FRUSTUM_BOTTOM_CULLING=4,Io.VIEW_FRUSTUM_TOP_CULLING=8,Io.VIEW_FRUSTUM_NEAR_CULLING=16,Io.VIEW_FRUSTUM_FAR_CULLING=32,Io.ENABLE_ALL_CULLING=Io.VIEW_FRUSTUM_CULLING=(Io.VIEW_FRUSTUM_SIDES_CULLING=Io.VIEW_FRUSTUM_LEFT_CULLING|Io.VIEW_FRUSTUM_RIGHT_CULLING|Io.VIEW_FRUSTUM_BOTTOM_CULLING|Io.VIEW_FRUSTUM_TOP_CULLING)|Io.VIEW_FRUSTUM_NEAR_CULLING|Io.VIEW_FRUSTUM_FAR_CULLING,Object.assign(Io.prototype,{reset:function(){this._cullmask=Io.VIEW_FRUSTUM_SIDES_CULLING,this._frustum.reset()},setCullMask:function(t){this._cullmask=t},getCullMask:function(){return this._cullmask},resetCullMask:function(){this._frustum.setResultMask(this._frustum.getCurrentMask())},setFrustum:function(t){this._frustum=t},getFrustum:function(){return this._frustum},getCurrentMask:function(){return this._frustum.getCurrentMask()},pushCurrentMask:function(){this._frustum.pushCurrentMask()},popCurrentMask:function(){this._frustum.popCurrentMask()},isBoundingBoxCulled:function(t){return!(!(this._cullmask&Io.VIEW_FRUSTUM_CULLING)||this._frustum.containsBoundingBox(t))},isBoundingSphereCulled:function(t){return!(!(this._cullmask&Io.VIEW_FRUSTUM_CULLING)||this._frustum.containsBoundingSphere(t))},isVerticesCulled:function(t){return!(!(this._cullmask&Io.VIEW_FRUSTUM_CULLING)||this._frustum.containsVertices(t))}});var fo=Io,Co=function(){this._x=0,this._y=0,this._width=0,this._height=0,this._eye=J.create(0,-10,0),this._center=J.create(0,0,0),this._up=J.create(0,0,1),this._viewMatrix=it.new(),this._projectionMatrix=it.new(),this._cullFrustumFlag=!1,this._cullFrustum=new fo,this._boundingBoxFarCorner=0,this._boundingBoxNearCorner=0,this._perspectiveFlag=!1,this._pixelSizeRatio=0};Object.assign(Co.prototype,{getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},updatePixelSizeRatio:function(){if(this._perspectiveFlag){var t={};this.getProjectionPerspective(t),this._pixelSizeRatio=.5*this._height/Math.tan(.5*t.fovy)}else{var e={};this.getProjectionOrthogonal(e),this._pixelSizeRatio=this._height/(e.top-e.bottom)}},computePixelSize:function(t,e){Number.POSITIVE_INFINITY;return this._perspectiveFlag?this._pixelSizeRatio*e/J.distance(this._eye,t):this._pixelSizeRatio*e},computePixelLength:function(t){return 1/this.computePixelSize(t,1)},cosize:function(t){this._x=t._x,this._y=t._y,this._width=t._width,this._height=t._height},resize:function(t,e,i,r){this._x=t,this._y=e,this._width=i,this._height=r},getEye:function(){return this._eye},getCenter:function(){return this._center},getUp:function(){return this._up},setViewMatrix:function(t){it.copy(this._viewMatrix,t)},setViewLookAt:function(t,e,i){J.copy(this._eye,t),J.copy(this._center,e),J.copy(this._up,i),this.updateViewMatrix()},updateViewMatrix:function(){it.fromLookAt(this._viewMatrix,this._eye,this._center,this._up)},getViewMatrix:function(){return this._viewMatrix},initProjectionOrthogonal:function(){var t=500*(this._width/this._height);this.setProjectionOrthogonal(-t,t,-500,500,1,1e3)},initProjectionPerspective:function(){var t=this._width/this._height;this.setProjectionPerspective(_.degree_to_radian(30),t,1e3,1e6)},setProjectionMatrix:function(t){it.copy(this._projectionMatrix,t),this._perspectiveFlag=it.isFrustum(t)},setProjectionOrthogonal:function(t,e,i,r,n,o){it.fromOrthogonal(this._projectionMatrix,t,e,i,r,n,o),this._perspectiveFlag=!1},setProjectionFrustum:function(t,e,i,r,n,o){it.fromFrustum(this._projectionMatrix,t,e,i,r,n,o),this._perspectiveFlag=!0},setProjectionPerspective:function(t,e,i,r){it.fromPerspective(this._projectionMatrix,t,e,i,r),this._perspectiveFlag=!0},getProjectionMatrix:function(){return this._projectionMatrix},updateInverseMatrix:function(){var t=this._eye[0],e=this._eye[1],i=this._eye[2],r=this._up[0],n=this._up[1],o=this._up[2],a=this._center[0],s=this._center[1],h=this._center[2];if(Math.abs(t-a)<_.EPSILON&&Math.abs(e-s)<_.EPSILON&&Math.abs(i-h)<_.EPSILON)return it.identity(out);var u=t-a,c=e-s,l=i-h,g=1/Math.sqrt(u*u+c*c+l*l),d=n*(l*=g)-o*(c*=g),A=o*(u*=g)-r*l,p=r*c-n*u,I=c*(p*=g=1/Math.sqrt(d*d+A*A+p*p))-l*(A*=g),f=l*(d*=g)-u*p,C=u*A-c*d;I*=g=1/Math.sqrt(I*I+f*f+C*C),f*=g,C*=g,this._viewMatrix[0]=d,this._viewMatrix[1]=I,this._viewMatrix[2]=u,this._viewMatrix[3]=0,this._viewMatrix[4]=A,this._viewMatrix[5]=f,this._viewMatrix[6]=c,this._viewMatrix[7]=0,this._viewMatrix[8]=p,this._viewMatrix[9]=C,this._viewMatrix[10]=l,this._viewMatrix[11]=0,this._viewMatrix[12]=-(d*t+A*e+p*i),this._viewMatrix[13]=-(I*t+f*e+C*i),this._viewMatrix[14]=-(u*t+c*e+l*i),this._viewMatrix[15]=1},getProjectionFrustum:function(t){return it.getFrustum(t,this._projectionMatrix)},getProjectionPerspective:function(t){return it.getPerspective(t,this._projectionMatrix)},getProjectionOrthogonal:function(t){return it.getOrthogonal(t,this._projectionMatrix)},setCullFrustumFlag:function(t){this._cullFrustumFlag=t},isVerticesCulled:function(t){return!!this._cullFrustumFlag&&this._cullFrustum.isVerticesCulled(t)},isBoundingBoxCulled:function(t){return!!this._cullFrustumFlag&&(t.valid()&&this._cullFrustum.isBoundingBoxCulled(t))},isBoundingSphereCulled:function(t){return!!this._cullFrustumFlag&&(t.valid()&&this.getCullFrustum().isBoundingSphereCulled(t))},getNormalizedX:function(t){return 2*(t-this._x)/this._width-1},getNormalizedY:function(t){return 2*(t-this._y)/this._height-1},fromNormalizedX:function(t){return.5*(t+1)*this._width+this._x},fromNormalizedY:function(t){return.5*(t+1)*this._height+this._y},computeScreenToWorldNearFarPoint:function(t,e,i,r,n){n&&(t=this.getNormalizedX(t),e=this.getNormalizedY(e)),J.set(i,t,e,-1),J.set(r,t,e,1);var o=it.MemoryPool.alloc();it.mul(o,this.getProjectionMatrix(),this.getViewMatrix()),it.invert(o,o),J.transformMat4(i,i,o),J.transformMat4(r,r,o),it.MemoryPool.free(o)},computeScreenToWorldFrustumPlanes:function(t,e,i,r,n,o,a,s){s&&(t=this.getNormalizedX(t),e=this.getNormalizedY(e),i=this.getNormalizedX(i),r=this.getNormalizedY(r));var h=Math.min(t,i),u=Math.max(t,i),c=Math.min(e,r),l=Math.max(e,r);nt.set(a[0],1,0,0,-h),nt.set(a[1],-1,0,0,u),nt.set(a[2],0,1,0,-c),nt.set(a[3],0,-1,0,l);var g=4;n&&(nt.set(a[g],0,0,1,1),g++),o&&(nt.set(a[g],0,0,-1,-1),g++);var _=it.MemoryPool.alloc();return it.mul(_,this.getProjectionMatrix(),this.getViewMatrix()),nt.transformMat4(a[0],_),nt.transformMat4(a[1],_),nt.transformMat4(a[2],_),nt.transformMat4(a[3],_),nt.transformMat4(a[4],_),it.MemoryPool.free(_),g},computeScreenToWorld:function(t,e){var i=it.MemoryPool.alloc();it.mul(i,this.getProjectionMatrix(),this.getViewMatrix()),it.invert(i,i),J.transformMat4(e,t,i),it.MemoryPool.free(i)},computeWorldToScreen:function(t,e){var i=it.MemoryPool.alloc();it.mul(i,this.getProjectionMatrix(),this.getViewMatrix()),J.transformMat4(e,t,i),it.MemoryPool.free(i)},updateCullFrustum:function(){this._cullFrustumFlag&&(this._cullFrustum.reset(),this._cullFrustum.getFrustum().updateByVPMatrix(this._projectionMatrix,this._viewMatrix,!1),this._cullFrustum.getFrustum().resetMask(4))},updateProjectionNearFar:function(t){if(t.valid()){this.updateBoundingBoxNearFarCorner();var e=J.MemoryPool.alloc();t.getCorner(this._boundingBoxFarCorner,e);var i=this.distancePointToEye(e);J.MemoryPool.free(e);var r=5e-4*i;r<10&&(r=10),this.updateProjectionMatrix(r,i,5e-4)}else this.updateProjectionMatrix(1e3,1e6,5e-4)},updateProjectionMatrix:function(t,e,i){var r,n,o=this._projectionMatrix;if(e<t+1e-6){var a=.5*(t+e);t=a-1e-6,e=a+1e-6}if(Math.abs(o[3])<1e-6&&Math.abs(o[7])<1e-6&&Math.abs(o[11])<1e-6){var s=.02*(e-t);s<1&&(s=1),r=t-s,n=e+s,o[10]=-2/(n-r),o[14]=-(n+r)/(n-r)}else{n=1.02*e;var h=e*i;(r=.98*t)<h&&(r=h);var u=o[10],c=o[14],l=o[11],g=o[15],_=(-r*u+c)/(-r*l+g),d=(-n*u+c)/(-n*l+g),A=Math.abs(2/(_-d)),p=-(_+d)/2*A;o[2]=o[2]*A+o[3]*p,o[6]=o[6]*A+o[7]*p,o[10]=u*A+l*p,o[14]=c*A+g*p}},updateBoundingBoxNearFarCorner:function(){var t=this._viewMatrix;this._boundingBoxFarCorner=(-t[2]>=0?1:0)|(-t[6]>=0?2:0)|(-t[10]>=0?4:0),this._boundingBoxNearCorner=7&~this._boundingBoxFarCorner},distancePointToEye:function(t){return-(t[0]*this._viewMatrix[2]+t[1]*this._viewMatrix[6]+t[2]*this._viewMatrix[10]+this._viewMatrix[14])}});var mo=Co,vo=function(){pt.call(this)};(vo.prototype=Object.create(pt.prototype)).constructor=vo,Object.assign(vo.prototype,{});var yo=vo,Eo=function(){Lt.call(this)};(Eo.prototype=Object.create(Lt.prototype)).constructor=Eo,Object.assign(Eo.prototype,{});var wo=Eo,Mo=function(t,e){wo.call(this),this._start=Si.new(),this._end=Si.new(),t&&Si.copy(this._start,t),e&&Si.copy(this._end,e),this.init()};(Mo.prototype=Object.create(wo.prototype)).constructor=Mo,Object.assign(Mo.prototype,{setValue:function(t,e){Si.copy(this._start,t),Si.copy(this._end,e),this.reset()},setStart:function(t){Si.copy(this._start,t),this.reset()},setEnd:function(t){Si.copy(this._end,t),this.reset()},getStart:function(){return this._start},getEnd:function(){return this._end},init:function(){this._vertexBuffer=new fe,this._vertexBuffer._size=4;var t=new Ae;t._componentSize=2,t._componentType=_e.FLOAT,t._attributeType=le.POINT,t._bufferData=new Float32Array(8),this.update(t._bufferData),this._vertexBuffer._datas.push(t);var e=new de;e._type=mt.ARRAY_LINE_LOOP,e._start=0,e._count=4,this._solidVertexAligns.push(e)},update:function(t){t[0]=this._start[0],t[1]=this._start[1],t[2]=this._end[0],t[3]=this._start[1],t[4]=this._end[0],t[5]=this._end[1],t[6]=this._start[0],t[7]=this._end[1]},reset:function(){var t=this._vertexBuffer._datas[0];this.update(t._bufferData),t._changed=!0}});var To=Mo,Po=r(63),So=r.n(Po),Ro=r(64),Oo=r.n(Ro),Lo={isMobile:void 0};!function(){if(void 0===Lo.isMobile){var t=navigator.userAgent;console.log(navigator.userAgent);var e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];Lo.isMobile=!1;for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>0){Lo.isMobile=!0;break}}}();var No=Lo,bo={WIREFRAME_SHOWED:!0,AXISGRID_SHOWED:!0,HIGHLIGHT_COLOR:w.create(1,0,0,1),TRANSPARENT_COLOR:w.create(.8,.8,.8,.1),ENTITY_COLOR:w.create(.7,.7,.7,1),AXISGRID_COLOR:w.create(0,1,0,1),WIREFRAME_COLOR:w.create(0,0,0,.4),MULTIPLEPICK_COLOR:w.create(1,0,0,1),PRIMITIVE_COLOR:w.create(1,1,1,1),LIGHTING_DIRECTION:w.create(0,0,1,0),LIGHTING_AMBIENT_RATIO:.4,LIGHTING_DIFFUSE_RATIO:.8,TEXT_SIZE:500,HOME_EYE_POSITION:J.create(.5773502588272095,-.5773502588272095,.5773502588272095),HOME_UP_DIRECTION:J.create(-.5773502588272095,.5773502588272095,.5773502588272095),NAVIGATE_RIGHT_MARGIN:0,NAVIGATE_TOP_MARGIN:0,NAVIGATE_WIDTH_SIZE:120,PERSON_PANEL_SIZE:No.isMobile?300:100,PERSON_PANEL_LEFT_MARGIN:No.isMobile?120:40,PERSON_PANEL_RIGHT_MARGIN:No.isMobile?120:40,PERSON_PANEL_BOTTOM_MARGIN:No.isMobile?120:40,PERSON_PANEL_LIGHT:w.create(2.5,2.5,2.5,2.5),PERSON_PANEL_DARK:w.create(1,1,1,1),LEFT_MOUSE_OPERATION:Re.e.PICK,MEASURE_TYPE:Re.f.DOT,CURSOR_SIZE:No.isMobile?120:60,BACKGROUND_TYPE:Re.a.PURE_COLOR,BACKGROUND_PURE_COLOR:w.create(.76,.75,.85,1),BACKGROUND_GRADIENT_TOP_COLOR:w.create(.5,.5,.9,1),BACKGROUND_GRADIENT_BOTTOM_COLOR:w.create(1,1,1,1),CURSOR_NORMAL_PNG:So.a,CURSOR_PICKUP_PNG:Oo.a,PUSHPIN_TEXT_FONT:"",PUSHPIN_TEXT_SIZE:12,PUSHPIN_TEXT_COLOR:w.create(1,1,1,1),PUSHPIN_WIDTH:30,PUSHPIN_HEIGHT:30,PUSHPIN_ALPHA:.75,PUSHPIN_HIGHLIGHT_ALPHA:1,PUSHPIN_HIGHLIGHT_SCALE:2,SHADOW_AMBIENT:.5,SHADOW_MAIN_LIGHTING:1.5,SHADOW_FILL_LIGHTING:.5,SHADOW_LIGHTING_DIRECTION:J.create(-.703742743,.239676327,-.668805957),SHADOW_MAP_WIDTH:2048,SHADOW_MAP_HEIGHT:2048,TOUCH_HOLD_JITTER:.001,TOUCH_PAN_JITTER:.002};Object.freeze(bo);var Do=bo,xo=function(t){this._moduler=t,this._rect=null};Object.assign(xo.prototype,{create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.MULTIPICK_RECT,t);var e=new lo;e.setGLState(new Yi(_e.LESS,.1,.2)),t._glstateset=e;var i=new _o;i.setGLMaterial(new un(Do.MULTIPLEPICK_COLOR)),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var r=new mo;r.cosize(this._moduler._camera);var n=it.MemoryPool.alloc();it.identity(n),r.setViewMatrix(n),it.MemoryPool.free(n),r.setProjectionOrthogonal(-1,1,-1,1,-1,1),t._camera=r;var o=new yo;o.setName("MultipickRect"),this._rect=new To,this._rect.setID(t.getID()),o.addChild(this._rect),t._sceneRoot=o,t._dynamicStruct=!0,t._dynamicGeometry=!0,t.isvalid(!1),this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.MULTIPICK_RECT),this._rect=null,this._moduler.requestRedraw()},start:function(t){this._moduler.getModunit(Di.MULTIPICK_RECT).isvalid(!0),this._rect.setValue(t,t)},current:function(t){this._rect.setEnd(t)},end:function(){this._moduler.getModunit(Di.MULTIPICK_RECT).isvalid(!1)}});var Bo=xo,Go=function(t){Bi.call(this,t),this._operateMode=Xi.NONE,this._panEvent=new Ni,this._rotateEvent=new Ni,this._zoomEvent=new Ni,this._continuousPick=!1,this._removePick=!1,this._multipickRect=new Bo(this._moduler)};(Go.prototype=Object.create(Bi.prototype)).constructor=Go,Object.assign(Go.prototype,{type:function(){return Ti.ROAMING},create:function(){this._multipickRect.create(),this._moduler.requestRedraw()},destroy:function(){this._multipickRect.destroy(),this._moduler.requestRedraw()},update:function(t){t||this.home()},isContinuousPicked:function(t){return void 0!==t&&(this._continuousPick=t),this._continuousPick},isRemovePicked:function(t){return void 0!==t&&(this._removePick=t),this._removePick},home:function(){},escape:function(){var t=this._moduler.getScenery().unhighlightEntities();(t=this._moduler.getScenery().untransparentComponents()||t)&&this._moduler.requestRedraw()},rotate:function(){},move:function(){},zoom:function(){},locate:function(){},pickPush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._pickEvent.setInitial(e[0],e[1]),t.altKey?this._removePick=!0:t.ctrlKey&&(this._continuousPick=!0),this._continuousPick||this._removePick||this._moduler.getScenery().unhighlightEntities()&&this._moduler.requestRedraw(),this.singlePick(e[0],e[1])&&this._moduler.requestRedraw(),t.preventDefault(),!0},pickDrag:function(t){if(this._adaptor.getConfig().isMultiplePicked()){this._operateMode&Xi.PICK||this._multipickRect.start(this._pickEvent.getInitial()),this._operateMode|=Xi.PICK;var e=this.getPositionRelativeToCanvas(t,!0);this._pickEvent.setCurrent(e[0],e[1])}return t.preventDefault(),!0},pickRelease:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._operateMode&Xi.PICK&&(this._operateMode&=~Xi.PICK,this._pickEvent.setCurrent(e[0],e[1]),this._continuousPick?t.ctrlKey&&this.multiplePick():this._removePick?t.altKey&&this.multiplePick():this.multiplePick(),this._multipickRect.end()),this._removePick=!1,this._continuousPick=!1,t.preventDefault(),!0},singlePick:function(t,e,i){var r=!1,n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc();if(this._moduler.getCamera().computeScreenToWorldNearFarPoint(t,e,n,o),this._adaptor.getOperation(Ti.SECTION)){var a=[];this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT).linesegmentIntersect(a,n,o,Oi.SELECTION);var s=a.length;if(2===s){var h=a[0].getPoint();h&&(r=this.linesegmentHighlightEntity(h,o,i))}else 1===s&&(r=this.linesegmentHighlightEntity(n,o,i))}else r=this.linesegmentHighlightEntity(n,o,i);return J.MemoryPool.free(n),J.MemoryPool.free(o),r},multiplePick:function(){var t=this._pickEvent.getInitial(),e=this._pickEvent.getCurrent(),i=[nt.new(),nt.new(),nt.new(),nt.new(),nt.new()];this._moduler.getCamera().computeScreenToWorldFrustumPlanes(t[0],t[1],e[0],e[1],!0,!1,i);var r=this._adaptor.getOperation(Ti.SECTION);r?(r.getPlanes(i),this.polytopeHighlightEntity(i)):this.polytopeHighlightEntity(i),this._moduler.requestRedraw(),this._pickEvent.sync()},drawMultiplePick:function(){var t=this._pickEvent.getDelta();Math.abs(t[0])<_.EPSILON&&Math.abs(t[1])<_.EPSILON||(this._multipickRect.current(this._pickEvent.getCurrent()),this._moduler.requestRedraw(),this._pickEvent.sync())},linesegmentHighlightEntity:function(t,e,i){var r=!1,n=[];if(this._moduler.getModunit(Di.ENTITY_SUBJECT).linesegmentIntersect(n,t,e,Oi.SELECTION),0!==n.length){var o=this._adaptor.getConfig().isRelationPicked(),a=this._adaptor.getConfig().getHighligthMaterial(),s=n[0];i&&J.copy(i,s.getPoint());var h=s.getDrawable().getRenderEntity();this._continuousPick?this._moduler.getScenery().highlightEntityBySelect(h,!0,o,a):this._removePick?this._moduler.getScenery().unhighlightEntityBySelect(h,!1,o):this._moduler.getScenery().highlightEntityBySelect(h,!1,o,a),r=!0}return r},polytopeHighlightEntity:function(t){var e=!1,i=[];this._moduler.getModunit(Di.ENTITY_SUBJECT).polytopeIntersect(i,t,Oi.SELECTION,Oi.FAST_OUTCOME);var r=i.length;if(0!==r){for(var n=this._adaptor.getConfig().isRelationPicked(),o=this._adaptor.getConfig().getHighligthMaterial(),a=0;a<r;a++){var s=i[a].getDrawable().getRenderEntity();this._continuousPick?this._moduler.getScenery().highlightEntityBySelect(s,!0):this._removePick?this._moduler.getScenery().unhighlightEntityBySelect(s,!0):this._moduler.getScenery().highlightEntityBySelect(s,!1,n,o)}e=!0}return this._removePick&&this._moduler.getScenery().unhighlightSync(),e}}),Go.prototype[Bi.MOUSE_LEFTPUSH]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotatePush(t);case Re.e.PAN:return this.panPush(t);default:return this.pickPush(t)}},Go.prototype[Bi.MOUSE_LEFTDRAG]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotateDrag(t);case Re.e.PAN:return this.panDrag(t);default:return this.pickDrag(t)}},Go.prototype[Bi.MOUSE_LEFTRELEASE]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotateRelease(t);case Re.e.PAN:return this.panRelease(t);default:return this.pickRelease(t)}},Go.prototype[Bi.KEYBORAD_PUSH]=function(t){return" "===t.key?(this.home(),!0):"Escape"===t.key&&(this.escape(),!0)},Go.prototype[Bi.TOUCH_CLICK]=function(t){return this._moduler.getScenery().unhighlightEntities(),this.singlePick(t[0],t[1]),this._moduler.requestRedraw(),!0};var Fo=Go,Vo=function(t){Zi.call(this,t),this._distance=800,this._halfWidth=80,this._picking=!1};(Vo.prototype=Object.create(Zi.prototype)).constructor=Vo,Object.assign(Vo.prototype,{create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.CUBE_NAVIGATE,t);var e=this._adaptor.getConfig(),i=e._navigateRightMargin,r=e._navigateTopMargin,n=e._navigateWidthSize,o=this._moduler._camera,a=o._x+o._width-i-n,s=o._y+o._height-r-n,h=new lo;h.setGLState(new Hi(a,s,n,n)),h.setGLState(new Yi(_e.LEQUAL,0,.1)),t._glstateset=h;var u=new _o;u.setGLMaterial(new hn),u.setGLLighting(new Vn),u.setGLFunction(new zn),t._glshadings=u;var c=new mo;c.resize(a,s,n,n);var l=J.MemoryPool.alloc();J.set(l,0,-this._distance,0);var g=J.MemoryPool.alloc();J.set(g,0,0,0);var _=J.MemoryPool.alloc();J.set(_,0,0,1),c.setViewLookAt(l,g,_),J.MemoryPool.free(l),J.MemoryPool.free(g),J.MemoryPool.free(_),c.setProjectionPerspective(Math.PI/180*30,1,1,1200),t._camera=c;var d=new yo;d.setName("CubeNavigate"),t._sceneRoot=d,t._dynamicStruct=!1,nr.loadImageResources(e.getNavigateResources(),this.createGeometry.bind(this))},destroy:function(){this._moduler.destroyModunit(Di.CUBE_NAVIGATE),nr.unloadImageResources(this._adaptor.getConfig().getNavigateResources()),this._moduler.requestRedraw()},createFaceGeometry:function(t,e,i){var r=new fe;t._vertexBuffer=r,r._size=6;var n=new Ae;n._componentSize=3,n._componentType=_e.FLOAT,n._attributeType=le.POINT,n._bufferData=e,r._datas.push(n);var o=new Ae;o._componentSize=2,o._componentType=_e.FLOAT,o._attributeType=le.TEXTURE,o._bufferData=i,r._datas.push(o);var a=new de;a._type=mt.ARRAY_TRIANGLES,a._start=0,a._count=6,t._solidVertexAligns.push(a)},createGeometry:function(t){if(7===t.length){var e=this._moduler.getModunit(Di.CUBE_NAVIGATE),i=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),r=this._halfWidth,n=2.3*r,o=-1.01*r,a=[];a.push(new Float32Array([-r,-r,-r,r,-r,-r,r,-r,r,r,-r,r,-r,-r,r,-r,-r,-r])),a.push(new Float32Array([r,r,-r,-r,r,-r,-r,r,r,-r,r,r,r,r,r,r,r,-r])),a.push(new Float32Array([-r,-r,r,r,-r,r,r,r,r,r,r,r,-r,r,r,-r,-r,r])),a.push(new Float32Array([-r,r,-r,r,r,-r,r,-r,-r,r,-r,-r,-r,-r,-r,-r,r,-r])),a.push(new Float32Array([-r,r,-r,-r,-r,-r,-r,-r,r,-r,-r,r,-r,r,r,-r,r,-r])),a.push(new Float32Array([r,-r,-r,r,r,-r,r,r,r,r,r,r,r,-r,r,r,-r,-r]));for(var s=[zi.FRONT,zi.BACK,zi.TOP,zi.BOTTOM,zi.LEFT,zi.RIGHT],h=s.length,u=0;u<h;u++){var c=new Et;c.setID(e.getID()),c.setName(s[u]),this.createFaceGeometry(c,a[u],i);var l=new Rt;l.setID(e.getID()),l._type=Pt.MATERIAL3,l._textureImage=t[u]._data,c._material=l,e._sceneRoot.addChild(c)}var g=new Et;g.setID(e.getID()),g.setName(zi.UNKNOWN);var _=new Float32Array([-n,-n,o,n,-n,o,n,n,o,n,n,o,-n,n,o,-n,-n,o]);this.createFaceGeometry(g,_,i);var d=new Rt;d.setID(e.getID()),d._type=Pt.MATERIAL4,d._textureImage=t[6]._data,d._discardAlpha=.1,g._material=d,e._sceneRoot.addChild(g),e.traverse(),this._moduler.requestRedraw()}},sync:function(){var t=J.MemoryPool.alloc();J.set(t,0,0,0);var e=J.MemoryPool.alloc(),i=this._moduler._camera;J.sub(e,i._eye,i._center),J.normalize(e,e),J.scale(e,e,this._distance),this._moduler.getModunit(Di.CUBE_NAVIGATE)._camera.setViewLookAt(e,t,i._up),J.MemoryPool.free(e),J.MemoryPool.free(t)},updateResources:function(t){nr.loadImageResources(t,this.updateGeometry.bind(this)),nr.unloadImageResources(this._adaptor.getConfig().getNavigateResources())},updateGeometry:function(t){for(var e=this._moduler.getModunit(Di.CUBE_NAVIGATE),i=e._sceneRoot.getChildren(),r=[zi.FRONT,zi.BACK,zi.TOP,zi.BOTTOM,zi.LEFT,zi.RIGHT].length,n=0;n<r;n++){i[n]._material._textureImage=t[n]}i[6]._material._textureImage=t[6],e.traverse(),this._moduler.requestRedraw()},resize:function(){var t=this._adaptor.getConfig(),e=t._navigateRightMargin,i=t._navigateTopMargin,r=t._navigateWidthSize,n=this._moduler._camera,o=n._x+n._width-e-r,a=n._y+n._height-i-r,s=this._moduler.getModunit(Di.CUBE_NAVIGATE);s._glstateset.getGLState(Fi.Viewport).resize(o,a,r,r),s._camera.resize(o,a,r,r)},singlePick:function(t,e){var i=this._moduler.getModunit(Di.CUBE_NAVIGATE),r=i._camera,n=r._x,o=r._y,a=n+r._width,s=o+r._height;if(t>n&&t<a&&e>o&&e<s){var h=J.MemoryPool.alloc(),u=J.MemoryPool.alloc();r.computeScreenToWorldNearFarPoint(t,e,h,u,!0);var c=[];i.linesegmentIntersect(c,h,u,Oi.SELECTION);var l=c.length;if(0!==l)for(var g=0;g<l;g++){var _=c[g].getDrawable().getGeometry();if(_){var d=_.getName();if(d!==zi.UNKNOWN){this._adaptor.getOperation(Ti.ROAMING).locate(d),this._picking=!0;break}}}J.MemoryPool.free(h),J.MemoryPool.free(u)}}}),Vo.prototype[Bi.MOUSE_LEFTPUSH]=function(t){var e=this.getPositionRelativeToCanvas(t,!1);return this.singlePick(e[0],e[1]),this._picking&&this._moduler.requestRedraw(),t.preventDefault(),this._picking},Vo.prototype[Bi.MOUSE_LEFTDRAG]=function(t){return this._picking},Vo.prototype[Bi.MOUSE_LEFTRELEASE]=function(t){var e=this._picking;return this._picking=!1,e},Vo.prototype[Bi.TOUCH_CLICK]=function(t){var e=this._moduler.getCamera().fromNormalizedX(t[0]),i=this._moduler.getCamera().fromNormalizedY(t[1]);this.singlePick(e,i);var r=this._picking;return r&&(this._moduler.requestRedraw(),this._picking=!1),r};var ko=Vo,Uo=r(18),Ho=r.n(Uo),jo=function(t){Bi.call(this,t)};(jo.prototype=Object.create(Bi.prototype)).constructor=jo,Object.assign(jo.prototype,{});var Yo=jo,zo=function(t,e,i){ki.call(this),this._mask=_e.DISABLE,t&&this.setMask(t),this._color=w.new(),e&&this.setColor(e[0],e[1],e[2],e[3]),this._depth=1,i&&this.setDepth(i)};(zo.prototype=Object.create(ki.prototype)).constructor=zo,Object.assign(zo.prototype,{type:function(){return Fi.Clear},getColor:function(){return this._color},setColor:function(t,e,i,r){w.set(this._color,t,e,i,r)},copyColor:function(t){w.copy(this._color,t)},setDepth:function(t){this._depth=t},getDepth:function(){return this._depth},setMask:function(t){this._mask=t},getMask:function(){return this._mask},apply:function(t){var e=t.gl();this._mask!==_e.DISABLE&&(this._mask&_e.COLOR_BUFFER_BIT&&e.clearColor(this._color[0],this._color[1],this._color[2],this._color[3]),this._mask&_e.DEPTH_BUFFER_BIT&&(e.depthMask(!0),e.clearDepth(this._depth)),e.clear(this._mask))}}),zo.wind=zo.prototype.wind=K.GLCLEAR;var Wo=zo,Xo=function(t,e,i,r,n){ki.call(this),this._mode=_e.DISABLE,t&&(this._mode=t),this._x=void 0!==e?e:0,this._y=void 0!==i?i:0,this._width=void 0!==r?r:0,this._height=void 0!==n?n:0};(Xo.prototype=Object.create(ki.prototype)).constructor=Xo,Object.assign(Xo.prototype,{type:function(){return Fi.Scissor},resize:function(t,e,i,r){this._x=t,this._y=e,this._width=i,this._height=r},getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},apply:function(t){var e=t.gl();this._mode===_e.DISABLE?e.disable(_e.SCISSOR_TEST):(e.enable(_e.SCISSOR_TEST),e.scissor(this._x,this._y,this._width,this._height))}}),Xo.wind=Xo.prototype.wind=K.GLSCISSOR;var Jo=Xo,qo={MiniOrth:1e4,MapWidth:300,MapHeight:200,PosX:0,PosY:0,LocationSize:[20,28],LocationSizeBig:[20,42],BackgroundColor:[0,0,0,1],ModelRangeColor:[.2,.2,.2,1],WallColor:[215/255,1,1,1],DoorColor:[246/255,176/255,0,1],StairColor:[.3,.5,.3,1],OrthSizeOfColorDoor:4e4,CompFilter:new Set([Ut.Wall,Ut.Door,Ut.Window,Ut.Stair,Ut.Column,Ut.StructuralWall,Ut.StructuralColumn,Ut.CurtainWallMullion,Ut.CurtainWallPanel]),FloorMinH:300,FloorTextSize:20,FloorTextColor:[1,1,1,1]};Object.freeze(qo);var Zo=qo,Ko=function(t){uo.call(this,t),this._entityStateset=null,this._categoryDrawabls=new Map,this.orthData={xmin:0,xmax:0,ymin:0,ymax:0,psW:1,psH:1},this._glclear=new Wo(_e.COLOR_BUFFER_BIT|_e.DEPTH_BUFFER_BIT,Zo.BackgroundColor,.1),this._gllighting=new Vn,this._glfunction=new zn};(Ko.prototype=Object.create(uo.prototype)).constructor=Ko,Object.assign(Ko.prototype,{reset:function(){this._categoryDrawabls.clear()},setBackgroundColor:function(t){this._glclear.copyColor(t)},addCategoryDrawable:function(t,e){var i,r=this._categoryDrawabls.get(e);r||(r=[],this._categoryDrawabls.set(e,r)),(i=r).push.apply(i,Ho()(t))},draw:function(){if(this._isvalid){this._camera.updatePixelSizeRatio(),this._dynamicStruct&&this.traverse();var t=this._moduler.getGLContext(),e=t.gl();e.enable(e.SCISSOR_TEST),e.scissor(this._camera.getX(),this._camera.getY(),this._camera.getWidth(),this._camera.getHeight()),this._glclear.apply(t),e.disable(e.SCISSOR_TEST),this.draw1(),this.updateOrthBox(),this._renderer.applyGLStateset(this._entityStateset);var i=!0,r=!1,n=void 0;try{for(var a,s=this._categoryDrawabls[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var h=o()(a.value,2),u=h[0],c=h[1],l=!0,g=!1,_=void 0;try{for(var d,A=c[Symbol.iterator]();!(l=(d=A.next()).done);l=!0){var p=d.value,I=p.getBoundingBox();if(!this.isCulled(I)){p._currentGLMaterial=u,p._currentGLLighting=this._gllighting,p._currentGLFunction=this._glfunction;var f=this._moduler._factory.getGLProgram(p.getProgramType());this._renderer.applyGLProgram(f),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(p._transform),this._renderer.applyGLShadings(p._currentGLMaterial,p._currentGLLighting,p._currentGLFunction),p._glgeometry.drawSolid()}}}catch(t){g=!0,_=t}finally{try{l||null==A.return||A.return()}finally{if(g)throw _}}}}catch(t){r=!0,n=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}}},updateOrthBox:function(){var t={},e=this._camera;e.getProjectionOrthogonal(t);var i=e.getCenter();this.orthData.xmin=i[0]+t.left,this.orthData.xmax=i[0]+t.right,this.orthData.ymin=i[1]+t.bottom,this.orthData.ymax=i[1]+t.top,this.orthData.psW=3*(t.right-t.left)/e._width,this.orthData.psH=3*(t.top-t.bottom)/e._height},isCulled:function(t){var e=Math.max(t.getXMin(),this.orthData.xmin)<Math.min(t.getXMax(),this.orthData.xmax)&&Math.max(t.getYMin(),this.orthData.ymin)<Math.min(t.getYMax(),this.orthData.ymax),i=t.getXMax()-t.getXMin()>this.orthData.psW||t.getYMax()-t.getYMin()>this.orthData.psH;return!(e&&i)}});var Qo=Ko,$o=function(t){Yo.call(this,t),this._modunit=null,this._curFloor=null,this._floorInfos=[],this._lastRoamPos=[0,0,0],this._viewport=null,this._wallMaterial=null,this._doorMaterial=null,this._stairMaterial=null,this._uiRoot=null,this._rangeNode=null,this._locationGeo=null,this._locationBigGeo=null,this._locationTrans=null,this._pushed=!1};($o.prototype=Object.create(Yo.prototype)).constructor=$o,Object.assign($o.prototype,{type:function(){return Ti.MINIMAP},create:function(){var t=new Qo(this._moduler);this._moduler.setModunit(Di.MINIMAP_MODULE,t);var e=this._adaptor.getConfig(),i=e._minimapX,r=e._minimapY,n=e._minimapWidth,o=e._minimapHeight,a=new lo;this._viewport=new Hi(i,r,n,o),a.setGLState(this._viewport),a.setGLState(new Yi(_e.LEQUAL,0,.1,!0)),t._entityStateset=a;var s=new lo;s.setGLState(this._viewport),s.setGLState(new Yi(_e.LEQUAL,0,.1,!0)),t._glstateset=s;var h=new mo;h.resize(i,r,n,o);var u=J.MemoryPool.alloc();J.set(u,0,0,100);var c=J.MemoryPool.alloc();J.set(c,0,0,-1);var l=J.MemoryPool.alloc();J.set(l,0,1,0),h.setViewLookAt(u,c,l),J.MemoryPool.free(u),J.MemoryPool.free(c),J.MemoryPool.free(l),h.setProjectionOrthogonal(-1e3,1e3,-1e3,1e3,1,1e3),t._camera=h;var g=new _o;g.setGLMaterial(new hn),g.setGLLighting(new Vn),g.setGLFunction(new zn),t._glshadings=g;var _=new yo;_.setName("MinimapAssist"),t._sceneRoot=_,t._dynamicStruct=!0,this._modunit=t,this._wallMaterial=new un(Zo.WallColor),this._doorMaterial=new un(Zo.DoorColor),this._stairMaterial=new un(Zo.StairColor),this.updateStorey(),this.updateBoundingBox(),this.initUI(),this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.MINIMAP_MODULE),this._moduler.requestRedraw()},sync:function(){this.syncCamera()},update:function(){this._modunit.reset(),this.updateDrawables(),this.updateBoundingBox()},updateBoundingBox:function(){var t=this._moduler._scenery.getBoundingBox(),e=this._modunit._camera;if(t.valid()){var i=J.MemoryPool.alloc();J.sub(i,t.getMax(),t.getMin()),i[0]*=.5,i[1]*=.5;var r=e._width/e._height;r>i[0]/i[1]?i[0]=i[1]*r:i[1]=i[0]/r,e.setProjectionOrthogonal(-i[0],i[0],-i[1],i[1],1,i[2]+100),J.MemoryPool.free(i)}else e.setProjectionOrthogonal(-1e3,1e3,-1e3,1e3,1,1e3);this.updateRangeGeo(t)},initUI:function(){var t=this,e=this._modunit,i=this._modunit._sceneRoot;this._uiRoot=new Pn,this._uiRoot.isAutoScaleToScreen(!0),this._uiRoot.setPosition([0,0,0]),i.addChild(this._uiRoot),this._locationTrans=new pt,this._uiRoot.addChild(this._locationTrans);var r=Zo.LocationSize[0],n=Zo.LocationSize[1],o=.5*-r,a=.5*-r,s=.5*r,h=n-.5*r;this._locationGeo=this.makeRectGeo([o,a],[s,h],0,!0),this._locationTrans.addChild(this._locationGeo);var u=new Image;u.onload=function(){var i=new Rt;i.setID(e.getID()),i._type=Pt.MATERIAL6,i._textureImage=u,i._discardAlpha=.1,t._locationGeo._material=i,t._moduler.requestRedraw()},u.src=this.getLocateImg(),o=.5*-(r=Zo.LocationSizeBig[0]),a=.5*-r,s=.5*r,h=(n=Zo.LocationSizeBig[1])-.5*r,this._locationGeoBig=this.makeRectGeo([o,a],[s,h],0,!0);var c=new Image;c.onload=function(){var i=new Rt;i.setID(e.getID()),i._type=Pt.MATERIAL6,i._textureImage=c,i._discardAlpha=.1,t._locationGeoBig._material=i,t._moduler.requestRedraw()},c.src=this.getLocateImgBig()},updateStorey:function(){var t=this._adaptor.getConfig()._minimapFloors;if(t){var e=t.length;if(0!==e){var i=0;this._adaptor._transfer&&(i=this._adaptor._transfer._relativeTranslate[2]);for(var r=0;r<e;r++){var n=t[r],o=n.height;o<Zo.FloorMinH&&(o=Zo.FloorMinH),this._floorInfos.push({name:n.name,box:new at,minH:i+n.elevation,maxH:i+n.elevation+o,walls:[],doors:[],stairs:[]})}this.updateDrawables()}}},updateDrawables:function(){var t=this._moduler._scenery._componentDrawables,e=t.length,i=this._floorInfos.length;if(0!==e&&0!==i)for(var r=0;r<e;r++)for(var n=t[r],o=n.getBoundingBox(),a=0;a<i;a++){var s=this._floorInfos[a];if(Math.max(o.getZMin(),s.minH)<Math.min(o.getZMax(),s.maxH)){s.box.expandByBoundingBox(o);var h=n._renderEntity._entity.getParameter(Gt.CATEGORY_TYPE);Zo.CompFilter.has(h)&&(h===Ut.Stair?s.stairs.push(n):h===Ut.Door||h===Ut.Window?s.doors.push(n):s.walls.push(n))}}},updateRangeGeo:function(t){if(this._rangeNode)this._rangeNode.clearChildren();else{this._rangeNode=new gt;var e=new Rt;e.setID(this._modunit.getID()),e._type=Pt.MATERIAL1,e._pureColor=Zo.ModelRangeColor,this._rangeNode._material=e,this._modunit._sceneRoot.addChild(this._rangeNode)}if(t.valid()){var i=this.makeRectGeo([t.getXMin(),t.getYMin()],[t.getXMax(),t.getYMax()],t.getZMin()+1);this._rangeNode.addChild(i)}},makeRectGeo:function(t,e,i,r){var n=new Et;n.setID(this._modunit.getID());var o=new fe;n._vertexBuffer=o,o._size=6;var a=new Ae;a._componentSize=3,a._componentType=_e.FLOAT,a._attributeType=le.POINT,a._bufferData=new Float32Array([t[0],t[1],i,e[0],t[1],i,e[0],e[1],i,t[0],e[1],i]),o._datas.push(a);var s=new Ae;s._componentSize=2,s._componentType=_e.FLOAT,s._attributeType=le.TEXTURE,s._bufferData=new Float32Array([0,0,1,0,1,1,0,1]),o._datas.push(s);var h=new de;return h._type=mt.INDEX_TRIANGLES,h._start=0,h._count=6,n._solidVertexAligns.push(h),n._indexes=new Uint8Array([0,1,2,2,3,0]),n},updateProperty:function(){var t=this._adaptor.getConfig(),e=t._minimapX,i=t._minimapY,r=t._minimapWidth,n=t._minimapHeight;this._modunit.setBackgroundColor(t._minimapBackgroundColor),this._viewport.resize(e,i,r,n),this._modunit._camera.resize(e,i,r,n);var o=this._modunit._camera,a={};o.getProjectionOrthogonal(a);var s=r/n*(a.top-a.bottom)*.5;o.setProjectionOrthogonal(-s,s,a.bottom,a.top,a.near,a.far),this._moduler.requestRedraw()},locateFloor:function(t){var e=this.getFloorByName(t);if(e){var i=[];return this._adaptor.getOperation(Ti.ROAMING).getPosition(i),this._adaptor.getOperation(Ti.ROAMING).locateToPos([i[0],i[1],e.minH+1]),this._moduler.requestRedraw(),!0}return!1},getFloorByName:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this._floorInfos[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;if(a.name===t)return a}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}return null},findFloorsByHeight:function(t){for(var e=null,i=0;i<this._floorInfos.length;i++){var r=this._floorInfos[i],n=r.minH,o=r.maxH;if(t>=n&&t<o){e=r;break}}return e},switchFloor:function(t){this._curFloor!==t&&(this._curFloor=t,this._modunit.reset(),this._curFloor&&(this._modunit.addCategoryDrawable(t.walls,this._wallMaterial),this._modunit.addCategoryDrawable(t.doors,this._doorMaterial),this._modunit.addCategoryDrawable(t.stairs,this._stairMaterial)),this._moduler.requestRedraw())},syncCamera:function(){var t=this._moduler._camera,e=t.getEye(),i=t.getCenter(),r=(t.getUp(),[]);this._adaptor.getOperation(Ti.ROAMING).getPosition(r),Math.abs(r[2]-this._lastRoamPos[2])>.001&&this.switchFloor(this.findFloorsByHeight(r[2]));var n=this._modunit._camera,o=this._moduler._scenery.getBoundingBox(),a=o.getZMax(),s=(o.getZMin(),[r[0],r[1],a+2]),h=[s[0],s[1],s[2]-1];n.setViewLookAt(s,h,[0,1,0]),this._uiRoot.setPosition([r[0],r[1],a]);var u=J.MemoryPool.alloc();J.sub(u,i,e),u[2]=0,0===J.normalize(u,u)&&J.set(u,0,1,0);var c=J.MemoryPool.alloc(),l=J.MemoryPool.alloc();J.set(l,0,0,1),J.cross(c,u,l),J.normalize(c,c),it.set(this._locationTrans.getMatrix(),c[0],c[1],c[2],0,u[0],u[1],u[2],0,l[0],l[1],l[2],0,0,0,0,1),J.MemoryPool.free(c),J.MemoryPool.free(u),J.MemoryPool.free(l),this._lastRoamPos=r},highlightLocationPoint:function(t){this._locationTrans.clearChildren(),this._locationTrans.addChild(t?this._locationGeoBig:this._locationGeo),this._moduler.requestRedraw()},toMapWorld:function(t){var e=this._modunit._camera,i=[];return e.computeScreenToWorld([e.getNormalizedX(t[0]),e.getNormalizedY(t[1]),1],i),i},insideViewport:function(t){var e=this._modunit._camera,i=e._x,r=e._y,n=i+e._width,o=r+e._height;return t[0]>i&&t[0]<n&&t[1]>r&&t[1]<o},singlePick:function(t){var e;if(!this.insideViewport(t))return!1;(e=this._pickEvent).setInitial.apply(e,Ho()(t)),this._pushed=!0;var i=this._modunit._camera,r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc(),o=[i.getNormalizedX(t[0]),i.getNormalizedY(t[1])];i.computeScreenToWorldNearFarPoint(o[0],o[1],r,n,!1);var a=[];this._modunit.linesegmentIntersect(a,r,n,Oi.SELECTION),J.MemoryPool.free(r),J.MemoryPool.free(n);var s=!1;if(0!==a.length){var h=a[0].getDrawable().getGeometry();h!==this._locationGeoBig&&h!==this._locationGeo||(s=!0)}return s?(this._pickedLocation=!0,this.highlightLocationPoint(!0),!0):(this._pickedLocation=!1,this._draged=!1,!0)},onPickRelease:function(t){if(this._pushed){if(this._pickedLocation)this.highlightLocationPoint(!1),this._pickedLocation=!1;else if(this._draged)this._draged=!1;else{var e=[];this._adaptor.getOperation(Ti.ROAMING).getPosition(e);var i=this.toMapWorld(t);this._adaptor.getOperation(Ti.ROAMING).locateToPos([i[0],i[1],e[2]]),this._moduler.requestRedraw()}return this._pushed=!1,!0}return!1},dragLookArrow:function(){var t=this.toMapWorld(this._pickEvent.getLast());t[2]=0;var e=this.toMapWorld(this._pickEvent.getCurrent());e[2]=0;var i=[];this._adaptor.getOperation(Ti.ROAMING).getPosition(i),i[2]=0;var r=[];J.sub(r,t,i),J.normalize(r,r);var n=[];J.sub(n,e,i),J.normalize(n,n),this._adaptor.getOperation(Ti.ROAMING).rotateAngle(r,n),this._moduler.requestRedraw()},dragMap:function(){var t=this.toMapWorld(this._pickEvent.getLast()),e=this.toMapWorld(this._pickEvent.getCurrent()),i=[];J.sub(i,e,t),i[2]=0;var r=[];this._adaptor.getOperation(Ti.ROAMING).getPosition(r),J.sub(r,r,i),this._adaptor.getOperation(Ti.ROAMING).locateToPos(r),this._moduler.requestRedraw()},onDrag:function(t){var e;return!!this._pushed&&((e=this._pickEvent).setCurrent.apply(e,Ho()(t)),this._draged=!0,this._pickedLocation?this.dragLookArrow():this.dragMap(),this._pickEvent.sync(),!0)},getOrthWH:function(){var t={};return this._modunit._camera.getProjectionOrthogonal(t),[t.right-t.left,t.top-t.bottom]},setOrthWH:function(t,e){var i=this._modunit._camera,r={};i.getProjectionOrthogonal(r);var n=i._width/i._height;t/e>n?e=t/n:t=e*n,i.setProjectionOrthogonal(.5*-t,.5*t,.5*-e,.5*e,r.near,r.far)},zoomMapCamera:function(t){var e=this._moduler._scenery.getBoundingBox();if(e.valid()){var i=this.getOrthWH(),r=new at;r.copy(e);var n=[];this._adaptor.getOperation(Ti.ROAMING).getPosition(n),r.expandByVec3(n);var o=2.01*(r.getXMax()-r.getXMin()),a=2.01*(r.getYMax()-r.getYMin()),s=Zo.MiniOrth,h=Math.max(s,Math.min(o,i[0]*t)),u=Math.max(s,Math.min(a,i[1]*t));this.setOrthWH(h,u),Math.max(h,u)<Zo.OrthSizeOfColorDoor?this._doorMaterial.setColor(Zo.DoorColor):this._doorMaterial.setColor(Zo.WallColor),this._moduler.requestRedraw()}},zoomWheel:function(t){var e=this.getPositionRelativeToCanvas(t,!1);return!!this.insideViewport(e)&&(t.deltaY>0?this.zoomMapCamera(1.1):this.zoomMapCamera(.9),t.preventDefault(),!0)},pickPush:function(t){var e=this.getPositionRelativeToCanvas(t,!1);return this.singlePick(e)},pickDrag:function(t){var e=this.getPositionRelativeToCanvas(t,!1);return this.onDrag(e)},pickRelease:function(t){var e=this.getPositionRelativeToCanvas(t,!1);return this.onPickRelease(e)},getLocateImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAAXNSR0IArs4c6QAAAjhJREFUSA2tlMFO6kAUhk9H6AKFHeDKB+gzuHLhA5joE7gxuvANblz4CMaNC+MSk/sAbmVzCQmJAe7elXC5CZRI4sDl3PNPO0TbAi1xksm0nf//2n86Z4hSNCY6Rk8hXS8RUFl6P+zl9Y41CgHVpHPYa2vkq6cFgqgWZsfNogvIRrUgOyJ+9uhi+hzVwuyYLbrAkqJamB3TRV8R1YLsmBg9l/Bbbsh1y/2zM+rv75Ozu0tbpZKR/fN94rc3qtTrVLm9LZPWNzJxksAIHiFq/+KCX56feTQa8bKGOWighScRyNVqpf3woHu9XsBpt5kvL5k9j3lnJ+i4xjPMSRsMBvz7/l7DG4N2arU/w+GQ+eOD+fycWSm7VvERc9CIFp6Xx8e/X4CdTucKb2Ot53xwEAfEN3eggVY8SAWGgcqXu61WSz5NGt66zLzsOTzSQoZLQr72fT9Yl1UxlwHhkTXFjwJLTSaTo2KxSHR3RzSff1mKVDfwiLckWwss5bpu1RifnlL5E0WhFyyVy+W2jej1NVGb6mHozefz2yqVIYNIzWazd6Pf28tgi0hD73Q6fVda656ZPjyMqDLchl6wVKFQ+Dkej4lOT4nUBisAj3hl6xFYcr5/88ZGMJSNORQ2LD2U7aL07Eo1Go1f5nAANO3hIFp4ms1m3XIWo0RXmDCHBIozxfGFVPgQeBeg6AU+HYVu6hvghIY5aGIxBeZEgbgXhtvtdn+gNlFOtpqwZ7E18Dc9z7tyHEdH/f8B69m1MT/rZ9cAAAAASUVORK5CYII="},getLocateImgBig:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAAAAXNSR0IArs4c6QAAAwtJREFUSA2tVs1q20AQHi+Wip3Yl4KbFpprwZfeCqU5BZpTaKHPkEtIDnmDkkMPfYJcEnIIufYBco0v/qGmEPsBUmjt4oJ/iIMl4+18a0lI1q6khC4sXu1836eZnZ2RiTKMJtErzAxQEllAjPnozVR4JkHJgpipagzIpYF+EFVmRL+Be0L0/DXRnyROqocO0S57JzCxThKDLVUwHGp4bRJODPknUeEX0V8mFzyB+xdET18S3ZsEEz3sEe2ExKBR8PZMeskhL4g+rDJ1e2GM0UMkgYG6JKgkhUXCa6Ngi+gtAythsLeueDaNKSHLHJrxIifZjB5y+mPn57uUZNMKohHwGRqbAWymZqEVZE+M4fpemjBawSwVYcLEKsVvBkzQvsz3kIkLXbOIkfxm4BNNv3ihrlnEBE2h6IR12EjImmag0wnvxZpFxEMu/PeM9jtLmGhao1mAE4yIYFIFBIyVxSonCBmH3Fi2+krOtsna3yd3a4vsjQ2yymUl447H5PR6ZNVq5J6ckHQ4LfxJeMOfBmQ98i6++e/qRLJ9eCi/X1/L0WgkTQM2YIAFB9yIGB6a+fzX+vm57Pf7S52bGymPjqSsVqVcX19OrLEHG4/BYCCbZ2cS3LjgxcV0OBzKxWwm5cGBlEJIPgb9hI0xwILTuLycRgQ7nc4x3sZnspDb23oRnTiwzEFU0FCi7LndbreHKgZ4piMm7YHDw9OwiZW/jMfj5bkkhWkSBYfPFImClphOp59KpRLR6SknPpr5yLmYHsBhbpmvFrSEbdvPFPbqykRJ3/e40BL5fH5NMW5v04kmhMe1LGstUnom/EP2xXw+v1OEzc2H8KJYj+u67p1wHKevrDv41/HI4XGhJYrF4rfJZEK0t8ft4REnAA5z+eoRtLi2/vPFRpAoG9UUHll6KNug9PxTazQadRS6queMzQFYcFqtVs3XCX45dAGDahIozgztC1HBEXADodUFXEehq/qGsGbABkwsTBYLPgFhYdawu93uZ9QmysmvJtxZXA1ks1qtHudyOfUNCHP/AYmTnQWgjVdvAAAAAElFTkSuQmCC"}});var ta=$o,ea=function(t){this._adaptor=t,this._cubeNavigate=null,this._minimap=null};ea.prototype={setNavigateResource:function(t,e,i,r,n,o,a){var s=[t,e,i,r,n,o,a];Y.isArrayValid(s)&&(this._cubeNavigate&&this._cubeNavigate.updateResources(s),this._adaptor.getConfig().setNavigateResources(s))},setNavigateProperty:function(t,e,i){var r=this._adaptor.getConfig();r._navigateRightMargin=t,r._navigateTopMargin=e,r._navigateWidthSize=i,this._cubeNavigate&&this._cubeNavigate.resize()},openNavigateAssist:function(){return this._adaptor.getConfig().isNavigateResourcesValid()?(this._cubeNavigate=new ko(this._adaptor),this._adaptor.setOperation(this._cubeNavigate),!0):(console.log("navigate resource has not init!"),!1)},closeNavigateAssist:function(){this._cubeNavigate&&(this._adaptor.resetOperation(Ti.NAVIGATE),this._cubeNavigate=null)},openMinimapAssist:function(){this._minimap||(this._minimap=new ta(this._adaptor),this._adaptor.setOperation(this._minimap))},closeMinimapAssist:function(){this._minimap&&(this._adaptor.resetOperation(Ti.MINIMAP),this._minimap=null)},setMinimapProperty:function(t){if(t){var e=this._adaptor.getConfig();if(void 0!==t.x&&(e._minimapX=t.x),void 0!==t.y&&(e._minimapY=t.y),void 0!==t.width&&(e._minimapWidth=t.width),void 0!==t.height&&(e._minimapHeight=t.height),void 0!==t.backgroundColor){var i=t.backgroundColor;w.set(e._minimapBackgroundColor,i[0]/255,i[1]/255,i[2]/255,i[3]/255)}this._minimap&&this._minimap.updateProperty()}},setMinimapFloor:function(t){if(Y.isArrayType(t)){var e=this._adaptor.getConfig(),i=t.concat();e._minimapFloors=i,this._minimap&&this._minimap.updateStorey()}},locateMinimapFloor:function(t){return!!this._minimap&&this._minimap.locateFloor(t)},getAssistState:function(){var t={};return t._navigateOpened=!!this._cubeNavigate,t._minimapOpened=!!this._minimap,t}};var ia=ea,ra=function(){this._changed=!1};ra.prototype={isChanged:function(){return this._changed},setChanged:function(t){this._changed=t}};var na=ra,oa=function(){na.call(this),this._name="",this._id=-1,this._parent=null,this._children=[],this._objects=[]},aa=0;oa.getInstanceID=function(){return aa+=1},(oa.prototype=Object.create(na.prototype)).constructor=oa,Object.assign(oa.prototype,{setName:function(t){this._name=t},getName:function(){return this._name},setID:function(t){this._id=t},getID:function(){return-1===this._id&&(this._id=oa.getInstanceID()),this._id},reset:function(){this._name="",this._parent=null,this._children.length=0,this._objects.length=0},getParent:function(){return this._parent},setParent:function(t){this._parent=t},getChildren:function(){return this._children},addChild:function(t){this._children.push(t)},addObject:function(t){this._objects.push(t)},getObjects:function(){return this._objects},clearObjects:function(){this._objects.length=0},contain:function(t){for(var e=this._children.length,i=0;i<e;i++){var r=this._children[i];if(r.getName()===t)return r}},isLeaf:function(){return 0===this._children.length}});var sa=oa,ha=function(){sa.call(this),this._boundingBox=new at};ha.MAXDRAWABLE=1e3,(ha.prototype=Object.create(sa.prototype)).constructor=ha,Object.assign(ha.prototype,{reset:function(){sa.prototype.reset.call(this),this._boundingBox.reset()},addObject:function(t){sa.prototype.addObject.call(this,t),t._octreeNode=this,this._boundingBox.expandByBoundingBox(t.getBoundingBox())},getBoundingBox:function(){return this._boundingBox}});var ua=ha,ca=function(){this._root=this.createNode(),this._root.setName("TreeRoot"),this._nodes=new Map};Object.assign(ca.prototype,{push:function(t){this._root.addObject(t)},root:function(){return this._root},reset:function(){this._root.reset(),this._nodes.clear()},createNode:function(){return null}});var la=ca,ga=function(){sa.call(this),this._rule=void 0,this._sort=void 0};(ga.prototype=Object.create(sa.prototype)).constructor=ga,Object.assign(ga.prototype,{reset:function(){sa.prototype.reset.call(this),this._rule=void 0,this._sort=void 0},getRule:function(){return this._rule},setRule:function(t){this._rule=t},getSort:function(){return this._sort},setSort:function(t){this._sort=t}});var _a=ga,da=function(t){la.call(this),this._rule=t};(da.prototype=Object.create(la.prototype)).constructor=da,Object.assign(da.prototype,{createNode:function(){return new _a},push:function(t){for(var e=this._root,i=null,r=this._rule.length,n=0;n<r;n++){var o=this._rule[n],a=t.getParameter(o);if(i=e.contain(a))e=i;else{switch(i=this.createNode(),o){case Gt.STOREY_NAME:i.setSort(t.getElevation());break;case Gt.DOMAIN_NAME:i.setSort(t.getDomain());break;case Gt.CATEGORY_NAME:i.setSort(t.getCategory())}i.setRule(o),i.setName(a),e.addChild(i),i.setParent(e),this.ascendingSort(e,i),e=i,this._nodes.set(i.getID(),i)}}return e},ascendingSort:function(t,e){for(var i=null,r=!1,n=t.getChildren(),o=n.length,a=0;a<o;a++){var s=n[a];if(r)n[a]=i,i=s;else{var h=s.getSort(),u=e.getSort();h&&u?h>u&&(n[a]=e,i=s,r=!0):s.getName()>e.getName()&&(n[a]=e,i=s,r=!0)}}}});var Aa=da,pa=function(){_a.call(this),this._state=Re.c.CHECKED};(pa.prototype=Object.create(_a.prototype)).constructor=pa,Object.assign(pa.prototype,{reset:function(){_a.prototype.reset.call(this),this._state=Re.c.CHECKED},setState:function(t){this._state=t},getState:function(){return this._state},sync:function(){var t=this._objects.length;if(0!==t){for(var e=0,i=0;i<t;i++){this._objects[i].isShown()&&e++}t===e?this.setState(Re.c.CHECKED):0===e?this.setState(Re.c.UNCHECKED):this.setState(Re.c.PARTIALLYCHECKED),this.syncParent(),this._changed=!1}},hideChildren:function(){if(this._state!==Re.c.UNCHECKED){this._state=Re.c.UNCHECKED;for(var t=this._children.length,e=0;e<t;e++)this._children[e].hideChildren();t=this._objects.length;for(var i=0;i<t;i++)this._objects[i].displayHide()}},showChildren:function(){if(this._state!==Re.c.CHECKED){this._state=Re.c.CHECKED;for(var t=this._children.length,e=0;e<t;e++)this._children[e].showChildren();t=this._objects.length;for(var i=0;i<t;i++)this._objects[i].displayShow()}},syncParent:function(){if(this._parent){var t=this._parent,e=t.getChildren(),i=e.length;if(this._state===Re.c.PARTIALLYCHECKED)t.setState(Re.c.PARTIALLYCHECKED);else if(this._state===Re.c.UNCHECKED){for(var r=0,n=0;n<i;n++)e[n].getState()===Re.c.UNCHECKED&&r++;r===i?t.setState(Re.c.UNCHECKED):t.setState(Re.c.PARTIALLYCHECKED)}else if(this._state===Re.c.CHECKED){for(var o=0,a=0;a<i;a++)e[a].getState()===Re.c.CHECKED&&o++;o===i?t.setState(Re.c.CHECKED):t.setState(Re.c.PARTIALLYCHECKED)}t.syncParent()}}});var Ia=pa,fa=function(t){Aa.call(this,t)};(fa.prototype=Object.create(Aa.prototype)).constructor=fa,Object.assign(fa.prototype,{push:function(t){var e=Aa.prototype.push.call(this,t.getEntity());e&&(e.addObject(t),t.addDisplayObserver(e))},sync:function(){var t=!1;return this._nodes.forEach((function(e){e.isLeaf()&&e.isChanged()&&(e.sync(),t=!0)})),t},createNode:function(){return new Ia},displayNode:function(t){if(t===this._root.getID())return this._root.getState()===Re.c.CHECKED?this.hideRoot():this.showRoot(),!0;var e=this._nodes.get(t);return!!e&&(e.getState()===Re.c.CHECKED?e.hideChildren():e.showChildren(),e.syncParent(),!0)},hideRoot:function(){this._root.hideChildren()},showRoot:function(){this._root.showChildren()},highlightNode:function(t){if(t===this._root.getID())return this.hightlightChildren(this._root),!0;var e=this._nodes.get(t);return!!e&&(this.hightlightChildren(e),!0)},hightlightChildren:function(t){for(var e=t.isLeaf(),i=t.getChildren(),r=i.length,n=0;n<r;n++){var o=i[n];e?this._scenery.highlightEntityBySelect(o,!0):this.hightlightChildren(o)}},saveViewState:function(t){for(var e=this._rule.length,i=0;i<e;i++)t._treeRule.push(this._rule[i].toString());for(var r=this._root.getChildren(),n=r.length,o=0;o<n;o++)this.saveHideNodeViewState(r[o],t._hideNodePaths)},saveHideNodeViewState:function(t,e){var i=t.getState();if(i===Re.c.UNCHECKED){var r=[];r.push(t.getName()),this.saveHidePathViewState(t,r),e.push(r)}else if(i===Re.c.PARTIALLYCHECKED)for(var n=t.getChildren(),o=n.length,a=0;a<o;a++)this.saveHideNodeViewState(n[a],e);else Re.c.CHECKED},saveHidePathViewState:function(t,e){var i=t.getParent();this._root!==i&&(e.push(i.getName()),this.saveHidePathViewState(i,e))},loadViewState:function(t){for(var e=[],i=this._rule.length,r=0;r<i;r++)e.push(this._rule[r].toString());if(!Y.compareArray(t._treeRule,e))return!1;this.showRoot();for(var n=t._hideNodePaths.length,o=0;o<n;o++)for(var a=t._hideNodePaths[o],s=this._root.getChildren(),h=s.length,u=0;u<h;u++)this.loadHideNodeViewState(s[u],a);return!0},loadHideNodeViewState:function(t,e){var i=e.length-1;if(t.getName()===e[i])if(e.pop(),0===i)t.hideChildren(),t.syncParent();else for(var r=t.getChildren(),n=r.length,o=0;o<n;o++)this.loadHideNodeViewState(r[o],e)}});var Ca=fa,ma=function(t){Bi.call(this,t),this._componentTrees=new Map};(ma.prototype=Object.create(Bi.prototype)).constructor=ma,Object.assign(ma.prototype,{type:function(){return Ti.CONTROL},sync:function(){var t=this;this._componentTrees.forEach((function(e,i){e.sync()&&t.updateTreeData(e.root(),i)}))},update:function(t){var e=this;this._componentTrees.forEach((function(t,i){t.showRoot(),e.createTreeData(t.root(),i)}))},highlightEntities:function(t){if(Y.isStringType(t)){if(this._moduler.getScenery().highlightEntityBySearch(t))return this._moduler.requestRedraw(),!0}else if(Y.isArrayType(t)){for(var e=t.length,i=0,r=0;r<e;r++)this._moduler.getScenery().highlightEntityBySearch(t[r])&&i++;return 0!==i&&this._moduler.requestRedraw(),!!i}return!1},unhighlightEntities:function(){this._moduler.getScenery().unhighlightEntities(),this._moduler.requestRedraw()},transparentComponents:function(){this._moduler.getScenery().transparentComponents(),this._moduler.requestRedraw()},untransparentComponents:function(){this._moduler.getScenery().untransparentComponents(),this._moduler.requestRedraw()},showEachComponents:function(){this._moduler.getScenery().showEachComponents(),this._moduler.requestRedraw()},hideEachComponents:function(){this._moduler.getScenery().hideEachComponents(),this._moduler.requestRedraw()},hideSelectComponents:function(){this._moduler.getScenery().hideSelectComponents()&&this._moduler.requestRedraw()},hideUnselectComponents:function(){this._moduler.getScenery().hideUnselectComponents()&&this._moduler.requestRedraw()},showAssignEntities:function(t){if(Y.isStringType(t)){if(this._moduler.getScenery().showAssignEntity(t))return this._moduler.requestRedraw(),1}else if(Y.isArrayType(t)){for(var e=t.length,i=0,r=0;r<e;r++)this._moduler.getScenery().showAssignEntity(t[r])&&i++;return 0!==i&&this._moduler.requestRedraw(),i}return 0},hideAssignEntities:function(t){if(Y.isStringType(t)){if(this._moduler.getScenery().hideAssignEntity(t))return this._moduler.requestRedraw(),1}else if(Y.isArrayType(t)){for(var e=t.length,i=0,r=0;r<e;r++)this._moduler.getScenery().hideAssignEntity(t[r])&&i++;return 0!==i&&this._moduler.requestRedraw(),i}return 0},getLayerList:function(){return this._moduler.getScenery().getLayerList()},showLayerListNode:function(t){if(this._layerLists){if(t>this._layerLists.inner.length)return!1;var e=this._layerLists.inner[t];if(e)return e.show(!0),!0}return!1},hideLayerListNode:function(t){if(this._layerLists){if(t>this._layerLists.inner.length)return!1;var e=this._layerLists.inner[t];if(e)return e.hide(!0),!0}return!1},createComponentTree:function(t,e){if(void 0!==this._componentTrees.get(e))return console.log("Current tree has already used!"),!1;if(!Y.isArrayType(t))return console.log("Invalid rule!"),!1;var i=[],r=t.length;if(0===r)return!1;for(var n=0;n<r;n++){switch(t[n]){case Re.g.PROJECT_NAME:i.push(Gt.MODEL_NAME);break;case Re.g.STOREY_NAME:i.push(Gt.STOREY_NAME);break;case Re.g.TYPE_NAME:i.push(Gt.TYPE_NAME);break;case Re.g.DOMAIN_NAME:i.push(Gt.DOMAIN_NAME);break;case Re.g.CATEGORY_NAME:i.push(Gt.CATEGORY_NAME);break;case Re.g.COMPONENT_NAME:i.push(Gt.ENTITY_NAME);break;case Re.g.COMPONENT_UNIQUEID:i.push(Gt.ENTITY_UNIQUEID);break;case Re.g.COMPONENT_ORIGINID:i.push(Gt.ENTITY_ORIGINID);break;case Re.g.COMPONENT_NAME_ORIGINID:i.push(Gt.ENTITY_NAME_ORIGINID);break;default:return console.log("Invalid rule!"),!1}}var o=this._moduler.getScenery().createComponentTree(i);return this._componentTrees.set(e,o),this.createTreeData(o.root(),e),!0},displayTreeNode:function(t,e){if(e){var i=this._componentTrees.get(e);if(i&&i.displayNode(t))return this.updateTreeData(i.root(),e),this._moduler.requestRedraw(),!0}else{var r=!0,n=!1,a=void 0;try{for(var s,h=this._componentTrees[Symbol.iterator]();!(r=(s=h.next()).done);r=!0){var u=o()(s.value,2),c=u[0],l=u[1];if(l.displayNode(t))return this.updateTreeData(l.root(),c),this._moduler.requestRedraw(),!0}}catch(t){n=!0,a=t}finally{try{r||null==h.return||h.return()}finally{if(n)throw a}}}return!1},hightlightTreeNode:function(t,e){if(e){var i=this._componentTrees.get(e);if(i&&i.highlightNode(t))return this._moduler.requestRedraw(),!0}else{var r=!0,n=!1,a=void 0;try{for(var s,h=this._componentTrees[Symbol.iterator]();!(r=(s=h.next()).done);r=!0){var u=o()(s.value,2);u[0];if(u[1].highlightNode(t))return this._moduler.requestRedraw(),!0}}catch(t){n=!0,a=t}finally{try{r||null==h.return||h.return()}finally{if(n)throw a}}}return!1},showTreeRoot:function(t){var e=this;if(t){var i=this._componentTrees.get(t);return!!i&&(i.showRoot(),this.updateTreeData(i.root(),t),this._moduler.requestRedraw(),!0)}return this._componentTrees.forEach((function(t,i){t.showRoot(),e.updateTreeData(t.root(),i)})),this._moduler.requestRedraw(),!0},hideTreeRoot:function(t){var e=this;if(t){var i=this._componentTrees.get(t);return!!i&&(i.hideRoot(),this.updateTreeData(i.root(),t),this._moduler.requestRedraw(),!0)}return this._componentTrees.forEach((function(t,i){t.hideRoot(),e.updateTreeData(t.root(),i)})),this._moduler.requestRedraw(),!0},setBatchEntities:function(t,e){return this._moduler.getScenery().setBatchEntities(t,e)},removeBatchEntities:function(t){return!!this._moduler.getScenery().removeBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},clearBatchEntities:function(){this._moduler.getScenery().clearBatchEntities(),this._moduler.requestRedraw()},coloringBatchEntities:function(t,e,i,r,n){return!!this._moduler.getScenery().coloringBatchEntities(t,e,i,r,n)&&(this._moduler.requestRedraw(),!0)},discoloringBatchEntities:function(t){return!!this._moduler.getScenery().discoloringBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},highlightBatchEntities:function(t){return!!this._moduler.getScenery().highlightBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},unhighlightBatchEntities:function(t){return!!this._moduler.getScenery().unhighlightBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},transparentBatchEntities:function(t){return!!this._moduler.getScenery().transparentBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},untransparentBatchEntities:function(t){return!!this._moduler.getScenery().untransparentBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},showBatchEntities:function(t){return!!this._moduler.getScenery().showBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},hideBatchEntities:function(t){return!!this._moduler.getScenery().hideBatchEntities(t)&&(this._moduler.requestRedraw(),!0)},setGrowthAsClipping:function(t,e){return!!this._moduler.getScenery().setGrowthAsClipping(t,e)&&(this._moduler.requestRedraw(),!0)},setGrowthAsTinting:function(t,e,i){return!!this._moduler.getScenery().setGrowthAsTinting(t,e,i)&&(this._moduler.requestRedraw(),!0)},setGrowthAsTransparent:function(t){return!!this._moduler.getScenery().setGrowthAsTransparent(t)&&(this._moduler.requestRedraw(),!0)},applyGrowthRatio:function(t,e){return!!this._moduler.getScenery().applyGrowthRatio(t,e)&&(this._moduler.requestRedraw(),!0)},removeGrowth:function(t){return!!this._moduler.getScenery().removeGrowth(t)&&(this._moduler.requestRedraw(),!0)},removeAllGrowth:function(){this._moduler.getScenery().removeAllGrowth(),this._moduler.requestRedraw()},createTreeData:function(t,e){e.children=[],e.parent=t.getParent(),e.name=t.getName(),e.id=t.getID(),e.state=t.getState(),this.createTreeNode(t,e),this._adaptor.getViewCallbacks().forEach((function(t){t(Re.b.DISPLAYTREE_CREATED,e)}))},createTreeNode:function(t,e){if(!t.isLeaf())for(var i=t.getChildren(),r=i.length,n=0;n<r;n++){var o=i[n];if(o){var a={};a.parent=e,a.children=[],a.name=o.getName(),a.id=o.getID(),a.state=o.getState(),e.children.push(a),this.createTreeNode(o,a)}}},updateTreeData:function(t,e){e.state=t.getState(),this.updateTreeNode(t,e),this._adaptor.getViewCallbacks().forEach((function(t){t(Re.b.DISPLAYTREE_UPDATED,e)}))},updateTreeNode:function(t,e){if(!t.isLeaf())for(var i=t.getChildren(),r=e.children,n=i.length,o=0;o<n;o++){var a=i[o],s=r[o];s.state=a.getState(),this.updateTreeNode(a,s)}},saveViewState:function(t){this._moduler.getScenery().saveViewState(t)},loadViewState:function(t){this._moduler.getScenery().loadViewState(t)}});var va=ma,ya=function(t){this._adaptor=t,this._moduler=t.getModuler(),this._control=new va(this._adaptor),this._adaptor.setOperation(this._control)};ya.prototype={highlightEntities:function(t){return this._control.highlightEntities(t)},unhighlightEntities:function(){this._control.unhighlightEntities()},transparentComponents:function(){this._control.transparentComponents()},untransparentComponents:function(){this._control.untransparentComponents()},setBatchEntities:function(t,e){return this._control.setBatchEntities(t,e)},removeBatchEntities:function(t){return this._control.removeBatchEntities(t)},clearBatchEntities:function(){this._control.clearBatchEntities()},coloringBatchEntities:function(t,e,i,r,n){return e/=255,i/=255,r/=255,n/=255,this._control.coloringBatchEntities(t,e,i,r,n)},discoloringBatchEntities:function(t){return this._control.discoloringBatchEntities(t)},highlightBatchEntities:function(t){return this._control.highlightBatchEntities(t)},unhighlightBatchEntities:function(t){return this._control.unhighlightBatchEntities(t)},transparentBatchEntities:function(t){return this._control.transparentBatchEntities(t)},untransparentBatchEntities:function(t){return this._control.untransparentBatchEntities(t)},showBatchEntities:function(t){return this._control.showBatchEntities(t)},hideBatchEntities:function(t){return this._control.hideBatchEntities(t)},setGrowthAsClipping:function(t,e){return this._control.setGrowthAsClipping(t,e)},setGrowthAsTinting:function(t,e,i){return this._control.setGrowthAsTinting(t,e,i)},setGrowthAsTransparent:function(t){return this._control.setGrowthAsTransparent(t)},applyGrowthRatio:function(t,e){return this._control.applyGrowthRatio(t,e)},removeGrowth:function(t){return this._control.removeGrowth(t)},removeAllGrowth:function(){return this._control.removeAllGrowth()},showComponents:function(){this.showEachComponents()},showEachComponents:function(){this._control.showEachComponents()},hideEachComponents:function(){this._moduler.getScenery().hideEachComponents(),this._moduler.requestRedraw()},hideSelectComponents:function(){this._control.hideSelectComponents()},hideUnselectComponents:function(){this._control.hideUnselectComponents()},showAssignEntities:function(t){this._control.showAssignEntities(t)},hideAssignEntities:function(t){this._control.hideAssignEntities(t)},createComponentTree:function(t,e){return this._control.createComponentTree(t,e)},createLayerList:function(){return this._control.getLayerList()},displayTreeNode:function(t,e){return this._control.displayTreeNode(t,e)},hightlightTreeNode:function(t,e){return this._control.hightlightTreeNode(t,e)},showTreeRoot:function(t){return this._control.showTreeRoot(t)},hideTreeRoot:function(t){return this._control.hideTreeRoot(t)},saveViewState:function(t){this._control.saveViewState(t)},loadViewState:function(t){this._control.loadViewState(t)}};var Ea=ya,wa={POINT_NAME:"POINT",LINE_NAME:"LINE",TEXT_NAME:"TEXT",ARROW_NAME:"ARROW",POINT_COLOR:oo.BLACK,ARROW_COLOR:oo.RED,LINE_COLOR:oo.WHITE,TEXT_COLOR:oo.WHITE,PICK_COLOR:oo.YELLOW,DOT_LINE_COLOR:oo.HOTPINK,LENGTH_LINE_COLOR:oo.ORANGE,ANGLE_LINE_COLOR:oo.SKYBLUE,DISTANCE_LINE_COLOR:oo.GREEN,CAPTURE_MAX_DISTANCE:50,CAPTURE_MAX_DISTANCE_SQUARE:2500,TEXT_SIZE:(No.isMobile,18),SHPERE_RADIUS:(No.isMobile,200),SHPERE_RADIUS_SQUARE:(No.isMobile,4e4),SHPERE_TESSELLATION:12,CURSOR_OFFSET:.4,CYLINDER_RADIUS:40,CYLINDER_TESSELLATION:8,CONE_RADIUS:120,CONE_HEIGHT:400,CONE_TESSELLATION:8,DISTANCE_ATTEMPT_LENGTH:4e3};Object.freeze(wa);var Ma=wa,Ta=function(t,e){Et.call(this),this._usageType=vt.DYNAMIC,this._text="",t&&(this._text=t),this._size=1,e&&(this._size=e)};(Ta.prototype=Object.create(Et.prototype)).constructor=Ta,Object.assign(Ta.prototype,{setText:function(t){this._text!==t&&(this._text=t,this.update())},setSize:function(t){this._size!==t&&(this._size=t,this.update())},update:function(){}});var Pa=function(t,e,i,r){Ta.call(this,t,e),this._font="",i&&(this._font=i),this._color=[1,1,1,1],r&&w.copy(this._color,r),this.init()};(Pa.prototype=Object.create(Ta.prototype)).constructor=Pa,Object.assign(Pa.prototype,{setColor:function(t){w.copy(this._color,t)},image:function(t,e,i,r){var n=document.createElement("canvas"),o=n.getContext("2d"),a=0;return i<=32?a=1:i>32&&i<=60?a=2:i>60&&i<=80?a=4:i>80&&i<=100?a=6:i>100&&(a=10),o.font=i+"px "+e,n.width=o.measureText(t).width,n.height=i+a,o.font=i+"px "+e,o.clearRect(0,0,n.width,n.height),o.fillStyle="#"+((1<<24)+(r[0]<<16)+(r[1]<<8)+r[2]).toString(16).slice(1),o.textBaseline="middle",o.fillText(t,0,.5*i),o.getImageData(0,0,n.width,n.height)},init:function(){var t=new fe;this._vertexBuffer=t,t._size=4;var e=new Ae;e._componentSize=3,e._componentType=_e.FLOAT,e._attributeType=le.POINT,e._bufferData=null,t._datas.push(e);var i=new Ae;i._componentSize=2,i._componentType=_e.FLOAT,i._attributeType=le.TEXTURE,i._bufferData=new Float32Array([0,0,1,0,1,1,0,1]),t._datas.push(i);var r=new de;r._type=mt.INDEX_TRIANGLES,r._start=0,r._count=6,this._solidVertexAligns.push(r),this._indexes=new Uint8Array([0,1,2,2,3,0]);var n=new Rt;n._type=Pt.MATERIAL6,n._textureImage=null,n._discardAlpha=.1,this._material=n,this.update()},update:function(){var t=this.image(this._text,this._font,this._size,this._color),e=t.width/2,i=t.height/2;this._vertexBuffer._datas[0]._bufferData=new Float32Array([-e,-i,0,e,-i,0,e,i,0,-e,i,0]),this._vertexBuffer._datas[0]._changed=!0,this._material._textureImage=t}});var Sa=function(t,e){Ta.call(this,t,e),this.init()};(Sa.prototype=Object.create(Ta.prototype)).constructor=Sa,Object.assign(Sa.prototype,{setValue:function(t,e){this._text===t&&this._size===e||(this._text=t,this._size=e,this.update())},init:function(){this._vertexBuffer=new fe;var t=new Ae;t._componentSize=3,t._componentType=_e.FLOAT,t._attributeType=le.POINT,t._bufferData=null,this._vertexBuffer._datas.push(t);var e=new Ae;e._componentSize=2,e._componentType=_e.FLOAT,e._attributeType=le.TEXTURE,e._bufferData=null,this._vertexBuffer._datas.push(e);var i=new de;i._type=mt.INDEX_TRIANGLES,i._start=0,this._solidVertexAligns.push(i);var r=new Rt;r._type=Pt.MATERIAL4,r._textureImage=nr.getNumberImage(),r._discardAlpha=.1,this._material=r,this.update()},update:function(){var t=this._text.length,e=4*t;this._vertexBuffer._size=e;for(var i=[],r=.7*this._size,n=0;n<t;n++)i.push(n*r,this._size,0,n*r,0,0,(n+1)*r,this._size,0,(n+1)*r,0,0);this._vertexBuffer._datas[0]._bufferData=new Float32Array(i),this._vertexBuffer._datas[0]._changed=!0,this._vertexBuffer._datas[1]._bufferData=new Float32Array(nr.getNumberUVs(this._text)),this._vertexBuffer._datas[1]._changed=!0;for(var o=[],a=0;a<t;a++)o.push(4*a,4*a+1,4*a+3,4*a+3,4*a+2,4*a);this._indexes=null,this._indexes=e<255?new Uint8Array(o):e<65535?new Uint16Array(o):new Uint32Array(o),this._solidVertexAligns[0]._count=o.length,this._solidVertexAligns[0]._changed=!0}});var Ra=function(t){this._moduler=t,this._modunit=this._moduler.getModunit(Di.MEASURE_SUBJECT),this._root=new gt,this._count=0,this._finished=!1};Object.assign(Ra.prototype,{root:function(){return this._root},ID:function(){return this._root.getID()},count:function(){return this._count},finished:function(){return this._finished},type:function(){},points:function(){},load:function(t){},click:function(t){},move:function(t){},drag:function(t,e,i){},finish:function(){return!1},update:function(){},intersectPoint:function(t){},highlight:function(t){t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.PICK_COLOR))},unhighlight:function(t){},valid:function(t){},createPointShell:function(t){var e=new En(Ma.SHPERE_RADIUS,t);return e.setName(Ma.POINT_NAME),e.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.POINT_COLOR)),e.setReference(this),e.addChild(this._modunit._sceneFactory.getPrimitiveSolid(Kn.SOLID_SHPERE)),this._root.addChild(e),e},createLineShell:function(t,e){var i=new wn(Ma.CYLINDER_RADIUS,t,e);return i.setName(Ma.LINE_NAME),i.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.LINE_COLOR)),i.setReference(this),i.addChild(this._modunit._sceneFactory.getPrimitiveSolid(Kn.SOLID_CYLINDER)),this._root.addChild(i),i},createArrowShell:function(t,e){var i=new Mn(Ma.CONE_RADIUS,t,e);return i.setName(Ma.ARROW_NAME),i.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ARROW_COLOR)),i.setReference(this),i.addChild(this._modunit._sceneFactory.getPrimitiveSolid(Kn.SOLID_CONE)),this._root.addChild(i),i},createTextBillboard:function(){var t=new Pn;t.isAutoScaleToScreen(!0),t.setMode(Pn.ROTATE_TO_SCREEN),t.setScale([Ma.TEXT_SIZE,Ma.TEXT_SIZE,Ma.TEXT_SIZE]);var e=new Sa;return e.setID(this._modunit.getID()),e._material.setID(this._modunit.getID()),e.setName(Ma.TEXT_NAME),t.addChild(e),this._root.addChild(t),t}});var Oa=Ra,La=function(t){Oa.call(this,t),this._startPoint=null,this._endPoint=null,this._StoELine=null,this._lengthText=null,this._length=0,this._Xlength=0,this._Ylength=0,this._Zlength=0};(La.prototype=Object.create(Oa.prototype)).constructor=La,Object.assign(La.prototype,{type:function(){return Re.f.DOT},points:function(){var t=[],e=J.new();J.copy(e,this._startPoint.getCenter()),t.push(e);var i=J.new();return J.copy(i,this._endPoint.getCenter()),t.push(i),t},load:function(t){this._startPoint=this.createPointShell(t[0]),this._StoELine=this.createLineShell(t[0],t[1]),this._StoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DOT_LINE_COLOR)),this._endPoint=this.createPointShell(t[1]),this._lengthText=this.createTextBillboard(),this._finished=!0,this._count=2,this.update()},getLength:function(){return this._length},getXLength:function(){return this._Xlength},getYLength:function(){return this._Ylength},getZLength:function(){return this._Zlength},setStartPos:function(t,e){e||this._startPoint.setCenter(t),this._StoELine.setStart(t),this.update()},setEndPos:function(t,e){this._StoELine.setEnd(t),e||this._endPoint.setCenter(t),this.update()},click:function(t){var e=t.getPoint();return 0===this._count?(this._startPoint=this.createPointShell(e),this._StoELine=this.createLineShell(e,e),this._StoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DOT_LINE_COLOR)),this._endPoint=this.createPointShell(e),this._lengthText=this.createTextBillboard()):(this.setEndPos(e),this._finished=!0,this.update()),this._count++,!0},move:function(t){var e=t.getPoint();this.setEndPos(e)},drag:function(t,e,i){var r=e.getPoint();t===this._startPoint?this.setStartPos(r,i):t===this._endPoint?this.setEndPos(r,i):this._StoELine},update:function(){var t=J.MemoryPool.alloc();J.sub(t,this._endPoint.getCenter(),this._startPoint.getCenter()),this._length=J.len(t)*_.MILLIMETER_PER_METER,this._Xlength=Math.abs(t[0])*_.MILLIMETER_PER_METER,this._Ylength=Math.abs(t[1])*_.MILLIMETER_PER_METER,this._Zlength=Math.abs(t[2])*_.MILLIMETER_PER_METER,J.add(t,this._endPoint.getCenter(),this._startPoint.getCenter()),J.scale(t,t,.5),this._lengthText.setPosition(t),this._lengthText.getChild(0).setText(this._length.toFixed(3)),J.MemoryPool.free(t)},intersectPoint:function(t){return J.sqrDist(this._startPoint.getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE?this._startPoint:J.sqrDist(this._endPoint.getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE?this._endPoint:void 0},unhighlight:function(t){t.getName()===Ma.POINT_NAME?t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.POINT_COLOR)):t.getName()===Ma.LINE_NAME&&t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DOT_LINE_COLOR))},valid:function(t){return!0}});var Na=La,ba=function(t){Oa.call(this,t),this._startPoint=null,this._middlePoint=null,this._endPoint=null,this._StoMLine=null,this._MtoELine=null,this._angleText=null,this._angle=0,this._lengthSM=0,this._lengthME=0};(ba.prototype=Object.create(Oa.prototype)).constructor=ba,Object.assign(ba.prototype,{type:function(){return Re.f.ANGLE},points:function(){var t=[],e=J.new();J.copy(e,this._startPoint.getCenter()),t.push(e);var i=J.new();J.copy(i,this._middlePoint.getCenter()),t.push(i);var r=J.new();return J.copy(r,this._endPoint.getCenter()),t.push(r),t},load:function(t){this._startPoint=this.createPointShell(t[0]),this._StoMLine=this.createLineShell(t[0],t[1]),this._StoMLine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ANGLE_LINE_COLOR)),this._middlePoint=this.createPointShell(t[1]),this._MtoELine=this.createLineShell(t[1],t[2]),this._MtoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ANGLE_LINE_COLOR)),this._endPoint=this.createPointShell(t[2]),this._angleText=this.createTextBillboard(),this._finished=!0,this._count=3,this.update()},getAngle:function(){return this._angle},getSMLength:function(){return this._lengthSM},getMELength:function(){return this._lengthME},setStartPos:function(t,e){e||this._startPoint.setCenter(t),this._StoMLine.setStart(t),this.update()},setEndPos:function(t,e){e||this._MtoELine.setEnd(t),this._endPoint.setCenter(t),this.update()},setMiddlePos:function(t,e){e||this._middlePoint.setCenter(t),this._StoMLine.setEnd(t),this._MtoELine&&(this._MtoELine.setStart(t),this.update())},click:function(t){var e=t.getPoint();if(0===this._count)this._startPoint=this.createPointShell(e),this._StoMLine=this.createLineShell(e,e),this._StoMLine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ANGLE_LINE_COLOR)),this._middlePoint=this.createPointShell(e),this._angleText=this.createTextBillboard();else if(1===this._count){if(J.equals(this._startPoint.getCenter(),e,Ma.SHPERE_RADIUS))return!1;this._middlePoint.setCenter(e),this._StoMLine.setEnd(e),this._MtoELine=this.createLineShell(e,e),this._MtoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ANGLE_LINE_COLOR)),this._endPoint=this.createPointShell(e),this.update()}else if(2===this._count){if(J.equals(this._startPoint.getCenter(),e,Ma.SHPERE_RADIUS))return!1;if(J.equals(this._middlePoint.getCenter(),e,Ma.SHPERE_RADIUS))return!1;this._MtoELine.setEnd(e),this._endPoint.setCenter(e),this._finished=!0,this.update()}return this._count++,!0},move:function(t){var e=t.getPoint();1===this._count?this.setMiddlePos(e):2===this._count&&this.setEndPos(e)},drag:function(t,e,i){var r=e.getPoint();t===this._startPoint?this.setStartPos(r,i):t===this._endPoint?this.setEndPos(r,i):t===this._middlePoint?this.setMiddlePos(r,i):t===this._StoMLine||this._MtoELine},update:function(){var t=J.MemoryPool.alloc();J.sub(t,this._startPoint.getCenter(),this._middlePoint.getCenter()),this._lengthSM=J.normalize(t,t)*_.MILLIMETER_PER_METER;var e=J.MemoryPool.alloc();J.sub(e,this._endPoint.getCenter(),this._middlePoint.getCenter()),this._lengthME=J.normalize(e,e)*_.MILLIMETER_PER_METER;var i=J.dot(t,e);this._angle=_.radian_to_degree(Math.acos(i)),this._angleText.setPosition(this._middlePoint.getCenter()),this._angleText.getChild(0).setText(this._angle.toFixed(2)),J.MemoryPool.free(t),J.MemoryPool.free(e)},intersectPoint:function(t){for(var e=this._root._children.length,i=0;i<e;i++){var r=this._root._children[i];if(r.getName()===Ma.POINT_NAME&&J.sqrDist(r.getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE)return r}},unhighlight:function(t){t.getName()===Ma.POINT_NAME?t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.POINT_COLOR)):t.getName()===Ma.LINE_NAME&&t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.ANGLE_LINE_COLOR))}});var Da=ba,xa=function(t){Oa.call(this,t),this._points=[],this._lines=[],this._lengthText=null,this._lastPoint=null,this._lastLine=null};(xa.prototype=Object.create(Oa.prototype)).constructor=xa,Object.assign(xa.prototype,{type:function(){return Re.f.LENGTH},points:function(){for(var t=[],e=this._points.length,i=0;i<e;i++){var r=this._points[i],n=J.new();J.copy(n,r.getCenter()),t.push(n)}return t},load:function(t){for(var e=t.length,i=0;i<e-1;i++){var r=this.createPointShell(t[i]);this._points.push(r);var n=this.createLineShell(t[i],t[i+1]);n.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.LENGTH_LINE_COLOR)),this._lines.push(n);var o=this.createPointShell(t[i+1]);this._points.push(o)}this._lengthText=this.createTextBillboard(),this._finished=!0,this._count=e,this.update()},click:function(t){var e=t.getPoint();if(0===this._count){var i=this.createPointShell(e);this._points.push(i),this._lengthText=this.createTextBillboard()}else{if(!this.valid(e))return!1;this._lastPoint.setCenter(e),this._points.push(this._lastPoint),this._lastLine.setEnd(e),this._lines.push(this._lastLine),this.update()}return this._lastLine=this.createLineShell(e,e),this._lastLine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.LENGTH_LINE_COLOR)),this._lastPoint=this.createPointShell(e),this._count++,!0},move:function(t){var e=t.getPoint();this._lastPoint.setCenter(e),this._lastLine.setEnd(e),this.update()},drag:function(t,e,i){for(var r=e.getPoint(),n=this._points.length,o=0;o<n;o++){var a=this._points[o];a===t&&(i||a.setCenter(r),0===o?this._lines[o].setStart(r):o===n-1?this._lines[o-1].setEnd(r):(this._lines[o-1].setEnd(r),this._lines[o].setStart(r)))}this.update()},finish:function(){return 1!==this._count&&(this._root.removeChild(this._lastPoint),this._root.removeChild(this._lastLine),this._lastPoint=null,this._lastLine=null,this._finished=!0,this.update(),!0)},update:function(){for(var t=J.MemoryPool.alloc(),e=0,i=this._points.length,r=0;r<i-1;r++)J.sub(t,this._points[r].getCenter(),this._points[r+1].getCenter()),e+=J.len(t);this._lastPoint?(J.sub(t,this._points[r].getCenter(),this._lastPoint.getCenter()),e+=J.len(t),this._lengthText.setPosition(this._lastPoint.getCenter())):this._lengthText.setPosition(this._points[r].getCenter()),e*=_.MILLIMETER_PER_METER,this._lengthText.getChild(0).setText(e.toFixed(3)),J.MemoryPool.free(t)},intersectPoint:function(t){for(var e=this._points.length,i=0;i<e;i++)if(J.sqrDist(this._points[i].getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE)return this._points[i]},unhighlight:function(t){t.getName()===Ma.POINT_NAME?t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.POINT_COLOR)):t.getName()===Ma.LINE_NAME&&t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.LENGTH_LINE_COLOR))},valid:function(t){for(var e=this._points.length,i=0;i<e;i++)if(J.sqrDist(this._points[i].getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE)return!1;return!0}});var Ba=xa,Ga=function(t){Oa.call(this,t),this._startPoint=null,this._endPoint=null,this._endLabel=null,this._StoELine=null,this._lengthText=null,this._length=0,this._Xlength=0,this._Ylength=0,this._Zlength=0,this._intersected=!1};(Ga.prototype=Object.create(Oa.prototype)).constructor=Ga,Object.assign(Ga.prototype,{type:function(){return Re.f.DISTANCE},points:function(){var t=[],e=J.new();J.copy(e,this._startPoint.getCenter()),t.push(e);var i=J.new();return J.copy(i,this._endPoint.getCenter()),t.push(i),t},load:function(t){this._startPoint=this.createPointShell(t[0]),this._StoELine=this.createLineShell(t[0],t[1]),this._StoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DISTANCE_LINE_COLOR)),this._endPoint=this.createPointShell(t[1]),this._lengthText=this.createTextBillboard(),this._finished=!0,this._count=2,this._intersected=!0,this.update()},intersect:function(t,e){var i=this._moduler.getScenery().getBoundingSphere().getRadius(),r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();J.add(r,t,e),J.scaleAndAdd(n,t,e,i);var o=[];if(this._moduler.getModunit(Di.ENTITY_SUBJECT).linesegmentIntersect(o,r,n,Oi.COLLISION),0===o.length)J.scaleAndAdd(n,t,e,Ma.DISTANCE_ATTEMPT_LENGTH),this._StoELine.setValue(t,n,Ma.CYLINDER_RADIUS),J.scaleAndAdd(r,n,e,Ma.CONE_HEIGHT),this._endLabel.setValue(n,r,Ma.CONE_RADIUS),this._endLabel.setMask(1),this._endPoint.setMask(0),this._intersected=!1;else{var a=o[0].getPoint();this._StoELine.setValue(t,a,Ma.CYLINDER_RADIUS),this._endLabel.setMask(0),this._endPoint.setCenter(a),this._endPoint.setMask(1),this._intersected=!0}return J.MemoryPool.free(r),J.MemoryPool.free(n),this._intersected},click:function(t){var e=t.getPoint(),i=t.getNormal();if(0===this._count)this._startPoint=this.createPointShell(e),this._StoELine=this.createLineShell(e,e),this._StoELine.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DISTANCE_LINE_COLOR)),this._endPoint=this.createPointShell(e),this._endLabel=this.createArrowShell(e,e),this._lengthText=this.createTextBillboard(),this.intersect(e,i);else if(1===this._count){if(!this.intersect(e,i))return!1;this._finished=!0,this.update()}return this._count++,!0},move:function(t){var e=t.getPoint(),i=t.getNormal();this._startPoint.setCenter(e),this.intersect(e,i),this.update()},update:function(){if(this._intersected){var t=J.MemoryPool.alloc();J.sub(t,this._endPoint.getCenter(),this._startPoint.getCenter()),this._length=J.len(t)*_.MILLIMETER_PER_METER,this._Xlength=Math.abs(t[0])*_.MILLIMETER_PER_METER,this._Ylength=Math.abs(t[1])*_.MILLIMETER_PER_METER,this._Zlength=Math.abs(t[2])*_.MILLIMETER_PER_METER,J.add(t,this._endPoint.getCenter(),this._startPoint.getCenter()),J.scale(t,t,.5),this._lengthText.setMask(1),this._lengthText.setPosition(t),this._lengthText.getChild(0).setText(this._length.toFixed(3)),J.MemoryPool.free(t)}else this._length=NaN,this._Xlength=NaN,this._Ylength=NaN,this._Zlength=NaN,this._lengthText.setMask(0)},intersectPoint:function(t){return J.sqrDist(this._startPoint.getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE?this._startPoint:J.sqrDist(this._endPoint.getCenter(),t)<Ma.SHPERE_RADIUS_SQUARE?this._endPoint:void 0},unhighlight:function(t){t.getName()===Ma.POINT_NAME?t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.POINT_COLOR)):t.getName()===Ma.LINE_NAME&&t.setMaterial(this._modunit._sceneFactory.getPureColor(Ma.DISTANCE_LINE_COLOR))}});var Fa=Ga,Va=function(t){this._adaptor=t,this._moduler=t.getModuler(),this._modunit=null,this._switch=null};Object.assign(Va.prototype,{create:function(){var t=new uo(this._moduler);this._modunit=t,this._moduler.setModunit(Di.CURSOR_SWITCH,t);var e=new lo;e.setGLState(new Hi(0,0,Do.CURSOR_SIZE,Do.CURSOR_SIZE)),e.setGLState(new Yi(_e.LEQUAL,0,.1)),t._glstateset=e;var i=new _o;i.setGLMaterial(new hn),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var r=new mo;r.resize(0,0,Do.CURSOR_SIZE,Do.CURSOR_SIZE),t._camera=r;var n=new yo;n.setName("CursorSwitch"),t._sceneRoot=n,this._switch=new Mt,n.addChild(this._switch),t._dynamicStruct=!0,t._dynamicGeometry=!1;var o=this._adaptor.getConfig();nr.loadImageResources(o.getCursorResources(),this.createGeometry.bind(this))},destroy:function(){this._moduler.destroyModunit(Di.CURSOR_SWITCH),nr.unloadImageResources(this._adaptor.getConfig().getCursorResources()),this._modunit=null,this._switch=null,this._moduler.requestRedraw()},createCursorGeometry:function(t,e){var i=new Et;i.setID(this._modunit.getID()),i.setName(t);var r=new fe;i._vertexBuffer=r,r._size=6;var n=new Ae;n._componentSize=2,n._componentType=_e.FLOAT,n._attributeType=le.POINT,n._bufferData=new Float32Array([-.6,-.6,.6,-.6,.6,.6,.6,.6,-.6,.6,-.6,-.6]),r._datas.push(n);var o=new Ae;o._componentSize=2,o._componentType=_e.FLOAT,o._attributeType=le.TEXTURE,o._bufferData=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),r._datas.push(o);var a=new de;a._type=mt.ARRAY_TRIANGLES,a._start=0,a._count=6,i._solidVertexAligns.push(a);var s=new Rt;s.setID(this._modunit.getID()),s._type=Pt.MATERIAL4,s._textureImage=e._data,s._discardAlpha=.1,i._material=s,this._switch.addChild(i)},createGeometry:function(t){this.createCursorGeometry("NormalCursor",t[0]),this.createCursorGeometry("PickCursor",t[1]),this._switch.setAllSwitchesOff(),this._moduler.requestRedraw()},place:function(t,e){var i=.5*Do.CURSOR_SIZE;this._modunit.getCamera().resize(t-i,e-i,Do.CURSOR_SIZE,Do.CURSOR_SIZE),this._modunit._glstateset.getGLState(Fi.Viewport).resize(t-i,e-i,Do.CURSOR_SIZE,Do.CURSOR_SIZE)},switchoff:function(){this._switch.setAllSwitchesOff()},normal:function(){this._switch.setSingleSwitchOn(0)},pickup:function(){this._switch.setSingleSwitchOn(1)}});var ka=Va,Ua=0,Ha=1,ja=3,Ya=5,za=function(){this._point=J.new(),this._normal=J.new(),this._type=Ua};Object.assign(za.prototype,{getPoint:function(){return this._point},getNormal:function(){return this._normal},getType:function(){return this._type}});var Wa=function(t){Bi.call(this,t),this._modunit=null,this._capturePoint=new za,this._currentNode=null,this._intersectElement=null,this._cursorSwitch=new ka(t),this._measureNodes=new Map};(Wa.prototype=Object.create(Bi.prototype)).constructor=Wa,Object.assign(Wa.prototype,{type:function(){return Ti.MEASURE},create:function(){this._cursorSwitch.create(),this._cursorSwitch.switchoff();var t=new uo(this._moduler);this._modunit=t,this._moduler.setModunit(Di.MEASURE_SUBJECT,t);var e=new lo;e.setGLState(new Yi(_e.LESS,.1,.2)),t._glstateset=e;var i=new _o;i.setGLMaterial(new un([1,1,1,1])),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var r=new yo;r.setName("MeasureSubject"),t._sceneRoot=r,t._dynamicStruct=!0,t._dynamicGeometry=!1,this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.MEASURE_SUBJECT),this._cursorSwitch.destroy(),this._measureNodes.clear(),this._modunit=null,this._currentNode=null,this._intersectElement=null,this._moduler.requestRedraw()},cancel:function(){this._currentNode&&(this._modunit._sceneRoot.removeChild(this._currentNode.root()),this._currentNode=null,this._moduler.requestRedraw())},finish:function(){this._currentNode&&this._currentNode.finish()&&(this.addMeasureNode(this._currentNode.ID(),this._currentNode),this._currentNode=null,this._moduler.requestRedraw())},save:function(t){this._measureNodes.forEach((function(e,i){var r={};r.ID=i,r.type=e.type(),r.points=e.points(),t.push(r)}))},load:function(t){this.clearMeasureNodes();for(var e=t.length,i=0;i<e;i++){var r=t[i],n=this.createMeasureNode(r.type),o=n.root();o.setID(r.ID),this._modunit._sceneRoot.addChild(o),this.addMeasureNode(r.ID,n),n.load(r.points)}this._moduler.requestRedraw()},updateMeasureType:function(){this._adaptor.getConfig().getMeasureType()===Re.f.VIEW&&(this._cursorSwitch.switchoff(),this._moduler.requestRedraw()),this._intersectElement=null,this.cancel()},addMeasureNode:function(t,e){this._measureNodes.set(t,e)},removeMeasureNode:function(t){var e=this._measureNodes.get(t);e&&this._modunit._sceneRoot.removeChild(e.root()),this._measureNodes.delete(t)},clearMeasureNodes:function(){this.cancel(),this._modunit._sceneRoot.clearChildren(),this._measureNodes.clear()},getMeasureNode:function(t){return this._measureNodes.get(t)},getMeasureNodes:function(){return this._measureNodes},singlePick:function(t,e){var i=this._moduler._camera,r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();i.computeScreenToWorldNearFarPoint(t,e,r,n);var o=[];this._modunit.linesegmentIntersect(o,r,n,Oi.SELECTION);var a=o.length;if(0!==a){var s=o[0];this._intersectElement=s.getDrawable()._reference,this._intersectElement.getReference().highlight(this._intersectElement)}return J.MemoryPool.free(r),J.MemoryPool.free(n),0!==a},pickPush:function(t){return this._adaptor.getConfig().getMeasureType()!==Re.f.VIEW&&(this._intersectElement?this._dragGeometry=!0:(this.clickMeasureNode(this._capturePoint),this._dragGeometry=!1,this._moduler.requestRedraw()),t.preventDefault(),!0)},capturePoint:function(t){var e=[];this.singleIntersect(t[0],t[1],e)?(this._cursorSwitch.normal(),this.measureNodeCaptrue(e[0])?this._cursorSwitch.pickup():(this.revertMeasureNode(),this.geoemtryVertexCapture(e[0])?this._cursorSwitch.pickup():(J.copy(this._capturePoint._point,e[0].getPoint()),J.copy(this._capturePoint._normal,e[0].getNormal()),this._capturePoint._type=Ha))):(this._cursorSwitch.switchoff(),this._capturePoint._type=Ua,this.revertMeasureNode())},mouseChanged:function(t){if(this._adaptor.getConfig().getMeasureType()===Re.f.VIEW)return!1;var e=this.getPositionRelativeToCanvas(t,!1);this._cursorSwitch.place(e[0],e[1]);var i=this._moduler._camera;return e[0]=i.getNormalizedX(e[0]),e[1]=i.getNormalizedY(e[1]),this.capturePoint(e),this._capturePoint._type!==Ua&&(this._dragGeometry?this._intersectElement&&this._intersectElement.getReference().drag(this._intersectElement,this._capturePoint):this._currentNode&&this._currentNode.move(this._capturePoint)),this._moduler.requestRedraw(),t.preventDefault(),!0},pickDrag:function(t){return this.mouseChanged(t)},mouseMove:function(t){return this.mouseChanged(t)},pickRelease:function(t){return this._adaptor.getConfig().getMeasureType()!==Re.f.VIEW&&(this._dragGeometry&&(this._leftClick?(this.clickMeasureNode(this._capturePoint),this._moduler.requestRedraw()):this._intersectElement&&this._intersectElement.getReference().drag(this._intersectElement,this._capturePoint),this._dragGeometry=!1),t.preventDefault(),!0)},measureNodeCaptrue:function(t){var e=t.getPoint();J.copy(this._capturePoint._normal,t.getNormal());var i=!0,r=!1,n=void 0;try{for(var a,s=this._measureNodes[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var h=o()(a.value,2),u=(h[0],h[1].intersectPoint(e));if(u){if(this._capturePoint._type=ja,!this._dragGeometry)return J.copy(this._capturePoint._point,u.getCenter()),this._intersectElement!==u&&(this.revertMeasureNode(),this._intersectElement=u,this._intersectElement.getReference().highlight(this._intersectElement)),!0;if(this._intersectElement!==u)return J.copy(this._capturePoint._point,u.getCenter()),!0}}}catch(t){r=!0,n=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return!1},geoemtryVertexCapture:function(t){var e=!1;J.copy(this._capturePoint._normal,t.getNormal());for(var i=t.getLocalPoint(),r=t.getDrawable().getGeometry()._vertexBuffer,n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc(),a=0;a<r._size;a++)if(r.getPoint(a,n),J.sub(o,n,i),J.sqrLen(o)<Ma.CAPTURE_MAX_DISTANCE_SQUARE){var s=t.getDrawable().getTransform();J.transformMat4(this._capturePoint._point,n,s),this._capturePoint._type=Ya,e=!0;break}return J.MemoryPool.free(n),J.MemoryPool.free(o),e},revertMeasureNode:function(){this._dragGeometry||this._intersectElement&&(this._intersectElement.getReference().unhighlight(this._intersectElement),this._intersectElement=null)},clickMeasureNode:function(t){if(!this._currentNode){if(t._type===Ua)return;this._currentNode=this.createMeasureNode(),this._modunit._sceneRoot.addChild(this._currentNode.root())}this._currentNode.click(t),this._currentNode.finished()&&(this.addMeasureNode(this._currentNode.ID(),this._currentNode),this._currentNode=null)},createMeasureNode:function(t){switch(void 0===t&&(t=this._adaptor.getConfig().getMeasureType()),t){case Re.f.DOT:return new Na(this._moduler);case Re.f.DISTANCE:return new Fa(this._moduler);case Re.f.ANGLE:return new Da(this._moduler);case Re.f.LENGTH:return new Ba(this._moduler)}}}),Wa.prototype[Bi.KEYBORAD_PUSH]=function(t){return"KeyX"===t.code?(this.finish(),!0):"KeyC"===t.code&&(this.cancel(),!0)},Wa.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return this._adaptor.getConfig().getMeasureType()!==Re.f.VIEW&&(this.capturePoint(t),this._moduler.requestRedraw(),this._intersectElement?(this._dragGeometry=!0,!0):(this._cursorSwitch.switchoff(),this._dragGeometry=!1,!1))},Wa.prototype[Bi.TOUCH_MOVE]=function(t,e){if(this._adaptor.getConfig().getMeasureType()===Re.f.VIEW)return!1;if(this._dragGeometry){var i=Si.create(e[0],e[1]+Ma.CURSOR_OFFSET);return this.capturePoint(i),this._cursorSwitch.place(this._moduler.getCamera().fromNormalizedX(i[0]),this._moduler.getCamera().fromNormalizedY(i[1])),this._capturePoint._type!==Ua&&this._dragGeometry&&this._intersectElement&&this._intersectElement.getReference().drag(this._intersectElement,this._capturePoint,!0),this._moduler.requestRedraw(),!0}return!1},Wa.prototype[Bi.TOUCH_MOVE_END]=function(t){return this._adaptor.getConfig().getMeasureType()!==Re.f.VIEW&&(!!this._dragGeometry&&(this._intersectElement&&this._intersectElement.getReference().drag(this._intersectElement,this._capturePoint,!1),this._dragGeometry=!1,this._cursorSwitch.switchoff(),this._moduler.requestRedraw(),!0))},Wa.prototype[Bi.TOUCH_CLICK]=function(t){return this._adaptor.getConfig().getMeasureType()!==Re.f.VIEW&&(this.clickMeasureNode(this._capturePoint),this._moduler.requestRedraw(),!0)};var Xa=Wa,Ja=function(t){this._adaptor=t,this._measure=null};Ja.prototype={openMeasure:function(){this._measure=this._adaptor.setOperation(new Xa(this._adaptor))},closeMeasure:function(){this._measure=this._adaptor.resetOperation(Ti.MEASURE)},setMeasureType:function(t){var e=this._adaptor.getConfig();return e.getMeasureType()!==t&&(e.setMeasureType(t),this._measure&&this._measure.updateMeasureType(),!0)},finishMeasure:function(){this._measure&&this._measure.cancel()},getViewState:function(t){return t._measureType=this._adaptor.getConfig().getMeasureType(),t._measureOpened=!!this._measure,t},saveViewState:function(t){t._measureType=this._adaptor.getConfig().getMeasureType(),this._measure?(this._measure.cancel(),t._measureOpened=!0,this._measure.save(t._measureNodes)):t._measureOpened=!1},loadViewState:function(t){t._measureOpened?(this.openMeasure(),this.setMeasureType(t._measureType),this._measure.load(t._measureNodes)):this.closeMeasure(),this.updateViewState()},updateViewState:function(){var t=this;this._adaptor.getViewCallbacks().forEach((function(e){var i={};t.getViewState(i),e(Re.b.MEASURESTATE_CHANGED,i)}))}};var qa=Ja,Za=function(t){this._adaptor=t,this._viewer=t.getModuler()};Za.prototype={};var Ka=Za,Qa={};Qa.new=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Qa.MemoryPool=new A(Qa.new),Qa.alloc=Qa.MemoryPool.alloc,Qa.free=Qa.MemoryPool.free,Qa.new_d=function(){var t=new Float64Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Qa.MemoryPool_d=new A(Qa.new_d),Qa.alloc_d=Qa.MemoryPool_d.alloc,Qa.free_d=Qa.MemoryPool_d.free,Qa.clone=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Qa.clone_d=function(t){var e=new Float64Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Qa.create=function(t,e,i,r){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n},Qa.create_d=function(t,e,i,r){var n=new Float64Array(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n},Qa.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Qa.set=function(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t},Qa.makeRotate=function(t,e,i,r,n){var o=Math.cos(.5*e),a=Math.sin(.5*e);return t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=o,t},Qa.makeRotateVec3=function(t,e,i){var r=Math.cos(.5*e),n=Math.sin(.5*e);return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=r,t},Qa.multiply=Qa.mul=function(t,e,i){return t[0]=e[0]*i[3]+e[1]*i[2]-e[2]*i[1]+e[3]*i[0],t[1]=-e[0]*i[2]+e[1]*i[3]+e[2]*i[0]+e[3]*i[1],t[2]=e[0]*i[1]-e[1]*i[0]+e[2]*i[3]+e[3]*i[2],t[3]=-e[0]*i[0]-e[1]*i[1]-e[2]*i[2]+e[3]*i[3],t},Qa.transformVec3=function(t,e,i){var r=i[0],n=i[1],o=i[2],a=e[0],s=e[1],h=e[2],u=e[3],c=u*r+s*o-h*n,l=u*n+h*r-a*o,g=u*o+a*n-s*r,_=-a*r-s*n-h*o;return t[0]=c*u+_*-a+l*-h-g*-s,t[1]=l*u+_*-s+g*-a-c*-h,t[2]=g*u+_*-h+c*-s-l*-a,t},Qa.conjugate=Qa.conj=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},Qa.squaredLength=Qa.sqrLen=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]},Qa.length=Qa.len=function(){return Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]+q[3]*q[3])},Qa.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},Qa.inverse=function(t,e){var i=1/Qa.sqrtLen(e);return Qa.conjugate(t,e),Qa.scale(t,t,i),t};var $a=Qa,ts=function(t){Fo.call(this,t),this._panPoint=J.new(),this._rotatePoint=J.new(),this._zoomPoint=J.new()};(ts.prototype=Object.create(Fo.prototype)).constructor=ts,Object.assign(ts.prototype,{updateProjection:function(){this._adaptor.getConfig().isOrthogonalModeOpened()?this._moduler.getCamera().initProjectionOrthogonal():this._moduler.getCamera().initProjectionPerspective()},sync:function(){this._operateMode&Xi.ROTATE&&this.rotate(),this._operateMode&Xi.PAN&&this.pan(),this._operateMode&Xi.PICK&&this.drawMultiplePick()},rotate:function(){var t=this._rotateEvent.getDelta();if(Math.abs(t[0])<_.EPSILON&&Math.abs(t[1])<_.EPSILON)return!1;var e=this._moduler.getCamera(),i=e.getEye(),r=e.getCenter(),n=e.getUp(),o=J.MemoryPool.alloc(),a=J.MemoryPool.alloc(),s=J.MemoryPool.alloc();J.sub(a,r,i),J.normalize(a,a),J.cross(o,a,n),J.normalize(o,o),J.cross(s,o,a),J.normalize(s,s);var h=t[0],u=t[1],c=this._rotatePoint,l=it.MemoryPool.alloc();it.fromTranslation(l,c);var g=it.MemoryPool.alloc();it.invert(g,l);var d=$a.MemoryPool.alloc();$a.makeRotate(d,-h,0,0,1);var A=J.MemoryPool.alloc();$a.transformVec3(A,d,o),J.normalize(A,A);var p=$a.MemoryPool.alloc();$a.makeRotate(p,u,A[0],A[1],A[2]);var I=$a.MemoryPool.alloc();$a.multiply(I,p,d);var f=it.MemoryPool.alloc();it.fromQuat(f,I),$a.MemoryPool.free(d),$a.MemoryPool.free(p),$a.MemoryPool.free(I);var C=it.MemoryPool.alloc();return it.multiply(C,l,f),it.multiply(C,C,g),J.transformMat4(i,i,C),J.transformMat4(r,r,C),J.transformMat4(n,n,f),J.normalize(n,n),it.MemoryPool.free(l),it.MemoryPool.free(g),it.MemoryPool.free(f),it.MemoryPool.free(C),J.MemoryPool.free(A),J.MemoryPool.free(o),J.MemoryPool.free(a),J.MemoryPool.free(s),e.updateViewMatrix(),this._moduler.requestRedraw(),this._rotateEvent.sync(),!0},pan:function(){var t=this._panEvent.getDelta();if(Math.abs(t[0])<_.EPSILON&&Math.abs(t[1])<_.EPSILON)return!1;var e=this._moduler.getCamera(),i=e.getEye(),r=e.getCenter(),n=e.getUp(),o=J.MemoryPool.alloc();if(this._adaptor.getConfig().isOrthogonalModeOpened()){var a={};e.getProjectionOrthogonal(a);var s=-t[0]*a.right,h=-t[1]*a.top;J.set(o,s,0,h)}else{var u=No.isMobile?.6:.3,c=J.MemoryPool.alloc();J.sub(c,i,this._panPoint);var l=J.length(c)*u,g=-t[0]*l,d=-t[1]*l,A=e.getProjectionMatrix(),p=1===A[15]?1:2/A[5];g*=p,d*=p,J.set(o,g,0,d)}var I=J.MemoryPool.alloc(),f=J.MemoryPool.alloc(),C=J.MemoryPool.alloc();J.sub(f,r,i),J.normalize(f,f),J.cross(I,f,n),J.normalize(I,I),J.cross(C,I,f),J.normalize(C,C);var m=it.MemoryPool.alloc();return it.set(m,I[0],I[1],I[2],0,f[0],f[1],f[2],0,C[0],C[1],C[2],0,0,0,0,1),J.transformMat4(o,o,m),J.add(i,i,o),J.add(r,r,o),it.MemoryPool.free(m),J.MemoryPool.free(I),J.MemoryPool.free(f),J.MemoryPool.free(C),J.MemoryPool.free(o),e.updateViewMatrix(),this._moduler.requestRedraw(),this._panEvent.sync(),!0},invalid:function(t){return this.rotateRelease(t),this.panRelease(t),this.pickRelease(t),!0},home:function(){var t=this._moduler.getCamera(),e=t.getEye(),i=t.getCenter(),r=t.getUp(),n=this._moduler.getScenery().getBoundingSphere();if(this._adaptor.getConfig().isOrthogonalModeOpened()){if(n&&n.valid()){J.copy(i,n.getCenter());var o=n.getRadius();J.copy(e,this._adaptor.getConfig().getHomeEyePosition()),J.scale(e,e,2*o),J.add(e,i,e),J.copy(r,this._adaptor.getConfig().getHomeUpDirection()),t.updateViewMatrix();var a=o,s=o*t._width/t._height;t.setProjectionOrthogonal(-s,s,-a,a,1,1e3)}}else{if(n&&n.valid()){var h=this.computeHomeDistance(n);J.copy(i,n.getCenter()),J.copy(e,this._adaptor.getConfig().getHomeEyePosition()),J.scale(e,e,h),J.add(e,i,e),J.copy(r,this._adaptor.getConfig().getHomeUpDirection())}else J.copy(e,this._adaptor.getConfig().getHomeEyePosition()),J.scale(e,e,1e3),J.set(i,0,0,0),J.copy(r,this._adaptor.getConfig().getHomeUpDirection());t.updateViewMatrix()}this._moduler.requestRedraw()},locate:function(t,e){e||(e=this._moduler.getScenery().hasHighlightEntities()?this._moduler.getScenery().getHighlightBoundingSphere():this._moduler.getScenery().getBoundingSphere());var i=this._moduler.getCamera(),r=i.getEye(),n=i.getCenter(),o=i.getUp(),a=0;switch(a=this._adaptor.getConfig().isOrthogonalModeOpened()?1:e&&e.valid()?this.computeHomeDistance(e):1e3,t){case zi.FRONT:J.set(r,0,1,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.BACK:J.set(r,0,-1,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.TOP:J.set(r,0,0,-1),J.scale(r,r,a),J.set(o,0,1,0);break;case zi.BOTTOM:J.set(r,0,0,1),J.scale(r,r,a),J.set(o,0,-1,0);break;case zi.LEFT:J.set(r,1,0,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.RIGHT:J.set(r,-1,0,0),J.scale(r,r,a),J.set(o,0,0,1);break;default:J.sub(r,n,r),J.normalize(r,r),J.scale(r,r,a)}if(J.sub(r,e.getCenter(),r),J.copy(n,e.getCenter()),i.updateViewMatrix(),this._adaptor.getConfig().isOrthogonalModeOpened()){var s=e.getRadius(),h=s,u=s*i._width/i._height;i.setProjectionOrthogonal(-u,u,-h,h,1,1e3)}this._moduler.requestRedraw()},zoom:function(t,e){e?this.computeReferPoint(this._zoomPoint,this._zoomEvent):this.computeReferPoint(this._zoomPoint);var i=0;i=t?.1:-.1,this.doZoom(this._zoomPoint,i)},doZoom:function(t,e){var i=this._moduler.getCamera(),r=i.getEye(),n=i.getCenter(),o=J.MemoryPool.alloc();J.sub(o,t,r);var a=J.length(o);if(!(a<10)){if(this._adaptor.getConfig().isOrthogonalModeOpened()){var s=this._moduler.getScenery().getBoundingSphere().getRadius(),h={};i.getProjectionOrthogonal(h);var u=1-e,c=_.between(h.right*u,1e-6,6*s),l=h.top/h.right*c;i.setProjectionOrthogonal(-c,c,-l,l,h.near,h.far)}a*=e,J.normalize(o,o);var g=J.MemoryPool.alloc();J.scale(g,o,a),J.add(r,r,g),J.add(n,n,g),J.MemoryPool.free(o),J.MemoryPool.free(g),i.updateViewMatrix(),this._moduler.requestRedraw()}},rotatePush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._rotateEvent.setInitial(e[0],e[1]),this.computeReferPoint(this._rotatePoint,this._rotateEvent,!0),t.preventDefault(),!0},rotateDrag:function(t){this._operateMode|=Xi.ROTATE;var e=this.getPositionRelativeToCanvas(t,!0);return this._rotateEvent.setCurrent(e[0],e[1]),t.preventDefault(),!0},rotateRelease:function(t){return this._operateMode&Xi.ROTATE&&(this._operateMode&=~Xi.ROTATE),t.preventDefault(),!0},panPush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._panEvent.setInitial(e[0],e[1]),this.computeReferPoint(this._panPoint,this._panEvent,!0),t.preventDefault(),!0},panDrag:function(t){this._operateMode|=Xi.PAN;var e=this.getPositionRelativeToCanvas(t,!0);return this._panEvent.setCurrent(e[0],e[1]),t.preventDefault(),!0},panRelease:function(t){return this._operateMode&Xi.PAN&&(this._operateMode&=~Xi.PAN),t.preventDefault(),!0},zoomWheel:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._zoomEvent.setInitial(e[0],e[1]),t.deltaY>0?this.zoom(!1,!0):this.zoom(!0,!0),t.preventDefault(),!0},computeHomeDistance:function(t){var e=this._adaptor.getConfig().getHomeEyeDistance(),i=0,r={},n=this._moduler.getCamera();if(n.getProjectionFrustum(r)){var o=Math.abs(r.right-r.left)/r.near/2,a=Math.abs(r.top-r.bottom)/r.near/2,s=a<o?a:o;i=t.getRadius()/Math.sin(Math.atan2(s,1))}else n.getProjectionOrthogonal(r)&&(i=Math.abs(r.far-r.near)/2);return i*e},computeReferPoint:function(t,e,i){if(0===this._moduler.getScenery().getHighlightEntities().length)if(e){var r=e.getInitial(),n=[];if(this.singleIntersect(r[0],r[1],n))J.copy(t,n[0].getPoint());else if(i)this._moduler.getScenery().getBoundingBox().getCenter(t);else{var o=J.MemoryPool.alloc();this._moduler.getCamera().computeScreenToWorldNearFarPoint(r[0],r[1],o,t),J.MemoryPool.free(o)}}else this._moduler.getScenery().getHighlightBoundingBox().getCenter(t);else this._moduler.getScenery().getHighlightBoundingBox().getCenter(t)},locateToPos:function(t){var e=this._moduler.getCamera(),i=e.getEye(),r=e.getCenter(),n=J.MemoryPool.alloc();J.sub(n,t,i),J.add(r,r,n),J.copy(i,t),e.updateViewMatrix(),this._moduler.requestRedraw()},getPosition:function(t){return J.copy(t,this._moduler.getCamera().getEye())},rotateAngle:function(t,e){var i=$a.MemoryPool.alloc();$a.makeRotate(i,J.signedAngle(t,e),0,0,1);var r=this._moduler.getCamera(),n=r.getEye(),o=r.getCenter(),a=r.getUp(),s=J.MemoryPool.alloc();J.sub(s,o,n);var h=J.normalize(s,s);$a.transformVec3(a,i,a),$a.transformVec3(s,i,s),J.scale(s,s,h),J.add(o,n,s),J.MemoryPool.free(s),r.updateViewMatrix(),this._moduler.requestRedraw(),$a.MemoryPool.free(i)}}),ts.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return this._rotateEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._rotatePoint,this._rotateEvent,!0),!0},ts.prototype[Bi.TOUCH_MOVE]=function(t,e){return this._operateMode|=Xi.ROTATE,this._rotateEvent.setCurrent(e[0],e[1]),!0},ts.prototype[Bi.TOUCH_MOVE_END]=function(){return this._operateMode&Xi.ROTATE&&(this._operateMode&=~Xi.ROTATE),!0},ts.prototype[Bi.TOUCH_PAN_BEGIN]=function(t){return this._panEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._panPoint,this._panEvent,!0),this._zoomEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._zoomPoint,this._zoomEvent),!0},ts.prototype[Bi.TOUCH_PAN]=function(t,e){return this._operateMode|=Xi.PAN,this._panEvent.setCurrent(e[0],e[1]),!0},ts.prototype[Bi.TOUCH_PAN_END]=function(t){return this._operateMode&Xi.PAN&&(this._operateMode&=~Xi.PAN),!0},ts.prototype[Bi.TOUCH_ZOOM]=function(t,e){return this._zoomEvent.setInitial(t[0],t[1]),this.doZoom(this._zoomPoint,e),!0};var es=ts,is={SPEED:4e3,FOV:30,MIN_FOV:30,MAX_FOV:75,CLIMB_HEIGHT:500,JUMP_HEIGHT:800,GRAVITY_SPEED:9800,COLLISION_TIME:6,HORIZONTAL_SENSITIVITY:_.PI_4,VERTICAL_SENSITIVITY:_.PI_6,CAMERA_DISTANCE:5e3,CAMERA_MIN_DISTANCE:1e3,CAMERA_MAX_DISTANCE:1e4,CAMERA_MIN_PITCH:-_.PI_2,CAMERA_MAX_PITCH:_.PI_6,HEIGHT:1700,WIDTH:400};Object.freeze(is);var rs=is,ns=function(t){this._adaptor=t,this._moduler=t.getModuler(),this._height=rs.HEIGHT,this._width=rs.WIDTH};ns.prototype={create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.CHARACTER_MODEL,t),t._transform=it.new();var e=new lo;e.setGLState(new Yi(_e.LESS,.2,.9)),t._glstateset=e;var i=new _o;i.setGLMaterial(new hn),i.setGLLighting(new kn(Do.LIGHTING_DIRECTION,Do.LIGHTING_AMBIENT_RATIO,Do.LIGHTING_DIFFUSE_RATIO)),i.setGLFunction(new zn),t._glshadings=i;var r=new yo;r.setName("CharacterModel"),t._sceneRoot=r,t._dynamicStruct=!0,t._dynamicGeometry=!1;var n=this._adaptor.getConfig();nr.loadCharacterResource(n.getCharacterGeometry(),n.getCharacterTexture(),this.createGeometry.bind(this))},destroy:function(){this._moduler.destroyModunit(Di.CHARACTER_MODEL);var t=this._adaptor.getConfig();nr.unloadCharacterResource(t.getCharacterGeometry(),t.getCharacterTexture()),this._moduler.requestRedraw()},createGeometry:function(t,e){var i=this._moduler.getModunit(Di.CHARACTER_MODEL),r=new Et,n=t._data;r.setID(i.getID());var o=new fe;r._vertexBuffer=o;var a=n._vertexes.length/3;o._size=a;var s=new Ae;s._componentSize=3,s._componentType=_e.FLOAT,s._attributeType=le.POINT,s._bufferData=n._vertexes,o._datas.push(s);var h=new Ae;h._componentSize=3,h._componentType=_e.FLOAT,h._attributeType=le.NORMAL,h._bufferData=n._normals,o._datas.push(h);var u=new Ae;u._componentSize=2,u._componentType=_e.FLOAT,u._attributeType=le.TEXTURE,u._bufferData=n._texutures,o._datas.push(u);var c=new de;c._type=mt.ARRAY_TRIANGLES,c._start=0,c._count=a,r._solidVertexAligns.push(c);var l=new Rt;l.setID(i.getID()),l._type=Pt.MATERIAL3,l._textureImage=e._data,r._material=l;var g=r.getBoundingBox(),d=J.MemoryPool.alloc();J.sub(d,g.getMax(),g.getMin()),this._height=d[2],this._width=d[0];var A=new pt;A.addChild(r),i._sceneRoot.addChild(A);var p=A.getMatrix(),I=$a.MemoryPool.alloc();$a.makeRotate(I,_.PI,0,0,1),it.setRotation(p,I),it.setTranslation(p,[0,0,.5*-this._height]),$a.MemoryPool.free(I),this._moduler.requestRedraw()},root:function(){return this._moduler.getModunit(Di.CHARACTER_MODEL)._sceneRoot},matrix:function(){return this._moduler.getModunit(Di.CHARACTER_MODEL)._sceneRoot.getMatrix()},show:function(){this._moduler.getModunit(Di.CHARACTER_MODEL).isvalid(!0)},hide:function(){this._moduler.getModunit(Di.CHARACTER_MODEL).isvalid(!1)},height:function(){return this._height},width:function(){return this._width}};var os=ns,as=function(t){this._adaptor=t,this._moduler=t.getModuler(),this._characterModel=new os(t),this._position=J.new(),this._yaw=0,this._pitch=0,this._cameraDistance=0,this._fallSpeed=0,this._speedup=!1,this._moving=!1,this._falling=!1,this._jumping=!1};as.prototype={create:function(){var t={},e=this._moduler.getCamera();e.getProjectionPerspective(t),e.setProjectionPerspective(2*t.fovy,t.aspect,t.near,t.far),this._characterModel.create(),this.updateThirdPerson(),this.updateGravityFall(),this.updateCollisionDetect(),this.update(),this._moduler.requestRedraw()},destroy:function(){this._characterModel.destroy();var t={},e=this._moduler.getCamera();e.getProjectionPerspective(t),e.setProjectionPerspective(.5*t.fovy,t.aspect,t.near,t.far),this._moduler.requestRedraw()},update:function(){var t=this._moduler.getCamera(),e=t.getEye(),i=t.getCenter(),r=t.getUp(),n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc(),a=J.MemoryPool.alloc();J.sub(o,i,e),J.normalize(o,o),J.cross(n,o,r),J.normalize(n,n),J.cross(a,n,o),J.normalize(a,a);var s=Si.MemoryPool.alloc();Si.set(s,o[0],o[1]),Si.normalize(s,s);var h=Math.acos(Si.dot(s,[0,1]));h=s[0]>0?-h:h,this.setYaw(h),Si.MemoryPool.free(s);var u=J.MemoryPool.alloc();J.cross(u,[0,0,1],a),J.normalize(u,u);var c=Math.acos(J.dot(a,[0,0,1]));c=J.equals(u,n)?c:-c,this.setPitch(c),J.MemoryPool.free(u),J.scale(o,o,this._cameraDistance),J.add(this._position,e,o),J.sub(this._position,this._position,[0,0,.5*this._characterModel.height()]),this.setPosition(this._position),J.MemoryPool.free(n),J.MemoryPool.free(o),J.MemoryPool.free(a),this.syncCharacter(),this._moduler.requestRedraw()},zoom:function(t){if(this._adaptor.getConfig().isThirdPersonOpened()){var e=this._cameraDistance;return this._cameraDistance=_.between(this._cameraDistance*t,rs.CAMERA_MIN_DISTANCE,rs.CAMERA_MAX_DISTANCE),Math.abs(e-this._cameraDistance)>_.EPSILON}return!1},jump:function(){this._fallSpeed=this._adaptor.getConfig().getJumpStartSpeed(),this._jumping=!0},isSpeeduped:function(t){return void 0!==t&&(this._speedup=t),this._speedup},updateThirdPerson:function(){this._adaptor.getConfig().isThirdPersonOpened()?(this._characterModel.show(),this._cameraDistance=rs.CAMERA_DISTANCE):(this._characterModel.hide(),this._cameraDistance=0),this._moduler.requestRedraw()},updateGravityFall:function(){this._adaptor.getConfig().isGravityFallOpened()&&(this._falling=!0,this._fallSpeed=0,this._moduler.requestRedraw())},updateCollisionDetect:function(){},getCameraDistance:function(){return this._cameraDistance},getHeadPosition:function(t){J.addValue(t,this._position,0,0,.5*this._characterModel.height())},getFeetPosition:function(t){J.addValue(t,this._position,0,0,.5*-this._characterModel.height())},setFeetPosition:function(t){J.addValue(this._position,t,0,0,.5*this._characterModel.height())},getCharacterBox:function(t,e){var i=J.MemoryPool.alloc(),r=J.MemoryPool.alloc(),n=.5*this._characterModel.width(),o=.5*this._characterModel.height();J.sub(i,e,[n,n,o]),J.add(r,e,[n,n,o]),t.setMin(i),t.setMax(r),J.MemoryPool.free(i),J.MemoryPool.free(r)},getSpeed:function(){var t=this._adaptor.getConfig().getPersonSpeed();return this._speedup&&(t*=2),t},setPosition:function(t){J.copy(this._position,t)},getPosition:function(t){J.copy(t,this._position)},syncMovePosition:function(t,e){if(this._moving=!1,J.normalize(t,t)){var i=$a.MemoryPool.alloc();$a.makeRotate(i,this._yaw,0,0,1);var r=J.MemoryPool.alloc();$a.transformVec3(r,i,t),$a.MemoryPool.free(i);var n=this.getSpeed()*e;if(this._adaptor.getConfig().isCollisionDetectOpened()){var o=J.MemoryPool.alloc();this.moveHorizontalWithClimb(this._position,r,n,o)?this._moving=!0:this.moveHorizontalWithObstacle(this._position,r,n,o)&&(this._moving=!0),this._moving&&this.setPosition(o),J.MemoryPool.free(o)}else J.scale(r,r,n),J.add(this._position,r,this._position),this.setPosition(this._position),this._moving=!0;J.MemoryPool.free(r)}return this._moving},stopJump:function(){this._jumping&&(this._jumping=!1,this._moduler.requestRedraw())},syncGravityPosition:function(t){if(this._adaptor.getConfig().isGravityFallOpened()&&(this._moving||this._jumping||this._falling)){var e=this._fallSpeed-rs.GRAVITY_SPEED*t,i=.5*(this._fallSpeed+e)*t,r=this.landingCollisionDetect();if(0===r.length&&i<0)return this._fallSpeed=0,this._falling=!1,this.stopJump(),!1;if(this._falling=!0,0!==(r=this.verticalCollisionDetect(i)).length){if(this._fallSpeed<0){var n=this.getMaxZ(r);return this._position[2]=n+.01+.5*this._characterModel.height(),this._fallSpeed=0,this._falling=!1,this.stopJump(),!1}return this._fallSpeed>0?(this._fallSpeed=-1,!0):(this._fallSpeed=0,this._falling=!1,this.stopJump(),!1)}return this._fallSpeed=e,J.add(this._position,this._position,[0,0,i]),this.setPosition(this._position),!0}},getMaxZ:function(t){for(var e=Number.NEGATIVE_INFINITY,i=t.length,r=0;r<i;r++)for(var n=t[r],o=0;o<n._pointNumber;o++){var a=n._points[o];e=Math.max(e,a[2])}return e},landingCollisionDetect:function(){var t=J.MemoryPool.alloc(),e=J.MemoryPool.alloc();this.getHeadPosition(t),J.sub(e,t,[0,0,1e10]);var i=[];return this._moduler.getModunit(Di.ENTITY_SUBJECT).linesegmentIntersect(i,t,e,Oi.COLLISION,Oi.FAST_OUTCOME),J.MemoryPool.free(t),J.MemoryPool.free(e),i},moveHorizontalWithClimb:function(t,e,i,r){var n=J.MemoryPool.alloc();J.scaleAndAdd(n,t,e,i);var o=at.MemoryPool.alloc();this.getCharacterBox(o,n);var a=[];this._moduler.getModunit(Di.ENTITY_SUBJECT).boundingBoxIntersect(a,o,Oi.COLLISION,Oi.BEST_OUTCOME,this._adaptor.getConfig().getCollisionIgnoreCategory());var s=!1;if(0===a.length)J.copy(r,n),s=!0;else{var h=this.getMaxZ(a),u=.5*this._characterModel.height(),c=n[2]-u;if(h<c+this._adaptor.getConfig().getClimbHeight()&&h>=c){n[2]=h+u+100,this.getCharacterBox(o,n);var l=[];this._moduler.getModunit(Di.ENTITY_SUBJECT).boundingBoxIntersect(l,o,Oi.COLLISION,Oi.FAST_OUTCOME,this._adaptor.getConfig().getCollisionIgnoreCategory()),0===l.length&&(J.copy(r,n),s=!0)}}return at.MemoryPool.free(o),J.MemoryPool.free(n),s},moveHorizontalWithObstacle:function(t,e,i,r){var n=J.MemoryPool.alloc();J.scaleAndAdd(n,t,e,i);var o=J.MemoryPool.alloc();J.cross(o,e,[0,0,1]),J.normalize(o,o);var a=J.MemoryPool.alloc();J.negate(a,o);var s=J.MemoryPool.alloc(),h=this.moveHorizontalWithClimb(t,o,i,s),u=J.MemoryPool.alloc(),c=this.moveHorizontalWithClimb(t,a,i,u),l=!1,g=J.MemoryPool.alloc(),_=J.MemoryPool.alloc();if(c&&!h?(J.copy(g,u),J.copy(_,a),l=!0):!c&&h?(J.copy(g,s),J.copy(_,o),l=!0):J.copy(r,t),J.MemoryPool.free(u),J.MemoryPool.free(a),J.MemoryPool.free(s),J.MemoryPool.free(o),l){var d=J.MemoryPool.alloc();J.copy(d,e);for(var A=0;A<6;A++){var p=J.MemoryPool.alloc(),I=J.MemoryPool.alloc();J.add(p,d,_),J.normalize(p,p),this.moveHorizontalWithClimb(t,p,i,I)?(J.copy(_,p),J.copy(g,I)):J.copy(d,I),J.MemoryPool.free(p),J.MemoryPool.free(I)}J.copy(r,g),J.MemoryPool.free(d)}return J.MemoryPool.free(g),J.MemoryPool.free(_),J.MemoryPool.free(n),l},verticalCollisionDetect:function(t){var e=J.MemoryPool.alloc();J.scale(e,[0,0,1],t),J.add(e,this._position,e);var i=at.MemoryPool.alloc();this.getCharacterBox(i,e);var r=[];return this._moduler.getModunit(Di.ENTITY_SUBJECT).boundingBoxIntersect(r,i,Oi.COLLISION,Oi.BEST_OUTCOME,this._adaptor.getConfig().getCollisionIgnoreCategory()),at.MemoryPool.free(i),J.MemoryPool.free(e),r},setYaw:function(t){this._yaw=t%_._2_PI},syncYaw:function(t){t*=this._adaptor.getConfig().getPersonHSensitivity(),this._yaw=(this._yaw+t)%_._2_PI},setPitch:function(t){this._pitch=t},syncPitch:function(t){t*=this._adaptor.getConfig().getPersonVSensitivity(),this._pitch=_.between(this._pitch+t,rs.CAMERA_MIN_PITCH,rs.CAMERA_MAX_PITCH)},cameraEyeCollisionDetect:function(t,e){var i=[];this._moduler.getModunit(Di.ENTITY_SUBJECT).linesegmentIntersect(i,t,e,Oi.COLLISION);var r=void 0;if(0!==i.length){var n=i[0],o=J.MemoryPool.alloc();J.sub(o,t,n.getPoint()),r=J.length(o),J.MemoryPool.free(o)}return r},characterCollisionDetect:function(){},syncCharacter:function(){var t=$a.MemoryPool.alloc();$a.makeRotate(t,this._yaw,0,0,1);var e=this._characterModel.matrix();it.setRotation(e,t),it.setTranslation(e,this._position),$a.MemoryPool.free(t)},syncCamera:function(){var t=this._moduler._camera,e=t.getEye(),i=t.getCenter(),r=t.getUp(),n=$a.MemoryPool.alloc(),o=$a.MemoryPool.alloc(),a=$a.MemoryPool.alloc(),s=J.MemoryPool.alloc();$a.makeRotate(n,this._pitch,1,0,0),$a.makeRotate(o,this._yaw,0,0,1),$a.multiply(a,o,n),$a.transformVec3(s,a,[0,1,0]),J.normalize(s,s);var h=J.MemoryPool.alloc();if(this.getHeadPosition(h),this._adaptor.getConfig().isThirdPersonOpened()){J.scaleAndAdd(e,h,s,-this._cameraDistance);var u=this.cameraEyeCollisionDetect(h,e);void 0!==u?u<rs.CAMERA_MIN_DISTANCE?(J.copy(e,h),this._characterModel.hide()):(u-=100,J.scaleAndAdd(e,h,s,-u),this._characterModel.show()):this._characterModel.show()}else J.copy(e,h);J.scaleAndAdd(i,e,s,1e3),$a.transformVec3(r,a,[0,0,1]),J.MemoryPool.free(h),$a.MemoryPool.free(n),$a.MemoryPool.free(o),$a.MemoryPool.free(a),J.MemoryPool.free(s),t.updateViewMatrix(),this._moduler.requestRedraw()}};var ss=as,hs=function(t,e){Bi.call(this,t),this._leftRoot=void 0,this._rightRoot=void 0,this._centerTrans=void 0,this._curButton=void 0,this._baseButton=void 0,this._centerButton=void 0,this._upButton=void 0,this._downButton=void 0,this._personRoaming=e,this._leftPanelCenter=Si.create(0,0),this._leftPanelRadius=100};hs.person_panel_base="person_panel_base",hs.person_panel_center="person_panel_center",hs.person_panel_up="person_panel_up",hs.person_panel_down="person_panel_down",(hs.prototype=Object.create(Bi.prototype)).constructor=hs,Object.assign(hs.prototype,{type:function(){return Ti.PERSON_PANEL},create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.PERSON_PANEL,t);var e=this._adaptor.getConfig(),i=this._moduler._camera,r=i._x,n=i._y,o=i._width,a=i._height,s=new mo;s.resize(r,n,o,a);var h=J.MemoryPool.alloc();J.set(h,0,0,100);var u=J.MemoryPool.alloc();J.set(u,0,0,0);var c=J.MemoryPool.alloc();J.set(c,0,1,0),s.setViewLookAt(h,u,c),J.MemoryPool.free(h),J.MemoryPool.free(u),J.MemoryPool.free(c),s.setProjectionOrthogonal(0,o,0,a,1,1e3),t._camera=s;var l=new lo;l.setGLState(new Hi(r,n,o,a)),l.setGLState(new Yi(_e.LEQUAL,0,.1)),l.setGLState(new jn(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA)),t._glstateset=l;var g=new _o;g.setGLMaterial(new Cn(this._moduler.getGLContext())),g.setGLLighting(new Vn),g.setGLFunction(new zn),t._glshadings=g;var _=new yo;_.setName("PersonPanel"),t._sceneRoot=_,t._dynamicStruct=!0,nr.loadImageResources(e.getPersonPanelResources(),this.createGeometry.bind(this))},destroy:function(){this._moduler.destroyModunit(Di.PERSON_PANEL),nr.unloadImageResources(this._adaptor.getConfig().getPersonPanelResources()),this._leftRoot=void 0,this._rightRoot=void 0,this._centerTrans=void 0,this._curButton=void 0,this._baseButton=void 0,this._centerButton=void 0,this._upButton=void 0,this._downButton=void 0,this._moduler.requestRedraw()},rectVertexArr:function(t,e,i,r){var n=t+i,o=e+r;return new Float32Array([t,e,0,n,e,0,n,o,0,n,o,0,t,o,0,t,e,0])},resetPanelPos:function(){var t=this._moduler.getModunit(Di.PERSON_PANEL),e=this._adaptor.getConfig().getPersonPanelMargin();it.setTranslation(this._leftRoot.getMatrix(),[e.left,e.bottom,0]),it.setTranslation(this._rightRoot.getMatrix(),[t.getCamera()._width-e.right,e.bottom,0]),Si.set(this._leftPanelCenter,e.size/2+e.left,e.size/2+e.bottom),this._leftPanelRadius=e.size/2},createGeometry:function(t){if(4===t.length){var e=this._adaptor.getConfig().getPersonPanelMargin(),i=this._moduler.getModunit(Di.PERSON_PANEL);this._leftRoot=new pt,i._sceneRoot.addChild(this._leftRoot),this._rightRoot=new pt,i._sceneRoot.addChild(this._rightRoot),this.resetPanelPos();var r=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),n=e.size;this._baseButton=this.createFaceGeometry(this.rectVertexArr(0,0,n,n),r,t[0]),this._baseButton.setName(hs.person_panel_base),this._leftRoot.addChild(this._baseButton),this._centerTrans=new pt,this._leftRoot.addChild(this._centerTrans);var o=.6*n,a=(n-o)/2;this._centerButton=this.createFaceGeometry(this.rectVertexArr(a,a,o,o),r,t[1]),this._centerButton.setName(hs.person_panel_center),this._centerTrans.addChild(this._centerButton);var s=.5*n;this._upButton=this.createFaceGeometry(this.rectVertexArr(-s,s,s,s),r,t[2]),this._upButton.setName(hs.person_panel_up),this._rightRoot.addChild(this._upButton),this._downButton=this.createFaceGeometry(this.rectVertexArr(-s,0,s,s),r,t[3]),this._downButton.setName(hs.person_panel_down),this._rightRoot.addChild(this._downButton),i.traverse(),this._moduler.requestRedraw()}},createFaceGeometry:function(t,e,i){var r=this._moduler.getModunit(Di.PERSON_PANEL),n=new Et;n.setID(r.getID());var o=new fe;n._vertexBuffer=o,o._size=6;var a=new Ae;a._componentSize=3,a._componentType=_e.FLOAT,a._attributeType=le.POINT,a._bufferData=t,o._datas.push(a);var s=new Ae;s._componentSize=2,s._componentType=_e.FLOAT,s._attributeType=le.TEXTURE,s._bufferData=e,o._datas.push(s);var h=new de;h._type=mt.ARRAY_TRIANGLES,h._start=0,h._count=6,n._solidVertexAligns.push(h);var u=new Rt;return u.setID(r.getID()),u._type=Pt.MATERIAL8,u._textureImage=i._data,u._multiplyColor=w.create(1,1,1,1),n._material=u,n},resize:function(){this._adaptor.getConfig();var t=this._moduler._camera,e=t._x,i=t._y,r=t._width,n=t._height,o=this._moduler.getModunit(Di.PERSON_PANEL);o._glstateset.getGLState(Fi.Viewport).resize(e,i,r,n),o._camera.resize(e,i,r,n),o._camera.setProjectionOrthogonal(0,r,0,n,1,1e3),this.resetPanelPos(),this._moduler.requestRedraw()},pickButton:function(t,e){var i=this._moduler.getModunit(Di.PERSON_PANEL),r=i._camera,n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc();r.computeScreenToWorldNearFarPoint(t,e,n,o,!1);var a=[];if(i.linesegmentIntersect(a,n,o,Oi.SELECTION),0!==a.length)return a[0].getDrawable().getGeometry();J.MemoryPool.free(n),J.MemoryPool.free(o)},lightButton:function(t,e){e?w.copy(t._material._multiplyColor,Do.PERSON_PANEL_LIGHT):w.copy(t._material._multiplyColor,Do.PERSON_PANEL_DARK)},dragCenterButton:function(t,e){var i=this._moduler.getModunit(Di.PERSON_PANEL).getCamera(),r=Si.new();r[0]=i.fromNormalizedX(t),r[1]=i.fromNormalizedY(e);var n=Si.new();Si.subtract(n,r,this._leftPanelCenter);var o=Si.length(n);if(o>.001){var a=Si.new();Si.normalize(a,n),o>this._leftPanelRadius&&Si.scale(n,a,this._leftPanelRadius),it.setTranslation(this._centerTrans.getMatrix(),[n[0],n[1],0]),this._personRoaming.moveFree([a[0],a[1],0])}},releaseCenterButton:function(){it.setTranslation(this._centerTrans.getMatrix(),[0,0,0]),this._personRoaming.moveFree([0,0,0])},onPush:function(t,e){return this._curButton&&(this.onRelease(),this._moduler.requestRedraw()),this._curButton=this.pickButton(t,e),!!this._curButton&&(this._curButton===this._centerButton||this._curButton===this._baseButton?(this.lightButton(this._baseButton,!0),this.lightButton(this._centerButton,!0),this.dragCenterButton(t,e)):this._curButton===this._upButton?(this.lightButton(this._upButton,!0),this._personRoaming.moveUpward(!0)):this._curButton===this._downButton&&(this.lightButton(this._downButton,!0),this._personRoaming.moveDownward(!0)),this._moduler.requestRedraw(),!0)},onDrag:function(t,e){return!!this._curButton&&(this._curButton===this._centerButton||this._curButton===this._baseButton?this.dragCenterButton(t,e):this._curButton===this._upButton||(this._curButton,this._downButton),this._moduler.requestRedraw(),!0)},onRelease:function(){return!!this._curButton&&(this._curButton===this._centerButton||this._curButton===this._baseButton?(this.lightButton(this._baseButton,!1),this.lightButton(this._centerButton,!1),this.releaseCenterButton()):this._curButton===this._upButton?(this.lightButton(this._upButton,!1),this._personRoaming.moveUpward(!1)):this._curButton===this._downButton&&(this.lightButton(this._downButton,!1),this._personRoaming.moveDownward(!1)),this._curButton=null,this._moduler.requestRedraw(),!0)}}),hs.prototype[Bi.MOUSE_LEFTPUSH]=function(t){t.preventDefault();var e=this.getPositionRelativeToCanvas(t,!0);return this.onPush(e[0],e[1])},hs.prototype[Bi.MOUSE_LEFTDRAG]=function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this.onDrag(e[0],e[1])},hs.prototype[Bi.MOUSE_LEFTRELEASE]=function(t){return this.onRelease()},hs.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return this.onPush(t[0],t[1])},hs.prototype[Bi.TOUCH_MOVE]=function(t,e){return this.onDrag(e[0],e[1])},hs.prototype[Bi.TOUCH_MOVE_END]=function(t){return this.onRelease()},hs.prototype[Bi.TOUCH_CLICK]=function(t){return!!this._curButton};var us=hs,cs=function(t){Fo.call(this,t),this._characterControl=new ss(t),this._direction=J.new(),this._moveflag=[!1,!1,!1,!1,!1,!1]},ls={FRONT:0,BACK:1,LEFT:2,RIGHT:3,UP:4,DOWN:5};(cs.prototype=Object.create(Fo.prototype)).constructor=cs,Object.assign(cs.prototype,{create:function(t){this._multipickRect.create(),this._characterControl.create(),t&&this.home(),this._moduler.requestRedraw()},destroy:function(){this._multipickRect.destroy(),this._characterControl.destroy(),this._moduler.requestRedraw()},sync:function(){var t=!1;this._operateMode&Xi.ROTATE&&(t=this.rotate()),this._operateMode&Xi.PICK&&this.drawMultiplePick(),(t=this.move()||t)&&(this._characterControl.syncCharacter(),this._characterControl.syncCamera())},home:function(){var t=this._moduler.getScenery().getBoundingBox(),e=J.MemoryPool.alloc();t&&t.valid()?(t.getCenter(e),e[1]=t.getYMin()):J.set(e,0,0,0),this._characterControl.setPosition(e),this._characterControl.setPitch(0),this._characterControl.setYaw(0),this._characterControl.syncCharacter(),this._characterControl.syncCamera(),J.MemoryPool.free(e),this._moduler.requestRedraw()},invalid:function(t){return this._moveflag=[!1,!1,!1,!1,!1,!1],J.set(this._direction,0,0,0),this._characterControl.isSpeeduped(!1),this.pickRelease(t),!0},updateThirdPerson:function(){this._characterControl.updateThirdPerson(),this._characterControl.syncCharacter(),this._characterControl.syncCamera()},updateGravityFall:function(){this._characterControl.updateGravityFall(),this._characterControl.syncCharacter(),this._characterControl.syncCamera()},updateCollisionDetect:function(){this._characterControl.updateCollisionDetect(),this._characterControl.syncCharacter(),this._characterControl.syncCamera()},rotate:function(){var t=this._rotateEvent.getDelta();return!(Math.abs(t[0])<_.EPSILON&&Math.abs(t[1])<_.EPSILON)&&(this._characterControl.syncYaw(-t[0]),this._characterControl.syncPitch(t[1]),this._moduler.requestRedraw(),this._rotateEvent.sync(),!0)},move:function(){var t=this._adaptor.getTimer().delta();t*=_.MILLISECOND_PER_SECOND;var e=this._characterControl.syncMovePosition(this._direction,t),i=this._characterControl.syncGravityPosition(t);return e||i},zoom:function(t){var e=1;e=t?.95:1.05,this._characterControl.zoom(e)&&this._characterControl.syncCamera()},moveFree:function(t){J.copy(this._direction,t)},moveForward:function(t){t?(this._moveflag[ls.FRONT]=!0,this._moveflag[ls.BACK]?this._direction[1]=0:this._direction[1]=1):(this._moveflag[ls.FRONT]=!1,this._moveflag[ls.BACK]?this._direction[1]=-1:this._direction[1]=0)},moveBackward:function(t){t?(this._moveflag[ls.BACK]=!0,this._moveflag[ls.FRONT]?this._direction[1]=0:this._direction[1]=-1):(this._moveflag[ls.BACK]=!1,this._moveflag[ls.FRONT]?this._direction[1]=1:this._direction[1]=0)},moveLeftward:function(t){t?(this._moveflag[ls.LEFT]=!0,this._moveflag[ls.RIGHT]?this._direction[0]=0:this._direction[0]=-1):(this._moveflag[ls.LEFT]=!1,this._moveflag[ls.RIGHT]?this._direction[0]=1:this._direction[0]=0)},moveRightward:function(t){t?(this._moveflag[ls.RIGHT]=!0,this._moveflag[ls.LEFT]?this._direction[0]=0:this._direction[0]=1):(this._moveflag[ls.RIGHT]=!1,this._moveflag[ls.LEFT]?this._direction[0]=-1:this._direction[0]=0)},moveUpward:function(t){this._adaptor.getConfig().isGravityFallOpened()?this._characterControl.jump():t?(this._moveflag[ls.UP]=!0,this._moveflag[ls.DOWN]?this._direction[2]=0:this._direction[2]=1):(this._moveflag[ls.UP]=!1,this._moveflag[ls.DOWN]?this._direction[2]=-1:this._direction[2]=0)},moveDownward:function(t){this._adaptor.getConfig().isGravityFallOpened()||(t?(this._moveflag[ls.DOWN]=!0,this._moveflag[ls.UP]?this._direction[2]=0:this._direction[2]=-1):(this._moveflag[ls.DOWN]=!1,this._moveflag[ls.UP]?this._direction[2]=1:this._direction[2]=0))},rotatePush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._rotateEvent.setInitial(e[0],e[1]),t.preventDefault(),!0},rotateDrag:function(t){this._operateMode|=Xi.ROTATE;var e=this.getPositionRelativeToCanvas(t,!0);return this._rotateEvent.setCurrent(e[0],e[1]),t.preventDefault(),!0},rotateRelease:function(t){return this._operateMode&Xi.ROTATE&&(this._operateMode&=~Xi.ROTATE),t.preventDefault(),!0},zoomWheel:function(t){return t.deltaY>0?this.zoom(!1):this.zoom(!0),t.preventDefault(),!0},locateToPos:function(t){this._characterControl.setFeetPosition(t),this._characterControl.syncCamera(),this._characterControl.syncCharacter(),this._moduler.requestRedraw()},getPosition:function(t){this._characterControl.getFeetPosition(t)},rotateAngle:function(t,e){this._characterControl.setYaw(J.signedAngle([0,1,0],e)),this._characterControl.syncCamera()}}),cs.prototype[Bi.KEYBORAD_PUSH]=function(t){return"Space"===t.code?(this.home(),!0):"Escape"===t.code?(this.escape(),!0):"KeyW"===t.code?(this.moveForward(!0),!0):"KeyS"===t.code?(this.moveBackward(!0),!0):"KeyA"===t.code?(this.moveLeftward(!0),!0):"KeyD"===t.code?(this.moveRightward(!0),!0):"KeyR"===t.code?(this.moveUpward(!0),!0):"KeyF"===t.code?(this.moveDownward(!0),!0):"Shift"===t.key&&(this._characterControl.isSpeeduped(!0),!0)},cs.prototype[Bi.KEYBORAD_RELEASE]=function(t){return"KeyW"===t.code?(this.moveForward(!1),!0):"KeyS"===t.code?(this.moveBackward(!1),!0):"KeyA"===t.code?(this.moveLeftward(!1),!0):"KeyD"===t.code?(this.moveRightward(!1),!0):"KeyR"===t.code?(this.moveUpward(!1),!0):"KeyF"===t.code?(this.moveDownward(!1),!0):"Shift"===t.key&&(this._characterControl.isSpeeduped(!1),!0)},cs.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return this._rotateEvent.setInitial(t[0],t[1]),!0},cs.prototype[Bi.TOUCH_MOVE]=function(t,e){return this._operateMode|=Xi.ROTATE,this._rotateEvent.setCurrent(e[0],e[1]),!0},cs.prototype[Bi.TOUCH_MOVE_END]=function(t){return this._operateMode&Xi.ROTATE&&(this._operateMode&=~Xi.ROTATE),!0},cs.prototype[Bi.TOUCH_ZOOM]=function(t,e){return this._characterControl.zoom(1-e)&&this._characterControl.syncCamera(),!0};var gs=cs,_s=function(t){Fo.call(this,t),this._panPoint=J.new(),this._rotatePoint=J.new(),this._zoomPoint=J.new()};(_s.prototype=Object.create(Fo.prototype)).constructor=_s,Object.assign(_s.prototype,{updateProjection:function(){this._adaptor.getConfig().isOrthogonalModeOpened()?this._moduler.getCamera().initProjectionOrthogonal():this._moduler.getCamera().initProjectionPerspective()},sync:function(){this._operateMode&Xi.PAN&&this.pan(),this._operateMode&Xi.PICK&&this.drawMultiplePick()},pan:function(){var t=this._panEvent.getDelta();if(Math.abs(t[0])<_.EPSILON&&Math.abs(t[1])<_.EPSILON)return!1;var e=this._moduler.getCamera(),i=e.getEye(),r=e.getCenter(),n=e.getUp(),o=J.MemoryPool.alloc();if(this._adaptor.getConfig().isOrthogonalModeOpened()){var a={};e.getProjectionOrthogonal(a);var s=-t[0]*a.right,h=-t[1]*a.top;J.set(o,s,0,h)}var u=J.MemoryPool.alloc(),c=J.MemoryPool.alloc(),l=J.MemoryPool.alloc();J.sub(c,r,i),J.normalize(c,c),J.cross(u,c,n),J.normalize(u,u),J.cross(l,u,c),J.normalize(l,l);var g=it.MemoryPool.alloc();return it.set(g,u[0],u[1],u[2],0,c[0],c[1],c[2],0,l[0],l[1],l[2],0,0,0,0,1),J.transformMat4(o,o,g),J.add(i,i,o),J.add(r,r,o),it.MemoryPool.free(g),J.MemoryPool.free(u),J.MemoryPool.free(c),J.MemoryPool.free(l),J.MemoryPool.free(o),e.updateViewMatrix(),this._moduler.requestRedraw(),this._panEvent.sync(),!0},invalid:function(t){return this.rotateRelease(t),this.panRelease(t),this.pickRelease(t),!0},home:function(){var t=this._moduler.getCamera(),e=t.getEye(),i=t.getCenter(),r=t.getUp(),n=this._moduler.getScenery().getBoundingSphere();if(this._adaptor.getConfig().isOrthogonalModeOpened()&&n&&n.valid()){J.copy(i,n.getCenter());var o=n.getRadius();J.copy(e,this._adaptor.getConfig().getHomeEyePosition()),J.scale(e,e,2*o),J.add(e,i,e),J.copy(r,this._adaptor.getConfig().getHomeUpDirection()),t.updateViewMatrix();var a=o,s=o*t._width/t._height;t.setProjectionOrthogonal(-s,s,-a,a,1,1e3)}this._moduler.requestRedraw()},locate:function(t,e){e||(e=this._moduler.getScenery().hasHighlightEntities()?this._moduler.getScenery().getHighlightBoundingSphere():this._moduler.getScenery().getBoundingSphere());var i=this._moduler.getCamera(),r=i.getEye(),n=i.getCenter(),o=i.getUp(),a=0;switch(this._adaptor.getConfig().isOrthogonalModeOpened()&&(a=1),t){case zi.FRONT:J.set(r,0,1,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.BACK:J.set(r,0,-1,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.TOP:J.set(r,0,0,-1),J.scale(r,r,a),J.set(o,0,1,0);break;case zi.BOTTOM:J.set(r,0,0,1),J.scale(r,r,a),J.set(o,0,-1,0);break;case zi.LEFT:J.set(r,1,0,0),J.scale(r,r,a),J.set(o,0,0,1);break;case zi.RIGHT:J.set(r,-1,0,0),J.scale(r,r,a),J.set(o,0,0,1);break;default:J.sub(r,n,r),J.normalize(r,r),J.scale(r,r,a)}if(J.sub(r,e.getCenter(),r),J.copy(n,e.getCenter()),i.updateViewMatrix(),this._adaptor.getConfig().isOrthogonalModeOpened()){var s=e.getRadius(),h=s,u=s*i._width/i._height;i.setProjectionOrthogonal(-u,u,-h,h,1,1e3)}this._moduler.requestRedraw()},zoom:function(t,e){e?this.computeReferPoint(this._zoomPoint,this._zoomEvent):this.computeReferPoint(this._zoomPoint);var i=0;i=t?.1:-.1,this.doZoom(this._zoomPoint,i)},doZoom:function(t,e){var i=this._moduler.getCamera(),r=i.getEye(),n=i.getCenter(),o=J.MemoryPool.alloc();J.sub(o,t,r);var a=J.length(o);if(!(a<10)){if(this._adaptor.getConfig().isOrthogonalModeOpened()){var s=this._moduler.getScenery().getBoundingSphere().getRadius(),h={};i.getProjectionOrthogonal(h);var u=1-e,c=_.between(h.right*u,1e-6,6*s),l=h.top/h.right*c;i.setProjectionOrthogonal(-c,c,-l,l,h.near,h.far)}a*=e,J.normalize(o,o);var g=J.MemoryPool.alloc();J.scale(g,o,a),J.add(r,r,g),J.add(n,n,g);var d=this._moduler.getScenery().getBoundingBox(),A=this._moduler.getScenery().getBoundingSphere();if(d&&d.valid()){var p=J.MemoryPool.alloc();d.getCenter(p),J.sub(g,r,p);var I=J.len(g),f=A.getRadius();I<A.getRadius()&&(J.sub(o,r,p),J.scale(o,o,2*f),r[2]+=o[2],p[2]+=o[2]),J.MemoryPool.free(p)}J.MemoryPool.free(o),J.MemoryPool.free(g),i.updateViewMatrix(),this._moduler.requestRedraw()}},panPush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._panEvent.setInitial(e[0],e[1]),this.computeReferPoint(this._panPoint,this._panEvent,!0),t.preventDefault(),!0},panDrag:function(t){this._operateMode|=Xi.PAN;var e=this.getPositionRelativeToCanvas(t,!0);return this._panEvent.setCurrent(e[0],e[1]),t.preventDefault(),!0},panRelease:function(t){return this._operateMode&Xi.PAN&&(this._operateMode&=~Xi.PAN),t.preventDefault(),!0},zoomWheel:function(t){var e=this.getPositionRelativeToCanvas(t,!0);return this._zoomEvent.setInitial(e[0],e[1]),t.deltaY>0?this.zoom(!1,!0):this.zoom(!0,!0),t.preventDefault(),!0},computeHomeDistance:function(t){var e=this._adaptor.getConfig().getHomeEyeDistance(),i=0,r={},n=this._moduler.getCamera();if(n.getProjectionFrustum(r)){var o=Math.abs(r.right-r.left)/r.near/2,a=Math.abs(r.top-r.bottom)/r.near/2,s=a<o?a:o;i=t.getRadius()/Math.sin(Math.atan2(s,1))}else n.getProjectionOrthogonal(r)&&(i=Math.abs(r.far-r.near)/2);return i*e},computeReferPoint:function(t,e,i){if(e){var r=e.getInitial(),n=[];if(this.singleIntersect(r[0],r[1],n))J.copy(t,n[0].getPoint());else if(i)this._moduler.getScenery().getBoundingBox().getCenter(t);else{var o=J.MemoryPool.alloc();this._moduler.getCamera().computeScreenToWorldNearFarPoint(r[0],r[1],o,t),J.MemoryPool.free(o)}}else this._moduler.getScenery().getBoundingBoxWithClip().getCenter(t)},singleIntersect:function(t,e,i){var r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();return this._moduler.getCamera().computeScreenToWorldNearFarPoint(t,e,r,n),this._moduler.getModunit(Di.PRIMITIVE_SUBJECT).linesegmentIntersect(i,r,n,Oi.SELECTION),J.MemoryPool.free(r),J.MemoryPool.free(n),0!==i.length},linesegmentHighlightEntity:function(t,e,i){var r=!1,n=[];if(this._moduler.getModunit(Di.PRIMITIVE_SUBJECT).linesegmentIntersect(n,t,e,Oi.SELECTION),0!==n.length){var o=this._adaptor.getConfig().getHighligthMaterial(),a=n[0];i&&J.copy(i,a.getPoint());var s=a.getDrawable().getRenderEntity();this._continuousPick?this._moduler.getScenery().highlightEntityBySelect(s,!0,!1,o):this._removePick?this._moduler.getScenery().unhighlightEntityBySelect(s,!1,!1):this._moduler.getScenery().highlightEntityBySelect(s,!1,!1,o),r=!0}return r},polytopeHighlightEntity:function(t){var e=!1,i=[];this._moduler.getModunit(Di.PRIMITIVE_SUBJECT).polytopeIntersect(i,t,Oi.SELECTION,Oi.FAST_OUTCOME);var r=i.length;if(0!==r){for(var n=this._adaptor.getConfig().getHighligthMaterial(),o=0;o<r;o++){var a=i[o].getDrawable().getRenderEntity();this._continuousPick?this._moduler.getScenery().highlightEntityBySelect(a,!0,!1):this._removePick?this._moduler.getScenery().unhighlightEntityBySelect(a,!0,!1):this._moduler.getScenery().highlightEntityBySelect(a,!1,!1,n)}e=!0}return this._removePick&&this._moduler.getScenery().unhighlightSync(),e},locateToPos:function(t){var e=this._moduler.getCamera(),i=e.getEye(),r=e.getCenter(),n=J.MemoryPool.alloc();J.sub(n,t,i),J.add(r,r,n),J.copy(i,t),e.updateViewMatrix(),this._moduler.requestRedraw()},getPosition:function(t){return J.copy(t,this._moduler.getCamera().getEye())}}),_s.prototype[Bi.MOUSE_LEFTPUSH]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotatePush(t);case Re.e.PAN:return this.panPush(t);default:return!1}},_s.prototype[Bi.MOUSE_LEFTDRAG]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotateDrag(t);case Re.e.PAN:return this.panDrag(t);default:return!1}},_s.prototype[Bi.MOUSE_LEFTRELEASE]=function(t){switch(this._adaptor.getConfig().getLeftMouseOperation()){case Re.e.ROTATE:return this.rotateRelease(t);case Re.e.PAN:return this.panRelease(t);default:return!1}},_s.prototype[Bi.TOUCH_CLICK]=function(t){return!1},_s.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return this._rotateEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._rotatePoint,this._rotateEvent,!0),!0},_s.prototype[Bi.TOUCH_PAN_BEGIN]=function(t){return this._panEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._panPoint,this._panEvent,!0),this._zoomEvent.setInitial(t[0],t[1]),this.computeReferPoint(this._zoomPoint,this._zoomEvent),!0},_s.prototype[Bi.TOUCH_PAN]=function(t,e){return this._operateMode|=Xi.PAN,this._panEvent.setCurrent(e[0],e[1]),!0},_s.prototype[Bi.TOUCH_PAN_END]=function(t){return this._operateMode&Xi.PAN&&(this._operateMode&=~Xi.PAN),!0},_s.prototype[Bi.TOUCH_ZOOM]=function(t,e){return this._zoomEvent.setInitial(t[0],t[1]),this.doZoom(this._zoomPoint,e),!0};var ds=_s,As=function(t){this._adaptor=t,this._moduler=t.getModuler(),this._type=Wi.ORBIT,this._roaming=new es(this._adaptor),this._personPanel=void 0,this._adaptor.setOperation(this._roaming)};As.prototype={reset:function(){this._roaming.home()},openPlaneRoaming:function(){return this._type!==Wi.PLANE&&(!1!==this._adaptor.getConfig().isOrthogonalModeOpened()&&(this._roaming=new ds(this._adaptor),this._adaptor.setOperation(this._roaming),this._type=Wi.PLANE,!0))},closePlaneRoaming:function(){this._type===Wi.PLANE&&(this._roaming=new es(this._adaptor),this._adaptor.setOperation(this._roaming),this._type=Wi.ORBIT)},openPersonRoaming:function(){this._type!==Wi.PERSON&&(this._adaptor.getConfig().isCharacterResourcesValid()?(this._roaming=new gs(this._adaptor),this._adaptor.setOperation(this._roaming),this._type=Wi.PERSON):console.log("person resource has not init!"))},closePersonRoaming:function(){this._type===Wi.PERSON&&(this._roaming=new es(this._adaptor),this._adaptor.setOperation(this._roaming),this._type=Wi.ORBIT)},setPersonResource:function(t,e){t&&e&&this._type;var i=this._adaptor.getConfig();i.setCharacterGeometry(t),i.setCharacterTexture(e)},openPersonPanel:function(){this._type===Wi.PERSON&&(this._personPanel=new us(this._adaptor,this._roaming),this._adaptor.setOperation(this._personPanel))},closePersonPanel:function(){this._personPanel&&(this._adaptor.resetOperation(this._personPanel.type()),this._personPanel=void 0)},setPersonPanelProperty:function(t,e,i,r){this._adaptor.getConfig().setPersonPanelMargin(t,e,i,r)},setPersonPanelImages:function(t,e,i,r){this._adaptor.getConfig().setPersonPanelImages([t,e,i,r])},setPersonSpeed:function(t){this._adaptor.getConfig().setPersonSpeed(1e3*t)},isThirdPersonOpened:function(t){var e=this._adaptor.getConfig();if(e.isThirdPersonOpened()===t)return!1;e.isThirdPersonOpened(t),this._type===Wi.PERSON&&this._roaming.updateThirdPerson()},isGravityFallOpened:function(t){var e=this._adaptor.getConfig();if(e.isGravityFallOpened()===t)return!1;e.isGravityFallOpened(t),this._type===Wi.PERSON&&this._roaming.updateGravityFall()},isCollisionDetectOpened:function(t){var e=this._adaptor.getConfig();if(e.isCollisionDetectOpened()===t)return!1;e.isCollisionDetectOpened(t),this._type===Wi.PERSON&&this._roaming.updateCollisionDetect()},isOrthogonalModeOpened:function(t){var e=this._adaptor.getConfig();if(e.isOrthogonalModeOpened()===t)return!1;e.isOrthogonalModeOpened(t),this._type===Wi.ORBIT&&(this._roaming.updateProjection(),this._roaming.home())},setLeftMouseOperation:function(t){switch(t){case Re.e.PICK:case Re.e.ROTATE:case Re.e.PAN:return void this._adaptor.getConfig().setLeftMouseOperation(t);default:return}},getHighlightEntities:function(){var t=this._moduler.getScenery().getHighlightEntities(),e=t.length;if(0===e)return[];for(var i=[],r=0;r<e;r++)i.push(t[r].getUniqueId());return i},getSelectParameters:function(){var t=this._moduler.getScenery().getHighlightEntities(),e=t.length;if(0===e)return[];for(var i=[],r=0;r<e;r++)i.push(t[r].getEntity().getParameters());return i},locateSelectEntities:function(){this._roaming.locate()},locateAssignEntities:function(t){var e=ht.MemoryPool.alloc();if(e.reset(),Y.isStringType(t)){var i=this._moduler.getScenery().getRenderEntity(t);i&&e.expandByBoundingBox(i.getBoundingBox())}else if(Y.isArrayType(t)){var r=t.length;if(0===r)return;for(var n=0;n<r;n++){var o=this._moduler.getScenery().getRenderEntity(t[n]);o&&e.expandByBoundingBox(o.getBoundingBox())}}e.valid()&&this._roaming.locate(void 0,e),ht.MemoryPool.free(e)},lockSelectEntities:function(t){},revertHomePosition:function(){this._roaming.home()},zoomInPosition:function(){this._roaming.zoom(!0)},zoomOutPosition:function(){this._roaming.zoom(!1)},saveViewState:function(t){t._personRoamingOpened=this._type===Wi.PERSON,t._thirdPersonOpened=this._adaptor.getConfig().isThirdPersonOpened(),t._collisionDectectOpened=this._adaptor.getConfig().isCollisionDetectOpened(),t._gravityFallOpened=this._adaptor.getConfig().isGravityFallOpened(),t._mouseOperateOpened=!1,t._cameraDistance=0},loadViewState:function(t){this._adaptor.getConfig().isThirdPersonOpened(t._thirdPersonOpened),this._adaptor.getConfig().isCollisionDetectOpened(t._collisionDectectOpened),this._adaptor.getConfig().isGravityFallOpened(t._gravityFallOpened),t._personRoamingOpened?this.openPersonRoaming():this.closePersonRoaming(),this.updateViewState()},updateViewState:function(){var t=this;this._adaptor.getViewCallbacks().forEach((function(e){var i={};t.getViewState(i),e(Re.b.ROAMINGSTATE_CHANGED,i)}))},getViewState:function(t){t._leftMouseOperation=this._adaptor.getConfig().getLeftMouseOperation(),t._personRoamingOpened=this._type===Wi.PERSON,t._thirdPersonOpened=this._adaptor.getConfig().isThirdPersonOpened(),t._collisionDectectOpened=this._adaptor.getConfig().isCollisionDetectOpened(),t._gravityFallOpened=this._adaptor.getConfig().isGravityFallOpened(),t._characterMoveSpeed=this._adaptor.getConfig().getPersonSpeed()}};var ps=As,Is=function(t){Bi.call(this,t)};(Is.prototype=Object.create(Bi.prototype)).constructor=Is,Object.assign(Is.prototype,{type:function(){return Ti.SECTION}});var fs=Is,Cs=function(t){ki.call(this),this._width=_e.DISABLE,t&&this.setWidth(t)};(Cs.prototype=Object.create(ki.prototype)).constructor=Cs,Object.assign(Cs.prototype,{type:function(){return Fi.LineWidth},setWidth:function(t){this._width=t},getWidth:function(){return this._width},apply:function(t){this._width!==_e.DISABLE&&t.gl().lineWidth(this._width)}}),Cs.wind=Cs.prototype.wind=K.GLLINEWIDTH;var ms=Cs,vs=function(t){fs.call(this,t),this._showed=!0,this._cubeRoot=null,this._glCubeClip=null,this._selectFaceMaterial=null,this._selectFaceDrawable=null,this._clipBox=new at,this._scaling=J.create(1,1,1),this._translate=J.new(),this._rotation=$a.new(),this._scaleMatrix=it.new(),this._translateMatrix=it.new(),this._rotateMatrix=it.new()};vs.gCubeSectionOffset=10,(vs.prototype=Object.create(fs.prototype)).constructor=vs,Object.assign(vs.prototype,{create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.CUBE_SECTION_SUBJECT,t);var e=new lo;e.setGLState(new Yi(_e.LESS,.2,.9,!1)),e.setGLState(new jn(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA)),t._glstateset=e;var i=new _o,r=this._moduler._glstateset.getGLState(Fi.Clear).getColor();i.setGLMaterial(new un([r[0],r[1],r[2],.1])),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var n=new yo;n.setName("CubeSectionSubject"),t._sceneRoot=n,t._dynamicStruct=!0,t._dynamicGeometry=!1;var o=new uo(this._moduler);this._moduler.setModunit(Di.CUBE_SECTION_WIREFRAME,o),(e=new lo).setGLState(new Yi(_e.LESS,.2,.9,!0)),o._glstateset=e,(i=new _o).setGLMaterial(new un([1,1,0,1])),i.setGLLighting(new Vn),i.setGLFunction(new zn),o._glshadings=i,(n=new yo).setName("CubeSectionWireframe"),o._sceneRoot=n,o._dynamicStruct=!0,o._dynamicGeometry=!1,this.createCubeGeometry(),this._showed=!0,this._selectFaceDrawable=null,this._glCubeClip=new Wn,this._moduler.getModunit(Di.ENTITY_SUBJECT)._glshadings.setGLFunction(this._glCubeClip),this._selectFaceMaterial=new Rt,this._selectFaceMaterial.setID(t.getID()),this._selectFaceMaterial._mode=Rt.OVERRIDE,this._selectFaceMaterial._type=Pt.MATERIAL1,this._selectFaceMaterial._pureColor=[0,1,1,.4],this.update(),this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.CUBE_SECTION_SUBJECT),this._moduler.destroyModunit(Di.CUBE_SECTION_WIREFRAME),this._moduler.getModunit(Di.ENTITY_SUBJECT)._glshadings.setGLFunction(this._moduler._factory.getGLNoneFunction()),this._showed=!0,this._cubeRoot=null,this._glCubeClip=null,this._selectFaceMaterial=null,this._selectFaceDrawable=null,this._moduler.requestRedraw()},getPlanes:function(t){this._glCubeClip&&this._glCubeClip.getClipPlanes(t)},sync:function(){if(this._selectFaceDrawable){var t=this._moduler._camera,e=this._pickEvent.getLast(),i=e[0],r=e[1],n=this._pickEvent.getCurrent(),o=n[0],a=n[1],s=o-i,h=a-r;if(Math.abs(s)<_.EPSILON&&Math.abs(h)<_.EPSILON)return;var u=J.MemoryPool.alloc(),c=J.MemoryPool.alloc();t.computeScreenToWorldNearFarPoint(i,r,u,c);var l=this._glCubeClip.getClipPlane(this._selectFaceDrawable.getGeometry().getName()),g=J.MemoryPool.alloc();if(nt.intersectLine(g,u,c,l)){var d=J.MemoryPool.alloc();t.computeWorldToScreen(g,d),J.set(d,o,a,d[2]);var A=J.MemoryPool.alloc();t.computeScreenToWorld(d,A),J.sub(d,A,g);var p=J.dot(l,d);this.move(p),J.MemoryPool.free(A),J.MemoryPool.free(d)}J.MemoryPool.free(g),J.MemoryPool.free(u),J.MemoryPool.free(c),this._pickEvent.sync()}},update:function(){if(this._clipBox.copy(this._moduler._scenery.getBoundingBox()),this._clipBox.valid()){var t=this._clipBox.getMin();t[0]-=vs.gCubeSectionOffset,t[1]-=vs.gCubeSectionOffset,t[2]-=vs.gCubeSectionOffset;var e=this._clipBox.getMax();e[0]+=vs.gCubeSectionOffset,e[1]+=vs.gCubeSectionOffset,e[2]+=vs.gCubeSectionOffset,this._clipBox.getCenter(this._translate),J.sub(this._scaling,e,t)}else J.set(this._translate,0,0,0),J.set(this._scaling,1,1,1),w.set(this._rotation,0,0,0,1);this.updateTransform()},reset:function(){this.show(),this.update(),this._moduler.requestRedraw()},show:function(){this._showed||(this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT).isvalid(!0),this._moduler.getModunit(Di.CUBE_SECTION_WIREFRAME).isvalid(!0),this._showed=!0,this._moduler.requestRedraw())},hide:function(){this._showed&&(this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT).isvalid(!1),this._moduler.getModunit(Di.CUBE_SECTION_WIREFRAME).isvalid(!1),this._showed=!1,this._moduler.requestRedraw())},showed:function(){return this._showed},mode:function(){},singlePick:function(t,e){var i=this._moduler._camera,r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc();i.computeScreenToWorldNearFarPoint(t,e,r,n);var o=[];if(this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT).linesegmentIntersect(o,r,n,Oi.SELECTION),0!==o.length){var a=o[0].getDrawable();a&&(this._selectFaceDrawable=a,this._selectFaceDrawable._geometry._material=this._selectFaceMaterial)}return J.MemoryPool.free(r),J.MemoryPool.free(n),!!this._selectFaceDrawable},move:function(t){var e=this._selectFaceDrawable.getGeometry().getName(),i=this._glCubeClip.getClipPlane(e),r=it.MemoryPool.alloc(),n=J.MemoryPool.alloc();J.scale(n,i,t);var o=w.MemoryPool.alloc();w.copy(o,i),it.fromTranslation(r,n),nt.transformMat4(o,r,!0);var a=this._glCubeClip.getOppositeClipPlane(e),s=a[3]+o[3];if(!(s<1e-4)){var h=s/(a[3]+i[3]);switch(e){case zi.FRONT:case zi.BACK:this._scaling[1]*=h;break;case zi.TOP:case zi.BOTTOM:this._scaling[2]*=h;break;case zi.LEFT:case zi.RIGHT:this._scaling[0]*=h}J.scale(n,i,.5*t),J.add(this._translate,this._translate,n),w.MemoryPool.free(o),J.MemoryPool.free(n),it.MemoryPool.free(r),this.updateTransform()}},updateTransform:function(){var t=it.MemoryPool.alloc();it.fromScaling(this._scaleMatrix,this._scaling),it.fromTranslation(this._translateMatrix,this._translate),it.fromQuat(this._rotateMatrix,this._rotation),it.mul(t,this._translateMatrix,this._rotateMatrix),it.mul(t,t,this._scaleMatrix),this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT)._sceneRoot.setMatrix(t),this._moduler.getModunit(Di.CUBE_SECTION_WIREFRAME)._sceneRoot.setMatrix(t),this._glCubeClip.resetClipPlane(),this._glCubeClip.transformClipPlane(t),this._clipBox.setMaxValue(.5,.5,.5),this._clipBox.setMinValue(-.5,-.5,-.5),this._clipBox.transformMat4(t),it.MemoryPool.free(t)},createCubeGeometry:function(){var t=.5,e=new Float32Array([t,t,t,-t,t,t,t,-t,t,-t,-t,t,t,t,-t,-t,t,-t,t,-t,-t,-t,-t,-t]),i=this._moduler.getModunit(Di.CUBE_SECTION_SUBJECT),r=[];r.push([7,6,2,2,3,7]),r.push([4,5,1,1,0,4]),r.push([3,2,0,0,1,3]),r.push([5,4,6,6,7,5]),r.push([5,7,3,3,1,5]),r.push([6,4,0,0,2,6]);for(var n=[zi.FRONT,zi.BACK,zi.TOP,zi.BOTTOM,zi.LEFT,zi.RIGHT],o=0;o<6;o++){var a=new Et;a.setID(i.getID()),a.setName(n[o]);var s=new fe;a._vertexBuffer=s,s._size=8;var h=new Ae;h._componentSize=3,h._componentType=_e.FLOAT,h._attributeType=le.POINT,h._bufferData=e,s._datas.push(h);var u=new de;u._type=mt.INDEX_TRIANGLES,u._start=0,u._count=6,a._solidVertexAligns.push(u),a._indexes=new Uint8Array(r[o]),i._sceneRoot.addChild(a)}var c=this._moduler.getModunit(Di.CUBE_SECTION_WIREFRAME),l=new Et;l.setID(c.getID());var g=new fe;l._vertexBuffer=g,g._size=8;var _=new Ae;_._componentSize=3,_._componentType=_e.FLOAT,_._attributeType=le.POINT,_._bufferData=e,g._datas.push(_);var d=new de;d._type=mt.INDEX_LINES,d._start=0,d._count=24,l._solidVertexAligns.push(d),l._indexes=new Uint8Array([0,1,2,3,4,5,6,7,0,2,1,3,4,6,5,7,0,4,1,5,2,6,3,7]),c._sceneRoot.addChild(l)},pickPush:function(t){if(!this._showed)return!1;var e=this.getPositionRelativeToCanvas(t,!0);return this._pickEvent.setInitial(e[0],e[1]),this.singlePick(e[0],e[1])?this._moduler.requestRedraw():this._moduler.getScenery().unhighlightEntities()&&this._moduler.requestRedraw(),t.preventDefault(),!0},pickDrag:function(t){if(!this._showed)return!1;var e=this.getPositionRelativeToCanvas(t,!0);return this._pickEvent.setCurrent(e[0],e[1]),this._moduler.requestRedraw(),t.preventDefault(),!0},pickRelease:function(t){return!!this._showed&&(this._selectFaceDrawable&&(this._selectFaceDrawable._geometry._material=null,this._selectFaceDrawable=null,this._moduler.requestRedraw()),t.preventDefault(),!0)},invalid:function(t){return this.pickRelease(t)}}),vs.prototype[Bi.TOUCH_MOVE_BEGIN]=function(t){return!!this._showed&&(this._pickEvent.setInitial(t[0],t[1]),this.singlePick(t[0],t[1])?(this._moduler.requestRedraw(),!0):(this._moduler.getScenery().unhighlightEntities()&&this._moduler.requestRedraw(),!1))},vs.prototype[Bi.TOUCH_MOVE]=function(t,e){return!!this._showed&&(!!this._selectFaceDrawable&&(this._pickEvent.setCurrent(e[0],e[1]),this._moduler.requestRedraw(),!0))},vs.prototype[Bi.TOUCH_MOVE_END]=function(t){return!!this._showed&&(!!this._selectFaceDrawable&&(this._selectFaceDrawable._geometry._material=null,this._selectFaceDrawable=null,this._moduler.requestRedraw(),!0))};var ys=vs,Es=function(t){this._adaptor=t,this._cubeSection=null};Es.prototype={openCubeSection:function(){this._cubeSection=new ys(this._adaptor),this._adaptor.setOperation(this._cubeSection)},closeCubeSection:function(){this._adaptor.resetOperation(Ti.SECTION),this._cubeSection=null},setCubeSectionMode:function(){},resetCubeSection:function(){this._cubeSection&&this._cubeSection.reset()},showCubeSection:function(){this._cubeSection&&this._cubeSection.show()},hideCubeSection:function(){this._cubeSection&&this._cubeSection.hide()},update:function(){this._cubeSection&&this._cubeSection.update()},getViewState:function(t){return t._cubeSectionMode=1,this._cubeSection?(t._cubeSectionOpened=!0,t._cubeSectionShowed=this._cubeSection.showed()):(t._cubeSectionOpened=!1,t._cubeSectionShowed=!1),t},saveViewState:function(t){this._cubeSection?(t._cubeSectionOpened=!0,t._cubeSectionShowed=this._cubeSection.showed(),J.copy(t._cubeTranslate,this._cubeSection._translate),$a.copy(t._cubeRotation,this._cubeSection._rotation),J.copy(t._cubeScaling,this._cubeSection._scaling)):(t._cubeSectionOpened=!1,t._cubeSectionShowed=!1),t._cubeSectionMode=1},loadViewState:function(t){t._cubeSectionOpened?(this.openCubeSection(),t._cubeSectionShowed?this._cubeSection.show():this._cubeSection.hide(),J.copy(this._cubeSection._translate,t._cubeTranslate),$a.copy(this._cubeSection._rotation,t._cubeRotation),J.copy(this._cubeSection._scaling,t._cubeScaling),this._cubeSection.updateTransform()):this.closeCubeSection(),this.updateViewState()},updateViewState:function(){var t=this;this._adaptor.getViewCallbacks().forEach((function(e){var i={};t.getViewState(i),e(Re.b.SECTIONSTATE_CHANGED,i)}))},setMaterial:function(t,e,i,r){this._cubeSection&&this._cubeSection.setMaterial(t,e,i,r)}};var ws=Es,Ms=function(t){dr.call(this,t),this._drawEdge=!1};(Ms.prototype=Object.create(dr.prototype)).constructor=Ms,Object.assign(Ms.prototype,{draw:function(){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset),this._renderer.applyGLProgram(this._glprogram,this._glshadings),this._renderer.applyCameraMatrix(this.getCamera());for(var e=0;e<t;e++){var i=this._drawables[e];this._renderer.applyModelMatrix(i._transform),this._drawEdge?i._glgeometry.drawEdge():(this._renderer.applyGLShadings(),i._glgeometry.drawSolid())}}}});var Ts=Ms,Ps=function(t,e,i){vr.call(this,t),this._id=this._glcontext.gl().createFramebuffer(),this._target=_e.FRAMEBUFFER,this._width=e,this._height=i,this._attachBuffers=new Map};(Ps.prototype=Object.create(vr.prototype)).constructor=Ps,Object.assign(Ps.prototype,{setAttachBuffer:function(t,e){var i=this._attachBuffers.get(t);i&&i.release(),this.attach(t,e),this._attachBuffers.set(t,e)},getAttachBuffer:function(t){return this._attachBuffers.get(t)},resize:function(t,e){t===this._width&&e===this._height||(this._attachBuffers.forEach((function(i){i.resize(t,e)})),this._width=t,this._height=e)},attach:function(t,e){this._glcontext.gl().bindFramebuffer(this._target,this._id),e.wind===K.GLTEXTURE?this._glcontext.gl().framebufferTexture2D(this._target,t,e._target,e._id,0):e.wind===K.GLRENDERBUFFER&&this._glcontext.gl().framebufferRenderbuffer(this._target,t,_e.RENDERBUFFER,e._id)},apply:function(){this._glcontext.gl().bindFramebuffer(this._target,this._id)},cancel:function(){this._glcontext.gl().bindFramebuffer(_e.FRAMEBUFFER,null)},release:function(){this._id&&(this._attachBuffers.forEach((function(t){t.release()})),this._glcontext.gl().deleteFramebuffer(this._id),this._id=null)}}),Ps.wind=Ps.prototype.wind=K.GLFRAMEBUFFER;var Ss=Ps,Rs=function(t,e,i,r){vr.call(this,t),this._id=this._glcontext.gl().createRenderbuffer(),this._format=0,e&&(this._format=e),this._width=0,i&&(this._width=i),this._height=0,r&&(this._height=r)};(Rs.prototype=Object.create(vr.prototype)).constructor=Rs,Object.assign(Rs.prototype,{resize:function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.storage())},getHeight:function(){return this._height},getWidth:function(){return this._width},setFormat:function(t){this._format!==t&&(this._format=t,this.storage())},getFormat:function(){return this._format},storage:function(){this._glcontext.gl().bindRenderbuffer(_e.RENDERBUFFER,this._id),this._glcontext.gl().renderbufferStorage(_e.RENDERBUFFER,this._format,this._width,this._height)},apply:function(){this._glcontext.gl().bindRenderbuffer(_e.RENDERBUFFER,this._id)},cancel:function(){this._glcontext.gl().bindRenderbuffer(_e.RENDERBUFFER,null)},release:function(){this._id&&(this._glcontext.gl().deleteRenderbuffer(this._id),this._id=null)}}),Rs.wind=Rs.prototype.wind=K.GLRENDERBUFFER;var Os=Rs,Ls=function(t){Ts.call(this,t),this._camera=new mo,this._shadowMatrix=it.MemoryPool.alloc(),this._sunDirection=null,this._sunDirectionV=J.MemoryPool.alloc(),this._mapWidth=2048,this._mapHeight=2048,this.initFramebuffer();var e=new _o;e.setGLMaterial(new fn),e.setGLLighting(this._moduler._factory.getGLNoneLighting()),e.setGLFunction(this._moduler._factory.getGLNoneFunction()),this._glshadings=e;var i=new lo;i.setGLState(new Yi(_e.LEQUAL,0,1)),this._glstateset=i,this._needRedrawShadowMap=!0};(Ls.prototype=Object.create(Ts.prototype)).constructor=Ls,Object.assign(Ls.prototype,{setShadowMapSize:function(t,e){this._mapWidth=t,this._mapHeight=e,this._needRedrawShadowMap=!0},updateShadowCamera:function(){var t=this._moduler._scenery.getBoundingBox(),e=t.getRadius(),i=this._sunDirection,r=J.MemoryPool.alloc(),n=J.MemoryPool.alloc(),o=J.MemoryPool.alloc(),a=J.MemoryPool.alloc();t.getCenter(n),J.scale(r,i,e+1),J.sub(r,n,r),J.add(n,r,i),J.set(o,1,0,0),J.equals(i,o)?J.set(a,0,0,1):(J.cross(a,o,i),J.normalize(a,a)),this._camera.setViewLookAt(r,n,a),J.MemoryPool.free(a),J.MemoryPool.free(o),J.MemoryPool.free(n),J.MemoryPool.free(r),this._camera.setProjectionOrthogonal(-e,e,-e,e,100,2*e),this._camera.resize(0,0,this._mapWidth,this._mapHeight),this._camera.updateProjectionNearFar(t),this._camera.updatePixelSizeRatio(),this._camera.updateCullFrustum(),it.multiply(this._shadowMatrix,this._camera.getProjectionMatrix(),this._camera.getViewMatrix());var s=it.MemoryPool.alloc();this._camera.getViewMatrix(s),it.getNormalMat4(s,s),J.transformMat4(this._sunDirectionV,this._sunDirection,s),this._glstateset.setGLState(new Hi(0,0,this._mapWidth,this._mapHeight)),this._framebuffer.resize(this._mapWidth,this._mapHeight),it.MemoryPool.free(s)},initFramebuffer:function(){var t=this._moduler.getGLContext(),e=t.gl(),i=e.getParameter(e.MAX_TEXTURE_SIZE);this._mapWidth=Math.min(i,this._mapWidth),this._mapHeight=Math.min(i,this._mapHeight),this._colorTexture=new an(t,_e.TEXTURE_2D,_e.RGBA,_e.RGBA,_e.UNSIGNED_BYTE),this._colorTexture.setParameter(_e.TEXTURE_MAG_FILTER,_e.LINEAR),this._colorTexture.setParameter(_e.TEXTURE_MIN_FILTER,_e.LINEAR),this._colorTexture.setParameter(_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),this._colorTexture.setParameter(_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),this._colorTexture.resize(this._mapWidth,this._mapHeight),this._depthBuffer=new Os(t,_e.DEPTH_COMPONENT16,this._mapWidth,this._mapHeight),this._depthBuffer.storage(),this._framebuffer=new Ss(t,this._mapWidth,this._mapHeight),this._framebuffer.setAttachBuffer(_e.COLOR_ATTACHMENT0,this._colorTexture),this._framebuffer.setAttachBuffer(_e.DEPTH_ATTACHMENT,this._depthBuffer),this._framebuffer.cancel()},destroy:function(){J.MemoryPool.free(this._sunDirectionV),it.MemoryPool.free(this._shadowMatrix),this._colorTexture.release(),this._depthBuffer.release(),this._framebuffer.release()},setSunDirection:function(t){this._sunDirection=t,this.requestRedrawShadowMap()},getShadowMatrix:function(){return this._shadowMatrix},getShadowMap:function(){return this._colorTexture},setFinishCallback:function(t){this._finishCallback=t},requestRedrawShadowMap:function(){this._needRedrawShadowMap=!0},draw:function(){if(this._needRedrawShadowMap){var t=this._moduler._scenery._componentDrawables,e=t.length;if(0!==e){this.updateShadowCamera(),this._framebuffer.apply();var i=this._moduler.getGLContext().gl();i.clearColor(0,0,0,0),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this._renderer.applyGLStateset(this._glstateset);var r=this._glshadings.getGLMaterial().type()+this._glshadings.getGLLighting().type()+this._glshadings.getGLFunction().type(),n=this._moduler._factory.getGLProgram(r);this._renderer.applyGLProgram(n),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyGLShadings(this._glshadings.getGLMaterial(),this._glshadings.getGLLighting(),this._glshadings.getGLFunction());for(var o=0;o<e;o++){var a=t[o];!this.isTransparent(a)&&this.isDrawn(a)&&(this._renderer.applyModelMatrix(a._transform),a._glgeometry.drawSolid()),this._drawIndex++}this._framebuffer.cancel(),this._finishCallback&&this._finishCallback(),this._needRedrawShadowMap=!1}}},isDrawn:function(t){return this.getCamera().computePixelSize(t.getBoundingSphere().getCenter(),t.getBoundingSphere().getRadius())>=1},isTransparent:function(t){return t._currentGLMaterial&&t._currentGLMaterial.isTransparent()},drawFinished:function(){return!0}});var Ns=Ls,Ds=function(t){Bi.call(this,t)};(Ds.prototype=Object.create(Bi.prototype)).constructor=Ds,Object.assign(Ds.prototype,{create:function(){var t=new Ns(this._moduler);this._moduler._modunits[Di.SHADOW_MAP]=t,t._drawables=this._moduler._scenery._componentDrawables,t.setSunDirection(Do.SHADOW_LIGHTING_DIRECTION),t.setShadowMapSize(Do.SHADOW_MAP_WIDTH,Do.SHADOW_MAP_HEIGHT),this._shadowLt=new Un(Do.SHADOW_LIGHTING_DIRECTION,Do.SHADOW_MAIN_LIGHTING,Do.SHADOW_FILL_LIGHTING,Do.SHADOW_AMBIENT);var e=this;t.setFinishCallback((function(){e._shadowLt.setShadowMatrix(t.getShadowMatrix()),e._shadowLt.setMainLightDirection(Do.SHADOW_LIGHTING_DIRECTION),e._shadowLt.setShadowMap(t.getShadowMap())})),this.enableCompShadow(!0),this._moduler.requestRedraw()},destroy:function(){this.enableCompShadow(!1),this._moduler.destroyModunit(Di.SHADOW_MAP),this._moduler.requestRedraw()},type:function(){return Ti.SHADOW},enableCompShadow:function(t){if(t){var e=this._moduler.getModunit(Di.ENTITY_SUBJECT);this._cmpLastLighting=e._glshadings.getGLLighting(),Object.assign(this._shadowLt,this._cmpLastLighting),e._glshadings.setGLLighting(this._shadowLt)}else if(this._cmpLastLighting){this._moduler.getModunit(Di.ENTITY_SUBJECT)._glshadings.setGLLighting(this._cmpLastLighting),this._cmpLastLighting=void 0}}});var xs=Ds,Bs=function(t){this._adaptor=t,this._engine=t.getOperation(Ti.ENGINE)};Bs.prototype={setBackgroundType:function(t){var e=this._adaptor.getConfig();return e._backgroundType!==t&&(e._backgroundType=t,this._engine.backgroundUpdate(!0),!0)},setBackgroundPureColor:function(t,e,i,r){if(Y.isNumberType(t)&&Y.isNumberType(e)&&Y.isNumberType(i)&&Y.isNumberType(r)){t=Y.rangeNumber(t,0,255),e=Y.rangeNumber(e,0,255),i=Y.rangeNumber(i,0,255),r=Y.rangeNumber(r,0,255);var n=this._adaptor.getConfig();return n._backgroundPureColor=[t/255,e/255,i/255,r/255],n._backgroundType===Re.a.PURE_COLOR&&this._engine.backgroundUpdate(!1),!0}return!1},getBackgroundPureColor:function(){var t=this._adaptor.getConfig()._backgroundPureColor;return[255*t[0],255*t[1],255*t[2],255*t[3]]},setBackgroundGradientTopColor:function(t,e,i,r){if(Y.isNumberType(t)&&Y.isNumberType(e)&&Y.isNumberType(i)&&Y.isNumberType(r)){t=Y.rangeNumber(t,0,255),e=Y.rangeNumber(e,0,255),i=Y.rangeNumber(i,0,255),r=Y.rangeNumber(r,0,255);var n=this._adaptor.getConfig();return n._backgroundGradientTopColor=[t/255,e/255,i/255,r/255],n._backgroundType===Re.a.GRADIENT_COLOR&&this._engine.backgroundUpdate(!1),!0}return!1},setBackgroundGradientBottomColor:function(t,e,i,r){if(Y.isNumberType(t)&&Y.isNumberType(e)&&Y.isNumberType(i)&&Y.isNumberType(r)){t=Y.rangeNumber(t,0,255),e=Y.rangeNumber(e,0,255),i=Y.rangeNumber(i,0,255),r=Y.rangeNumber(r,0,255);var n=this._adaptor.getConfig();return n._backgroundGradientBottomColor=[t/255,e/255,i/255,r/255],n._backgroundType===Re.a.GRADIENT_COLOR&&this._engine.backgroundUpdate(!1),!0}return!1},revertBackgroundPureColor:function(){var t=this._adaptor.getConfig();t._backgroundPureColor=Do.BACKGROUND_PURE_COLOR,t._backgroundType===Re.a.PURE_COLOR&&this._engine.backgroundUpdate(!1)},revertBackgroundGradientColor:function(){var t=this._adaptor.getConfig();t._backgroundGradientTopColor=Do.BACKGROUND_GRADIENT_TOP_COLOR,t._backgroundGradientBottomColor=Do.BACKGROUND_GRADIENT_BOTTOM_COLOR,t._backgroundType===Re.a.GRADIENT_COLOR&&this._engine.backgroundUpdate(!1)},setTransparency:function(t){return!!(Y.isNumberType(t)&&t>=0&&t<=255)&&(this._adaptor._moduler.getScenery().setTransparency(t/255),this._adaptor._moduler.requestRedraw(),!0)},revertTransparency:function(){this._adaptor._moduler.getScenery().revertTransparency(),this._moduler.requestRedraw()},setHomeEyePosition:function(t){this._adaptor.getConfig().setHomeEyePosition(t)},setHomeEyeDistance:function(t){this._adaptor.getConfig().setHomeEyeDistance(t)},isShowOpened:function(){return!!this._adaptor.getOperation(Ti.SHADOW)},openShadow:function(){this._adaptor.setOperation(new xs(this._adaptor))},closeShadow:function(){this._adaptor.resetOperation(Ti.SHADOW)},isWireframeShowed:function(t){return this._engine.isWireframeShowed(t)},isFixedframeOpened:function(t){return this._engine.isFixedframeOpened(t)},isAxisgridShowed:function(t){return this._engine.isAxisgridShowed(t)},isRealModeOpened:function(t){return this._engine.isRealModeOpened(t)},getViewState:function(t){var e=this._adaptor.getConfig();t._backgroundType=e._backgroundType;var i=e._backgroundPureColor;t._backgroundPureColor=[255*i[0],255*i[1],255*i[2],255*i[3]],i=e._backgroundGradientTopColor,t._backgroundGradientTopColor=[255*i[0],255*i[1],255*i[2],255*i[3]],i=e._backgroundGradientBottomColor,t._backgroundGradientBottomColor=[255*i[0],255*i[1],255*i[2],255*i[3]],t._transparency=this._adaptor._moduler.getScenery().getTransparency(),t._wireframeOpened=this._engine.isWireframeShowed(),t._realModeOpened=this._engine.isRealModeOpened(),t._lightShadowOpened=!!this._adaptor.getOperation(Ti.SHADOW)},openDrawTesting:function(){this._engine.openDrawTesting()},closeDrawTesting:function(){this._engine.closeDrawTesting()}};var Gs=Bs,Fs=function(t){this._moduler=t,this._modunit=this._moduler.getModunit(Di.PUSHPIN_SUBJECT),this._root=new Pn,this._root.isAutoScaleToScreen(!0),this._root.setMode(Pn.ROTATE_TO_SCREEN),this._group=null,this._id=-1,this._style=null,this._deleted=!1,this._boardFace=null,this._highlighted=!1};Object.assign(Fs.prototype,{root:function(){return this._root},getID:function(){return this._id},setGroup:function(t){this._group=t},getGroup:function(){return this._group},getUserData:function(){return this._style.userData},create:function(t,e){this._id=t,this._style=e;var i=Do.PUSHPIN_WIDTH;Y.isNumberType(e.width)&&(i=e.width);var r=Do.PUSHPIN_HEIGHT;Y.isNumberType(e.height)&&(r=e.height),this._boardFace=new mn,this._boardFace.setReference(this);var n=new Et;this._boardFace.addChild(n),n.setID(this._modunit.getID());var o=new fe;n._vertexBuffer=o;var a=i/2,s=r/2;o._size=4;var h=new Ae;h._componentSize=3,h._componentType=_e.FLOAT,h._attributeType=le.POINT,h._bufferData=new Float32Array([-a,-s,-10,a,-s,-10,a,s,-10,-a,s,-10]),o._datas.push(h);var u=new Ae;u._componentSize=2,u._componentType=_e.FLOAT,u._attributeType=le.TEXTURE,u._bufferData=new Float32Array([0,0,1,0,1,1,0,1]),o._datas.push(u);var c=new de;if(c._type=mt.INDEX_TRIANGLES,c._start=0,c._count=6,n._solidVertexAligns.push(c),n._indexes=new Uint8Array([0,1,2,2,3,0]),this._root.addChild(this._boardFace),Y.isStringType(e.text)&&0!==e.text.length){var l=Do.PUSHPIN_TEXT_COLOR;Y.isArrayType(e.textColor)&&(l=Y.normalizeColor(e.textColor));var g=new Pa(e.text,e.textSize,Do.PUSHPIN_TEXT_FONT,l);g.setID(this._modunit.getID()),g._material.setID(this._modunit.getID()),this._root.addChild(g)}e.imageSrc&&nr.loadImageResource(e.imageSrc,this.bindImage.bind(this))},destroy:function(){this._style.imageSrc&&nr.unloadImageResource(this._style.imageSrc,this.bindImage.bind(this))},isvalid:function(){return!this._deleted},delete:function(){this._deleted=!0,this._root.setMask(0)},bindImage:function(t){if(t){var e=new Rt;e.setID(this._modunit.getID()),e._type=Pt.MATERIAL4,e._textureImage=t._data,e._discardAlpha=.1,this._boardFace._material=e,this._moduler.requestRedraw()}},show:function(){this.isvalid()&&this._root.setMask(1)},hide:function(){this.isvalid()&&this._root.setMask(0)},setPosition:function(t){this.isvalid()&&this._root.setPosition(t)},highlight:function(t){var e=t||Do.PUSHPIN_HIGHLIGHT_SCALE;this._root.setScale([e,e,e]),this._highlighted=!0},unhighlight:function(){this._root.setScale([1,1,1]),this._highlighted=!1}});var Vs=Fs,ks=function(){this._entity=null,this._sceneItem=null,this._assignHided=!1,this._highlighted=!1,this._transparented=!1,this._assignGLMaterial=null,this._operateGLMaterial=null,this._operateGLLighting=null,this._operateGLFunction=null};Object.assign(ks.prototype,{setEntity:function(t){this._entity=t},getEntity:function(){return this._entity},getUniqueId:function(){return this._entity.getUniqueId()},getID:function(){return this._entity._id},getBoundingBox:function(){return this._entity.getBoundingBox()},getBoundingSphere:function(){return this._entity.getBoundingSphere()},reset:function(){this._assignHided=!1,this.unhighlight(),this.untransparent()},revert:function(){this._assignHided=!1,this.unhighlight(),this.untransparent()},isShown:function(){return!this._assignHided},isAssignHided:function(){return this._assignHided},show:function(){this._assignHided=!1},hide:function(){this._assignHided=!0},displayHide:function(){this._assignHided=!0},displayShow:function(){this._assignHided=!1},isHightlighted:function(){return this._highlighted},highlight:function(t,e){if(this._highlighted)return!1;if(e)this.show(),this.untransparent();else{if(!this.isShown())return!1;if(this.isTransparented())return!1}return this._assignGLMaterial=t,this._highlighted=!0,!0},unhighlight:function(){return!!this._highlighted&&(this._highlighted=!1,this._assignGLMaterial=null,!0)},isTransparented:function(){return this._transparented},transparent:function(t){return!(!this.isShown()||this._transparented||this._highlighted)&&(this._assignGLMaterial=t,this._transparented=!0,!0)},untransparent:function(){return!!this._transparented&&(this._transparented=!1,this._assignGLMaterial=null,!0)},coloring:function(t){this._operateGLMaterial=t},discoloring:function(){this._operateGLMaterial=null},setGrowth:function(t){this._operateGLFunction=t},cancelGrowth:function(){this._operateGLFunction=null}});var Us=ks,Hs=function(){Us.call(this),this._relRcomponents=[]};(Hs.prototype=Object.create(Us.prototype)).constructor=Hs,Object.assign(Hs.prototype,{reset:function(){Us.prototype.reset.call(this);for(var t=this._relRcomponents.length,e=0;e<t;e++)this._relRcomponents[e].reset()},revert:function(){Us.prototype.revert.call(this);for(var t=this._relRcomponents.length,e=0;e<t;e++)this._relRcomponents[e].revert()},hide:function(t){for(var e=this._relRcomponents.length,i=0;i<e;i++)this._relRcomponents[i].hide(t)},show:function(t){for(var e=this._relRcomponents.length,i=0;i<e;i++)this._relRcomponents[i].show(t)},highlight:function(t,e){if(Us.prototype.highlight.call(this,t,e)){for(var i=this._relRcomponents.length,r=0;r<i;r++)this._relRcomponents[r].highlight(t,e);return!0}return!1},unhighlight:function(){if(Us.prototype.unhighlight.call(this)){for(var t=this._relRcomponents.length,e=0;e<t;e++)this._relRcomponents[e].unhighlight();return!0}return!1},transparent:function(t){for(var e=this._relRcomponents.length,i=0;i<e;i++)this._relRcomponents[i].transparent(t)},untransparent:function(){for(var t=this._relRcomponents.length,e=0;e<t;e++)this._relRcomponents[e].untransparent();return!0},coloring:function(t){Us.prototype.coloring.call(this,t);for(var e=this._relRcomponents.length,i=0;i<e;i++)this._relRcomponents[i].coloring(t)},discoloring:function(){Us.prototype.discoloring.call(this);for(var t=this._relRcomponents.length,e=0;e<t;e++)this._relRcomponents[e].discoloring()}});var js=Hs,Ys=function(t){na.call(this),this._moduler=t,this._entityUuids=null,this._renderComponents=[],this._pushpinNodes=[]};(Ys.prototype=Object.create(na.prototype)).constructor=Ys,Object.assign(Ys.prototype,{create:function(t){this._entityUuids=t;for(var e=t.length,i=0;i<e;i++){var r=this._moduler.getScenery().getRenderEntity(t[i]);if(r)if(r instanceof js)for(var n=r._relRcomponents,o=n.length,a=0;a<o;a++){var s=n[a];this._renderComponents.push(s),s.addPushpinObserver(this)}else this._renderComponents.push(r),r.addPushpinObserver(this)}},destroy:function(){for(var t=this._renderComponents.length,e=0;e<t;e++)this._renderComponents[e].clearPushpinObserver();this._renderComponents.length=0},sync:function(){var t=this.getPushpinNodeLength();if(0!==t){var e=at.MemoryPool.alloc();e.reset();for(var i=this._renderComponents.length,r=0;r<i;r++){var n=this._renderComponents[r];n.isShown()&&e.expandByBoundingBox(n.getBoundingBox())}var o=this._pushpinNodes.length;if(e.valid()){var a=[[e.getXMax()-e.getXMin(),0,0],[0,e.getYMax()-e.getYMin(),0],[0,0,e.getZMax()-e.getZMin()]];a.sort((function(t,e){return t[0]+t[1]+t[2]-(e[0]+e[1]+e[2])}));var s=a[2],h=1/(t+1),u=[s[0]*h,s[1]*h,s[2]*h],c=J.MemoryPool.alloc(),l=J.MemoryPool.alloc();e.getCenter(c);for(var g=Math.floor(t/2),_=0,d=0;d<o;d++){var A=this._pushpinNodes[d];A.isvalid()&&(J.scale(l,u,_-g),J.add(l,c,l),A.show(),A.setPosition(l),_++)}J.MemoryPool.free(l),J.MemoryPool.free(c)}else for(var p=0;p<o;p++)this._pushpinNodes[p].hide();at.MemoryPool.free(e)}},addPushpinNode:function(t){this._pushpinNodes.push(t)},getPushpinNodeLength:function(){for(var t=0,e=this._pushpinNodes.length,i=0;i<e;i++)this._pushpinNodes[i].isvalid()&&t++;return t}});var zs=Ys,Ws=function(t){Bi.call(this,t),this._modunit=null,this._pushpinNodes=new Map,this._pushpinGroups=[],this._pickedNode=null,this._signedNode=null,this._callback=null};Ws.MouseIn=1,Ws.MouseOut=2,Ws.MousePick=3,(Ws.prototype=Object.create(Bi.prototype)).constructor=Ws,Object.assign(Ws.prototype,{type:function(){return Ti.PUSHPIN},setCallback:function(t){this._callback=t},create:function(){var t=new uo(this._moduler);this._modunit=t,this._moduler.setModunit(Di.PUSHPIN_SUBJECT,t);var e=new lo;e.setGLState(new Yi(_e.LESS,.1,.2)),t._glstateset=e;var i=new _o;i.setGLMaterial(new un([1,0,0,1])),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var r=new yo;r.setName("PushpinSubject"),t._sceneRoot=r,t._dynamicStruct=!0,this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.PUSHPIN_SUBJECT);for(var t=this._pushpinGroups.length,e=0;e<t;e++)this._pushpinGroups[e].destroy();this._pushpinGroups.length=0,this._pushpinNodes.forEach((function(t){t.destroy()})),this._pushpinNodes.clear(),this._pickedNode=null,this._signedNode=null,this._callback=null,this._modunit=null,this._moduler.requestRedraw()},sync:function(){for(var t=this._pushpinGroups.length,e=0;e<t;e++){var i=this._pushpinGroups[e];i.isChanged()&&i.sync()}},addPushpin:function(t,e,i){var r=this._pushpinNodes.get(t);if(r)return console.log("the pushpin id has already exsit!"),!1;if(0===e.length)return console.log("please choose one entity at least!"),!1;var n=Object.assign({},i);(r=new Vs(this._moduler)).create(t,n);var o=this.getPushpinGroup(e);r.setGroup(o),o.addPushpinNode(r),this._pushpinNodes.set(t,r),this._modunit._sceneRoot.addChild(r.root()),o.sync(),this._moduler.requestRedraw()},getPushpinGroup:function(t){for(var e=Array.from(new Set(t)).sort(),i=!1,r=this._pushpinGroups.length,n=null,o=0;o<r;o++)if(n=this._pushpinGroups[o],Y.compareArray(e,n._entityUuids)){i=!0;break}return i||((n=new zs(this._moduler)).create(e),this._pushpinGroups.push(n)),n},deletePushpin:function(t){var e=this._pushpinNodes.get(t);e&&(e.delete(),this._signedNode===e&&(this._signedNode=null),this._pickedNode===e&&(this._pickedNode=null),this._moduler.requestRedraw())},deleteAllPushpin:function(){this._pushpinNodes.forEach((function(t){t.delete()})),this._signedNode=null,this._pickedNode=null,this._moduler.requestRedraw()},showPushpin:function(t){var e=this._pushpinNodes.get(t);return!!e&&(e.show(),this._moduler.requestRedraw(),!0)},hidePushpin:function(t){var e=this._pushpinNodes.get(t);return!!e&&(e.hide(),this._moduler.requestRedraw(),!0)},showAllPushpin:function(){this._pushpinNodes.forEach((function(t){t.show()})),this._moduler.requestRedraw()},hideAllPushpin:function(){this._pushpinNodes.forEach((function(t){t.hide()})),this._moduler.requestRedraw()},locatePushpin:function(t){var e=this._pushpinNodes.get(t);e&&this.locateNode(e)},expandPushpin:function(t){var e=this._pushpinNodes.get(t);e&&this.expandNode(e)},recoverPushpin:function(t){var e=this._pushpinNodes.get(t);e&&(e.unhighlight(),e===this._signedNode&&(this._signedNode=null),e===this._pickedNode&&(this._pickedNode=null),this._moduler.requestRedraw())},expandNode:function(t){this._signedNode?this._signedNode!==t&&(this._signedNode.unhighlight(),t.highlight(this._adaptor.getConfig().getPushpinRatio()),this._signedNode=t,this._moduler.requestRedraw()):(t.highlight(this._adaptor.getConfig().getPushpinRatio()),this._signedNode=t,this._moduler.requestRedraw())},locateNode:function(t){if(this._pickedNode&&this._pickedNode!==t&&this._pickedNode.unhighlight(),this._pickedNode=t,this._pickedNode.highlight(this._adaptor.getConfig().getPushpinRatio()),this._signedNode===t&&(this._signedNode=null),this._callback){var e={};e.id=this._pickedNode.getID(),e.userData=this._pickedNode.getUserData(),this._callback(this._pickedNode.getID(),Ws.MousePick,this._pickedNode.getUserData())}this._moduler.getScenery().unhighlightEntities(),this._moduler.getScenery().transparentComponents();for(var i=t.getGroup()._renderComponents,r=i.length,n=0;n<r;n++)this._moduler.getScenery().highlightEntity(i[n],!0);this._adaptor.getOperation(Ti.ROAMING).locate(),this._moduler.requestRedraw()},singlePick:function(t,e){var i=J.MemoryPool.alloc(),r=J.MemoryPool.alloc();this._moduler.getCamera().computeScreenToWorldNearFarPoint(t,e,i,r);var n=[];this._modunit.linesegmentIntersect(n,i,r,Oi.SELECTION),J.MemoryPool.free(i),J.MemoryPool.free(r);for(var o=n.length,a=0;a<o;a++){var s=n[a].getDrawable()._reference;if(s)return s.getReference()}},pickPush:function(t){var e=this.getPositionRelativeToCanvas(t,!0);this._pickEvent.setInitial(e[0],e[1]);var i=this.singlePick(e[0],e[1]);return!!i&&(this.locateNode(i),!0)},mouseMove:function(t){var e=this.getPositionRelativeToCanvas(t,!0);this._pickEvent.setInitial(e[0],e[1]);var i=this.singlePick(e[0],e[1]);if(!i){if(this._signedNode){if(this._callback){var r={};r.id=this._signedNode.getID(),r.userData=this._signedNode.getUserData(),this._callback(this._signedNode.getID(),Ws.MouseOut,this._signedNode.getUserData())}this._signedNode.unhighlight(),this._signedNode=null,this._moduler.requestRedraw()}return!1}if(i!==this._pickedNode){if(this._callback&&this._signedNode!==i){if(this._signedNode){var n={};n.id=this._signedNode.getID(),n.userData=this._signedNode.getUserData(),this._callback(this._signedNode.getID(),Ws.MouseOut,this._signedNode.getUserData())}var o={};o.id=i.getID(),o.userData=i.getUserData(),this._callback(i.getID(),Ws.MouseIn,i.getUserData())}return this.expandNode(i),t.preventDefault(),!0}}}),Ws.prototype[Bi.KEYBORAD_PUSH]=function(t){return"Escape"===t.code&&(this._pickedNode&&(this._pickedNode.unhighlight(),this._pickedNode=null,this._moduler.requestRedraw()),!1)},Ws.prototype[Bi.TOUCH_CLICK]=function(t){this._pickEvent.setInitial(t[0],t[1]);var e=this.singlePick(t[0],t[1]);return!!e&&(this.locateNode(e),!0)};var Xs=Ws,Js=function(t){this._adaptor=t,this._pushpin=null};Js.prototype={openPushpin:function(){this._pushpin=this._adaptor.setOperation(new Xs(this._adaptor))},closePushpin:function(){this._pushpin=this._adaptor.resetOperation(Ti.PUSHPIN)},addPushpin:function(t,e,i){if(this._pushpin)return!!Y.isStringType(t)&&(!!Y.isArrayType(e)&&this._pushpin.addPushpin(t,e,i))},deletePushpin:function(t){this._pushpin&&this._pushpin.deletePushpin(t)},deleteAllPushpin:function(){this._pushpin&&this._pushpin.deleteAllPushpin()},showPushpin:function(t){this._pushpin&&this._pushpin.showPushpin(t)},hidePushpin:function(t){this._pushpin&&this._pushpin.hidePushpin(t)},showAllPushpin:function(){this._pushpin&&this._pushpin.showAllPushpin()},hideAllPushpin:function(){this._pushpin&&this._pushpin.hideAllPushpin()},setPushpinCallback:function(t){this._pushpin&&this._pushpin.setCallback(t)},expandPushpin:function(t){this._pushpin&&this._pushpin.expandPushpin(t)},setExpandRatio:function(t){this._adaptor.getConfig().setPushpinRatio(t)},recoverPushpin:function(t){this._pushpin&&this._pushpin.recoverPushpin(t)},locatePushpin:function(t){this._pushpin&&this._pushpin.locatePushpin(t)},getViewState:function(t){return t._pushpinOpened=!!this._pushpin,t}};var qs=Js,Zs=function(){this._eye=J.new_d(),this._center=J.new_d(),this._up=J.new_d(),this._orthOpened=!1,this._orthHeight=1e3},Ks=function(){this._componentHideFlag=!1,this._assignedComponents=void 0,this._axisgridHideFlag=!1,this._assignedAxisgrids=void 0},Qs=function(){this._treeRule=[],this._hideNodePaths=[]},$s=function(){this._assignedControlStates=new Map,this._componentTreeStates=[],this._axisgridTreeState=void 0};$s.prototype={createAssignedControlState:function(){return new Ks},createDisplaytreeControlState:function(){return new Qs}};var th=function(){this._personRoamingOpened=!1,this._thirdPersonOpened=!1,this._collisionDectectOpened=!1,this._gravityFallOpened=!1,this._mouseOperateOpened=!1,this._cameraDistance=0},eh=function(){this._cubeSectionOpened=!1,this._cubeSectionMode=0,this._cubeSectionShowed=!1,this._cubeTranslate=J.new_d(),this._cubeRotation=$a.new_d(),this._cubeScaling=J.new_d()},ih=function(){this._measureOpened=!1,this._measureType=Re.f.VIEW,this._measureNodes=[]},rh=function(){this._camera=new Zs,this._control=null,this._roaming=null,this._section=null,this._measure=null};rh.prototype={getCameraState:function(){return this._camera},getControlState:function(t){return t&&(this._control||(this._control=new $s)),this._control},getRoamingState:function(t){return t&&(this._roaming||(this._roaming=new th)),this._roaming},getSectionState:function(t){return t&&(this._section||(this._section=new eh)),this._section},getMeasureState:function(t){return t&&(this._measure||(this._measure=new ih)),this._measure}};var nh=rh,oh=function(){this._buffers=[],this._length=0};oh.prototype={concatBuffers:function(){var t=this,e=this._buffers.map((function(t){return t.byteLength})),i=new Uint8Array(this._length);return e.reduce((function(e,r,n){return i.set(new Uint8Array(t._buffers[n]),e),e+r}),0),i.buffer},clearBuffers:function(){this._buffers.length=0,this._length=0},writeEndianFlag:function(){this.writeUInt(ft.BIG_ENDIAN_FLAG)},writeVerifyFlag:function(){this.writeUInt(ft.VERIFY_FLAG)},writeBool:function(t){var e=new Uint8Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeChar:function(t){var e=new Int8Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeUChar:function(t){var e=new Uint8Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeShort:function(t){var e=new Int16Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeUShort:function(t){var e=new Uint16Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeInt:function(t){var e=new Int32Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeVerifyUInt:function(t){this.writeUInt(t),this.writeVerifyFlag()},writeUInt:function(t){var e=new Uint32Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeFloat:function(t){var e=new Float32Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeDouble:function(t){var e=new Float64Array(1);e[0]=t,this._buffers.push(e.buffer),this._length+=e.byteLength},writeString:function(t){var e=[],i=Y.unicodeToUtf8(t,e);if(this.writeUInt(i),0!==i){for(var r=new Uint8Array(i),n=0;n<i;n++)r[n]=e[n];this._buffers.push(r.buffer),this._length+=r.byteLength}},writeVerifyString:function(t){var e=[],i=Y.unicodeToUtf8(t,e);if(this.writeVerifyUInt(i),0!==i){for(var r=new Uint8Array(i),n=0;n<i;n++)r[n]=e[n];this._buffers.push(r.buffer),this._length+=r.byteLength}},writeVec3:function(t){this.writeTypedArray(t)},writeQuat:function(t){this.writeTypedArray(t)},writeTypedArray:function(t){this._buffers.push(t.buffer),this._length+=t.byteLength},writeVecString:function(t){var e=t.length;this.writeUInt(e);for(var i=0;i<e;i++)this.writeString(t[i])},writeVerifyVecString:function(t){var e=t.length;this.writeVerifyUInt(e);for(var i=0;i<e;i++)this.writeVerifyString(t[i])}};var ah=oh,sh=function(t){ah.call(this),this._state=t};(sh.prototype=Object.create(ah.prototype)).constructor=sh,Object.assign(sh.prototype,{writeVersion:function(){this.writeUShort(ft.VIEW_VERSION)},writeViewStream:function(){this.writeEndianFlag(),this.writeVersion(),this.writeViewState(),this.writeVerifyFlag()},writeViewState:function(){var t=this._state.getCameraState();this.writeCameraState(t);var e=this._state.getControlState();e?(this.writeBool(!0),this.writeControlState(e)):this.writeBool(!1);var i=this._state.getRoamingState();i?(this.writeBool(!0),this.writeRoamingState(i)):this.writeBool(!1);var r=this._state.getSectionState();r?(this.writeBool(!0),this.writeSectionState(r)):this.writeBool(!1);var n=this._state.getMeasureState();n?(this.writeBool(!0),this.writeMeasureState(n)):this.writeBool(!1)},writeCameraState:function(t){this.writeTypedArray(t._eye),this.writeTypedArray(t._center),this.writeTypedArray(t._up),this.writeBool(t._orthOpened),this.writeDouble(t._orthHeight)},writeControlState:function(t){var e=this,i=t._assignedControlStates.size;this.writeVerifyUInt(i),t._assignedControlStates.forEach((function(t,i){e.writeVerifyString(i),e.writeBool(t._componentHideFlag),e.writeVerifyVecString(t._assignedComponents),e.writeBool(t._axisgridHideFlag),e.writeVerifyVecString(t._assignedAxisgrids)}));var r=t._componentTreeStates.length;this.writeVerifyUInt(r);for(var n=0;n<r;n++){var o=t._componentTreeStates[n];this.writeVerifyVecString(o._treeRule);var a=o._hideNodePaths,s=a.length;this.writeVerifyUInt(s);for(var h=0;h<s;h++)this.writeVerifyVecString(a[h])}if(this._axisgridTreeState){this.writeBool(!0),this.writeVerifyVecString(t._axisgridTreeState._treeRule);for(var u=t._axisgridTreeState._hideNodePaths,c=u.length,l=0;l<c;l++)this.writeVerifyVecString(u[l])}else this.writeBool(!1)},writeRoamingState:function(t){this.writeBool(t._personRoamingOpened),t._personRoamingOpened&&(this.writeBool(t._gravityFallOpened),this.writeBool(t._collisionDectectOpened),this.writeDouble(t._cameraDistance),this.writeBool(t._thirdPersonOpened),this.writeBool(t._mouseOperateOpened))},writeSectionState:function(t){this.writeBool(t._cubeSectionOpened),t._cubeSectionOpened&&(this.writeInt(t._cubeSectionMode),this.writeBool(t._cubeSectionShowed),this.writeVec3(t._cubeTranslate),t._cubeScaling[0]/=2e3,t._cubeScaling[1]/=2e3,t._cubeScaling[2]/=2e3,this.writeVec3(t._cubeScaling),this.writeQuat(t._cubeRotation))},writeMeasureState:function(t){if(this.writeBool(t._measureOpened),t._measureOpened){this.writeInt(t._measureType);var e=t._measureNodes.length;this.writeVerifyUInt(e);for(var i=0;i<e;i++){var r=t._measureNodes[i];this.writeVerifyString(r.ID.toString()),this.writeInt(r.type);var n=r.points.length;this.writeVerifyUInt(n);for(var o=0;o<n;o++)this.writeVec3(r.points[o])}}}});var hh=sh,uh=function(){we.call(this),this._version=-1};(uh.prototype=Object.create(we.prototype)).constructor=uh,Object.assign(uh.prototype,{readVersion:function(){this._version=this.readUShort()},readViewStream:function(t){if(this.setArrayBuffer(t),this.readEndianFlag(),this.readVersion(),!(this._version>ft.VIEW_VERSION||this._version<4)){var e=this.readViewState();if(e&&this.readVerifyFlag())return e}},readViewState:function(){var t=new nh,e=t.getCameraState();if(this.readCameraState(e),this.readUChar()){var i=t.getControlState(!0);if(!this.readControlState(i))return}if(this.readUChar()){var r=t.getRoamingState(!0);if(!this.readRoamingState(r))return}if(this.readUChar()){var n=t.getSectionState(!0);if(!this.readSectionState(n))return}if(this.readUChar()){var o=t.getMeasureState(!0);if(!this.readMeasureState(o))return}return t},readCameraState:function(t){t._eye=this.readDoubleArray(3),t._center=this.readDoubleArray(3),t._up=this.readDoubleArray(3),this._version>4&&(t._orthOpened=this.readBool(),t._orthHeight=this.readDouble())},readControlState:function(t){var e=this.readVerifyUInt();if(void 0===e)return!1;for(var i=0;i<e;i++){var r=this.readVerifyString();if(void 0===r)return!1;var n=t.createAssignedControlState();if(n._componentHideFlag=this.readUChar(),n._assignedComponents=[],!this.readVerifyVecString(n._assignedComponents))return!1;if(n._axisgridHideFlag=this.readUChar(),n._assignedAxisgrids=[],!this.readVerifyVecString(n._assignedAxisgrids))return!1;t._assignedControlStates.set(r,n)}if(void 0===(e=this.readVerifyUInt()))return!1;for(var o=0;o<e;o++){var a=t.createDisplaytreeControlState();if(!this.readVerifyVecString(a._treeRule))return!1;var s=this.readVerifyUInt();if(void 0===s)return!1;for(var h=0;h<s;h++){var u=[];if(!this.readVerifyVecString(u))return!1;a._hideNodePaths.push(u)}t._componentTreeStates.push(a)}if(this.readUChar()){var c=t.createDisplaytreeControlState();if(!this.readVerifyVecString(c._treeRule))return!1;var l=this.readVerifyUInt();if(void 0===l)return!1;for(var g=0;g<l;g++){var _=[];if(!this.readVerifyVecString(_))return!1;c._hideNodePaths.push(_)}t._axisgridTreeState=c}return!0},readRoamingState:function(t){return t._personRoamingOpened=this.readUChar(),t._personRoamingOpened&&(t._gravityFallOpened=this.readUChar(),t._collisionDectectOpened=this.readUChar(),t._cameraDistance=this.readDouble(),t._thirdPersonOpened=this.readUChar(),t._mouseOperateOpened=this.readUChar()),!0},readSectionState:function(t){return t._cubeSectionOpened=this.readUChar(),t._cubeSectionOpened&&(t._cubeSectionMode=this.readInt(),t._cubeSectionShowed=this.readUChar(),t._cubeTranslate=this.readDoubleArray(3),t._cubeScaling=this.readDoubleArray(3),t._cubeScaling[0]*=2e3,t._cubeScaling[1]*=2e3,t._cubeScaling[2]*=2e3,t._cubeRotation=this.readDoubleArray(4)),!0},readMeasureState:function(t){if(t._measureOpened=this.readUChar(),t._measureOpened){t._measureType=this.readInt();var e=this.readVerifyUInt();if(void 0===e)return!1;for(var i=0;i<e;i++){var r={},n=this.readVerifyString();if(void 0===n)return!1;r.ID=parseInt(n,10),r.type=this.readInt(),r.points=[];var o=this.readVerifyUInt();if(void 0===o)return!1;for(var a=0;a<o;a++)r.points.push(this.readFloatArray(3));t._measureNodes.push(r)}}return!0}});var ch=uh,lh={Unknown:0,ModelGroup:1,Assembly:2,AxisGrid:50,Rooms:51,Wall:100,Column:101,Beam:102,Door:103,Window:104,Roof:105,Cutter:106,Fascia:107,EdgeSlab:108,RoofSoffit:109,StairsRailing:110,Floor:111,Stair:112,SpecialityEquipment:113,Mass:114,Parking:115,Topography:116,Site:117,Ramp:118,Ceiling:119,Furniture:120,FurnitureSystem:121,GenericModel:122,Casework:123,CurtainWallMullion:124,CurtainWallPanel:125,CurtaSystem:126,Planting:127,Entourage:128,ShaftOpening:129,Roads:130,Chimney:131,BuildingPad:132,Cornices:133,RailingTopRail:134,Parts:135,StructuralFoundation:200,StructuralColumn:201,StructuralTrus:202,StructuralFraming:203,StructuralFramingSystem:204,StructConnection:205,Rebar:206,Plate:207,Fastener:208,StructuralWall:209,StructuralStiffener:210,StructuralFloor:211,Pipe:300,FlexPipeCurve:301,PipeFitting:302,PipeAccessory:303,Duct:304,FlexDuctCurve:305,DuctFitting:306,DuctAccessory:307,DuctTerminal:308,CableTray:309,CableTrayFitting:310,Conduit:311,ConduitFitting:312,Wire:313,PlumbingFixture:314,Sprinkler:315,SecurityDevice:316,NurseCallDevice:317,DataDevice:318,MechanicalEquipment:319,FireAlarmDevice:320,LightingDevice:321,LightingFixture:322,ElectricalEquipment:323,ElectricalFixture:324,TelephoneDevice:325,CommunicationDevice:326,HVACDevice:327,WSDDevice:328,FireProtectionDevice:329,AirCondition:330,AirTerminalBox:331,Boiler:332,Burner:333,Chiller:334,Coil:335,Compressor:336,Condenser:337,CooledBeam:338,CoolingTower:339,Damper:340,DuctSilencer:341,Engine:342,Evaporator:343,EvaporativeCooler:344,Fan:345,Filter:346,Flowmeter:347,HeatExchanger:348,Humidifier:349,Pump:350,SpaceHeater:351,Tank:352,TubeBundle:353,UnitaryEquipment:354,Valve:355,VibrationIsolator:356,ElectricGenerator:357,ElectricMotor:358,JunctionBox:359,Outlet:360,SwitchingDevice:361,ProtectiveDevice:362,Transformer:363,PipeInsulation:364,DuctInsulation:365,FabricationParts:366,FabricationPipework:367,FabricationContainment:368,FabricationHangers:369,FabricationDuctwork:370};Object.freeze(lh);var gh=lh,_h=function(){this._backgroundType=Do.BACKGROUND_TYPE,this._backgroundPureColor=Do.BACKGROUND_PURE_COLOR,this._backgroundGradientTopColor=Do.BACKGROUND_GRADIENT_TOP_COLOR,this._backgroundGradientBottomColor=Do.BACKGROUND_GRADIENT_BOTTOM_COLOR,this._highlightMaterial=new un(Do.HIGHLIGHT_COLOR),this._transparentMaterial=new un(Do.TRANSPARENT_COLOR),this._navigateRightMargin=Do.NAVIGATE_RIGHT_MARGIN,this._navigateTopMargin=Do.NAVIGATE_TOP_MARGIN,this._navigateWidthSize=Do.NAVIGATE_WIDTH_SIZE,this._navigateResources=null,this._relationPick=!0,this._multiplePick=!0,this._leftMouseOperation=Do.LEFT_MOUSE_OPERATION,this._homeEyePosition=J.clone(Do.HOME_EYE_POSITION),this._homeUpDirection=J.clone(Do.HOME_UP_DIRECTION),this._homeDistanceScale=1.5,this._thirdPersonOpen=!1,this._collisionDetectOpen=!1,this._gravityFallOpen=!1,this._orthogonalOpen=!1,this._personSpeed=rs.SPEED,this._personFOV=rs.FOV,this._climbHeight=rs.CLIMB_HEIGHT,this._jumpHeight=rs.JUMP_HEIGHT,this._jumpStartSpeed=this.updateJumpStartSpeed(this._jumpHeight),this._personHSensitivity=rs.HORIZONTAL_SENSITIVITY,this._personVSensitivity=rs.VERTICAL_SENSITIVITY,this._collisionIgnoreCategory=new Set,this._collisionIgnoreCategory.add(gh.Door),this._collisionIgnoreCategory.add(gh.Window),this._characterTexture=null,this._characterGeometry=null,this._personPanelRes=null,this._personPanelMargin={size:Do.PERSON_PANEL_SIZE,left:Do.PERSON_PANEL_LEFT_MARGIN,right:Do.PERSON_PANEL_RIGHT_MARGIN,bottom:Do.PERSON_PANEL_BOTTOM_MARGIN},this._measureType=Do.MEASURE_TYPE,this._cursorResources=[Do.CURSOR_NORMAL_PNG,Do.CURSOR_PICKUP_PNG],this._pushpinRatio=Do.PUSHPIN_HIGHLIGHT_SCALE,this._minimapWidth=Zo.MapWidth,this._minimapHeight=Zo.MapHeight,this._minimapX=Zo.PosX,this._minimapY=Zo.PosY,this._minimapBackgroundColor=Zo.BackgroundColor,this._minimapFloors=null};_h.prototype={getBackgroundType:function(){return this._backgroundType},getBackgroundPureColor:function(){return this._backgroundPureColor},getBackgroundGradientTopColor:function(){return this._backgroundGradientTopColor},getBackgroundGradientBottomColor:function(){return this._backgroundGradientBottomColor},getHighligthMaterial:function(){return this._highlightMaterial},getTransparentMaterial:function(){return this._transparentMaterial},setTransparentAlpha:function(t){this._transparentMaterial.setAlpha(t)},setCharacterGeometry:function(t){this._characterGeometry=t},getCharacterGeometry:function(){return this._characterGeometry},setCharacterTexture:function(t){this._characterTexture=t},getCharacterTexture:function(){return this._characterTexture},isCharacterResourcesValid:function(){return!(!this._characterGeometry||!this._characterTexture)},setPersonPanelImages:function(t){this._personPanelRes=t},isPersonPanelResourcesValid:function(){return!!Y.isArrayType(this._personPanelRes)&&Y.isArrayValid(this._personPanelRes)},getPersonPanelResources:function(){return this._personPanelRes},getCursorResources:function(){return this._cursorResources},setNavigateResources:function(t){this._navigateResources=t},isNavigateResourcesValid:function(){return!!Y.isArrayType(this._navigateResources)&&Y.isArrayValid(this._navigateResources)},getNavigateResources:function(){return this._navigateResources},isRelationPicked:function(t){return void 0!==t&&(this._relationPick=t),this._relationPick},isMultiplePicked:function(t){return void 0!==t&&(this._multiplePick=t),this._multiplePick},setHomeEyePosition:function(t){if(J.normalize(this._homeEyePosition,t),Math.abs(this._homeEyePosition[2])<_.EPSILON)J.set(this._homeUpDirection,0,0,1);else if(Math.abs(this._homeEyePosition[2])>1-_.EPSILON)J.set(this._homeUpDirection,0,this._homeEyePosition[2],0);else{var e=J.MemoryPool.alloc();J.set(e,this._homeEyePosition[0],this._homeEyePosition[1],0),J.normalize(e,e);var i=J.MemoryPool.alloc();J.cross(i,this._homeEyePosition,e),J.normalize(i,i),J.cross(this._homeUpDirection,this._homeEyePosition,i),J.normalize(this._homeUpDirection,this._homeUpDirection),J.MemoryPool.free(e),J.MemoryPool.free(i)}},getHomeEyePosition:function(){return this._homeEyePosition},getHomeUpDirection:function(){return this._homeUpDirection},setHomeEyeDistance:function(t){this._homeDistanceScale=t},getHomeEyeDistance:function(){return this._homeDistanceScale},setLeftMouseOperation:function(t){this._leftMouseOperation=t},getLeftMouseOperation:function(){return this._leftMouseOperation},isThirdPersonOpened:function(t){return void 0!==t&&(this._thirdPersonOpen=t),this._thirdPersonOpen},isCollisionDetectOpened:function(t){return void 0!==t&&(this._collisionDetectOpen=t),this._collisionDetectOpen},isOrthogonalModeOpened:function(t){return void 0!==t&&(this._orthogonalOpen=t),this._orthogonalOpen},isGravityFallOpened:function(t){return void 0!==t&&(this._gravityFallOpen=t),this._gravityFallOpen},setPersonSpeed:function(t){this._personSpeed=t},getPersonSpeed:function(){return this._personSpeed},getPersonFOV:function(){return this._personFOV},getPersonHSensitivity:function(){return this._personHSensitivity},getPersonVSensitivity:function(){return this._personVSensitivity},getCollisionIgnoreCategory:function(){return this._collisionIgnoreCategory},getJumpHeight:function(){return this._jumpHeight},setJumpHeight:function(t){this._jumpStartSpeed=this.updateJumpStartSpeed(t)},getJumpStartSpeed:function(){return this._jumpStartSpeed},updateJumpStartSpeed:function(t){return Math.sqrt(2*t*rs.GRAVITY_SPEED)},setClimbHeight:function(t){this._climbHeight=t},getClimbHeight:function(){return this._climbHeight},setPersonPanelMargin:function(t,e,i,r){this._personPanelMargin.left=e,this._personPanelMargin.right=i,this._personPanelMargin.bottom=r,this._personPanelMargin.size=t},getPersonPanelMargin:function(){return this._personPanelMargin},getMeasureType:function(){return this._measureType},setMeasureType:function(t){this._measureType=t},setPushpinRatio:function(t){this._pushpinRatio=t},getPushpinRatio:function(){return this._pushpinRatio}};var dh=_h,Ah=function(t){ki.call(this),this._mode=_e.DISABLE,t&&(this._mode=t)};(Ah.prototype=Object.create(ki.prototype)).constructor=Ah,Object.assign(Ah.prototype,{type:function(){return Fi.CullFace},setMode:function(t){this._mode=t},getMode:function(){return this._mode},apply:function(t){var e=t.gl();this._mode===_e.DISABLE?e.disable(_e.CULL_FACE):(e.enable(_e.CULL_FACE),e.cullFace(this._mode))}}),Ah.wind=Ah.prototype.wind=K.GLCULLFACE;var ph=Ah,Ih=function(t){this._gl=t.getContext("webgl")||t.getContext("experimental-webgl"),this._gl.getExtension("OES_element_index_uint"),this._glVertexArrayObject=null,this._glInstancedArrays=null,this._gl.getExtension?(this._glVertexArrayObject=this._gl.getExtension("OES_vertex_array_object"),null==this._glVertexArrayObject&&console.log("browser do not support WebGL extensions VAO"),this._glInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays")):console.log("browser do not support WebGL extensions"),this._realModeOpened=!0};Object.assign(Ih.prototype,{gl:function(){return this._gl},glVertexArrayObject:function(){return this._glVertexArrayObject},glInstancedArrays:function(){return this._glInstancedArrays}});var fh=Ih,Ch=function(){ki.call(this),this._parameters=new Map};(Ch.prototype=Object.create(ki.prototype)).constructor=Ch,Object.assign(Ch.prototype,{type:function(){return Fi.PixelStore},setParameter:function(t,e){this._parameters.set(t,e)},apply:function(t){if(0!==this._parameters.size){var e=t.gl();this._parameters.forEach((function(t,i){e.pixelStorei(i,t)}))}}}),Ch.wind=Ch.prototype.wind=K.GLPIXELSTORE;var mh=function(t){this._glcontext=t,this._defaultGLStateset=null,this._lastGLStateset=new lo,this._lastGLProgram=null,this._lastCamera=null,this._lastGLShadings=new _o,this._worldMatrixUniform=nn.createMatrix4("worldMatrix"),this._viewMatrixUniform=nn.createMatrix4("viewMatrix"),this._projectionMatrixUniform=nn.createMatrix4("ProjectionMatrix"),this._worldViewProjectionMatrixUniform=nn.createMatrix4("worldViewProjectionMatrix"),this._normalMatrixUniform=nn.createMatrix4("NormalMatrix"),this._transformMatrix=null};Object.assign(mh.prototype,{applyDefault:function(t){this._lastGLStateset.reset(),this._defaultGLStateset=t;for(var e=this._defaultGLStateset._glstates,i=this._lastGLStateset._glstates,r=e.length,n=0;n<r;n++){var o=e[n];o&&i[n]!==o&&(o.apply(this._glcontext),i[n]=o)}this._lastGLProgram=null,this._lastCamera=null,this._lastTransformMatrix=null},applyGLStateset:function(t){var e=this._defaultGLStateset._glstates,i=this._lastGLStateset._glstates,r=e.length;if(t)for(var n=t._glstates,o=0;o<r;o++){var a=n[o];a||(a=e[o]),a&&i[o]!==a&&(a.apply(this._glcontext),i[o]=a)}},applyGLProgram:function(t){this._lastGLProgram!==t&&(t.apply(),this._lastGLProgram=t,this._lastGLShadings.reset(),this._lastCamera=null,this._lastTransformMatrix=null)},getLastGLProgram:function(){return this._lastGLProgram},applyGLShadings:function(t,e,i){var r=this._lastGLShadings;r._glmaterial!==t&&(t.apply(this._glcontext,this._lastGLProgram),r._glmaterial=t),r._gllighting!==e&&(e.apply(this._glcontext,this._lastGLProgram),r._gllighting=e),r._glfunction!==i&&(i.apply(this._glcontext,this._lastGLProgram),r._glfunction=i)},applyCameraMatrix:function(t){this._lastCamera!==t&&(this._viewMatrixUniform.setMatrix4(t.getViewMatrix()),this._viewMatrixUniform.apply(this._glcontext,this._lastGLProgram),this._projectionMatrixUniform.setMatrix4(t.getProjectionMatrix()),this._projectionMatrixUniform.apply(this._glcontext,this._lastGLProgram),this._lastCamera=t)},applyModelMatrix:function(t){if(this._lastTransformMatrix!==t){this._worldMatrixUniform.setMatrix4(t),this._worldMatrixUniform.apply(this._glcontext,this._lastGLProgram);var e=it.MemoryPool.alloc();if(it.copy(e,t),it.mul(e,this._viewMatrixUniform.getData(),e),this._lastGLProgram.isUniformValid("NormalMatrix")){var i=it.MemoryPool.alloc();it.getNormalMat4(i,e),this._normalMatrixUniform.setMatrix4(i),this._normalMatrixUniform.apply(this._glcontext,this._lastGLProgram),it.MemoryPool.free(i)}it.mul(e,this._projectionMatrixUniform.getData(),e),this._worldViewProjectionMatrixUniform.setMatrix4(e),this._worldViewProjectionMatrixUniform.apply(this._glcontext,this._lastGLProgram),it.MemoryPool.free(e)}}});var vh=mh,yh=function(){this._current=this._last=Date.now()};yh.prototype={count:function(){this._current=Date.now()},current:function(){return this._current},last:function(){return this._last},cost:function(){return Date.now()-this._current},delta:function(){return this._current-this._last},sync:function(){this._last=this._current}};var Eh=yh,wh=function(){this._frontBuffer=[],this._backBuffer=[]};wh.prototype={array:function(){return this._frontBuffer},length:function(){return this._frontBuffer.length},index:function(t){return this._frontBuffer[t]},push:function(t){t._index=this._frontBuffer.length,this._frontBuffer.push(t)},clear:function(){for(var t=this._frontBuffer.length,e=0;e<t;e++){var i=this._frontBuffer[e];i&&(i._index=void 0)}this._frontBuffer.length=0,this._backBuffer.length=0},singleRemove:function(t){var e=this._frontBuffer.indexOf(t);-1!==e&&this._frontBuffer.splice(e,1)},multipleRemove:function(t){void 0!==t._index&&(this._frontBuffer[t._index]=void 0),t._index=void 0},sync:function(){for(var t=this._frontBuffer.length,e=0;e<t;e++){var i=this._frontBuffer[e];i&&this._backBuffer.push(i)}this._frontBuffer.length=0;var r=this._frontBuffer;this._frontBuffer=this._backBuffer,this._backBuffer=r}};var Mh=wh,Th=function(){gr.call(this),this._boundingBox=void 0};(Th.prototype=Object.create(gr.prototype)).constructor=Th,Object.assign(Th.prototype,{reset:function(){gr.prototype.reset.call(this),this._boundingBox=void 0},initialize:function(t){this._boundingBox=t;var e=nt.create(1,0,0,-t.getXMin());this._originPlanes.push(e);var i=nt.new();this._currentPlanes.push(nt.copy(i,e)),e=nt.create(-1,0,0,t.getXMax()),this._originPlanes.push(e),i=nt.new(),this._currentPlanes.push(nt.copy(i,e)),e=nt.create(0,1,0,-t.getYMin()),this._originPlanes.push(e),i=nt.new(),this._currentPlanes.push(nt.copy(i,e)),e=nt.create(0,-1,0,t.getYMax()),this._originPlanes.push(e),i=nt.new(),this._currentPlanes.push(nt.copy(i,e)),e=nt.create(0,0,1,-t.getZMin()),this._originPlanes.push(e),i=nt.new(),this._currentPlanes.push(nt.copy(i,e)),e=nt.create(0,0,-1,t.getZMax()),this._originPlanes.push(e),i=nt.new(),this._currentPlanes.push(nt.copy(i,e)),this._planeMask=1118481},intersectBoundingBox:function(t){return t.intersectBoundingBox(this._boundingBox)},intersectBoundingBoxXY:function(t){return t.intersectBoundingBoxXY(this._boundingBox)}});var Ph=Th,Sh=function(){Us.call(this),this._relation=null,this._displayHideCount=0,this._pushpinObservers=[],this._displayObservers=[]};(Sh.prototype=Object.create(Us.prototype)).constructor=Sh,Object.assign(Sh.prototype,{reset:function(){Us.prototype.reset.call(this),this._displayObservers.length=0,this._pushpinObservers.length=0},setRelation:function(t){this._relation=t},getRelation:function(){return this._relation},addDisplayObserver:function(t){this._displayObservers.push(t)},addPushpinObserver:function(t){this._pushpinObservers.push(t)},clearPushpinObserver:function(){this._pushpinObservers.length=0},removePushpinObserver:function(t){var e=this._pushpinObservers.indexOf(t);return-1!==e&&(this._pushpinObservers.splice(e,1),!0)},displayChanged:function(){for(var t=this._displayObservers.length,e=0;e<t;e++)this._displayObservers[e].setChanged(!0)},pushpinChanged:function(){for(var t=this._pushpinObservers.length,e=0;e<t;e++)this._pushpinObservers[e].setChanged(!0)},isShown:function(){return 0===this._displayHideCount&&!this._assignHided},isDisplayShown:function(){return 0===this._displayHideCount},show:function(){this.isShown()||(this._assignHided=!1,0!==this._displayHideCount&&(this._displayHideCount=0,this.displayChanged()),this.pushpinChanged())},hide:function(){this.isShown()&&this.pushpinChanged(),this._assignHided=!0;var t=this._displayObservers.length;this._displayHideCount!==t&&(this._displayHideCount=t,this.displayChanged())},displayHide:function(){this.isShown()&&this.pushpinChanged(),this._displayHideCount++},displayShow:function(){this._displayHideCount>0&&this._displayHideCount--,this.isShown()&&this.pushpinChanged()}});var Rh=Sh,Oh=function(){la.call(this)};(Oh.prototype=Object.create(la.prototype)).constructor=Oh,Object.assign(Oh.prototype,{push:function(t){this._root.addObject(t)},createNode:function(){return new ua},create:function(){this._root.getObjects().length<ua.MAXDRAWABLE||this.split(this._root)},split:function(t){for(var e=this.splitBoundingBox(t.getBoundingBox()),i=[],r=0;r<9;r++){var n=this.createNode();i.push(n)}for(var o=t.getObjects(),a=!1,s=o.length,h=0;h<s;h++){var u=o[h];a=!1;for(var c=0;c<8;c++){if(e[c].containsBoundingBox(u.getBoundingBox())){i[c].addObject(u),a=!0;break}}a||i[8].addObject(u)}t.clearObjects();for(var l=0;l<8;l++){var g=i[l],_=g.getObjects().length;_>0&&(t.addChild(g),g.setParent(t),_>ua.MAXDRAWABLE&&this.split(g))}var d=i[8],A=d.getObjects().length;A>0&&(t.addChild(d),d.setParent(t),A!==s&&A>ua.MAXDRAWABLE&&this.split(d))},splitBoundingBox:function(t){var e=J.MemoryPool.alloc();t.getCenter(e);var i=t.getMin(),r=t.getMax(),n=[],o=new at;return o.setMinValue(i[0],i[1],i[2]),o.setMaxValue(e[0],e[1],e[2]),n.push(o),(o=new at).setMinValue(e[0],i[1],i[2]),o.setMaxValue(r[0],e[1],e[2]),n.push(o),(o=new at).setMinValue(i[0],e[1],i[2]),o.setMaxValue(e[0],r[1],e[2]),n.push(o),(o=new at).setMinValue(e[0],e[1],i[2]),o.setMaxValue(r[0],r[1],e[2]),n.push(o),(o=new at).setMinValue(i[0],i[1],e[2]),o.setMaxValue(e[0],e[1],r[2]),n.push(o),(o=new at).setMinValue(e[0],i[1],e[2]),o.setMaxValue(r[0],e[1],r[2]),n.push(o),(o=new at).setMinValue(i[0],e[1],e[2]),o.setMaxValue(e[0],r[1],r[2]),n.push(o),(o=new at).setMinValue(e[0],e[1],e[2]),o.setMaxValue(r[0],r[1],r[2]),n.push(o),J.MemoryPool.free(e),n}});var Lh=Oh,Nh=function(){Us.call(this),this._layer=null};(Nh.prototype=Object.create(Us.prototype)).constructor=Nh,Object.assign(Nh.prototype,{setLayer:function(t){this._layer=t},getLayer:function(){return this._layer}});var bh=Nh,Dh=function(){Us.call(this),this._relPrimitives=[]};(Dh.prototype=Object.create(Us.prototype)).constructor=Dh,Object.assign(Dh.prototype,{reset:function(){Us.prototype.reset.call(this);for(var t=this._relPrimitives.length,e=0;e<t;e++)this._relPrimitives[e].reset()},revert:function(){Us.prototype.revert.call(this);for(var t=this._relPrimitives.length,e=0;e<t;e++)this._relPrimitives[e].revert()},hide:function(t){for(var e=this._relPrimitives.length,i=0;i<e;i++)this._relPrimitives[i].hide(t)},show:function(t){for(var e=this._relPrimitives.length,i=0;i<e;i++)this._relPrimitives[i].show(t)},highlight:function(t,e){if(Us.prototype.highlight.call(this,t,e)){for(var i=this._relPrimitives.length,r=0;r<i;r++)this._relPrimitives[r].highlight(t,e);return!0}return!1},unhighlight:function(){if(Us.prototype.unhighlight.call(this)){for(var t=this._relPrimitives.length,e=0;e<t;e++)this._relPrimitives[e].unhighlight();return!0}return!1},coloring:function(t){Us.prototype.coloring.call(this,t);for(var e=this._relPrimitives.length,i=0;i<e;i++)this._relPrimitives[i].coloring(t)},discoloring:function(){Us.prototype.discoloring.call(this);for(var t=this._relPrimitives.length,e=0;e<t;e++)this._relPrimitives[e].discoloring()}});var xh=Dh,Bh=function(){sa.call(this),this._boundingBox=new at};Bh.MAXDRAWABLE=1e3,(Bh.prototype=Object.create(sa.prototype)).constructor=Bh,Object.assign(Bh.prototype,{reset:function(){sa.prototype.reset.call(this),this._boundingBox.reset()},addObject:function(t){sa.prototype.addObject.call(this,t),t._octreeNode=this,this._boundingBox.expandByBoundingBox(t.getBoundingBox())},getBoundingBox:function(){return this._boundingBox}});var Gh=Bh,Fh=function(){la.call(this)};(Fh.prototype=Object.create(la.prototype)).constructor=Fh,Object.assign(Fh.prototype,{push:function(t){this._root.addObject(t)},createNode:function(){return new Gh},create:function(){this._root.getObjects().length<Gh.MAXDRAWABLE||this.split(this._root)},split:function(t){for(var e=this.splitBoundingBox(t.getBoundingBox()),i=[],r=0;r<5;r++){var n=this.createNode();i.push(n)}for(var o=t.getObjects(),a=!1,s=o.length,h=0;h<s;h++){var u=o[h];a=!1;for(var c=0;c<4;c++){if(e[c].containsBoundingBoxXY(u.getBoundingBox())){i[c].addObject(u),a=!0;break}}a||i[4].addObject(u)}t.clearObjects();for(var l=0;l<4;l++){var g=i[l],_=g.getObjects().length;_>0&&(t.addChild(g),g.setParent(t),_>Gh.MAXDRAWABLE&&this.split(g))}var d=i[4],A=d.getObjects().length;A>0&&(t.addChild(d),d.setParent(t),A!==s&&A>Gh.MAXDRAWABLE&&this.split(d))},splitBoundingBox:function(t){var e=J.MemoryPool.alloc();t.getCenter(e);var i=t.getMin(),r=t.getMax(),n=[],o=new at;return o.setMinValue(i[0],i[1],0),o.setMaxValue(e[0],e[1],0),n.push(o),(o=new at).setMinValue(e[0],i[1],0),o.setMaxValue(r[0],e[1],0),n.push(o),(o=new at).setMinValue(i[0],e[1],0),o.setMaxValue(e[0],r[1],0),n.push(o),(o=new at).setMinValue(e[0],e[1],0),o.setMaxValue(r[0],r[1],0),n.push(o),J.MemoryPool.free(e),n}});var Vh=Fh,kh=function(t,e){this._dataItem=t,this._glcontext=e,this._glgeometries=[],this._glmaterials=[]};Object.assign(kh.prototype,{type:function(){return re.UNKNOWN},isRealModeOpened:function(t){},isParamLoaded:function(){return this._dataItem.isParamLoaded()},getModelKey:function(){return this._dataItem.getModelKey()},modelId:function(){return this._dataItem._id},version:function(){return this._dataItem._version},getBoundingBox:function(){return this._dataItem._root.getBoundingBox()},getBoundingSphere:function(){return this._dataItem._root.getBoundingSphere()},getRenderEntity:function(){return null},revert:function(){},reset:function(){},release:function(){for(var t=this._glgeometries.length,e=0;e<t;e++){var i=this._glgeometries[e];i&&i.release()}t=this._glmaterials.length;for(var r=0;r<t;r++){var n=this._glmaterials[r];n&&n.release()}}});var Uh=function(t,e){kh.call(this,t,e),this._renderComponents=[],this._renderRelations=[],this._renderAxisgrids=[],this._componentDrawables=new Lh,this._axisgridDrawables=[],this._realmode=!1};(Uh.prototype=Object.create(kh.prototype)).constructor=Uh,Object.assign(Uh.prototype,{type:function(){return re.MODEL},revert:function(){for(var t=this._renderComponents,e=t.length,i=0;i<e;i++)t[i].revert();var r=this._renderRelations;e=r.length;for(var n=0;n<e;n++)r[n].revert()},reset:function(){for(var t=this._renderComponents,e=t.length,i=0;i<e;i++)t[i].reset();var r=this._renderRelations;e=r.length;for(var n=0;n<e;n++)r[n].reset()},getRenderEntity:function(t){var e=this._dataItem.getComponentByUniqueId(t);if(e)return this._renderComponents[e._id];var i=this._dataItem.getRelationByUniqueId(t);return i?this._renderRelations[i._id]:null},isRealModeOpened:function(t){if(this._realmode!==t){this._realmode=t;for(var e=this._glmaterials.length,i=0;i<e;i++){var r=this._glmaterials[i];r&&r.isRealModeOpened(t)}this.ocTreeTraverseModeChange(this._componentDrawables.root())}},ocTreeTraverseModeChange:function(t){for(var e=t.getObjects(),i=e.length,r=0;r<i;r++){var n=e[r];if(n){var o=n._glmaterial;n._glmaterial=n._swapMaterial,n._swapMaterial=o}}var a=t.getChildren();i=a.length;for(var s=0;s<i;s++){var h=a[s];this.ocTreeTraverseModeChange(h)}},create:function(){for(var t=this._dataItem,e=t._components,i=e.length,r=0;r<i;r++){var n=e[r];if(n){var o=new Rh;o.setEntity(n),o._sceneItem=this,this._renderComponents[r]=o}}for(var a=t._componentOperables,s=a.length,h=0;h<s;h++){var u=a[h],c=new pr,l=u._geometry,g=l.getID(),d=this._glgeometries[g];void 0===d&&(d=Br.create(l,this._glcontext),this._glgeometries[g]=d);var A=u._tmaterial;if(A){g=A.getID();var p=this._glmaterials[g];if(void 0===p){if(A._type===Pt.MATERIAL1)p=new un(A._pureColor);else if(A._type===Pt.MATERIAL9){p=new An(this._glcontext);var I=w.new();w.multiply(I,A._genericColor,A._multiplyColor),p.setColor(I),p.setPureColor(A._pureColor)}else if(A._type===Pt.MATERIAL10){if(p=new pn(this._glcontext),A._entityImage){var f=A._entityImage._image;f&&(_.is_powerof_two(f.width)&&_.is_powerof_two(f.height)||console.log("image is not power of two: id ",h),p.setImage(f))}p.setColor(A._genericColor,A._multiplyColor),p.setPureColor(A._pureColor)}else console.log("undefined material type");this._glmaterials[g]=p}c._swapMaterial=p}var C=u._material;if(C){g=C.getID();var m=this._glmaterials[g];if(void 0===m){if(C._type===Pt.MATERIAL1)m=new un(C._pureColor);else if(C._type===Pt.MATERIAL2){if(m=new ln(this._glcontext),C._entityImage){var v=C._entityImage._image;v&&(_.is_powerof_two(v.width)&&_.is_powerof_two(v.height)||console.log("image is not power of two: id ",h),m.setImage(v))}m.setColor(C._genericColor,C._multiplyColor)}else if(C._type===Pt.MATERIAL9){m=new An(this._glcontext);var y=w.new();w.multiply(y,C._genericColor,C._multiplyColor),m.setColor(y),m.setPureColor(C._pureColor)}else if(C._type===Pt.MATERIAL10){if(m=new pn(this._glcontext),C._entityImage){var E=C._entityImage._image;E&&(_.is_powerof_two(E.width)&&_.is_powerof_two(E.height)||console.log("image is not power of two: id ",h),m.setImage(E))}m.setColor(C._genericColor,C._multiplyColor),m.setPureColor(C._pureColor)}else console.log("undefined material type");this._glmaterials[g]=m}c._glmaterial=m}c._glgeometry=d,c._transform=u._transform,c._operable=u,c._renderEntity=this._renderComponents[u._reference.getID()],this._componentDrawables.push(c)}this._componentDrawables.create();var M=t._relations;M||(M=t._layers);for(var T=M.length,P=0;P<T;P++){var S=M[P];if(S){var R=new js;R.setEntity(S),this._renderRelations[P]=R;var O=[];S.getRelComponents(O);for(var L=O.length,N=0;N<L;N++){var b=this._renderComponents[O[N].getID()];b&&R._relRcomponents.push(b)}}}}});var Hh=function(t,e){kh.call(this,t,e),this._renderPrimitives=[],this._renderLayers=[],this._primitiveDrawables=new Vh};(Hh.prototype=Object.create(kh.prototype)).constructor=Hh,Object.assign(Hh.prototype,{type:function(){return re.DRAWING},revert:function(){for(var t=this._renderPrimitives,e=t.length,i=0;i<e;i++)t[i].revert();e=(t=this._renderLayers).length;for(var r=0;r<e;r++)t[r].revert()},reset:function(){for(var t=this._renderPrimitives,e=t.length,i=0;i<e;i++)t[i].reset();e=(t=this._renderLayers).length;for(var r=0;r<e;r++)t[r].reset()},createMaterial:function(t){var e=t.getID(),r=this._glmaterials[e];if(void 0===r){if(t._type===Pt.MATERIAL1)r=new un(t._pureColor);else if(t._type===Pt.MATERIAL2){if(r=new ln(this._glcontext),t._entityImage){var n=t._entityImage._image;n&&(_.is_powerof_two(n.width)&&_.is_powerof_two(n.height)||console.log("image is not power of two: id ",i),r.setImage(n))}r.setColor(t._genericColor,t._multiplyColor)}else if(t._type===Pt.MATERIAL9){r=new An(this._glcontext);var o=w.new();w.multiply(o,t._genericColor,t._multiplyColor),r.setColor(o),r.setPureColor(t._pureColor)}else if(t._type===Pt.MATERIAL10){if(r=new pn(this._glcontext),t._entityImage){var a=t._entityImage._image;a&&(_.is_powerof_two(a.width)&&_.is_powerof_two(a.height)||console.log("image is not power of two: id ",i),r.setImage(a))}r.setColor(t._genericColor,t._multiplyColor),r.setPureColor(t._pureColor)}else console.log("undefined material type");this._glmaterials[e]=r}return r},create:function(){for(var t=this._dataItem,e=t._primitives,i=e.length,r=0;r<i;r++){var n=e[r];if(n){var o=new bh;o.setEntity(n),o._sceneItem=this,this._renderPrimitives[r]=o}}for(var a=t._primitiveOperables,s=a.length,h=0;h<s;h++){var u=a[h],c=new pr,l=u._geometry,g=l.getID(),_=this._glgeometries[g];void 0===_&&(_=Br.create(l,this._glcontext),this._glgeometries[g]=_);var d=u._material;d&&(c._glmaterial=this.createMaterial(d)),c._glgeometry=_,c._transform=u._transform,c._operable=u,c._renderEntity=this._renderPrimitives[u._reference.getID()],this._primitiveDrawables.push(c)}this._primitiveDrawables.create();for(var A=t._layers,p=A.length,I=0;I<p;I++){var f=A[I];if(f){var C=new xh;C.setEntity(f),this._renderLayers[I]=C;var m=[];f.getRelPrimitives(m);for(var v=m.length,y=0;y<v;y++){var E=this._renderPrimitives[m[y].getID()];E&&C._relPrimitives.push(E)}}}}});var jh=function(t,e){tt.call(this),this._entities=t,this._box=new at;var i=!0,r=!1,n=void 0;try{for(var o,a=this._entities[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;this._box.expandByBoundingBox(s.getBoundingBox())}}catch(t){r=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw n}}var h=J.MemoryPool.alloc();J.subtract(h,this._box.getMax(),this._box.getMin()),J.scale(h,h,.001),J.subtract(this._box.getMin(),this._box.getMin(),h),J.add(this._box.getMax(),this._box.getMax(),h),J.MemoryPool.free(h),this._glfunction=null,this._part=e};(jh.prototype=Object.create(tt.prototype)).constructor=jh,Object.assign(jh.prototype,{applyGlFunction:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this._entities[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.setGrowth(this._glfunction)}}catch(t){e=!0,i=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}},clear:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this._entities[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.cancelGrowth()}}catch(t){e=!0,i=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}this._glfunction=null,this._part=0,this._entities=null,this._box.reset()},getPlane:function(t,e){if(this._part===Re.d.FrontPart){var i=this._box.getYMin(),r=this._box.getYMax(),n=r-(r-i)*t;w.set(e,0,1,0,-n)}else if(this._part===Re.d.BackPart){var o=this._box.getYMin(),a=o+(this._box.getYMax()-o)*t;w.set(e,0,-1,0,a)}else if(this._part===Re.d.LeftPart){var s=this._box.getXMin(),h=this._box.getXMax(),u=h-(h-s)*t;w.set(e,1,0,0,-u)}else if(this._part===Re.d.RightPart){var c=this._box.getXMin(),l=c+(this._box.getXMax()-c)*t;w.set(e,-1,0,0,l)}else if(this._part===Re.d.BottomPart){var g=this._box.getZMin(),_=this._box.getZMax(),d=_-(_-g)*t;w.set(e,0,0,1,-d)}else if(this._part===Re.d.TopPart){var A=this._box.getZMin(),p=A+(this._box.getZMax()-A)*t;w.set(e,0,0,-1,p)}},setRatio:function(t){}});var Yh=function(t,e){jh.call(this,t,e),this._glfunction=new Xn};(Yh.prototype=Object.create(jh.prototype)).constructor=Yh,Object.assign(Yh.prototype,{setRatio:function(t){var e=w.MemoryPool.alloc();this.getPlane(t,e),this._glfunction.setClipPlane(e),w.MemoryPool.free(e),this.applyGlFunction()}});var zh=function(t,e,i){jh.call(this,t,e),this._glfunction=new Jn,this._glfunction.setRegionColor(i)};(zh.prototype=Object.create(jh.prototype)).constructor=zh,Object.assign(zh.prototype,{setRatio:function(t){var e=w.MemoryPool.alloc();this.getPlane(t,e),this._glfunction.setClipPlane(e),w.MemoryPool.free(e),this.applyGlFunction()}});var Wh=function(t){jh.call(this,t),this._glfunction=new qn};(Wh.prototype=Object.create(jh.prototype)).constructor=Wh,Object.assign(Wh.prototype,{setRatio:function(t){this._glfunction.setAlpha(t),this.applyGlFunction()}});var Xh=function(t){this._glcontext=t,this._sceneItems=new Map,this._boundingBox=new at,this._boundingSphere=new ht,this._componentDrawables=[],this._axisgridDrawables=[],this._primitiveDrawables=[],this._highlightEntities=new Mh,this._highlightBoundingBox=new at,this._highlightBoundingSphere=new ht,this._highlightChanged=!1,this._highlightMaterial=new un(w.create(1,0,0,1)),this._transparentMaterial=new un(w.create(.8,.8,.8,.1)),this._displayTrees=[],this._layerLists=null,this._batchEntities=new Map,this._growthList=new Map},Jh=0;Xh.getInstanceLayerListID=function(){return Jh++},Xh.resetInstanceLayerListID=function(){Jh=0};var qh=function(t,e){return e.getRadius()-t.getRadius()};Object.assign(Xh.prototype,{realModeChange:function(t){this._sceneItems.forEach((function(e){e.isRealModeOpened(t)}))},getBoundingBox:function(){return this._boundingBox},getBoundingSphere:function(){return this._boundingSphere},create:function(t){var e=null;return t.type()===re.MODEL?e=new Uh(t,this._glcontext):t.type()===re.DRAWING&&(e=new Hh(t,this._glcontext)),e.create(),this._sceneItems.set(t,e),this.updateItem(e),this.updateComponentTrees(e),this.updateBatchEntities(e),this.updateLayerLists(e),e},update:function(){var t=this;this._sceneItems.forEach((function(e){t.updateComponentTrees(e),t.updateBatchEntities(e),t.updateLayerLists(e)}))},delete:function(t){var e=this._sceneItems.get(t);e&&e.release(),this._sceneItems.delete(t)},get:function(t){var e=!0,i=!1,r=void 0;try{for(var n,a=this._sceneItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2),h=s[0],u=s[1];if(h.getModelKey()===t)return u}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}},clear:function(){this._sceneItems.forEach((function(t){t.release()})),this._sceneItems.clear(),this.reset()},revert:function(){this.revertEntities(),this.unhighlightEntities()},rebuild:function(){var t=this;this.reset(),this._sceneItems.forEach((function(e){t.updateItem(e),t.updateComponentTrees(e),t.updateBatchEntities(e),t.updateLayerLists(e)}))},reset:function(){this.resetEntities(),this.unhighlightEntities(),this.resetComponentTrees(),this.resetBatchEntities(),this.resetLayerLists(),this._boundingBox.reset(),this._boundingSphere.reset(),this._componentDrawables.length=0,this._axisgridDrawables.length=0,this._primitiveDrawables.length=0},updateItem:function(t){this._boundingBox.expandByBoundingBox(t.getBoundingBox()),this._boundingSphere.expandByBoundingBox(t.getBoundingBox()),t.type()===re.MODEL?(this.ocTreeTraverse(t._componentDrawables.root(),this._componentDrawables),this.arrayTraversse(t._axisgridDrawables,this._axisgridDrawables),this._componentDrawables.sort(qh)):t.type()===re.DRAWING&&this.ocTreeTraverse(t._primitiveDrawables.root(),this._primitiveDrawables)},revertEntities:function(){this._sceneItems.forEach((function(t){t.revert()}))},resetEntities:function(){this._sceneItems.forEach((function(t){t.reset()}))},arrayTraversse:function(t,e){for(var i=t.length,r=0;r<i;r++)e.push(t[r])},ocTreeTraverse:function(t,e){for(var i=t.getObjects(),r=i.length,n=0;n<r;n++)e.push(i[n]);var o=t.getChildren();r=o.length;for(var a=0;a<r;a++){var s=o[a];this.ocTreeTraverse(s,e)}},getRenderEntity:function(t){var e=!0,i=!1,r=void 0;try{for(var n,a=this._sceneItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2),h=s[0],u=s[1];if(u.type()===re.MODEL){var c=h.getComponentByUniqueId(t);if(c)return u._renderComponents[c._id];var l=h.getRelationByUniqueId(t);if(l)return u._renderRelations[l._id]}}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}return null},getRenderRelation:function(t){var e=!0,i=!1,r=void 0;try{for(var n,a=this._sceneItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=o()(n.value,2),h=s[0],u=s[1];if(u.type()===re.MODEL){var c=h.getRelationByUniqueId(t);if(c)return u._renderRelations[c._id]}}}catch(t){i=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}return null},getHighlightEntities:function(){return this._highlightEntities.array()},getHighlightBoundingBox:function(){if(this._highlightChanged){this._highlightBoundingBox.reset();for(var t=this._highlightEntities.length(),e=0;e<t;e++){var i=this._highlightEntities.index(e);this._highlightBoundingBox.expandByBoundingBox(i.getBoundingBox())}this._highlightChanged=!1}return this._highlightBoundingBox},getHighlightBoundingSphere:function(){return this._highlightBoundingSphere.reset(),this._highlightBoundingSphere.expandByBoundingBox(this.getHighlightBoundingBox()),this._highlightBoundingSphere},hasHighlightEntities:function(){return 0!==this._highlightEntities.length()},highlightEntityBySearch:function(t){var e=this.getRenderEntity(t);return!!e&&(this.highlightEntity(e,!0,this._highlightMaterial),!0)},highlightEntityBySelect:function(t,e,i){if(i){var r=t.getEntity().getOutmostRelation();if(r){var n=t._sceneItem._renderRelations[r._id];n&&(t=n)}}this.highlightEntity(t,e,this._highlightMaterial)},highlightEntity:function(t,e){t.highlight(this._highlightMaterial,e)&&(this._highlightEntities.push(t),this._highlightChanged=!0)},unhighlightSync:function(){this._highlightEntities.sync()},unhighlightEntities:function(){var t=this._highlightEntities.length();if(0===t)return!1;for(var e=0;e<t;e++)this._highlightEntities.index(e).unhighlight();return this._highlightEntities.clear(),this._highlightBoundingBox.reset(),this._highlightBoundingSphere.reset(),this._highlightChanged=!0,!0},unhighlightEntityBySelect:function(t,e,i){if(i){var r=t.getEntity().getOutmostRelation();if(r){var n=r.getUniqueId(),o=this.getRenderRelation(n);o&&(t=o)}}this.unhighlightEntity(t,e)},unhighlightEntity:function(t,e){t.unhighlight()&&(e?this._highlightEntities.multipleRemove(t):this._highlightEntities.singleRemove(t),this._highlightChanged=!0)},getTransparency:function(){return this._transparentMaterial.getAlpha()},setTransparency:function(t){this._transparentMaterial.setAlpha(t)},revertTransparency:function(){this._transparentMaterial.setAlpha(.1)},transparentComponents:function(){var t=this;this._sceneItems.forEach((function(e){if(e.type()===re.MODEL)for(var i=e._renderComponents,r=i.length,n=0;n<r;n++){i[n].transparent(t._transparentMaterial)}}))},untransparentComponents:function(){var t=0;return this._sceneItems.forEach((function(e){if(e.type()===re.MODEL)for(var i=e._renderComponents,r=i.length,n=0;n<r;n++){i[n].untransparent()&&t++}})),0!==t},showEachComponents:function(){this._sceneItems.forEach((function(t){if(t.type()===re.MODEL)for(var e=t._renderComponents,i=e.length,r=0;r<i;r++){e[r].show()}}))},hideEachComponents:function(){this._sceneItems.forEach((function(t){if(t.type()===re.MODEL)for(var e=t._renderComponents,i=e.length,r=0;r<i;r++){e[r].hide()}}))},hideSelectComponents:function(){var t=this.getHighlightEntities(),e=t.length;if(0===e)return!1;for(var i=0;i<e;i++)t[i].hide();return this.unhighlightEntities(),!0},hideUnselectComponents:function(){return 0!==this.getHighlightEntities().length&&(this._sceneItems.forEach((function(t){if(t.type()===re.MODEL)for(var e=t._renderComponents,i=e.length,r=0;r<i;r++){var n=e[r];n.isHightlighted()||n.hide()}else if(t.type()===re.DRAWING)for(var o=t._renderPrimitives,a=o.length,s=0;s<a;s++){var h=o[s];h.isHightlighted()||h.hide()}})),!0)},showAssignEntity:function(t){var e=this.getRenderEntity(t);return!!e&&(e.show(),!0)},hideAssignEntity:function(t){var e=this.getRenderEntity(t);return!!e&&(e.hide(),!0)},getLayerList:function(){var t=this;return null===this._layerLists&&(this._layerLists={},this._layerLists.outer=[],this._layerLists.inner=[],this._sceneItems.forEach((function(e,i){if(e.type()===re.DRAWING){var r={};r.modelId=i.modelId(),r.modelName=i.getName(),r.layers=[];for(var n=e._renderLayers,o=n.length,a=0;a<o;a++){var s=n[a].getEntity(),h={};h.id=Xh.getInstanceLayerListID(),h.name=s._parameters.name,h.red=Math.round(255*s._material._pureColor[0]),h.green=Math.round(255*s._material._pureColor[1]),h.blue=Math.round(255*s._material._pureColor[2]),t._layerLists.inner[h.id]=n[a],r.layers.push(h)}t._layerLists.outer.push(r)}}))),this._layerLists.outer},updateLayerLists:function(t){if(t.isParamLoaded()&&this._layerLists&&t.type()===re.DRAWING){var e={};e.modelId=t._dataItem.modelId(),e.modelName=t._dataItem.getName(),e.layers=[];for(var i=t._renderLayers,r=i.length,n=0;n<r;n++){var o=i[n].getEntity(),a={};a.id=Xh.getInstanceLayerListID(),a.name=o._parameters.name,a.red=Math.round(255*o._material._pureColor[0]),a.green=Math.round(255*o._material._pureColor[1]),a.blue=Math.round(255*o._material._pureColor[2]),this._layerLists.inner[a.id]=i[n],e.layers.push(a)}this._layerLists.outer.push(e)}},createComponentTree:function(t){var e=new Ca(t);return this._displayTrees.push(e),this._sceneItems.forEach((function(t){if(t.type()===re.MODEL)for(var i=t._renderComponents,r=i.length,n=0;n<r;n++)e.push(i[n])})),e},updateComponentTrees:function(t){if(t.isParamLoaded()&&t.type()===re.MODEL)for(var e=t._renderComponents,i=this._displayTrees.length,r=e.length,n=0;n<i;n++)for(var o=0;o<r;o++)this._displayTrees[n].push(e[o])},updateBatchEntities:function(t){t.isParamLoaded()&&this._batchEntities.forEach((function(e){for(var i=e.guids,r=e.color,n=i.length,o=0;o<n;o++){var a=t.getRenderEntity(i[o]);a&&(a.coloring(r),e.entities.push(a))}}))},resetLayerLists:function(){this._layerLists&&(this._layerLists.outer.length=0,this._layerLists.inner.length=0)},resetComponentTrees:function(){for(var t=this._displayTrees.length,e=0;e<t;e++)this._displayTrees[e].reset()},resetBatchEntities:function(){this._batchEntities.forEach((function(t){t.entities.length=0}))},setBatchEntities:function(t,e){var i=!0;if(this._batchEntities.has(t)){for(var r=this._batchEntities.get(t).entities,n=r.length,o=0;o<n;o++)r[o].discoloring();i=!1}var a={};return a.guids=e,a.entities=[],a.color=null,this._batchEntities.set(t,a),this._sceneItems.forEach((function(t){if(t.isParamLoaded())for(var i=e.length,r=0;r<i;r++){var n=t.getRenderEntity(e[r]);n&&a.entities.push(n)}})),i},removeBatchEntities:function(t){if(this.removeGrowth(t),this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)e[r].discoloring();return this._batchEntities.delete(t),!0}return!1},clearBatchEntities:function(){this.removeAllGrowth(),this._batchEntities.forEach((function(t){for(var e=t.entities,i=e.length,r=0;r<i;r++)e[r].discoloring()})),this._batchEntities.clear()},coloringBatchEntities:function(t,e,i,r,n){if(this._batchEntities.has(t)){var o=new un([e,i,r,n]),a=this._batchEntities.get(t);a.color=o;for(var s=a.entities,h=s.length,u=0;u<h;u++)s[u].coloring(o);return!0}return!1},discoloringBatchEntities:function(t){if(this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)e[r].discoloring();return!0}return!1},highlightBatchEntities:function(t){if(this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)this.highlightEntity(e[r],!1);return!0}return!1},unhighlightBatchEntities:function(t){if(this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)this.unhighlightEntity(e[r]);return this.unhighlightSync(),!0}return!1},transparentBatchEntities:function(t){if(this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)e[r].transparent(this._transparentMaterial);return!0}return!1},untransparentBatchEntities:function(t){if(this._batchEntities.has(t)){for(var e=this._batchEntities.get(t).entities,i=e.length,r=0;r<i;r++)e[r].untransparent();return!0}return!1},showBatchEntities:function(){if(this._batchEntities.has(batchId)){for(var t=this._batchEntities.get(batchId).entities,e=t.length,i=0;i<e;i++)t[i].displayShow();return!0}return!1},hideBatchEntities:function(){if(this._batchEntities.has(batchId)){for(var t=this._batchEntities.get(batchId).entities,e=t.length,i=0;i<e;i++)t[i].displayHide();return!0}return!1},setGrowthAsClipping:function(t,e){if(this.removeGrowth(t),this._batchEntities.has(t)){var i=this._batchEntities.get(t).entities;return this._growthList.set(t,new Yh(i,e)),!0}return!1},setGrowthAsTinting:function(t,e,i){if(this.removeGrowth(t),this._batchEntities.has(t)){var r=this._batchEntities.get(t).entities;return this._growthList.set(t,new zh(r,e,i)),!0}return!1},setGrowthAsTransparent:function(t){if(this.removeGrowth(t),this._batchEntities.has(t)){var e=this._batchEntities.get(t).entities;return this._growthList.set(t,new Wh(e)),!0}return!1},applyGrowthRatio:function(t,e){return!!this._growthList.has(t)&&(this._growthList.get(t).setRatio(e),!0)},removeGrowth:function(t){return!!this._growthList.has(t)&&(this._growthList.get(t).clear(),this._growthList.delete(t),!0)},removeAllGrowth:function(){this._growthList.forEach((function(t){t.clear()})),this._growthList.clear()},saveViewState:function(t){this._sceneItems.forEach((function(e,i){for(var r=t.createAssignedControlState(),n=[],o=[],a=e._renderComponents,s=a.length,h=0;h<s;h++){var u=a[h];u.isAssignHided()?n.push(u.getUniqueId()):o.push(u.getUniqueId())}n.length>=o.length?(r._componentHideFlag=!1,r._assignedComponents=o):(r._componentHideFlag=!0,r._assignedComponents=n);var c=[],l=[],g=e._renderAxisgrids;s=g.length;for(var _=0;_<s;_++){var d=g[_];d.isAssignHided()?c.push(d.getUniqueId()):l.push(d.getUniqueId())}c.length>=l.length?(r._axisgridHideFlag=!1,r._assignedAxisgrids=l):(r._axisgridHideFlag=!0,r._assignedAxisgrids=c),t._assignedControlStates.set(i.modelId(),r)})),this._displayTrees.forEach((function(e){var i=t.createDisplaytreeControlState();e.saveViewState(i),t._componentTreeStates.push(i)}))},loadViewState:function(t){this.unhighlightEntities(),this.untransparentComponents(),this._sceneItems.forEach((function(e,i){var r=t._assignedControlStates.get(i.modelId());if(r||(r=t._assignedControlStates.get(i.getName())),r){var n=e._renderComponents,o=n.length;if(r._componentHideFlag){for(var a=0;a<o;a++)n[a].show();for(var s=r._assignedComponents.length,h=0;h<s;h++){var u=r._assignedComponents[h],c=i.getComponentByUniqueId(u);c&&n[c.getID()].hide()}}else{for(var l=0;l<o;l++)n[l].hide();for(var g=r._assignedComponents.length,_=0;_<g;_++){var d=r._assignedComponents[_],A=i.getComponentByUniqueId(d);A&&n[A.getID()].show()}}var p=e._renderAxisgrids,I=p.length;if(r._axisgridHideFlag){for(var f=0;f<I;f++)p[f].show();for(var C=r._assignedAxisgrids.length,m=0;m<C;m++){var v=r._assignedAxisgrids[m],y=i.getAxisgridByUniqueId(v);y&&p[y.getID()].hide()}}else{for(var E=0;E<I;E++)p[E].hide();for(var w=r._assignedAxisgrids.length,M=0;M<w;M++){var T=r._assignedAxisgrids[M],P=i.getAxisgridByUniqueId(T);P&&p[P.getID()].show()}}}else{for(var S=e._renderComponents,R=S.length,O=0;O<R;O++)S[O].hide();for(var L=e._renderAxisgrids,N=L.length,b=0;b<N;b++)L[b].hide()}}));for(var e=t._componentTreeStates.length,i=0;i<e;i++)for(var r=t._componentTreeStates[i],n=this._displayTrees.length,o=0;o<n&&!this._displayTrees[o].loadViewState(r);o++);}});var Zh=Xh,Kh=function(t){this._glcontext=t,this._glPrograms=new Map,this._glPureColors=new Map,this._glNoneMaterial=null,this._glNoneLighting=null,this._glNoneFunction=null};Object.assign(Kh.prototype,{release:function(){this._glPrograms.forEach((function(t){t.release()}))},getGLProgram:function(t){var e=this._glPrograms.get(t);if(!e){var i=Ln[t],r=bn[t];void 0!==i&&void 0!==r||console.log("shader source is missing:",t),e=new Gn(this._glcontext,i,r),this._glPrograms.set(t,e)}return e},getGLNoneMaterial:function(){return this._glNoneMaterial||(this._glNoneMaterial=new hn),this._glNoneMaterial},getGLNoneLighting:function(){return this._glNoneLighting||(this._glNoneLighting=new Vn),this._glNoneLighting},getGLNoneFunction:function(){return this._glNoneFunction||(this._glNoneFunction=new zn),this._glNoneFunction},getGLPureColor:function(t){var e=this._glPureColors.get(t);if(!e){var i=Ji[t];void 0===i&&console.log("pure color is missing:",t),e=new un(i),this._glPureColors.set(t,e)}return e},clear:function(){this._glPrograms.forEach((function(t){t&&t.release()})),this._glPrograms.clear(),this._glPureColors.forEach((function(t){t&&t.release()})),this._glPureColors.clear(),this._glNoneMaterial&&(this._glNoneMaterial.release(),this._glNoneMaterial=null),this._glNoneLighting&&(this._glNoneLighting.release(),this._glNoneLighting=null),this._glNoneFunction&&(this._glNoneFunction.release(),this._glNoneFunction=null)}});var Qh=Kh,$h=function(t){this._glcontext=new fh(t),this._renderer=new vh(this._glcontext),this._scenery=new Zh(this._glcontext),this._factory=new Qh(this._glcontext),this._modunits=[],this._modunits[Di.SHADOW_MAP]=null,this._modunits[Di.ENTITY_SUBJECT]=null,this._modunits[Di.ENTITY_WIREFRAME]=null,this._modunits[Di.ENTITY_TRANSPARENT]=null,this._modunits[Di.AXISGRID]=null,this._modunits[Di.MEASURE]=null,this._modunits[Di.MULTIPICK_RECT]=null,this._modunits[Di.CUBE_NAVIGATE]=null,this._modunits[Di.CUBE_SECTION_SUBJECT]=null,this._modunits[Di.CUBE_SECTION_WIREFRAME]=null,this._modunits[Di.CHARACTER_MODEL]=null,this._modunits[Di.CURSOR_SWITCH]=null,this._modunits[Di.PUSHPIN_SUBJECT]=null,this._modunits[Di.DRAW_TESTING]=null,this._modunits[Di.PERSON_PANEL]=null,this._modunits[Di.MINIMAP_MODULE]=null,this._modunits[Di.PRIMITIVE_SUBJECT]=null,this._transfer=null,this._camera=new mo,this._glstateset=new lo,this._isFixedframeOpened=!0,this._isRealModeOpened=!1,this._frameTimer=new Eh,this._requestRedraw=!0};$h.FRAME_FIX_TIME=100,Object.assign($h.prototype,{sync:function(){this._renderer.applyDefault(this._glstateset),this._camera.updateProjectionNearFar(this._scenery.getBoundingBox()),this._camera.updatePixelSizeRatio(),this._camera.updateCullFrustum()},getRenderer:function(){return this._renderer},getScenery:function(){return this._scenery},getFactory:function(){return this._factory},isFixedFrameOpened:function(t){return void 0!==t&&(this._isFixedframeOpened=t),this._isFixedframeOpened},isRealModeOpened:function(t){return void 0!==t&&this._isRealModeOpened!==t&&(this._scenery.realModeChange(t),this._isRealModeOpened=t),this._isRealModeOpened},frameTimeCount:function(){this._frameTimer.count()},frameTimeOut:function(){return!!this._isFixedframeOpened&&this._frameTimer.cost()>$h.FRAME_FIX_TIME},getGLContext:function(){return this._glcontext},getTransfer:function(){return this._transfer},getCamera:function(){return this._camera},getGLStateset:function(){return this._glstateset},requestRedraw:function(){this._requestRedraw=!0},acceptRedraw:function(){this._requestRedraw=!1},needToFrame:function(){return this._requestRedraw},getModunit:function(t){return this._modunits[t]},setModunit:function(t,e){var i=this._modunits[t];i&&i.destroy(),this._modunits[t]=e},destroyModunit:function(t){var e=this._modunits[t];e&&(e.destroy(),this._modunits[t]=null)},paramUpdate:function(){this._scenery.update()},bindUpdate:function(t){var e=this;this._transfer=t,this._transfer._dataItems.forEach((function(t){e._scenery.create(t)})),this._isRealModeOpened&&this._scenery.realModeChange(!0),this.requestRedraw()},unbindUpdate:function(){this._scenery.clear(),this._transfer=null,this.requestRedraw()},openUpdate:function(){this._scenery.revert();for(var t=this._transfer.getPendingDataItems(),e=t.length,i=0;i<e;i++)this._scenery.create(t[i]);this._isRealModeOpened&&this._scenery.realModeChange(!0)},closeUpdate:function(){for(var t=this._transfer.getPendingDataItems(),e=t.length,i=0;i<e;i++)this._scenery.delete(t[i]);this._scenery.rebuild()}});var tu=$h,eu=function(t){dr.call(this,t),this._sceneRoot=null,this._glgeometries=[],this._sceneVisitor=new Rn(!0),this._increaseID=-1};(eu.prototype=Object.create(dr.prototype)).constructor=eu,Object.assign(eu.prototype,{getIncreaseID:function(){return++this._increaseID},traverse:function(){this._sceneVisitor.handle(this)},drawFinished:function(){return!0},draw:function(){if(this._isvalid){this._renderer.applyGLStateset(this._glstateset),this._renderer.applyGLProgram(this._glprogram),this._renderer.applyCameraMatrix(this.getCamera());for(var t=this._glgeometries.length,e=0;e<t;e++){var i=this._glgeometries[e];this._renderer.applyGLShadings(this._glshadings._glmaterial,this._glshadings._gllighting,this._glshadings._glfunction),i.drawSolid()}}},release:function(){for(var t=this._glgeometries.length,e=0;e<t;e++){var i=this._glgeometries[e];i&&i.release()}}});var iu=function(t){this._moduler=t};Object.assign(iu.prototype,{create:function(){var t=new uo(this._moduler);this._moduler.setModunit(Di.DRAW_TESTING,t);var e=new lo;e.setGLState(new Yi(_e.LESS,.2,.9)),t._glstateset=e;var i=new _o;i.setGLMaterial(new un(Do.ENTITY_COLOR)),i.setGLLighting(new Vn),i.setGLFunction(new zn),t._glshadings=i;var r=new yo;t._sceneRoot=r;var n=J.new(),o=[0,100,0],a=new eo;a.setID(t.getID()),this._moduler.getScenery().getBoundingBox().getCenter(n);for(var s=0;s<10;s++)for(var h=0;h<100;h++)for(var u=0;u<100;u++){var c=J.MemoryPool.alloc(),l=J.MemoryPool.alloc();J.addValue(c,n,200*s,200*h,200*u),J.add(l,c,o);var g=new wn(100,c,l);g.addChild(a),r.addChild(g),J.MemoryPool.free(c),J.MemoryPool.free(l)}t._dynamicStruct=!1,t._dynamicGeometry=!1,t.traverse(),this._moduler.requestRedraw()},destroy:function(){this._moduler.destroyModunit(Di.DRAW_TESTING),this._moduler.requestRedraw()}});var ru=iu,nu=function(t){this._moduler=t};Object.assign(nu.prototype,{setPureColor:function(t){this._moduler._glstateset.getGLState(Fi.Clear).setColor(t[0],t[1],t[2],t[3])},createGradientColor:function(t,e){var i=new uo(this._moduler);this._moduler.setModunit(Di.BACKGROUND,i);var r=new lo;r.setGLState(new Yi(_e.LEQUAL,1,1,!1)),i._glstateset=r;var n=new _o;n.setGLMaterial(new dn(t,e)),n.setGLLighting(new Vn),n.setGLFunction(new zn),i._glshadings=n;var o=new mo;o.cosize(this._moduler._camera);var a=it.MemoryPool.alloc();it.identity(a),o.setViewMatrix(a),it.MemoryPool.free(a),o.setProjectionOrthogonal(-1,1,-1,1,-1,1),i._camera=o;var s=new yo;s.setName("GradientColorBackground");var h=new Et,u=new fe;h._vertexBuffer=u,u._size=4;var c=new Ae;c._componentSize=2,c._componentType=_e.FLOAT,c._attributeType=le.POINT,c._bufferData=new Float32Array([-1,-1,1,-1,1,1,-1,1]),u._datas.push(c),h._indexes=new Uint8Array([0,1,2,2,3,0]);var l=new de;l._type=mt.INDEX_TRIANGLES,l._start=0,l._count=6,h._solidVertexAligns.push(l),h.setID(i.getID()),s.addChild(h),i._sceneRoot=s,i._dynamicStruct=!1,i._dynamicGeometry=!1,i.traverse(),this._moduler.requestRedraw()},setGradientColor:function(t,e){var i=this._moduler.getModunit(Di.BACKGROUND)._glshadings.getGLMaterial();i.setTopColor(t),i.setBottomColor(e)}});var ou=nu,au=function(t){Bi.call(this,t),this._renderlist=[],this._renderlist.push(Di.SHADOW_MAP),this._renderlist.push(Di.BACKGROUND),this._renderlist.push(Di.CUBE_SECTION_WIREFRAME),this._renderlist.push(Di.AXISGRID),this._renderlist.push(Di.MINIMAP_MODULE),this._renderlist.push(Di.PRIMITIVE_SUBJECT),this._renderlist.push(Di.ENTITY_SUBJECT),this._renderlist.push(Di.CHARACTER_MODEL),this._renderlist.push(Di.MEASURE_SUBJECT),this._renderlist.push(Di.MULTIPICK_RECT),this._renderlist.push(Di.CUBE_NAVIGATE),this._renderlist.push(Di.PERSON_PANEL),this._renderlist.push(Di.CURSOR_SWITCH),this._renderlist.push(Di.PUSHPIN_SUBJECT),this._renderlist.push(Di.ENTITY_TRANSPARENT),this._renderlist.push(Di.ENTITY_WIREFRAME),this._renderlist.push(Di.CUBE_SECTION_SUBJECT),this._renderlist.push(Di.DRAW_TESTING),this._frameTimer=new Eh,this._redrawflag=!0,this._finishflag=!0,this._drawTesting=new ru(this._moduler),this._backgroundSetting=new ou(this._moduler),this._isRealModeOpened=!1};(au.prototype=Object.create(Bi.prototype)).constructor=au,Object.assign(au.prototype,{openDrawTesting:function(){this._drawTesting.create()},closeDrawTesting:function(){this._drawTesting.destroy()},isWireframeShowed:function(t){var e=this._moduler.getModunit(Di.ENTITY_WIREFRAME);if(void 0!==t){if(e.isvalid()===!!t)return;e.isvalid(!!t),this._moduler.requestRedraw()}return e.isvalid()},isFixedframeOpened:function(t){if(void 0!==t){if(this._moduler.isFixedFrameOpened()===!!t)return;this._moduler.isFixedFrameOpened(!!t),this._moduler.requestRedraw()}return this._moduler.isFixedFrameOpened()},isAxisgridShowed:function(t){var e=this._moduler.getModunit(Di.AXISGRID);e.isvalid()!==!!t&&(e.isvalid(!!t),this._moduler.requestRedraw())},isRealModeOpened:function(t){if(void 0!==t){if(this._moduler.isRealModeOpened()===!!t)return;this._moduler.isRealModeOpened(!!t),this._moduler.requestRedraw()}return this._moduler.isRealModeOpened()},backgroundUpdate:function(t){t&&this._moduler.destroyModunit(Di.BACKGROUND);var e=this._adaptor.getConfig();e._backgroundType===Re.a.PURE_COLOR?this._backgroundSetting.setPureColor(e._backgroundPureColor):e._backgroundType===Re.a.GRADIENT_COLOR&&(t?this._backgroundSetting.createGradientColor(e._backgroundGradientTopColor,e._backgroundGradientBottomColor):this._backgroundSetting.setGradientColor(e._backgroundGradientTopColor,e._backgroundGradientBottomColor)),this._moduler.requestRedraw()},type:function(){return Ti.ENGINE},resize:function(){var t=this._adaptor._canvas,e=t.width,i=t.height;this._moduler._glstateset.getGLState(Fi.Viewport).resize(0,0,e,i);var r=this._moduler._camera,n=e/(r._width-r._x)/(i/(r._height-r._y));if(r.resize(0,0,e,i),Math.abs(n-1)>=_.EPSILON){var o=it.MemoryPool.alloc();it.fromScaling(o,[1/n,1,1]),it.mul(r.getProjectionMatrix(),r.getProjectionMatrix(),o),it.MemoryPool.free(o)}this._moduler.requestRedraw()},sync:function(){if(this._moduler.frameTimeCount(),this._moduler.needToFrame()){this._redrawflag=!0,this._frameTimer.count(),this._moduler.sync();for(var t=this._renderlist.length,e=0;e<t;e++){var i=this._moduler.getModunit(this._renderlist[e]);i&&i.drawRefresh()}for(var r=0;r<t;r++){var n=this._moduler.getModunit(this._renderlist[r]);n&&n.draw()}this._moduler.acceptRedraw()}else{this._finishflag=!0;for(var o=this._renderlist.length,a=0;a<o;a++){var s=this._moduler.getModunit(this._renderlist[a]);s&&(s.drawFinished()||(s.draw(),this._finishflag=!1))}this._finishflag&&this._redrawflag&&(this._redrawflag=!1)}}});var su=au,hu=function(t){dr.call(this,t)};(hu.prototype=Object.create(dr.prototype)).constructor=hu,Object.assign(hu.prototype,{draw:function(){if(!this._moduler.frameTimeOut()){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset);for(var e=this._drawIndex;e<t;e++){var i=this._drawables[e];if(this.isDrawn(i))if(this.updateGLShadings(i),this._moduler.getModunit(Di.ENTITY_WIREFRAME).addDrawable(i),i._currentGLMaterial.isTransparent()||i._currentGLFunction.isTransparent())this._moduler.getModunit(Di.ENTITY_TRANSPARENT).addDrawable(i);else{var r=this._moduler._factory.getGLProgram(i.getProgramType());this._renderer.applyGLProgram(r),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(i._transform),this._renderer.applyGLShadings(i._currentGLMaterial,i._currentGLLighting,i._currentGLFunction),i._glgeometry.drawSolid()}if(this._drawIndex++,this._moduler.frameTimeOut())break}}}},updateGLShadings:function(t){var e=null,i=null,r=null,n=t._renderEntity;if(n){var o=n._assignGLMaterial;e=o||n._operateGLMaterial,i=n._operateGLLighting,r=n._operateGLFunction}e||(e=t._glmaterial?t._glmaterial:this._glshadings.getGLMaterial()),i||(i=this._glshadings.getGLLighting()),r||(r=this._glshadings.getGLFunction()),t._currentGLMaterial=e,t._currentGLLighting=i,t._currentGLFunction=r},isDrawn:function(t){return!!t.isShown()&&(!this.getCamera().isBoundingBoxCulled(t.getBoundingBox())&&!(this.getCamera().computePixelSize(t.getBoundingSphere().getCenter(),t.getBoundingSphere().getRadius())<3))},linesegmentIntersect:function(t,e,i,r,n,o){var a=this,s=new cr;s.reset(),s.setIntersections(t),s.initialize(e,i),s.setUsageMask(r),s.setOutcomeMask(n),s.setCategoryFilter(o),this._moduler._scenery._sceneItems.forEach((function(t){a.ocTreeIntersectTraverse(t._componentDrawables.root(),s)})),s.sort()},polytopeIntersect:function(t,e,i,r,n){var o=this,a=new gr;a.reset(),a.setIntersections(t),a.initialize(e),a.setUsageMask(i),a.setOutcomeMask(r),a.setCategoryFilter(n),this._moduler._scenery._sceneItems.forEach((function(t){o.ocTreeIntersectTraverse(t._componentDrawables.root(),a)}))},boundingBoxIntersect:function(t,e,i,r,n){var o=this,a=new Ph;a.reset(),a.setIntersections(t),a.initialize(e),a.setUsageMask(i),a.setOutcomeMask(r),a.setCategoryFilter(n),this._moduler._scenery._sceneItems.forEach((function(t){o.ocTreeIntersectTraverse(t._componentDrawables.root(),a)}))},isIntersect:function(t,e){if(e._usageMask===Oi.SELECTION){if(!t.isShown())return!1;if(this.getCamera().isBoundingBoxCulled(t.getBoundingBox()))return!1}else if(e._usageMask===Oi.COLLISION&&!t.isShown())return!1;return!(e._categoryFilter&&t.getRenderEntity()&&e._categoryFilter.has(t.getRenderEntity().getEntity().getParameter("category")))&&!!e.intersectBoundingBox(t.getBoundingBox())},ocTreeIntersectTraverse:function(t,e){if(e.intersectBoundingBox(t.getBoundingBox())){for(var i=t.getObjects(),r=i.length,n=0;n<r;n++){var o=i[n];this.isIntersect(o,e)&&e.intersect(o)}var a=t.getChildren();r=a.length;for(var s=0;s<r;s++){var h=a[s];this.ocTreeIntersectTraverse(h,e)}}}});var uu=hu,cu=function(t){dr.call(this,t)};(cu.prototype=Object.create(dr.prototype)).constructor=cu,Object.assign(cu.prototype,{drawRefresh:function(){dr.prototype.drawRefresh.call(this),this._drawables.length=0},draw:function(){if(!this._moduler.frameTimeOut()){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset);for(var e=this._drawIndex;e<t;e++){var i=this._drawables[e],r=this._moduler._factory.getGLProgram(i.getProgramType());if(this._renderer.applyGLProgram(r),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(i._transform),this._renderer.applyGLShadings(i._currentGLMaterial,i._currentGLLighting,i._currentGLFunction),i._glgeometry.drawSolid(),this._drawIndex++,this._moduler.frameTimeOut())break}}}}});var lu=cu,gu=function(t){dr.call(this,t)};(gu.prototype=Object.create(dr.prototype)).constructor=gu,Object.assign(gu.prototype,{drawRefresh:function(){dr.prototype.drawRefresh.call(this),this._drawables.length=0},draw:function(){if(this._isvalid&&!this._moduler.frameTimeOut()){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset);for(var e=this._glshadings._glmaterial,i=this._glshadings._gllighting,r=this._drawIndex;r<t;r++){var n=this._drawables[r],o=e.type()+i.type()+n._currentGLFunction.type(),a=this._moduler._factory.getGLProgram(o);if(this._renderer.applyGLProgram(a),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(n._transform),this._renderer.applyGLShadings(e,i,n._currentGLFunction),n._glgeometry.drawEdge(),this._drawIndex++,this._moduler.frameTimeOut())break}}}}});var _u=gu,du=function(t){dr.call(this,t)};(du.prototype=Object.create(dr.prototype)).constructor=du,Object.assign(du.prototype,{draw:function(){var t=this._drawables.length;if(0!==t){this._renderer.applyGLStateset(this._glstateset);for(var e=this._drawIndex;e<t;e++){var i=this._drawables[e];if(this.isDrawn(i))if(this.updateGLShadings(i),this._moduler.getModunit(Di.ENTITY_WIREFRAME).addDrawable(i),i._currentGLMaterial.isTransparent()||i._currentGLFunction.isTransparent())this._moduler.getModunit(Di.ENTITY_TRANSPARENT).addDrawable(i);else{var r=this._moduler._factory.getGLProgram(i.getProgramType());this._renderer.applyGLProgram(r),this._renderer.applyCameraMatrix(this.getCamera()),this._renderer.applyModelMatrix(i._transform),this._renderer.applyGLShadings(i._currentGLMaterial,i._currentGLLighting,i._currentGLFunction),i._glgeometry.drawSolid()}if(this._drawIndex++,this._moduler.frameTimeOut())break}}},updateGLShadings:function(t){var e=null,i=null,r=null,n=t._renderEntity;if(n){var o=n._assignGLMaterial;e=o||n._operateGLMaterial,i=n._operateGLLighting,r=n._operateGLFunction}e||(e=t._glmaterial?t._glmaterial:this._glshadings.getGLMaterial()),i||(i=this._glshadings.getGLLighting()),r||(r=this._glshadings.getGLFunction()),t._currentGLMaterial=e,t._currentGLLighting=i,t._currentGLFunction=r},isDrawn:function(t){return!!t.isShown()&&(!this.getCamera().isBoundingBoxCulled(t.getBoundingBox())&&!(this.getCamera().computePixelSize(t.getBoundingSphere().getCenter(),t.getBoundingSphere().getRadius())<3))},linesegmentIntersect:function(t,e,i,r,n,o){var a=this,s=new cr;s.reset(),s.setIntersections(t),s.initialize(e,i),s.setUsageMask(r),s.setOutcomeMask(n),s.setCategoryFilter(o),this._moduler._scenery._sceneItems.forEach((function(t){a.ocTreeIntersectTraverse(t._primitiveDrawables.root(),s)})),s.sort()},polytopeIntersect:function(t,e,i,r,n){var o=this,a=new gr;a.reset(),a.setIntersections(t),a.initialize(e),a.setUsageMask(i),a.setOutcomeMask(r),a.setCategoryFilter(n),this._moduler._scenery._sceneItems.forEach((function(t){o.ocTreeIntersectTraverse(t._primitiveDrawables.root(),a)}))},boundingBoxIntersect:function(t,e,i,r,n){var o=this,a=new Ph;a.reset(),a.setIntersections(t),a.initialize(e),a.setUsageMask(i),a.setOutcomeMask(r),a.setCategoryFilter(n),this._moduler._scenery._sceneItems.forEach((function(t){o.ocTreeIntersectTraverse(t._primitiveDrawables.root(),a)}))},ocTreeIntersectTraverse:function(t,e){if(e.intersectBoundingBoxXY(t.getBoundingBox())){for(var i=t.getObjects(),r=i.length,n=0;n<r;n++){var o=i[n];e.intersect(o)}var a=t.getChildren();r=a.length;for(var s=0;s<r;s++){var h=a[s];this.ocTreeIntersectTraverse(h,e)}}}});var Au=du,pu=0,Iu=1,fu=2,Cu=3,mu=function t(e){this._canvas=e,this._moduler=new tu(e),this._synclist=[Ti.ROAMING,Ti.MINIMAP,Ti.PERSON_PANEL,Ti.SECTION,Ti.PUSHPIN,Ti.NAVIGATE,Ti.ENGINE],this._operations=[],this._operations[Ti.ENGINE]=null,this._operations[Ti.NAVIGATE]=null,this._operations[Ti.MINIMAP]=null,this._operations[Ti.PERSON_PANEL]=null,this._operations[Ti.SECTION]=null,this._operations[Ti.PUSHPIN]=null,this._operations[Ti.MEASURE]=null,this._operations[Ti.ROAMING]=null,this._operations[Ti.CONTROL]=null,this._operations[Ti.SHADOW]=null,this.setOperation(new su(this)),this._config=new dh,this._callbacks=new Map,this._timer=new Eh,this._requestid=0,this._fullscreenFlag=!1,this._mouseType=pu,this._lastTouchPoints=[],this._curTouchPoints=[],this._touchMoveDis=0,this._aniCallback=void 0,this._aniState=t.AniNone,this._aniLength=0,this._aniCost=0,this._aniTimer=0,this._transfer=null,this.initModuler(),this.initEvent()};mu.AniNone=0,mu.AniRunning=1,mu.AniPaused=2,Object.assign(mu.prototype,{getModuler:function(){return this._moduler},initModuler:function(){var t=this._canvas,e=window.devicePixelRatio||1,i=Math.floor(t.clientWidth*e),r=Math.floor(t.clientHeight*e);t.width=i,t.height=r;var n=i/r,o=this._moduler._camera;o.setCullFrustumFlag(!0),o.resize(0,0,i,r),o.setViewLookAt(J.create(0,-1e3,0),J.new(),J.create(0,0,1)),o.setProjectionPerspective(_.degree_to_radian(30),n,1e3,1e6);var a=this._moduler._glstateset;a.setGLState(new Hi(0,0,i,r)),a.setGLState(new Yi(_e.LESS)),a.setGLState(new jn),a.setGLState(new ph),a.setGLState(new Wo(_e.COLOR_BUFFER_BIT|_e.DEPTH_BUFFER_BIT,Do.BACKGROUND_PURE_COLOR,1)),a.setGLState(new ms),a.setGLState(new Jo);var s=new Yi(_e.LESS,.2,.9),h=new jn(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA),u=new lo;u.setGLState(s);var c=new lo;c.setGLState(s),c.setGLState(h);var l=new uu(this._moduler);this._moduler._modunits[Di.ENTITY_SUBJECT]=l,l._drawables=this._moduler._scenery._componentDrawables,l._glstateset=u;var g=new _o;g.setGLMaterial(new un(Do.ENTITY_COLOR)),g.setGLLighting(new kn(Do.LIGHTING_DIRECTION,Do.LIGHTING_AMBIENT_RATIO,Do.LIGHTING_DIFFUSE_RATIO)),g.setGLFunction(this._moduler._factory.getGLNoneFunction()),l._glshadings=g;var d=new lu(this._moduler);this._moduler._modunits[Di.ENTITY_TRANSPARENT]=d,d._glstateset=c;var A=new _u(this._moduler);this._moduler._modunits[Di.ENTITY_WIREFRAME]=A,A._glstateset=c,(g=new _o).setGLMaterial(new un(Do.WIREFRAME_COLOR)),g.setGLLighting(new Vn),g.setGLFunction(this._moduler._factory.getGLNoneFunction()),A._glshadings=g;var p=new Au(this._moduler);this._moduler._modunits[Di.PRIMITIVE_SUBJECT]=p,p._drawables=this._moduler._scenery._primitiveDrawables,p._glstateset=u,(g=new _o).setGLMaterial(new un(Do.PRIMITIVE_COLOR)),g.setGLLighting(this._moduler._factory.getGLNoneLighting()),g.setGLFunction(this._moduler._factory.getGLNoneFunction()),p._glshadings=g},initEvent:function(){this._windowEvents=["resize"],this._mouseEvents=["mousedown","mousemove","mouseup","mouseout","wheel","contextmenu"],this._keyboardEvents=["keydown","keyup"],this._touchEvents=["touchstart","touchmove","touchend","touchenter","touchleave","touchcancel"],this._glcontextEvents=["webglcontextlost","webglcontextrestored"],this.addEventListeners()},getTimer:function(){return this._timer},getConfig:function(){return this._config},getOperation:function(t){return this._operations[t]},setOperation:function(t){var e=this._operations[t.type()];return e!==t&&(e&&e.destroy(),t.create(),this._operations[t.type()]=t),t},resetOperation:function(t){var e=this._operations[t];return e&&(e.destroy(),this._operations[t]=null),null},addViewCallback:function(t,e){return void 0===this._callbacks.get(t)&&(this._callbacks.set(t,e),!0)},removeViewCallback:function(t){return this._callbacks.delete(t)},clearViewCallback:function(){this._callbacks.clear()},getViewCallbacks:function(){return this._callbacks},frame:function(){this._requestid=requestAnimationFrame(this.frame.bind(this)),this.syncAni(),this._timer.count();for(var t=this._synclist.length,e=0;e<t;e++){var i=this._synclist[e],r=this._operations[i];r&&r.sync()}this._timer.sync()},paramUpdate:function(){this._moduler.paramUpdate(),this.update(!0),this._moduler.requestRedraw()},bindUpdate:function(t){this._transfer=t,this._moduler.bindUpdate(t),this.update(),this._moduler.requestRedraw()},unbindUpdate:function(){this._moduler.unbindUpdate(),this.update(),this._transfer=null,this._moduler.requestRedraw()},openUpdate:function(){this._moduler.openUpdate(),this.update(),this._moduler.requestRedraw()},closeUpdate:function(){this._moduler.closeUpdate(),this.update(),this._moduler.requestRedraw()},update:function(t){for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r.update(t)}},screenShot:function(){return this._canvas.toDataURL()},fullscreen:function(t){return document.fullscreenElement?this.exitFullScreen():this.enterFullScreen(t),document.fullscreenElement},enterFullScreen:function(t){t||(t=this._canvas),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},exitFullScreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},addEventListeners:function(){for(var t="",e=this._windowEvents.length,i=0;i<e;i++)this[t=this._windowEvents[i]]&&window.addEventListener(t,this[t].bind(this),!1);e=this._mouseEvents.length;for(var r=0;r<e;r++)this[t=this._mouseEvents[r]]&&this._canvas.addEventListener(t,this[t].bind(this),!1);e=this._keyboardEvents.length;for(var n=0;n<e;n++)this[t=this._keyboardEvents[n]]&&document.addEventListener(t,this[t].bind(this),!1);document.addEventListener("fullscreenchange",this[t].bind(this),!1),document.addEventListener("mozfullscreenchange",this[t].bind(this),!1),document.addEventListener("webkitfullscreenchange",this[t].bind(this),!1),e=this._touchEvents.length;for(var o=0;o<e;o++)this[t=this._touchEvents[o]]&&this._canvas.addEventListener(t,this[t].bind(this),!1);e=this._glcontextEvents.length;for(var a=0;a<e;a++)this[t=this._glcontextEvents[a]]&&this._canvas.addEventListener(t,this[t].bind(this),!1)},removeEventListeners:function(){for(var t="",e=this._windowEvents.length,i=0;i<e;i++)this[t=this._windowEvents[i]]&&window.removeEventListener(t,this[t].bind(this),!1);e=this._mouseEvents.length;for(var r=0;r<e;r++)this[t=this._mouseEvents[r]]&&this._canvas.removeEventListener(t,this[t].bind(this),!1);e=this._keyboardEvents.length;for(var n=0;n<e;n++)this[t=this._keyboardEvents[n]]&&document.removeEventListener(t,this[t].bind(this),!1);document.removeEventListener("fullscreenchange",this[t].bind(this),!1),document.removeEventListener("mozfullscreenchange",this[t].bind(this),!1),document.removeEventListener("webkitfullscreenchange",this[t].bind(this),!1),e=this._touchEvents.length;for(var o=0;o<e;o++)this[t=this._touchEvents[o]]&&this._canvas.removeEventListener(t,this[t].bind(this),!1);e=this._glcontextEvents.length;for(var a=0;a<e;a++)this[t=this._glcontextEvents[a]]&&this._canvas.removeEventListener(t,this[t].bind(this),!1)},resize:function(t){var e=window.devicePixelRatio||1;this._canvas.width=Math.floor(this._canvas.clientWidth*e),this._canvas.height=Math.floor(this._canvas.clientHeight*e);for(var i=this._operations.length,r=0;r<i;r++){var n=this._operations[r];n&&n.resize(t)}},mousedown:function(t){var e=this._operations.length;if(0===t.button){this._mouseType=Iu;for(var i=0;i<e;i++){var r=this._operations[i];if(r&&r[Bi.MOUSE_LEFTPUSH](t))break}}else if(1===t.button){this._mouseType=fu;for(var n=0;n<e;n++){var o=this._operations[n];if(o&&o[Bi.MOUSE_MIDDLEPUSH](t))break}}else if(2===t.button){this._mouseType=Cu;for(var a=0;a<e;a++){var s=this._operations[a];if(s&&s[Bi.MOUSE_RIGHTPUSH](t))break}}},mousemove:function(t){var e=this._lastMouse?this._lastMouse:[0,0];if(!(Math.abs(e[0]-t.x)<2&&Math.abs(e[1]-t.y)<2)){this._lastMouse=[t.x,t.y];var i=this._operations.length;if(this._mouseType===Iu)for(var r=0;r<i;r++){var n=this._operations[r];if(n&&n[Bi.MOUSE_LEFTDRAG](t))break}else if(this._mouseType===fu)for(var o=0;o<i;o++){var a=this._operations[o];if(a&&a[Bi.MOUSE_MIDDLEDRAG](t))break}else if(this._mouseType===Cu)for(var s=0;s<i;s++){var h=this._operations[s];if(h&&h[Bi.MOUSE_RIGHTDRAG](t))break}else if(this._mouseType===pu)for(var u=0;u<i;u++){var c=this._operations[u];if(c&&c[Bi.MOUSE_MOVE](t))break}}},mouseup:function(t){var e=this._operations.length;if(0===t.button)for(var i=0;i<e;i++){var r=this._operations[i];if(r&&r[Bi.MOUSE_LEFTRELEASE](t))break}else if(1===t.button)for(var n=0;n<e;n++){var o=this._operations[n];if(o&&o[Bi.MOUSE_MIDDLERELEASE](t))break}else if(2===t.button)for(var a=0;a<e;a++){var s=this._operations[a];if(s&&s[Bi.MOUSE_RIGHTRELEASE](t))break}this._mouseType=pu},mouseout:function(t){this._mouseType=pu;for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r[Bi.MOUSE_OUTSIDE](t)}},wheel:function(t){for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];if(r&&r[Bi.MOUSE_WHEELSCROLL](t))break}},keydown:function(t){for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r[Bi.KEYBORAD_PUSH](t)}},keyup:function(t){for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r[Bi.KEYBORAD_RELEASE](t)}},contextmenu:function(t){t.preventDefault()},updateTouchPoints:function(t){this._lastTouchPoints.length=this._curTouchPoints.length;for(var e=0;e<this._curTouchPoints.length;++e)this._lastTouchPoints[e]=this._curTouchPoints[e];if(this._curTouchPoints.length=0,t){var i=window.devicePixelRatio||1,r=function(e){return e-t.target.getBoundingClientRect().left},n=function(e){return t.target.clientHeight-(e-t.target.getBoundingClientRect().top)},o=!0,a=!1,s=void 0;try{for(var h,u=t.touches[Symbol.iterator]();!(o=(h=u.next()).done);o=!0){var c=h.value,l=this._moduler.getCamera().getNormalizedX(r(c.pageX)*i),g=this._moduler.getCamera().getNormalizedY(n(c.pageY)*i);this._curTouchPoints.push({id:c.identifier,pos:Si.create(l,g)})}}catch(t){a=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this._maxTouchCount=Math.max(this._maxTouchCount,this._curTouchPoints.length)}},touchstart:function(t){this.updateTouchPoints(t);var e=0,i=[];if(1===this._curTouchPoints.length)e=Bi.TOUCH_MOVE_BEGIN,i.push(this._curTouchPoints[0].pos);else if(2===this._curTouchPoints.length){var r=Si.new();Si.add(r,this._curTouchPoints[0].pos,this._curTouchPoints[1].pos),Si.scale(r,r,.5),e=Bi.TOUCH_PAN_BEGIN,i.push(r),this._touchZoomed=!1,this._panTime=Date.now()}this.runTouchOperations(e,i)&&t.preventDefault()},touchmove:function(t){this.updateTouchPoints(t);var e=0,i=[];if(1===this._curTouchPoints.length&&1===this._lastTouchPoints.length&&this._curTouchPoints[0].id===this._lastTouchPoints[0].id){var r=this._lastTouchPoints[0].pos,n=this._curTouchPoints[0].pos;this._touchMoveDis+=Si.distance(r,n),e=Bi.TOUCH_MOVE,i.push(r,n)}else if(2===this._curTouchPoints.length&&2===this._lastTouchPoints.length&&this._curTouchPoints[0].id===this._lastTouchPoints[0].id&&this._curTouchPoints[1].id===this._lastTouchPoints[1].id){var o=this._lastTouchPoints[0].pos,a=this._lastTouchPoints[1].pos,s=this._curTouchPoints[0].pos,h=this._curTouchPoints[1].pos,u=Si.distance(o,a),c=Si.distance(s,h),l=Si.new();Si.add(l,s,h),Si.scale(l,l,.5);var g=Si.new();if(Si.add(g,o,a),Si.scale(g,g,.5),this._touchMoveDis+=Si.distance(g,l),this._touchZoomed)e=Bi.TOUCH_ZOOM,i.push(l,c-u);else{console.log(Date.now()-this._panTime);var _=Math.abs(c-u)/(Date.now()-this._panTime);console.log(_),_>Do.TOUCH_PAN_JITTER?(e=Bi.TOUCH_ZOOM,i.push(l,.1*(c-u)),this._touchZoomed=!0):(e=Bi.TOUCH_PAN,i.push(g,l),this._panTime=Date.now())}}else this._touchMoveDis+=1;this.runTouchOperations(e,i)&&t.preventDefault()},touchend:function(t){this.updateTouchPoints(t);var e=!1;if(0===this._curTouchPoints.length)this._touchMoveDis<=Do.TOUCH_HOLD_JITTER&&(e|=this.runTouchOperations(Bi.TOUCH_CLICK,[this._lastTouchPoints[0].pos])),e=this.runTouchOperations(Bi.TOUCH_MOVE_END,[this._lastTouchPoints[0].pos]),this._touchMoveDis=0;else if(1===this._curTouchPoints.length){var i=Si.new();Si.add(i,this._lastTouchPoints[0].pos,this._lastTouchPoints[1].pos),Si.scale(i,i,.5),e=this.runTouchOperations(Bi.TOUCH_PAN_END,[i]),this._touchZoomed=!1}e&&t.preventDefault()},touchcancel:function(t){this.updateTouchPoints(null),this._curTouchOp=0},runTouchOperations:function(t,e){if(0!==t)for(var i=this._operations.length,r=0;r<i;r++){var n=this._operations[r];if(n&&n[t].apply(n,Ho()(e)))return!0}return!1},webglcontextlost:function(t){console.log("webgl context lost!"),cancelAnimationFrame(this._requestid),this._callbacks.forEach((function(e){e(Re.b.WEBGLCONTEXT_LOST,t.type)}));for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r[Bi.WEBGLCONTEXT_LOST](t)}},webglcontextrestored:function(t){console.log("webgl context restored!");for(var e=this._operations.length,i=0;i<e;i++){var r=this._operations[i];r&&r[Bi.WEBGLCONTEXT_RESTORED](t)}},fullscreenchange:function(){},mozfullscreenchange:function(){},webkitfullscreenchange:function(){},startAnimation:function(t,e){this._aniState!==mu.AniRunning&&(this._aniCallback=e,this._aniLength=t,this._aniTimer=Date.now(),this._aniCost=0,this._aniState=mu.AniRunning)},pauseAnimation:function(){this._aniState===mu.AniRunning&&(this._aniState=mu.AniPaused)},goonAnimation:function(){this._aniState===mu.AniPaused&&(this._aniState=mu.AniRunning,this._aniTimer=Date.now())},gotoAnimation:function(t){this._aniCost=t,this._aniCost<=this._aniLength&&this._aniCallback&&this._aniCallback(t)},stopAinimation:function(){this._aniState!==mu.AniNone&&(this._aniState=mu.AniNone,this._aniCallback=void 0,this._aniLength=0,this._aniCost=0)},syncAni:function(){if(this._aniState===mu.AniRunning){var t=Date.now();this._aniCost+=t-this._aniTimer,this._aniTimer=t,this._aniCallback&&this._aniCallback(Math.min(this._aniCost,this._aniLength)),this._aniCost>=this._aniLength&&this.stopAinimation()}}});var vu=mu,yu=function(t){this._adaptor=new vu(t),this._control=new Ea(this._adaptor),this._setting=new Gs(this._adaptor),this._assist=new ia(this._adaptor),this._roaming=new ps(this._adaptor),this._section=new ws(this._adaptor),this._growth=new Ka(this._adaptor),this._measure=new qa(this._adaptor),this._pushpin=new qs(this._adaptor),this._datacore=void 0,this._adaptor.frame()};yu.checkWebGLsupport=function(t){var e={alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1};return!!(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))||(console.log("Failed to get WebGL context.Your browser or device may not support WebGL."),!1)},yu.checkWebGL2support=function(t){return!!(t.getContext("webgl2",{alpha:!1,preserveDrawingBuffer:!0})||t.getContext("experimental-webgl",{alpha:!1}))||(console.log("Failed to get WebGL2 context.Your browser or device may not support WebGL2."),!1)},yu.prototype={getViewControl:function(){return this._control},getViewSetting:function(){return this._setting},getViewAssist:function(){return this._assist},getViewRoaming:function(){return this._roaming},getViewSection:function(){return this._section},getViewMeasure:function(){return this._measure},getViewGrowth:function(){return this._growth},getViewPushpin:function(){return this._pushpin},bindDataCore:function(t){return t!==this._datacore&&(this._datacore&&(this._datacore.detachViewCore(this),this._adaptor.unbindUpdate()),this._datacore=t,this._datacore&&(this._datacore.attachViewCore(this),this._adaptor.bindUpdate(this._datacore.getTransfer())),!0)},paramUpdate:function(){this._datacore&&this._adaptor.paramUpdate()},openUpdate:function(){this._datacore&&this._adaptor.openUpdate()},closeUpdate:function(){this._datacore&&this._adaptor.closeUpdate()},saveViewState:function(t){var e=new nh,i=this._adaptor.getModuler().getCamera(),r=e.getCameraState();if(J.copy(r._eye,i._eye),J.copy(r._center,i._center),J.copy(r._up,i._up),Y.isNumberType(t)){if(t&Re.h.CONTROL){var n=e.getControlState(!0);this._control.saveViewState(n)}if(t&Re.h.ROAMING){var o=e.getRoamingState(!0);this._roaming.saveViewState(o)}if(t&Re.h.SECTION){var a=e.getSectionState(!0);this._section.saveViewState(a)}if(t&Re.h.MEASURE){var s=e.getMeasureState(!0);this._measure.saveViewState(s)}}var h=new hh(e);return h.writeViewStream(),h.concatBuffers()},loadViewState:function(t){if(t instanceof ArrayBuffer){var e=(new ch).readViewStream(t);if(e){var i=e.getCameraState(),r=this._adaptor.getModuler().getCamera();J.copy(r._eye,i._eye),J.copy(r._center,i._center),J.copy(r._up,i._up),r.updateViewMatrix();var n=e.getControlState();n&&this._control.loadViewState(n);var o=e.getRoamingState();o&&this._roaming.loadViewState(o);var a=e.getSectionState();a&&this._section.loadViewState(a);var s=e.getMeasureState();return s&&this._measure.loadViewState(s),this._adaptor.getModuler().requestRedraw(),!0}return!1}return!1},screenShot:function(){return this._adaptor.screenShot()},fullScreen:function(t){return this._adaptor.fullscreen(t)},resizeTrigger:function(){this._adaptor.resize()},addViewCallback:function(t,e){return this._adaptor.addViewCallback(t,e)},removeViewCallback:function(t){return this._adaptor.removeViewCallback(t)},clearViewCallback:function(){this._adaptor.clearViewCallback()},startAnimation:function(t,e){this._adaptor.startAnimation(t,e)},pauseAnimation:function(){this._adaptor.pauseAnimation()},goonAnimation:function(){this._adaptor.goonAnimation()},gotoAnimation:function(t){this._adaptor.gotoAnimation(t)},stopAinimation:function(){this._adaptor.stopAinimation()}};var Eu=yu,wu=function(t){this._viewID=t};wu.prototype={highlightAssignedEntities:function(t){var e=fi.ViewManager[this._viewID];return e?e.getViewControl().highlightEntities(t):0},unhighlightAllEntities:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().unhighlightEntities()},transparentAllComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().transparentComponents()},untransparentAllComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().untransparentComponents()},showAllComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().showComponents()},showEachComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().showEachComponents()},hideEachComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().hideEachComponents()},hideSelectComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().hideSelectComponents()},hideUnselectComponents:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().hideUnselectComponents()},showAssignedEntities:function(t){var e=fi.ViewManager[this._viewID];return e?e.getViewControl().showAssignEntities(t):0},hideAssignedEntities:function(t){var e=fi.ViewManager[this._viewID];return e?e.getViewControl().hideAssignEntities(t):0},createLayerList:function(){var t=fi.ViewManager[this._viewID];return t?t.getViewControl().createLayerList():null},createComponentTree:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().createComponentTree(t,e)},displayTreeNode:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().displayTreeNode(t,e)},showTreeRoot:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().showTreeRoot(t)},hideTreeRoot:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().hideTreeRoot(t)},hightlightTreeNode:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().hightlightTreeNode(t,e)},createBatchEntities:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().setBatchEntities(t,e)},removeBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().removeBatchEntities(t)},clearAllBatchEntities:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().clearBatchEntities()},coloringBatchEntities:function(t,e,i,r,n){var o=fi.ViewManager[this._viewID];return!!o&&o.getViewControl().coloringBatchEntities(t,e,i,r,n)},discoloringBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().discoloringBatchEntities(t)},highlightBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().highlightBatchEntities(t)},unhighlightBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().unhighlightBatchEntities(t)},transparentBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().transparentBatchEntities(t)},untransparentBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().untransparentBatchEntities(t)},showBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().showBatchEntities(t)},hideBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().hideBatchEntities(t)},setClippingGrowBatchEntities:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().setGrowthAsClipping(t,e)},setTintingGrowBatchEntities:function(t,e,i){var r=fi.ViewManager[this._viewID];return!!r&&r.getViewControl().setGrowthAsTinting(t,e,i)},setTransparentGrowBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().setGrowthAsTransparent(t)},applyGrowBatchEntities:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.getViewControl().applyGrowthRatio(t,e)},removeGrowBatchEntities:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewControl().removeGrowth(t)},clearAllGrowBatchEntities:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewControl().removeAllGrowth()}};var Mu=wu,Tu=function(t){this._viewID=t};Tu.prototype={setLeftMouseOperation:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().setLeftMouseOperation(t)},revertHomePosition:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().revertHomePosition()},zoomInPosition:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().zoomInPosition()},zoomOutPosition:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().zoomOutPosition()},locateSelectEntities:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().locateSelectEntities()},setHomeEyePosition:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewSetting().setHomeEyePosition(t)},setHomeEyeDistance:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewSetting().setHomeEyeDistance(t)},openPlaneRoaming:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().openPlaneRoaming()},closePlaneRoaming:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().closePlaneRoaming()},openPersonRoaming:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().openPersonRoaming()},closePersonRoaming:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewRoaming().closePersonRoaming()},setCharacterResource:function(t,e){var i=fi.ViewManager[this._viewID];i&&i.getViewRoaming().setPersonResource(t,e)},setCharacterMoveSpeed:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().setPersonSpeed(t)},isControlPanelOpened:function(t){var e=fi.ViewManager[this._viewID];e&&(t?e.getViewRoaming().openPersonPanel():e.getViewRoaming().closePersonPanel())},setControlPanelProperty:function(t,e,i,r){var n=fi.ViewManager[this._viewID];n&&n.getViewRoaming().setPersonPanelProperty(t,e,i,r)},setControlPanelResource:function(t,e,i,r){var n=fi.ViewManager[this._viewID];n&&n.getViewRoaming().setPersonPanelImages(t,e,i,r)},isThirdPersonOpened:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().isThirdPersonOpened(t)},isGravityFallOpened:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().isGravityFallOpened(t)},isCollisionDetectOpened:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().isCollisionDetectOpened(t)},isOrthogonalModeOpened:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewRoaming().isOrthogonalModeOpened(t)},getRoamingState:function(){var t=fi.ViewManager[this._viewID];if(t){var e={};return t.getViewRoaming().getViewState(e),e}return{}},getSelectEntities:function(){var t=fi.ViewManager[this._viewID];return t?t.getViewRoaming().getHighlightEntities():[]},getSelectParameters:function(){var t=fi.ViewManager[this._viewID];return t?t.getViewRoaming().getSelectParameters():[]}};var Pu=Tu,Su=function(t){this._viewID=t};Su.prototype={setBackgroundType:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewSetting().setBackgroundType(t)},setBackgroundPureColor:function(t,e,i,r){var n=fi.ViewManager[this._viewID];n&&n.getViewSetting().setBackgroundPureColor(t,e,i,r)},revertBackgroundPureColor:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSetting().revertBackgroundPureColor()},setBackgroundGradientTopColor:function(t,e,i,r){var n=fi.ViewManager[this._viewID];n&&n.getViewSetting().setBackgroundGradientTopColor(t,e,i,r)},setBackgroundGradientBottomColor:function(t,e,i,r){var n=fi.ViewManager[this._viewID];n&&n.getViewSetting().setBackgroundGradientBottomColor(t,e,i,r)},setTransparency:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewSetting().setTransparency(t)},revertTransparency:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSetting().revertTransparency()},isWireframeOpened:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewSetting().isWireframeShowed(t)},isRealModeOpened:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewSetting().isRealModeOpened(t)},isLightShadowOpened:function(t){var e=fi.ViewManager[this._viewID];return!!e&&(void 0===t?e.getViewSetting().isShowOpened():(t?e.getViewSetting().openShadow():e.getViewSetting().closeShadow(),t))},getSettingState:function(){var t=fi.ViewManager[this._viewID];if(t){var e={};return t.getViewSetting().getViewState(e),e}return{}},openDrawTesting:function(){var t=fi.ViewManager[this._viewID];if(t)return t.getViewSetting().openDrawTesting()},closeDrawTesting:function(){var t=fi.ViewManager[this._viewID];if(t)return t.getViewSetting().closeDrawTesting()},isFixedframeOpened:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.getViewSetting().isFixedframeOpened(t)}};var Ru=Su,Ou=function(t){this._viewID=t};Ou.prototype={openNavigateAssist:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewAssist().openNavigateAssist()},closeNavigateAssist:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewAssist().closeNavigateAssist()},setNavigateProperty:function(t,e,i){var r=fi.ViewManager[this._viewID];r&&r.getViewAssist().setNavigateProperty(t,e,i)},setNavigateResource:function(t,e,i,r,n,o,a){var s=fi.ViewManager[this._viewID];s&&s.getViewAssist().setNavigateResource(t,e,i,r,n,o,a)},openMinimapAssist:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewAssist().openMinimapAssist()},closeMinimapAssist:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewAssist().closeMinimapAssist()},setMinimapProperty:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewAssist().setMinimapProperty(t)},setMinimapFloor:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewAssist().setMinimapFloor(t)},locateMinimapFloor:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewAssist().locateMinimapFloor(t)},getAssistState:function(){var t=fi.ViewManager[this._viewID];return t?t.getViewAssist().getAssistState():{}}};var Lu=Ou,Nu=function(t){this._viewID=t};Nu.prototype={openCubeSection:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSection().openCubeSection()},closeCubeSection:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSection().closeCubeSection()},resetCubeSection:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSection().resetCubeSection()},showCubeSection:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSection().showCubeSection()},hideCubeSection:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewSection().hideCubeSection()},getSectionState:function(){var t=fi.ViewManager[this._viewID];if(t){var e={};return t.getViewSection().getViewState(e),e}return{}}};var bu=Nu,Du=function(t){this._viewID=t};Du.prototype={openMeasure:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewMeasure().openMeasure()},closeMeasure:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewMeasure().closeMeasure()},finishMeasure:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewMeasure().finishMeasure()},setMeasureType:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewMeasure().setMeasureType(t)},getMeasureState:function(){var t=fi.ViewManager[this._viewID];if(t){var e={};return t.getViewMeasure().getViewState(e),e}return{}}};var xu=Du,Bu=function(t){this._viewID=t};Bu.prototype={openPushpin:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewPushpin().openPushpin()},closePushpin:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewPushpin().closePushpin()},createPushpin:function(t,e,i){var r=fi.ViewManager[this._viewID];r&&r.getViewPushpin().addPushpin(t,e,i)},showPushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().showPushpin(t)},hidePushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().hidePushpin(t)},showAllPushpin:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewPushpin().showAllPushpin()},hideAllPushpin:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewPushpin().hideAllPushpin()},expandPushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().expandPushpin(t)},setExpandRatio:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().setExpandRatio(t)},revertPushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().recoverPushpin(t)},locatePushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().locatePushpin(t)},deletePushpin:function(t){var e=fi.ViewManager[this._viewID];e&&e.getViewPushpin().deletePushpin(t)},deleteAllPushpin:function(){var t=fi.ViewManager[this._viewID];t&&t.getViewPushpin().deleteAllPushpin()},setPushpinCallback:function(t){var e=fi.ViewManager[this._viewID];if(e)return e.getViewPushpin().setPushpinCallback(t)},getPushpinState:function(){var t=fi.ViewManager[this._viewID];if(t){var e={};return t.getViewPushpin().getViewState(e),e}return{}}};var Gu=Bu,Fu=function(t){Eu.checkWebGLsupport(t)?(fi.ViewID++,fi.ViewManager[fi.ViewID]=new Eu(t),this._viewID=fi.ViewID):this._viewID=-1,this._control=new Mu(this._viewID),this._roaming=new Pu(this._viewID),this._setting=new Ru(this._viewID),this._assist=new Lu(this._viewID),this._section=new bu(this._viewID),this._measure=new xu(this._viewID),this._pushpin=new Gu(this._viewID)};Fu.prototype={bindWINDData:function(t){if(t){var e=fi.ViewManager[this._viewID];if(e){var i=fi.DataManager[t._dataID];if(i)return e.bindDataCore(i)}}else{var r=fi.ViewManager[this._viewID];if(r)return r.bindDataCore(void 0)}return!1},saveWINDViewState:function(t){var e=fi.ViewManager[this._viewID];if(e)return e.saveViewState(t)},loadWINDViewState:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.loadViewState(t)},screenShot:function(){var t=fi.ViewManager[this._viewID];if(t)return t.screenShot()},fullScreen:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.fullScreen(t)},resizeTrigger:function(){var t=fi.ViewManager[this._viewID];if(t)return t.resizeTrigger()},addWINDViewCallback:function(t,e){var i=fi.ViewManager[this._viewID];return!!i&&i.addViewCallback(t,e)},removeWINDViewCallback:function(t){var e=fi.ViewManager[this._viewID];return!!e&&e.removeViewCallback(t)},clearWINDViewCallback:function(){var t=fi.ViewManager[this._viewID];t&&t.clearViewCallback()},getWINDViewControl:function(){return this._control},getWINDViewRoaming:function(){return this._roaming},getWINDViewSetting:function(){return this._setting},getWINDViewPushpin:function(){return this._pushpin},getWINDViewAssist:function(){return this._assist},getWINDViewSection:function(){return this._section},getWINDViewMeasure:function(){return this._measure},startAnimation:function(t,e){var i=fi.ViewManager[this._viewID];i&&i.startAnimation(t,e)},pauseAnimation:function(){var t=fi.ViewManager[this._viewID];t&&t.pauseAnimation()},goonAnimation:function(){var t=fi.ViewManager[this._viewID];t&&t.goonAnimation()},gotoAnimation:function(t){var e=fi.ViewManager[this._viewID];e&&e.gotoAnimation(t)},stopAinimation:function(){var t=fi.ViewManager[this._viewID];t&&t.stopAinimation()}};var Vu=Fu;r.d(e,"WINDData",(function(){return wi})),r.d(e,"WINDView",(function(){return Vu})),r.d(e,"ViewStateType",(function(){return Re.h})),r.d(e,"CallbackType",(function(){return Re.b})),r.d(e,"TreeRuleType",(function(){return Re.g})),r.d(e,"CheckState",(function(){return Re.c})),r.d(e,"LeftMouseOperation",(function(){return Re.e})),r.d(e,"MeasureType",(function(){return Re.f})),r.d(e,"GrowthPart",(function(){return Re.d})),r.d(e,"BackgroundType",(function(){return Re.a}))},,,,,function(t,e,i){var r=i(99),n=i(100),o=i(101);t.exports=function(t){return r(t)||n(t)||o()}},,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";(function(e){var r=i(9),n=i(85),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,h={adapter:("undefined"!=typeof XMLHttpRequest?s=i(54):void 0!==e&&(s=i(54)),s),transformRequest:[function(t,e){return n(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};h.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(t){h.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){h.headers[t]=r.merge(o)})),t.exports=h}).call(this,i(84))},,,,,,,,,,,,,,,,,function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return t.apply(e,i)}}},function(t,e,i){"use strict";var r=i(9),n=i(86),o=i(88),a=i(89),s=i(90),h=i(55);t.exports=function(t){return new Promise((function(e,u){var c=t.data,l=t.headers;r.isFormData(c)&&delete l["Content-Type"];var g=new XMLHttpRequest;if(t.auth){var _=t.auth.username||"",d=t.auth.password||"";l.Authorization="Basic "+btoa(_+":"+d)}if(g.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),g.timeout=t.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in g?a(g.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:i,config:t,request:g};n(e,u,r),g=null}},g.onerror=function(){u(h("Network Error",t,null,g)),g=null},g.ontimeout=function(){u(h("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var A=i(91),p=(t.withCredentials||s(t.url))&&t.xsrfCookieName?A.read(t.xsrfCookieName):void 0;p&&(l[t.xsrfHeaderName]=p)}if("setRequestHeader"in g&&r.forEach(l,(function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete l[e]:g.setRequestHeader(e,t)})),t.withCredentials&&(g.withCredentials=!0),t.responseType)try{g.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&g.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){g&&(g.abort(),u(t),g=null)})),void 0===c&&(c=null),g.send(c)}))}},function(t,e,i){"use strict";var r=i(87);t.exports=function(t,e,i,n,o){var a=new Error(t);return r(a,e,i,n,o)}},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},,,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAA/Y2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwMTQgNzkuMTU2Nzk3LCAyMDE0LzA4LzIwLTA5OjUzOjAyICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkNDg3OGQyMy0xZDNiLTExZTktYWQ2MS1mZTQxMWY2N2VmYzM8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6NDhiNTZkNWQtMThkMy05ZTQ3LWE5ZWQtMTZiNzhhYmUyYzZjPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPkU5MDM0RDg5MzNERTgzMDM0QUE0NDY2Mjk2NUFENzI1PC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo5OTkxMjM3YS01YzE4LWQ3NGEtOTMzZC00YmIzYWE4YjU4YzM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTktMDEtMjFUMTM6MTc6MzIrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGltYWdlL2pwZWcgdG8gaW1hZ2UvcG5nPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+ZGVyaXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5jb252ZXJ0ZWQgZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NDhiNTZkNWQtMThkMy05ZTQ3LWE5ZWQtMTZiNzhhYmUyYzZjPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTAxLTIxVDEzOjE3OjMyKzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo5OTkxMjM3YS01YzE4LWQ3NGEtOTMzZC00YmIzYWE4YjU4YzM8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPkU5MDM0RDg5MzNERTgzMDM0QUE0NDY2Mjk2NUFENzI1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPkU5MDM0RDg5MzNERTgzMDM0QUE0NDY2Mjk2NUFENzI1PC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE5LTAxLTIxVDEzOjE0OjA5KzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTktMDEtMjFUMTM6MTc6MzIrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE5LTAxLTIxVDEzOjE3OjMyKzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IChXaW5kb3dzKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpJbWFnZVdpZHRoPjEyMDA8L3RpZmY6SW1hZ2VXaWR0aD4KICAgICAgICAgPHRpZmY6SW1hZ2VMZW5ndGg+MTIwMDwvdGlmZjpJbWFnZUxlbmd0aD4KICAgICAgICAgPHRpZmY6Qml0c1BlclNhbXBsZT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGk+ODwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpPjg8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT44PC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC90aWZmOkJpdHNQZXJTYW1wbGU+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpTYW1wbGVzUGVyUGl4ZWw+MzwvdGlmZjpTYW1wbGVzUGVyUGl4ZWw+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpFeGlmVmVyc2lvbj4wMjIxPC9leGlmOkV4aWZWZXJzaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj41MTI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NTEyPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg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"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAAPxJREFUSA3tlmEKwyAMhctgJyjb/Y+wwxR2HPteUegkpkl07Z8K0mqS78VYi9N0t6sqkFJ6os+j9MkiU+Vl0Q+eC/pLdTYYycgsMtviMDI7irJ1iSO+iBaWXkUhwL3yMCMciPL3xG67FwFEYsRPxQPy+Ipi9aQFaPGpuaaxBtZsJviRkyQgzR1xQvZK6IsxO1vXmTclAxH+GIogRfnuPusPk9rVTlwZevmlnlPqSnTbU2luaHE0Ac3WlYQFbPFxJeEBenzVJCKgSMxPEj2AcGw4cJe6m4GAkVefN3jlzPPZvvrAyBvm+Zc9ViuLt7PbldTyypWSafG9ff5SgRW/Pdd65A/vzAAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAAGBJREFUSA3tlbERACEMw8LvvzMcfwzg2EUapbYIJxepMme/MfH6XDDlWJwalHlUy6rSIKpTgzKPallVGlz3yKSPOPxYx85nf4Z73FU31jGLu1XZeVTb6rogqrvG7PyY6gOtGRQks+cOSQAAAABJRU5ErkJggg=="},function(t,e,i){var r=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function h(t,e,i,r){var n=e&&e.prototype instanceof A?e:A,o=Object.create(n.prototype),a=new P(r||[]);return o._invoke=function(t,e,i){var r=c;return function(n,o){if(r===g)throw new Error("Generator is already running");if(r===_){if("throw"===n)throw o;return R()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var s=w(a,i);if(s){if(s===d)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===c)throw r=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var h=u(t,e,i);if("normal"===h.type){if(r=i.done?_:l,h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=_,i.method="throw",i.arg=h.arg)}}}(t,i,a),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var c="suspendedStart",l="suspendedYield",g="executing",_="completed",d={};function A(){}function p(){}function I(){}var f={};f[o]=function(){return this};var C=Object.getPrototypeOf,m=C&&C(C(S([])));m&&m!==i&&r.call(m,o)&&(f=m);var v=I.prototype=A.prototype=Object.create(f);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(i,n){function o(){return new Promise((function(e,o){!function e(i,n,o,a){var s=u(t[i],t,n);if("throw"!==s.type){var h=s.arg,c=h.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(c).then((function(t){h.value=t,o(h)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(i,n,e,o)}))}return e=e?e.then(o,o):o()}}function w(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,w(t,i),"throw"===i.method))return d;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=u(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,d;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,d):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,d)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function S(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}return{next:R}}function R(){return{value:e,done:!0}}return p.prototype=v.constructor=I,I.constructor=p,I[s]=p.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,r,n){var o=new E(h(e,i,r,n));return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},y(v),v[s]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return s.type="throw",s.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var h=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(h&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;T(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:S(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},,,,,,,,,,,,,function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return i}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,i){"use strict";var r=i(9),n=i(53),o=i(83),a=i(36);function s(t){var e=new o(t),i=n(o.prototype.request,e);return r.extend(i,o.prototype,e),r.extend(i,e),i}var h=s(a);h.Axios=o,h.create=function(t){return s(r.merge(a,t))},h.Cancel=i(57),h.CancelToken=i(97),h.isCancel=i(56),h.all=function(t){return Promise.all(t)},h.spread=i(98),t.exports=h,t.exports.default=h},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,i){"use strict";var r=i(36),n=i(9),o=i(92),a=i(93);function s(t){this.defaults=t,this.interceptors={request:new o,response:new o}}s.prototype.request=function(t){"string"==typeof t&&(t=n.merge({url:arguments[0]},arguments[1])),(t=n.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)i=i.then(e.shift(),e.shift());return i},n.forEach(["delete","get","head","options"],(function(t){s.prototype[t]=function(e,i){return this.request(n.merge(i||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){s.prototype[t]=function(e,i,r){return this.request(n.merge(r||{},{method:t,url:e,data:i}))}})),t.exports=s},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var h,u=[],c=!1,l=-1;function g(){c&&h&&(c=!1,h.length?u=h.concat(u):l=-1,u.length&&_())}function _(){if(!c){var t=s(g);c=!0;for(var e=u.length;e;){for(h=u,u=[];++l<e;)h&&h[l].run();l=-1,e=u.length}h=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function A(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new d(t,e)),1!==u.length||c||s(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=A,n.addListener=A,n.once=A,n.off=A,n.removeListener=A,n.removeAllListeners=A,n.emit=A,n.prependListener=A,n.prependOnceListener=A,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var r=i(9);t.exports=function(t,e){r.forEach(t,(function(i,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[r])}))}},function(t,e,i){"use strict";var r=i(55);t.exports=function(t,e,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?e(r("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},function(t,e,i){"use strict";t.exports=function(t,e,i,r,n){return t.config=e,i&&(t.code=i),t.request=r,t.response=n,t}},function(t,e,i){"use strict";var r=i(9);function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(n(e)+"="+n(t))})))})),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,i){"use strict";var r=i(9),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),i=r.trim(t.substr(o+1)),e){if(a[e]&&n.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([i]):a[e]?a[e]+", "+i:i}})),a):a}},function(t,e,i){"use strict";var r=i(9);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(t){var r=t;return e&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=n(window.location.href),function(e){var i=r.isString(e)?n(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(t,e,i){"use strict";var r=i(9);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,i,n,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),r.isString(n)&&s.push("path="+n),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,i){"use strict";var r=i(9);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,i){"use strict";var r=i(9),n=i(94),o=i(56),a=i(36),s=i(95),h=i(96);function u(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return u(t),t.baseURL&&!s(t.url)&&(t.url=h(t.baseURL,t.url)),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return u(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(u(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,i){"use strict";var r=i(9);t.exports=function(t,e,i){return r.forEach(i,(function(i){t=i(t,e)})),t}},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";var r=i(57);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new r(t),e(i.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}}])}));